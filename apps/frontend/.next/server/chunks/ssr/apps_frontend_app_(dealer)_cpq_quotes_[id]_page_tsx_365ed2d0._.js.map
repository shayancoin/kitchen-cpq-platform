{"version":3,"sources":["../../../../../../apps/frontend/app/%28dealer%29/cpq/quotes/%5Bid%5D/page.tsx","../../../../../../packages/ui-kit/src/components/layout/Shell.tsx","../../../../../../packages/ui-kit/src/index.ts","../../../../../../packages/configurator-sdk/src/web-component.ts","../../../../../../packages/configurator-sdk/src/host-api.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from 'react';\nimport { Shell } from '@kitchen-cpq/ui-kit';\nimport {\n  init as initConfigurator,\n  type ConfiguratorSession,\n  type SDKCallbacks\n} from '@kitchen-cpq/configurator-sdk';\n\ntype QuoteDetailPageProps = {\n  params: { id: string };\n};\n\nfunction ConfiguratorWrapper({\n  quoteId,\n  tenantId,\n  locale,\n  authToken,\n  callbacks\n}: {\n  quoteId: string;\n  tenantId: string;\n  locale: string;\n  authToken: string;\n  callbacks?: SDKCallbacks;\n}) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const sessionRef = useRef<ConfiguratorSession | null>(null);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const init = async () => {\n      const instance = initConfigurator(\n        containerRef.current as HTMLElement,\n        tenantId,\n        locale,\n        authToken,\n        callbacks ?? {}\n      );\n      sessionRef.current = instance;\n    };\n\n    init().catch((error) => {\n      callbacks?.onError?.(error);\n    });\n\n    return () => {\n      sessionRef.current?.destroy?.();\n    };\n    // session is managed inside this effect; omit from deps to avoid re-init loops.\n  }, [quoteId, tenantId, locale, authToken, callbacks]);\n\n  return <div ref={containerRef} className=\"min-h-[400px] rounded-lg border p-4\" />;\n}\n\nexport default function QuoteDetailPage({ params }: QuoteDetailPageProps) {\n  const quoteId = params.id;\n\n  return (\n    <Shell>\n      <div className=\"mx-auto flex w-full max-w-6xl flex-col gap-6 px-6 py-8\">\n        <div className=\"flex items-baseline justify-between\">\n          <div>\n            <p className=\"text-sm uppercase text-slate-500\">Quote</p>\n            <h1 className=\"text-2xl font-semibold leading-tight\">Quote #{quoteId}</h1>\n          </div>\n          <span className=\"text-sm text-slate-500\">CPQ Configurator</span>\n        </div>\n\n        <ConfiguratorWrapper\n          quoteId={quoteId}\n          tenantId=\"demo-tenant\"\n          locale=\"en-US\"\n          authToken=\"\"\n          callbacks={{\n            onLoadComplete: () => {\n              /* Hook up tRPC-driven data fetch here */\n            },\n            onError: (error) => {\n              console.error('Configurator error', error);\n            }\n          }}\n        />\n      </div>\n    </Shell>\n  );\n}\n","import type { ReactNode } from 'react';\n\nexport interface ShellProps {\n  children: ReactNode;\n}\n\nexport function Shell({ children }: ShellProps) {\n  return (\n    <div className=\"flex min-h-screen flex-col bg-gray-50 text-slate-900\">\n      {children}\n    </div>\n  );\n}\n","export * from './components/layout/Shell';\nexport * from './components/cpq/QuoteTable';\n","export class KitchenConfiguratorElement extends HTMLElement {\n  connectedCallback() {\n    this.innerText = 'kitchen-configurator placeholder';\n  }\n}\n\nexport function defineKitchenConfiguratorElement() {\n  if (!customElements.get('kitchen-configurator')) {\n    customElements.define('kitchen-configurator', KitchenConfiguratorElement);\n  }\n}\n\n","export type SDKCallbacks = {\n  onDeltaApplied?: (delta: unknown) => void;\n  onError?: (error: unknown) => void;\n  onLoadComplete?: () => void;\n  onPriceChange?: (price: { total: number; currency: string }) => void;\n};\n\nexport type ConfiguratorSession = {\n  destroy: () => void;\n};\n\nexport function init(\n  container: HTMLElement,\n  tenantId: string,\n  locale: string,\n  authToken: string,\n  callbacks: SDKCallbacks\n): ConfiguratorSession {\n  if (!(container instanceof HTMLElement)) {\n    throw new Error('Invalid container: expected HTMLElement');\n  }\n  if (!tenantId) {\n    throw new Error('tenantId is required');\n  }\n  if (!locale) {\n    throw new Error('locale is required');\n  }\n  if (authToken == null) {\n    throw new Error('authToken is required');\n  }\n\n  // Minimal stub: mount placeholder UI and wire callbacks safely.\n  const placeholder = document.createElement('div');\n  placeholder.setAttribute('data-tenant', String(tenantId ?? ''));\n  placeholder.setAttribute('data-locale', String(locale ?? ''));\n  placeholder.textContent = 'Configurator SDK loading...';\n  container.innerHTML = '';\n  container.appendChild(placeholder);\n\n  // Notify load completion for host apps.\n  callbacks?.onLoadComplete?.();\n\n  return {\n    destroy: () => {\n      container.innerHTML = '';\n    }\n  };\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OCIO,SAAS,EAAM,CAAE,UAAQ,CAAc,EAC5C,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACZ,GAGP,CDEA,SAAS,EAAoB,SAC3B,CAAO,UACP,CAAQ,CACR,QAAM,WACN,CAAS,WACT,CAAS,CAOV,EACC,IAAM,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,MAC7C,EAAa,CAAA,EAAA,EAAA,MAAA,AAAM,EAA6B,MA0BtD,MAxBA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GAAK,CAAD,CAAc,OAAO,CAiBzB,CAjB2B,KAEd,AAWb,WAHE,EAAW,OAAO,CI9BjB,AJuBgB,EAOI,OI9BX,AACd,CAAsB,CACtB,CAAgB,CAChB,CAAc,CACd,CAAiB,CACjB,CAAuB,EAEvB,GAAI,CAAC,CAAC,aAAqB,WAAA,CAAW,CACpC,EADuC,IACjC,AAAI,MAAM,2CAElB,GAAI,CAAC,EACH,MAAM,AAAI,EADG,IACG,wBAElB,GAAI,CAAC,EACH,MADW,AACL,AAAI,MAAM,sBAElB,GAAiB,MAAb,AAAmB,EACrB,MAAM,AAAI,MAAM,yBAIlB,IAAM,EAAc,SAAS,aAAa,CAAC,OAU3C,OATA,EAAY,YAAY,CAAC,cAAe,OAAO,GAAY,KAC3D,EAAY,YAAY,CAAC,cAAe,OAAO,GAAU,KACzD,EAAY,WAAW,CAAG,8BAC1B,EAAU,SAAS,CAAG,GACtB,EAAU,WAAW,CAAC,GAGtB,GAAW,mBAEJ,CACL,QAAS,KACP,EAAU,SAAS,CAAG,EACxB,CACF,CACF,EJZQ,EAAa,OAAO,CACpB,EACA,EACA,EACA,GAAa,CAAC,GAGlB,IAEO,KAAK,CAAC,AAAC,IACZ,GAAW,UAAU,EACvB,GAEO,KACL,EAAW,OAAO,EAAE,WACtB,CAEF,EAAG,CAAC,EAAS,EAAU,EAAQ,EAAW,EAAU,EAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAc,UAAU,uCAC3C,CAEe,SAAS,EAAgB,QAAE,CAAM,CAAwB,EACtE,IAAM,EAAU,EAAO,EAAE,CAEzB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAmC,UAChD,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iDAAuC,UAAQ,QAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kCAAyB,wBAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,QAAS,EACT,SAAS,cACT,OAAO,QACP,UAAU,GACV,UAAW,CACT,eAAgB,KAEhB,EACA,QAAS,AAAC,IACR,QAAQ,KAAK,CAAC,qBAAsB,EACtC,CACF,QAKV,CEvFA,EAAA,CAAA,CAAA,OCDgD"}