{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-trpc/src/client/createClient.ts"],"sourcesContent":["import { createTRPCProxyClient, httpBatchLink } from '@trpc/client';\nimport type { AppRouter } from '../routers';\n\ntype CreateClientOptions = {\n  baseUrl?: string;\n  headers?: Record<string, string>;\n};\n\nexport const createTrpcClient = (options: CreateClientOptions = {}) => {\n  const url = `${options.baseUrl ?? 'http://localhost:3001'}/trpc`;\n  return createTRPCProxyClient<AppRouter>({\n    transformer: undefined as AppRouter['_def']['_config']['transformer'],\n    links: [\n      httpBatchLink({\n        url,\n        fetch: (input, init) =>\n          fetch(input, {\n            ...init,\n            credentials: 'include'\n          }),\n        headers() {\n          // If running in the browser and a token cookie exists, attach Authorization for parity with server-side usage.\n          const cookieHeader =\n            typeof document !== 'undefined'\n              ? document.cookie\n                  .split(';')\n                  .map((c) => c.trim())\n                  .find((c) => c.startsWith('auth_token='))\n              : undefined;\n          const token = cookieHeader?.split('=')[1];\n          return token\n            ? { ...options.headers, authorization: `Bearer ${token}` }\n            : options.headers ?? {};\n        }\n      })\n    ]\n  });\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAQO,MAAM,mBAAmB,CAAC,UAA+B,CAAC,CAAC;IAChE,MAAM,MAAM,GAAG,QAAQ,OAAO,IAAI,wBAAwB,KAAK,CAAC;IAChE,OAAO,IAAA,8RAAqB,EAAY;QACtC,aAAa;QACb,OAAO;YACL,IAAA,gUAAa,EAAC;gBACZ;gBACA,OAAO,CAAC,OAAO,OACb,MAAM,OAAO;wBACX,GAAG,IAAI;wBACP,aAAa;oBACf;gBACF;oBACE,+GAA+G;oBAC/G,MAAM,eACJ,OAAO,aAAa,cAChB,SAAS,MAAM,CACZ,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,IACjB,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,CAAC,kBAC5B;oBACN,MAAM,QAAQ,cAAc,MAAM,IAAI,CAAC,EAAE;oBACzC,OAAO,QACH;wBAAE,GAAG,QAAQ,OAAO;wBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;oBAAC,IACvD,QAAQ,OAAO,IAAI,CAAC;gBAC1B;YACF;SACD;IACH;AACF"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-trpc/src/trpc.ts"],"sourcesContent":["import { initTRPC, TRPCError } from '@trpc/server';\nimport type { Session, TenantId, UserId } from '@kitchen-cpq/shared-types';\n\nexport type TrpcContext = {\n  userId?: UserId;\n  tenantId?: TenantId;\n  session?: Session | null;\n};\n\nconst t = initTRPC.context<TrpcContext>().create();\n\nconst enforceAuth = t.middleware(({ ctx, next }) => {\n  if (!ctx?.userId || !ctx?.tenantId) {\n    throw new TRPCError({ code: 'UNAUTHORIZED', message: 'Missing auth context' });\n  }\n  return next({ ctx });\n});\n\nexport const router = t.router;\nexport const mergeRouters = t.mergeRouters;\nexport const publicProcedure = t.procedure;\nexport const protectedProcedure = t.procedure.use(enforceAuth);\nexport const createCallerFactory = t.createCallerFactory;\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;;AASA,MAAM,IAAI,6OAAQ,CAAC,OAAO,GAAgB,MAAM;AAEhD,MAAM,cAAc,EAAE,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE;IAC7C,IAAI,CAAC,KAAK,UAAU,CAAC,KAAK,UAAU;QAClC,MAAM,IAAI,gRAAS,CAAC;YAAE,MAAM;YAAgB,SAAS;QAAuB;IAC9E;IACA,OAAO,KAAK;QAAE;IAAI;AACpB;AAEO,MAAM,SAAS,EAAE,MAAM;AACvB,MAAM,eAAe,EAAE,YAAY;AACnC,MAAM,kBAAkB,EAAE,SAAS;AACnC,MAAM,qBAAqB,EAAE,SAAS,CAAC,GAAG,CAAC;AAC3C,MAAM,sBAAsB,EAAE,mBAAmB"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-validation/src/config.schema.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const NodeEnvSchema = z.enum(['development', 'production', 'test', 'staging']);\n\nexport const ConfigSchema = z.object({\n  nodeEnv: NodeEnvSchema.default('development'),\n  database: z.object({\n    host: z.string().default('localhost'),\n    port: z.coerce.number().default(5432),\n    user: z.string().default('postgres'),\n    password: z.string().default('postgres'),\n    database: z.string().default('kitchen_cpq')\n  }),\n  auth: z.object({\n    jwtSecret: z.string().default('dev-secret'),\n    jwtIssuer: z.string().default('kitchen-cpq-platform'),\n    jwtAudience: z.string().default('kitchen-cpq-clients')\n  })\n});\n\nexport type Config = z.infer<typeof ConfigSchema>;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,gBAAgB,yNAAC,CAAC,IAAI,CAAC;IAAC;IAAe;IAAc;IAAQ;CAAU;AAE7E,MAAM,eAAe,yNAAC,CAAC,MAAM,CAAC;IACnC,SAAS,cAAc,OAAO,CAAC;IAC/B,UAAU,yNAAC,CAAC,MAAM,CAAC;QACjB,MAAM,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QACzB,MAAM,yNAAC,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;QAChC,MAAM,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QACzB,UAAU,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QAC7B,UAAU,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAC/B;IACA,MAAM,yNAAC,CAAC,MAAM,CAAC;QACb,WAAW,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QAC9B,WAAW,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;QAC9B,aAAa,yNAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAClC;AACF"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-validation/src/cabinet.schema.ts"],"sourcesContent":["import { z } from 'zod';\nimport type { ParametricState } from '@kitchen-cpq/shared-types';\n\nexport const mutableCabinetKeySchema = z.enum([\n  'position',\n  'elevation',\n  'width',\n  'depth',\n  'height',\n  'rotationDeg',\n  'sku',\n  'kind'\n]);\n\nexport type MutableCabinetKey = z.infer<typeof mutableCabinetKeySchema>;\n\nconst numericField = (min: number, max: number) => z.number().finite().min(min).max(max);\n\nexport const cabinetFieldUpdateSchema = z.discriminatedUnion('key', [\n  z.object({\n    key: z.literal('position'),\n    value: numericField(0, 20_000)\n  }),\n  z.object({\n    key: z.literal('elevation'),\n    value: numericField(0, 3_000)\n  }),\n  z.object({\n    key: z.literal('width'),\n    value: numericField(100, 3_000)\n  }),\n  z.object({\n    key: z.literal('depth'),\n    value: numericField(100, 1_200)\n  }),\n  z.object({\n    key: z.literal('height'),\n    value: numericField(100, 3_000)\n  }),\n  z.object({\n    key: z.literal('rotationDeg'),\n    value: numericField(-360, 360)\n  }),\n  z.object({\n    key: z.literal('sku'),\n    value: z.string().trim().min(1).max(128)\n  }),\n  z.object({\n    key: z.literal('kind'),\n    value: z.string().trim().min(1).max(64)\n  })\n]);\n\nexport const parseCabinetField = (\n  key: MutableCabinetKey,\n  value: unknown\n): ParametricState['cabinets'][number][MutableCabinetKey] => {\n  const parsed = cabinetFieldUpdateSchema.parse({ key, value });\n  return parsed.value as ParametricState['cabinets'][number][MutableCabinetKey];\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAGO,MAAM,0BAA0B,yNAAC,CAAC,IAAI,CAAC;IAC5C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAID,MAAM,eAAe,CAAC,KAAa,MAAgB,yNAAC,CAAC,MAAM,GAAG,MAAM,GAAG,GAAG,CAAC,KAAK,GAAG,CAAC;AAE7E,MAAM,2BAA2B,yNAAC,CAAC,kBAAkB,CAAC,OAAO;IAClE,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,GAAG;IACzB;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,GAAG;IACzB;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,KAAK;IAC3B;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,KAAK;IAC3B;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,KAAK;IAC3B;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,aAAa,CAAC,KAAK;IAC5B;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,yNAAC,CAAC,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACtC;IACA,yNAAC,CAAC,MAAM,CAAC;QACP,KAAK,yNAAC,CAAC,OAAO,CAAC;QACf,OAAO,yNAAC,CAAC,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACtC;CACD;AAEM,MAAM,oBAAoB,CAC/B,KACA;IAEA,MAAM,SAAS,yBAAyB,KAAK,CAAC;QAAE;QAAK;IAAM;IAC3D,OAAO,OAAO,KAAK;AACrB"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-validation/src/catalog.schema.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const CatalogPayloadSchema = z\n  .object({\n    metadata: z.record(z.unknown()).optional(),\n    families: z.array(z.record(z.string(), z.unknown())).optional(),\n    skus: z.array(z.record(z.string(), z.unknown())).optional(),\n    options: z.array(z.record(z.string(), z.unknown())).optional()\n  })\n  .passthrough();\n\nexport type CatalogPayload = z.infer<typeof CatalogPayloadSchema>;\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,uBAAuB,yNAAC,CAClC,MAAM,CAAC;IACN,UAAU,yNAAC,CAAC,MAAM,CAAC,yNAAC,CAAC,OAAO,IAAI,QAAQ;IACxC,UAAU,yNAAC,CAAC,KAAK,CAAC,yNAAC,CAAC,MAAM,CAAC,yNAAC,CAAC,MAAM,IAAI,yNAAC,CAAC,OAAO,KAAK,QAAQ;IAC7D,MAAM,yNAAC,CAAC,KAAK,CAAC,yNAAC,CAAC,MAAM,CAAC,yNAAC,CAAC,MAAM,IAAI,yNAAC,CAAC,OAAO,KAAK,QAAQ;IACzD,SAAS,yNAAC,CAAC,KAAK,CAAC,yNAAC,CAAC,MAAM,CAAC,yNAAC,CAAC,MAAM,IAAI,yNAAC,CAAC,OAAO,KAAK,QAAQ;AAC9D,GACC,WAAW"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-validation/src/ai.schema.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const CopilotMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string(),\n  createdAt: z.string()\n});\n\nexport const ParamDeltaSchema = z.object({\n  path: z.string(),\n  value: z.union([z.number(), z.string(), z.boolean()])\n});\n\nexport const AgentToolCallSchema = z.object({\n  id: z.string(),\n  toolName: z.enum([\n    'paramEngine.applyDelta',\n    'optimizer.solveLayout',\n    'cadService.generateCadMacro',\n    'pricingService.simulateChange'\n  ]),\n  arguments: z.unknown(),\n  status: z.enum(['pending', 'running', 'succeeded', 'failed']),\n  result: z.unknown().optional(),\n  error: z.string().optional()\n});\n\nexport const CopilotChatRequestSchema = z.object({\n  projectId: z.string(),\n  message: z.string(),\n  role: z.string(),\n  history: z.array(CopilotMessageSchema).optional(),\n  goals: z.unknown().optional(),\n  parametricState: z.unknown().optional()\n});\n\nexport const CopilotPlanResponseSchema = z.object({\n  reply: z.string(),\n  proposedDeltas: z.array(ParamDeltaSchema).optional(),\n  toolCalls: z.array(AgentToolCallSchema).default([]),\n  validatedState: z.unknown().optional(),\n  constraintSummary: z.unknown().optional(),\n  warnings: z.array(z.string()).optional()\n});\n\nexport type CopilotChatRequestInput = z.infer<typeof CopilotChatRequestSchema>;\nexport type CopilotPlanResponseOutput = z.infer<typeof CopilotPlanResponseSchema>;\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,MAAM,uBAAuB,yNAAC,CAAC,MAAM,CAAC;IAC3C,IAAI,yNAAC,CAAC,MAAM;IACZ,MAAM,yNAAC,CAAC,MAAM;IACd,SAAS,yNAAC,CAAC,MAAM;IACjB,WAAW,yNAAC,CAAC,MAAM;AACrB;AAEO,MAAM,mBAAmB,yNAAC,CAAC,MAAM,CAAC;IACvC,MAAM,yNAAC,CAAC,MAAM;IACd,OAAO,yNAAC,CAAC,KAAK,CAAC;QAAC,yNAAC,CAAC,MAAM;QAAI,yNAAC,CAAC,MAAM;QAAI,yNAAC,CAAC,OAAO;KAAG;AACtD;AAEO,MAAM,sBAAsB,yNAAC,CAAC,MAAM,CAAC;IAC1C,IAAI,yNAAC,CAAC,MAAM;IACZ,UAAU,yNAAC,CAAC,IAAI,CAAC;QACf;QACA;QACA;QACA;KACD;IACD,WAAW,yNAAC,CAAC,OAAO;IACpB,QAAQ,yNAAC,CAAC,IAAI,CAAC;QAAC;QAAW;QAAW;QAAa;KAAS;IAC5D,QAAQ,yNAAC,CAAC,OAAO,GAAG,QAAQ;IAC5B,OAAO,yNAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B;AAEO,MAAM,2BAA2B,yNAAC,CAAC,MAAM,CAAC;IAC/C,WAAW,yNAAC,CAAC,MAAM;IACnB,SAAS,yNAAC,CAAC,MAAM;IACjB,MAAM,yNAAC,CAAC,MAAM;IACd,SAAS,yNAAC,CAAC,KAAK,CAAC,sBAAsB,QAAQ;IAC/C,OAAO,yNAAC,CAAC,OAAO,GAAG,QAAQ;IAC3B,iBAAiB,yNAAC,CAAC,OAAO,GAAG,QAAQ;AACvC;AAEO,MAAM,4BAA4B,yNAAC,CAAC,MAAM,CAAC;IAChD,OAAO,yNAAC,CAAC,MAAM;IACf,gBAAgB,yNAAC,CAAC,KAAK,CAAC,kBAAkB,QAAQ;IAClD,WAAW,yNAAC,CAAC,KAAK,CAAC,qBAAqB,OAAO,CAAC,EAAE;IAClD,gBAAgB,yNAAC,CAAC,OAAO,GAAG,QAAQ;IACpC,mBAAmB,yNAAC,CAAC,OAAO,GAAG,QAAQ;IACvC,UAAU,yNAAC,CAAC,KAAK,CAAC,yNAAC,CAAC,MAAM,IAAI,QAAQ;AACxC"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-validation/src/index.ts"],"sourcesContent":["export * from './config.schema';\nexport * from './cabinet.schema';\nexport * from './catalog.schema';\nexport * from './ai.schema';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-trpc/src/routers/index.ts"],"sourcesContent":["import { TRPCError } from '@trpc/server';\nimport { observable } from '@trpc/server/observable';\nimport { z, ZodError } from 'zod';\nimport type {\n  CatalogSnapshotRef,\n  CatalogVersion,\n  ConstraintBadgePayload,\n  ConstraintSummary,\n  CopilotMessage,\n  ISODateTime,\n  LayoutGoals,\n  LayoutVariant,\n  LayoutVariantId,\n  ManufacturingJob,\n  ParamDelta,\n  ParametricState,\n  ProjectId,\n  QuoteId,\n  QuoteStatus,\n  QuoteSummary,\n  Session,\n  Tenant,\n  TenantBranding,\n  ThemePreset,\n  ULID,\n  User,\n  CpqSummaryBarState,\n  DashboardKpis\n} from '@kitchen-cpq/shared-types';\nimport type { PriceSnapshot } from '@kitchen-cpq/shared-types';\nimport { CabinetInstanceId, CatalogVersionId, TenantId, UserId } from '@kitchen-cpq/shared-types';\nimport { protectedProcedure, publicProcedure, router, type TrpcContext } from '../trpc';\nimport {\n  mutableCabinetKeySchema,\n  parseCabinetField,\n  type MutableCabinetKey\n} from '@kitchen-cpq/shared-validation';\nimport {\n  AgentToolCallSchema,\n  CopilotChatRequestSchema,\n  CopilotPlanResponseSchema\n} from '@kitchen-cpq/shared-validation';\n\ntype BaseEntities = {\n  tenant: Tenant;\n  user: User;\n  session: Session;\n};\n\nconst nowIso = (): string => new Date().toISOString();\nconst AI_BASE = process.env.AI_AGENT_URL ?? 'http://localhost:3017';\n\nconst presetBranding: Record<ThemePreset, TenantBranding> = {\n  default: {\n    primaryColor: '#0f172a',\n    accentColor: '#2563eb',\n    surfaceColor: '#ffffff',\n    subtleBorderColor: '#e2e8f0',\n    navGradient: 'linear-gradient(180deg, #0b1220 0%, #0f172a 60%, #0b1220 100%)',\n    constraintTokens: { ok: '#16a34a', warning: '#f59e0b', error: '#dc2626' },\n    preset: 'default'\n  },\n  tangerine: {\n    primaryColor: '#0f172a',\n    accentColor: '#f97316',\n    surfaceColor: '#0b1220',\n    subtleBorderColor: '#1f2937',\n    navGradient: 'linear-gradient(180deg, #0b1220 0%, #111827 50%, #0b1220 100%)',\n    constraintTokens: { ok: '#22c55e', warning: '#fbbf24', error: '#ef4444' },\n    preset: 'tangerine',\n    logoUrl: '/brand/tenant-logo.svg'\n  },\n  brutalist: {\n    primaryColor: '#111111',\n    accentColor: '#fde047',\n    surfaceColor: '#ffffff',\n    subtleBorderColor: '#111111',\n    navGradient: 'linear-gradient(180deg, #000000 0%, #1f1f1f 60%, #0a0a0a 100%)',\n    constraintTokens: { ok: '#15803d', warning: '#ca8a04', error: '#dc2626' },\n    preset: 'brutalist'\n  }\n};\n\nconst buildBranding = (preset: ThemePreset = 'tangerine'): TenantBranding => ({\n  ...presetBranding[preset]\n});\n\nconst resolveBaseEntities = (ctx: TrpcContext): BaseEntities => {\n  const tenantId = (ctx.tenantId ?? ('tenant-demo' as TenantId)) as TenantId;\n  const userId = (ctx.userId ?? ('user-demo' as UserId)) as UserId;\n\n  const tenant: Tenant = {\n    id: tenantId,\n    slug: 'tenant-demo',\n    displayName: 'Demo Tenant',\n    createdAt: nowIso(),\n    isActive: true,\n    branding: buildBranding('tangerine')\n  };\n\n  const user: User = {\n    id: userId,\n    tenantId,\n    email: 'demo@example.com',\n    displayName: 'Demo User',\n    roles: ['dealer', 'catalog_engineer', 'manufacturing_engineer', 'admin'],\n    createdAt: nowIso(),\n    lastLoginAt: nowIso()\n  };\n\n  const session: Session =\n    ctx.session ?? {\n      id: 'session-demo',\n      userId,\n      tenantId,\n      issuedAt: nowIso(),\n      expiresAt: nowIso(),\n      jwt: 'stub.jwt.token'\n    };\n\n  return { tenant, user, session };\n};\n\nconst baseConstraintSummary: ConstraintSummary = {\n  hasBlockingErrors: false,\n  violations: []\n};\n\nconst buildParametricState = (projectId: ProjectId, tenantId: TenantId): ParametricState => ({\n  projectId,\n  tenantId,\n  catalogVersionId: 'catalog-001' as CatalogVersionId,\n  room: {\n    id: 'room-1',\n    perimeter: [\n      {\n        id: 'wall-1',\n        start: { x: 0, y: 0 },\n        end: { x: 4000, y: 0 },\n        height: 2700,\n        thickness: 150\n      },\n      {\n        id: 'wall-2',\n        start: { x: 4000, y: 0 },\n        end: { x: 4000, y: 3200 },\n        height: 2700,\n        thickness: 150\n      }\n    ],\n    openings: [],\n    ceilingHeight: 2700\n  },\n  cabinets: [\n    {\n      id: 'cab-1' as CabinetInstanceId,\n      sku: 'BASE-30',\n      kind: 'base',\n      roomId: 'room-1',\n      wallId: 'wall-1',\n      position: 0,\n      elevation: 0,\n      width: 762,\n      depth: 610,\n      height: 914,\n      rotationDeg: 0,\n      parameters: {}\n    }\n  ],\n  constraints: baseConstraintSummary,\n  updatedAt: nowIso()\n});\n\nconst validateParameterValue = (value: unknown): string | number | boolean => {\n  if (typeof value === 'string' || typeof value === 'boolean') return value;\n  if (typeof value === 'number' && Number.isFinite(value)) return value;\n  throw new TRPCError({ code: 'BAD_REQUEST', message: 'Invalid parameter value' });\n};\n\nconst applyDeltas = (state: ParametricState, deltas: ParamDelta[]): ParametricState => {\n  const next = { ...state, cabinets: state.cabinets.map((c) => ({ ...c })), updatedAt: nowIso() };\n  for (const delta of deltas) {\n    if (delta.path.startsWith('cabinets.')) {\n      const [, cabinetId, ...rest] = delta.path.split('.');\n      const target = next.cabinets.find((c) => c.id === cabinetId);\n      if (!target || rest.length === 0) continue;\n\n      const [first, ...paramParts] = rest;\n      if (first === 'parameters') {\n        const paramKey = paramParts.join('.');\n        if (paramKey) {\n          target.parameters[paramKey] = validateParameterValue(delta.value);\n        }\n        continue;\n      }\n\n          if (first && mutableCabinetKeySchema.safeParse(first).success) {\n            const key = first as MutableCabinetKey;\n            try {\n              const validated = parseCabinetField(key, delta.value);\n              (target as Record<MutableCabinetKey, typeof validated>)[key] = validated as never;\n            } catch (err) {\n              if (err instanceof ZodError) {\n                throw new TRPCError({ code: 'BAD_REQUEST', message: err.errors.map((e) => e.message).join('; ') });\n              }\n              throw err;\n        }\n      }\n    }\n  }\n  return next;\n};\n\nconst createQuoteSummary = (state: ParametricState): QuoteSummary => {\n  const subtotal = state.cabinets.reduce((acc, cabinet) => acc + cabinet.width * 0.5, 0);\n  const tax = subtotal * 0.07;\n  const total = subtotal + tax;\n  const catalogVersion: CatalogSnapshotRef = {\n    id: state.catalogVersionId,\n    hash: 'demo-hash'\n  };\n  return {\n    id: `quote-${state.projectId}` as QuoteId,\n    projectId: state.projectId,\n    tenantId: state.tenantId,\n    status: 'draft',\n    currency: 'USD',\n    subtotal,\n    tax,\n    total,\n    marginPercent: 22,\n    createdAt: nowIso(),\n    updatedAt: nowIso(),\n    catalogVersion,\n    lineItems: state.cabinets.map((cabinet) => ({\n      id: cabinet.id,\n      sku: cabinet.sku,\n      description: `Cabinet ${cabinet.sku}`,\n      quantity: 1,\n      unitPrice: cabinet.width * 0.5,\n      listPrice: cabinet.width * 0.5,\n      netPrice: cabinet.width * 0.5,\n      currency: 'USD',\n      marginPercent: 22,\n      configurationRef: {\n        projectId: state.projectId,\n        cabinetInstanceId: cabinet.id\n      }\n    }))\n  };\n};\n\nconst toPriceSnapshot = (quote: QuoteSummary): PriceSnapshot => ({\n  currency: quote.currency,\n  total: quote.total,\n  subtotal: quote.subtotal,\n  tax: quote.tax,\n  marginPercent: quote.marginPercent,\n  updatedAt: quote.updatedAt\n});\n\nconst buildQuoteList = (tenantId: TenantId): QuoteSummary[] => {\n  const projects: { id: ProjectId; status: QuoteStatus; margin: number; factor: number }[] = [\n    { id: 'proj-galley' as ProjectId, status: 'draft', margin: 0.22, factor: 1 },\n    { id: 'proj-island' as ProjectId, status: 'submitted', margin: 0.18, factor: 1.2 },\n    { id: 'proj-builder' as ProjectId, status: 'approved', margin: 0.24, factor: 1.4 },\n    { id: 'proj-manufacturing' as ProjectId, status: 'submitted', margin: 0.2, factor: 1.1 }\n  ];\n\n  return projects.map((p, idx) => {\n    const base = buildParametricState(p.id, tenantId);\n    const quote = createQuoteSummary({ ...base, projectId: p.id, updatedAt: nowIso() });\n    const multiplier = p.factor + idx * 0.05;\n    return {\n      ...quote,\n      status: (p.status as QuoteStatus) ?? 'draft',\n      subtotal: quote.subtotal * multiplier,\n      tax: quote.tax * multiplier,\n      total: quote.total * multiplier,\n      marginPercent: Math.round(p.margin * 100),\n      updatedAt: nowIso()\n    };\n  });\n};\n\nconst authRouter = router({\n  getSession: publicProcedure.query(({ ctx }) => {\n    const { session } = resolveBaseEntities(ctx);\n    return session;\n  }),\n  getCurrentUser: protectedProcedure.query(({ ctx }) => resolveBaseEntities(ctx).user),\n  loginWithOAuthCallback: publicProcedure\n    .input(z.object({ code: z.string(), state: z.string().optional() }))\n    .mutation(({ ctx, input }) => {\n      const { session, user, tenant } = resolveBaseEntities(ctx);\n      return {\n        ...session,\n        id: `sess-${input.code}`,\n        userId: user.id,\n        tenantId: tenant.id,\n        issuedAt: nowIso(),\n        expiresAt: nowIso(),\n        jwt: `stub.jwt.${input.code}`\n      };\n    }),\n  logout: publicProcedure.mutation(() => ({ success: true }))\n});\n\nconst tenancyRouter = router({\n  getCurrentTenant: protectedProcedure.query(({ ctx }): Tenant => {\n    return resolveBaseEntities(ctx).tenant;\n  }),\n  listTenantsForUser: protectedProcedure.query(({ ctx }): Tenant[] => {\n    return [resolveBaseEntities(ctx).tenant];\n  })\n});\n\nconst configuratorRouter = router({\n  getSessionState: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .query(({ input, ctx }): { state: ParametricState } => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.projectId as ProjectId, tenant.id);\n      return { state };\n    }),\n  mutateParameters: protectedProcedure\n    .input(\n      z.object({\n        projectId: z.string(),\n        deltas: z.array(\n          z.object({\n            path: z.string(),\n            value: z.union([z.number(), z.string(), z.boolean()])\n          }) as unknown as z.ZodType<ParamDelta>\n        )\n      })\n    )\n    .mutation(({ input, ctx }) => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.projectId as ProjectId, tenant.id);\n      const updated = applyDeltas(state, input.deltas as ParamDelta[]);\n      return {\n        state: updated,\n        constraintSummary: updated.constraints,\n        priceDelta: { totalPrice: updated.cabinets.length * 1000, currency: 'USD' }\n      };\n    }),\n  requestLayoutVariants: protectedProcedure\n    .input(\n      z.object({\n        projectId: z.string(),\n        goals: z.custom<LayoutGoals>()\n      })\n    )\n    .mutation(({ input, ctx }): { variants: LayoutVariant[] } => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const baseState = buildParametricState(input.projectId as ProjectId, tenant.id);\n      const variants: LayoutVariant[] = [\n        {\n          id: 'variant-1' as LayoutVariantId,\n          label: 'Galley',\n          state: baseState,\n          objectiveScores: {\n            workTriangleScore: 0.8,\n            storageScore: 0.6,\n            budgetScore: 0.7,\n            ergonomicsScore: 0.75\n          }\n        },\n        {\n          id: 'variant-2' as LayoutVariantId,\n          label: 'Island',\n          state: { ...baseState, updatedAt: nowIso() },\n          objectiveScores: {\n            workTriangleScore: 0.7,\n            storageScore: 0.7,\n            budgetScore: 0.65,\n            ergonomicsScore: 0.72\n          }\n        }\n      ];\n      return { variants };\n    }),\n  validateDesign: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .query((): ConstraintSummary => baseConstraintSummary)\n});\n\nconst cpqRouter = router({\n  listQuotes: protectedProcedure.query(({ ctx }): QuoteSummary[] => {\n    const { tenant } = resolveBaseEntities(ctx);\n    return buildQuoteList(tenant.id);\n  }),\n  priceDelta: protectedProcedure\n    .input(\n      z.object({\n        projectId: z.string(),\n        deltas: z.array(z.custom<ParamDelta>()).optional()\n      })\n    )\n    .mutation(({ input, ctx }) => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const baseState = buildParametricState(input.projectId as ProjectId, tenant.id);\n      const targetState =\n        input.deltas && input.deltas.length > 0 ? applyDeltas(baseState, input.deltas as ParamDelta[]) : baseState;\n\n      const baselineQuote = createQuoteSummary(baseState);\n      const targetQuote = createQuoteSummary(targetState);\n      const totalDelta = targetQuote.total - baselineQuote.total;\n      const subtotalDelta = (targetQuote.subtotal ?? targetQuote.total) - (baselineQuote.subtotal ?? baselineQuote.total);\n\n      return {\n        baseline: toPriceSnapshot(baselineQuote),\n        current: toPriceSnapshot(targetQuote),\n        delta: {\n          currency: targetQuote.currency,\n          totalDelta,\n          subtotalDelta\n        }\n      };\n    }),\n  getQuote: protectedProcedure\n    .input(z.object({ quoteId: z.string() }))\n    .query(({ input, ctx }): QuoteSummary | null => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const quotes = buildQuoteList(tenant.id);\n      return quotes.find((q) => q.id === input.quoteId) ?? null;\n    }),\n  getQuoteForProject: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .query(({ input, ctx }): QuoteSummary | null => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.projectId as ProjectId, tenant.id);\n      const quotes = buildQuoteList(tenant.id);\n      const existing = quotes.find((q) => q.projectId === input.projectId);\n      return existing ?? createQuoteSummary(state);\n    }),\n  recomputeQuote: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .mutation(({ input, ctx }): QuoteSummary => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.projectId as ProjectId, tenant.id);\n      return createQuoteSummary(state);\n    }),\n  applyDealerAdjustments: protectedProcedure\n    .input(\n      z.object({\n        quoteId: z.string(),\n        adjustments: z.array(\n          z.object({\n            lineItemId: z.string(),\n            discountPercent: z.number().min(0).max(100)\n          })\n        )\n      })\n    )\n    .mutation(({ input, ctx }): QuoteSummary => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.quoteId as ProjectId, tenant.id);\n      const baseQuote = createQuoteSummary(state);\n      const discountMultiplier =\n        input.adjustments.length > 0 ? 1 - input.adjustments[0].discountPercent / 100 : 1;\n      const subtotal = baseQuote.subtotal * discountMultiplier;\n      const tax = subtotal * 0.07;\n      return {\n        ...baseQuote,\n        subtotal,\n        tax,\n        total: subtotal + tax,\n        updatedAt: nowIso()\n      };\n    })\n});\n\nconst catalogAdminRouter = router({\n  listCatalogVersions: protectedProcedure.query(({ ctx }): CatalogVersion[] => {\n    const { tenant, user } = resolveBaseEntities(ctx);\n    return [\n      {\n        id: 'catalog-001' as CatalogVersionId,\n        tenantId: tenant.id,\n        label: 'Baseline Kitchen Catalog',\n        createdAt: nowIso(),\n        createdBy: user.id,\n        hash: 'hash-001',\n        payloadUri: 's3://catalogs/catalog-001.json'\n      }\n    ];\n  }),\n  publishCatalogDraft: protectedProcedure\n    .input(z.object({ draftId: z.string() }))\n    .mutation(({ input, ctx }): CatalogVersion => {\n      const { tenant, user } = resolveBaseEntities(ctx);\n      return {\n        id: input.draftId as CatalogVersionId,\n        tenantId: tenant.id,\n        label: `Published ${input.draftId}`,\n        createdAt: nowIso(),\n        createdBy: user.id,\n        hash: `hash-${input.draftId}`,\n        payloadUri: `s3://catalogs/${input.draftId}.json`\n      };\n    })\n});\n\nconst copilotRouter = router({\n  startSession: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .mutation((): { sessionId: ULID } => {\n      return { sessionId: `copilot-${Date.now()}` as ULID };\n    }),\n  streamCompletion: protectedProcedure\n    .input(\n      z.object({\n        sessionId: z.string(),\n        messages: z.array(z.custom<CopilotMessage>())\n      })\n    )\n    .subscription(() =>\n      observable<{ token: string }>((emit) => {\n        emit.next({ token: 'stub-token' });\n        emit.complete();\n        return () => undefined;\n      })\n    ),\n  applySuggestion: protectedProcedure\n    .input(\n      z.object({\n        projectId: z.string(),\n        deltas: z.array(z.custom<ParamDelta>())\n      })\n    )\n    .mutation(({ input, ctx }) => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const state = buildParametricState(input.projectId as ProjectId, tenant.id);\n      const updated = applyDeltas(state, input.deltas as ParamDelta[]);\n      return {\n        state: updated,\n        constraintSummary: updated.constraints\n      };\n    })\n});\n\nconst uiRouter = router({\n  getConstraintBadge: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .query((): ConstraintBadgePayload => ({\n      severity: baseConstraintSummary.hasBlockingErrors ? 'error' : 'ok',\n      count: baseConstraintSummary.violations.length,\n      primaryMessage: baseConstraintSummary.hasBlockingErrors\n        ? 'Blocking constraints present'\n        : 'All constraints satisfied'\n    })),\n  getDashboardKpis: protectedProcedure.query(({ ctx }): DashboardKpis => {\n    const quotes = buildQuoteList(resolveBaseEntities(ctx).tenant.id);\n    const openQuotes = quotes.filter((q) => q.status !== 'approved').length;\n    const approved = quotes.filter((q) => q.status === 'approved').length;\n    const pipelineValue = quotes.reduce((acc, q) => acc + q.total, 0);\n    const conversionRate = quotes.length ? Math.round((approved / quotes.length) * 100) : 0;\n    const avgMargin = quotes.length\n      ? Math.round(quotes.reduce((acc, q) => acc + q.marginPercent, 0) / quotes.length)\n      : 0;\n    return {\n      openQuotes,\n      conversionRate,\n      pipelineValue,\n      avgMargin,\n      revenueTrend: quotes.map((q) => ({ label: q.projectId, value: Math.round(q.total) }))\n    };\n  }),\n  getCpqSummaryBar: protectedProcedure\n    .input(z.object({ projectId: z.string() }))\n    .query(({ input, ctx }): CpqSummaryBarState => {\n      const { tenant } = resolveBaseEntities(ctx);\n      const quote = createQuoteSummary(buildParametricState(input.projectId as ProjectId, tenant.id));\n      return {\n        total: quote.total,\n        tax: quote.tax,\n        marginPercent: quote.marginPercent,\n        currency: quote.currency,\n        hasBlockingErrors: baseConstraintSummary.hasBlockingErrors\n      };\n    }),\n  getTenantBranding: protectedProcedure.query(({ ctx }): TenantBranding => {\n    const { tenant } = resolveBaseEntities(ctx);\n    return tenant.branding ?? buildBranding();\n    })\n});\n\nconst reportingRouter = router({\n  orderTimeline: protectedProcedure\n    .input(z.object({ projectId: z.string().min(1, 'projectId is required') }))\n    .query(({ input }): { projectId: ProjectId; timeline: { label: string; at: ISODateTime }[] } => {\n      const now = Date.now();\n      return {\n        projectId: input.projectId as ProjectId,\n        timeline: [\n          { label: 'Quote confirmed', at: new Date(now - 1000 * 60).toISOString() as ISODateTime },\n          { label: 'CAD/CAM started', at: new Date(now - 1000 * 30).toISOString() as ISODateTime },\n          { label: 'Manufacturing scheduled', at: new Date(now - 1000 * 10).toISOString() as ISODateTime }\n        ]\n      };\n    }),\n  getManufacturingJobs: protectedProcedure.query((): { jobs: ManufacturingJob[] } => {\n    const now = Date.now();\n    return {\n      jobs: [\n        {\n          id: 'job-stub' as ULID,\n          tenantId: 'tenant-demo' as TenantId,\n          projectId: 'proj-demo' as ProjectId,\n          quoteId: 'quote-demo' as QuoteId,\n          catalogVersion: { id: 'catalog-001' as CatalogVersionId, hash: 'hash-001' },\n          status: 'scheduled',\n          createdAt: new Date(now - 1000 * 60).toISOString() as ISODateTime,\n          updatedAt: new Date(now - 1000 * 5).toISOString() as ISODateTime\n        }\n      ]\n    };\n  })\n});\n\nconst aiRouter = router({\n  designChat: protectedProcedure\n    .input(CopilotChatRequestSchema)\n    .mutation(async ({ input, ctx }) => {\n      const headers: Record<string, string> = { 'Content-Type': 'application/json' };\n      const token = ctx.session?.jwt;\n      if (token) headers.authorization = `Bearer ${token}`;\n\n      const res = await fetch(`${AI_BASE}/design/chat`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(input)\n      });\n\n      if (!res.ok) {\n        throw new TRPCError({ code: 'BAD_REQUEST', message: `AI request failed (${res.status})` });\n      }\n\n      const data = await res.json();\n      const parsed = CopilotPlanResponseSchema.safeParse(data);\n      if (!parsed.success) {\n        throw new TRPCError({ code: 'INTERNAL_SERVER_ERROR', message: `Invalid AI response: ${parsed.error.message}` });\n      }\n\n      const toolCallsParsed = AgentToolCallSchema.array().safeParse(parsed.data.toolCalls ?? []);\n      if (!toolCallsParsed.success) {\n        throw new TRPCError({ code: 'INTERNAL_SERVER_ERROR', message: `Invalid toolCalls: ${toolCallsParsed.error.message}` });\n      }\n\n      return { ...parsed.data, toolCalls: toolCallsParsed.data };\n    })\n});\n\nexport const appRouter = router({\n  auth: authRouter,\n  tenancy: tenancyRouter,\n  configurator: configuratorRouter,\n  cpq: cpqRouter,\n  catalogAdmin: catalogAdminRouter,\n  copilot: copilotRouter,\n  ui: uiRouter,\n  reporting: reportingRouter,\n  ai: aiRouter\n});\n\nexport type AppRouter = typeof appRouter;\nexport {\n  authRouter,\n  tenancyRouter,\n  configuratorRouter,\n  cpqRouter,\n  catalogAdminRouter,\n  copilotRouter,\n  uiRouter,\n  reportingRouter,\n  aiRouter\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/libs/shared-trpc/src/index.ts"],"sourcesContent":["export * from './client/createClient';\nexport * from './routers';\nexport * from './trpc';\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 1002, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/apps/frontend/src/lib/trpc-server.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { createTrpcClient } from '@kitchen-cpq/shared-trpc';\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL ?? 'http://localhost:3001';\n\nexport const getTrpcClient = async () => {\n  const cookieStore = await cookies();\n  const token = cookieStore.get('auth_token')?.value;\n  return createTrpcClient({\n    baseUrl: API_BASE,\n    headers: token ? { authorization: `Bearer ${token}` } : undefined\n  });\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEA,MAAM,WAAW,6DAAmC;AAE7C,MAAM,gBAAgB;IAC3B,MAAM,cAAc,MAAM,IAAA,4VAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;IAC7C,OAAO,IAAA,2KAAgB,EAAC;QACtB,SAAS;QACT,SAAS,QAAQ;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,IAAI;IAC1D;AACF"}},
    {"offset": {"line": 1026, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/apps/frontend/app/cpq/quotes/%5Bid%5D/QuoteDetailClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const QuoteDetailClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call QuoteDetailClient() from the server but QuoteDetailClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/frontend/app/cpq/quotes/[id]/QuoteDetailClient.tsx <module evaluation>\",\n    \"QuoteDetailClient\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,0dAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,yFACA","ignoreList":[0]}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/apps/frontend/app/cpq/quotes/%5Bid%5D/QuoteDetailClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const QuoteDetailClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call QuoteDetailClient() from the server but QuoteDetailClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/frontend/app/cpq/quotes/[id]/QuoteDetailClient.tsx\",\n    \"QuoteDetailClient\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,0dAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,qEACA","ignoreList":[0]}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/apps/frontend/app/cpq/quotes/%5Bid%5D/page.tsx"],"sourcesContent":["import { notFound } from 'next/navigation';\nimport { getTrpcClient } from '../../../../src/lib/trpc-server';\nimport { QuoteDetailClient } from './QuoteDetailClient';\n\nexport default async function QuoteDetailPage({ params }: { params: { id: string } }) {\n  const trpc = await getTrpcClient();\n  const quote = await trpc.cpq.getQuote.query({ quoteId: params.id });\n  if (!quote) return notFound();\n  const { state } = await trpc.configurator.getSessionState.query({ projectId: quote.projectId });\n\n  return <QuoteDetailClient quote={quote} state={state} />;\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;;;;;AAEe,eAAe,gBAAgB,EAAE,MAAM,EAA8B;IAClF,MAAM,OAAO,MAAM,IAAA,iKAAa;IAChC,MAAM,QAAQ,MAAM,KAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC;QAAE,SAAS,OAAO,EAAE;IAAC;IACjE,IAAI,CAAC,OAAO,OAAO,IAAA,mZAAQ;IAC3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,KAAK,YAAY,CAAC,eAAe,CAAC,KAAK,CAAC;QAAE,WAAW,MAAM,SAAS;IAAC;IAE7F,qBAAO,gcAAC,6LAAiB;QAAC,OAAO;QAAO,OAAO;;;;;;AACjD"}}]
}