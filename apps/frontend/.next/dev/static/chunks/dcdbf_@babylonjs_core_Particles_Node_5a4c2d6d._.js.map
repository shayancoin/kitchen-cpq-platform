{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes.ts"],"sourcesContent":["/**\r\n * Defines the kind of connection point for node geometry\r\n */\r\nexport enum NodeParticleBlockConnectionPointTypes {\r\n    /** Int */\r\n    Int = 0x0001,\r\n    /** Float */\r\n    Float = 0x0002,\r\n    /** Vector2 */\r\n    Vector2 = 0x0004,\r\n    /** Vector3 */\r\n    Vector3 = 0x0008,\r\n    /** Matrix */\r\n    Matrix = 0x0010,\r\n    /** Particle */\r\n    Particle = 0x0020,\r\n    /** Texture */\r\n    Texture = 0x0040,\r\n    /** Color4 */\r\n    Color4 = 0x0080,\r\n    /** FloatGradient */\r\n    FloatGradient = 0x0100,\r\n    /** Vector2Gradient */\r\n    Vector2Gradient = 0x0200,\r\n    /** Vector3Gradient */\r\n    Vector3Gradient = 0x0400,\r\n    /** Color4Gradient */\r\n    Color4Gradient = 0x0800,\r\n    /** System */\r\n    System = 0x1000,\r\n    /** Detect type based on connection */\r\n    AutoDetect = 0x2000,\r\n    /** Output type that will be defined by input type */\r\n    BasedOnInput = 0x4000,\r\n    /** Undefined */\r\n    Undefined = 0x8000,\r\n    /** Bitmask of all types */\r\n    All = 0xffff,\r\n}\r\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACH,IAAY,qCAmCX;AAnCD,CAAA,SAAY,qCAAqC;IAC7C,QAAA,EAAU,CACV,qCAAA,CAAA,qCAAA,CAAA,MAAA,GAAA,EAAA,GAAA,KAAY,CAAA;IACZ,UAAA,EAAY,CACZ,qCAAA,CAAA,qCAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAc,CAAA;IACd,YAAA,EAAc,CACd,qCAAA,CAAA,qCAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAgB,CAAA;IAChB,YAAA,EAAc,CACd,qCAAA,CAAA,qCAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAgB,CAAA;IAChB,WAAA,EAAa,CACb,qCAAA,CAAA,qCAAA,CAAA,SAAA,GAAA,GAAA,GAAA,QAAe,CAAA;IACf,aAAA,EAAe,CACf,qCAAA,CAAA,qCAAA,CAAA,WAAA,GAAA,GAAA,GAAA,UAAiB,CAAA;IACjB,YAAA,EAAc,CACd,qCAAA,CAAA,qCAAA,CAAA,UAAA,GAAA,GAAA,GAAA,SAAgB,CAAA;IAChB,WAAA,EAAa,CACb,qCAAA,CAAA,qCAAA,CAAA,SAAA,GAAA,IAAA,GAAA,QAAe,CAAA;IACf,kBAAA,EAAoB,CACpB,qCAAA,CAAA,qCAAA,CAAA,gBAAA,GAAA,IAAA,GAAA,eAAsB,CAAA;IACtB,oBAAA,EAAsB,CACtB,qCAAA,CAAA,qCAAA,CAAA,kBAAA,GAAA,IAAA,GAAA,iBAAwB,CAAA;IACxB,oBAAA,EAAsB,CACtB,qCAAA,CAAA,qCAAA,CAAA,kBAAA,GAAA,KAAA,GAAA,iBAAwB,CAAA;IACxB,mBAAA,EAAqB,CACrB,qCAAA,CAAA,qCAAA,CAAA,iBAAA,GAAA,KAAA,GAAA,gBAAuB,CAAA;IACvB,WAAA,EAAa,CACb,qCAAA,CAAA,qCAAA,CAAA,SAAA,GAAA,KAAA,GAAA,QAAe,CAAA;IACf,oCAAA,EAAsC,CACtC,qCAAA,CAAA,qCAAA,CAAA,aAAA,GAAA,KAAA,GAAA,YAAmB,CAAA;IACnB,mDAAA,EAAqD,CACrD,qCAAA,CAAA,qCAAA,CAAA,eAAA,GAAA,MAAA,GAAA,cAAqB,CAAA;IACrB,cAAA,EAAgB,CAChB,qCAAA,CAAA,qCAAA,CAAA,YAAA,GAAA,MAAA,GAAA,WAAkB,CAAA;IAClB,yBAAA,EAA2B,CAC3B,qCAAA,CAAA,qCAAA,CAAA,MAAA,GAAA,MAAA,GAAA,KAAY,CAAA;AAChB,CAAC,EAnCW,qCAAqC,IAAA,CAArC,qCAAqC,GAAA,CAAA,CAAA,GAmChD"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/nodeParticleBlockConnectionPoint.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/nodeParticleBlockConnectionPoint.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport { Observable } from \"../../Misc/observable\";\r\nimport type { NodeParticleBlock } from \"./nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"./Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleBuildState } from \"./nodeParticleBuildState\";\r\nimport type { ParticleInputBlock } from \"./Blocks/particleInputBlock\";\r\n\r\n/**\r\n * Enum used to define the compatibility state between two connection points\r\n */\r\nexport const enum NodeParticleConnectionPointCompatibilityStates {\r\n    /** Points are compatibles */\r\n    Compatible,\r\n    /** Points are incompatible because of their types */\r\n    TypeIncompatible,\r\n    /** Points are incompatible because they are in the same hierarchy **/\r\n    HierarchyIssue,\r\n}\r\n\r\n/**\r\n * Defines the direction of a connection point\r\n */\r\nexport const enum NodeParticleConnectionPointDirection {\r\n    /** Input */\r\n    Input,\r\n    /** Output */\r\n    Output,\r\n}\r\n\r\n/**\r\n * Defines a connection point for a block\r\n */\r\nexport class NodeParticleConnectionPoint {\r\n    /** @internal */\r\n    public _ownerBlock: NodeParticleBlock;\r\n    /** @internal */\r\n    public _connectedPoint: Nullable<NodeParticleConnectionPoint> = null;\r\n\r\n    /** @internal */\r\n    public _storedValue: any = null;\r\n    /** @internal */\r\n    public _storedFunction: Nullable<(state: NodeParticleBuildState) => any> = null;\r\n\r\n    /** @internal */\r\n    public _acceptedConnectionPointType: Nullable<NodeParticleConnectionPoint> = null;\r\n\r\n    private _endpoints = new Array<NodeParticleConnectionPoint>();\r\n    private _direction: NodeParticleConnectionPointDirection;\r\n    private _type = NodeParticleBlockConnectionPointTypes.Particle;\r\n\r\n    /** @internal */\r\n    public _linkedConnectionSource: Nullable<NodeParticleConnectionPoint> = null;\r\n\r\n    /** @internal */\r\n    public _typeConnectionSource: Nullable<NodeParticleConnectionPoint> = null;\r\n\r\n    /** @internal */\r\n    public _typeConnectionSourceTranslation: Nullable<(source: NodeParticleBlockConnectionPointTypes) => NodeParticleBlockConnectionPointTypes> = null;\r\n\r\n    /** @internal */\r\n    public _defaultConnectionPointType: Nullable<NodeParticleBlockConnectionPointTypes> = null;\r\n\r\n    /** @internal */\r\n    public _isMainLinkSource = false;\r\n\r\n    /** Gets the direction of the point */\r\n    public get direction() {\r\n        return this._direction;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the additional types supported by this connection point\r\n     */\r\n    public acceptedConnectionPointTypes: NodeParticleBlockConnectionPointTypes[] = [];\r\n\r\n    /**\r\n     * Gets or sets the additional types excluded by this connection point\r\n     */\r\n    public excludedConnectionPointTypes: NodeParticleBlockConnectionPointTypes[] = [];\r\n\r\n    /**\r\n     * Observable triggered when this point is connected\r\n     */\r\n    public onConnectionObservable = new Observable<NodeParticleConnectionPoint>();\r\n\r\n    /**\r\n     * Observable triggered when this point is disconnected\r\n     */\r\n    public onDisconnectionObservable = new Observable<NodeParticleConnectionPoint>();\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this connection point is exposed on a frame\r\n     */\r\n    public isExposedOnFrame: boolean = false;\r\n\r\n    /**\r\n     * Gets or sets number indicating the position that the port is exposed to on a frame\r\n     */\r\n    public exposedPortPosition: number = -1;\r\n\r\n    /**\r\n     * Gets the default value used for this point at creation time\r\n     */\r\n    public defaultValue: Nullable<any> = null;\r\n\r\n    /**\r\n     * Gets or sets the default value used for this point if nothing is connected\r\n     */\r\n    public value: Nullable<any> = null;\r\n\r\n    /**\r\n     * Gets or sets the min value accepted for this point if nothing is connected\r\n     */\r\n    public valueMin: Nullable<any> = null;\r\n\r\n    /**\r\n     * Gets or sets the max value accepted for this point if nothing is connected\r\n     */\r\n    public valueMax: Nullable<any> = null;\r\n\r\n    /**\r\n     * Gets or sets the connection point type (default is float)\r\n     */\r\n    public get type(): NodeParticleBlockConnectionPointTypes {\r\n        if (this._type === NodeParticleBlockConnectionPointTypes.AutoDetect) {\r\n            if (this._ownerBlock.isInput) {\r\n                return (this._ownerBlock as ParticleInputBlock).type;\r\n            }\r\n\r\n            if (this._connectedPoint) {\r\n                return this._connectedPoint.type;\r\n            }\r\n\r\n            if (this._linkedConnectionSource) {\r\n                if (this._linkedConnectionSource.isConnected) {\r\n                    return this._linkedConnectionSource.type;\r\n                }\r\n                if (this._linkedConnectionSource._defaultConnectionPointType) {\r\n                    return this._linkedConnectionSource._defaultConnectionPointType;\r\n                }\r\n            }\r\n\r\n            if (this._defaultConnectionPointType) {\r\n                return this._defaultConnectionPointType;\r\n            }\r\n        }\r\n\r\n        if (this._type === NodeParticleBlockConnectionPointTypes.BasedOnInput) {\r\n            if (this._typeConnectionSource) {\r\n                if (!this._typeConnectionSource.isConnected && this._defaultConnectionPointType) {\r\n                    return this._defaultConnectionPointType;\r\n                }\r\n                if (this._typeConnectionSourceTranslation) {\r\n                    return this._typeConnectionSourceTranslation(this._typeConnectionSource.type);\r\n                }\r\n                return this._typeConnectionSource.type;\r\n            } else if (this._defaultConnectionPointType) {\r\n                return this._defaultConnectionPointType;\r\n            }\r\n        }\r\n\r\n        return this._type;\r\n    }\r\n\r\n    public set type(value: NodeParticleBlockConnectionPointTypes) {\r\n        this._type = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the connection point name\r\n     */\r\n    public name: string;\r\n\r\n    /**\r\n     * Gets or sets the connection point display name\r\n     */\r\n    public displayName: string;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this connection point can be omitted\r\n     */\r\n    public isOptional: boolean;\r\n\r\n    /**\r\n     * Gets a boolean indicating that the current point is connected to another NodeMaterialBlock\r\n     */\r\n    public get isConnected(): boolean {\r\n        return this.connectedPoint !== null || this.hasEndpoints;\r\n    }\r\n\r\n    /** Get the other side of the connection (if any) */\r\n    public get connectedPoint(): Nullable<NodeParticleConnectionPoint> {\r\n        return this._connectedPoint;\r\n    }\r\n\r\n    /** Get the block that owns this connection point */\r\n    public get ownerBlock(): NodeParticleBlock {\r\n        return this._ownerBlock;\r\n    }\r\n\r\n    /** Get the block connected on the other side of this connection (if any) */\r\n    public get sourceBlock(): Nullable<NodeParticleBlock> {\r\n        if (!this._connectedPoint) {\r\n            return null;\r\n        }\r\n\r\n        return this._connectedPoint.ownerBlock;\r\n    }\r\n\r\n    /** Get the block connected on the endpoints of this connection (if any) */\r\n    public get connectedBlocks(): Array<NodeParticleBlock> {\r\n        if (this._endpoints.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return this._endpoints.map((e) => e.ownerBlock);\r\n    }\r\n\r\n    /** Gets the list of connected endpoints */\r\n    public get endpoints() {\r\n        return this._endpoints;\r\n    }\r\n\r\n    /** Gets a boolean indicating if that output point is connected to at least one input */\r\n    public get hasEndpoints(): boolean {\r\n        return this._endpoints && this._endpoints.length > 0;\r\n    }\r\n\r\n    /** Get the inner type (ie AutoDetect for instance instead of the inferred one) */\r\n    public get innerType() {\r\n        if (this._linkedConnectionSource && !this._isMainLinkSource && this._linkedConnectionSource.isConnected) {\r\n            return this.type;\r\n        }\r\n        return this._type;\r\n    }\r\n\r\n    /**\r\n     * Creates a new connection point\r\n     * @param name defines the connection point name\r\n     * @param ownerBlock defines the block hosting this connection point\r\n     * @param direction defines the direction of the connection point\r\n     */\r\n    public constructor(name: string, ownerBlock: NodeParticleBlock, direction: NodeParticleConnectionPointDirection) {\r\n        this._ownerBlock = ownerBlock;\r\n        this.name = name;\r\n        this._direction = direction;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name e.g. \"NodeMaterialConnectionPoint\"\r\n     * @returns the class name\r\n     */\r\n    public getClassName(): string {\r\n        return \"NodeParticleConnectionPoint\";\r\n    }\r\n\r\n    /**\r\n     * Gets the value represented by this connection point\r\n     * @param state current evaluation state\r\n     * @returns the connected value or the value if nothing is connected\r\n     */\r\n    public getConnectedValue(state: NodeParticleBuildState) {\r\n        if (this.isConnected) {\r\n            if (this._connectedPoint?._storedFunction) {\r\n                return this._connectedPoint._storedFunction(state);\r\n            }\r\n            return this._connectedPoint!._storedValue;\r\n        }\r\n        return this.value;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the current point can be connected to another point\r\n     * @param connectionPoint defines the other connection point\r\n     * @returns a boolean\r\n     */\r\n    public canConnectTo(connectionPoint: NodeParticleConnectionPoint) {\r\n        return this.checkCompatibilityState(connectionPoint) === NodeParticleConnectionPointCompatibilityStates.Compatible;\r\n    }\r\n\r\n    /**\r\n     * Gets a number indicating if the current point can be connected to another point\r\n     * @param connectionPoint defines the other connection point\r\n     * @returns a number defining the compatibility state\r\n     */\r\n    public checkCompatibilityState(connectionPoint: NodeParticleConnectionPoint): NodeParticleConnectionPointCompatibilityStates {\r\n        const ownerBlock = this._ownerBlock;\r\n        const otherBlock = connectionPoint.ownerBlock;\r\n\r\n        if (this.type !== connectionPoint.type && connectionPoint.innerType !== NodeParticleBlockConnectionPointTypes.AutoDetect) {\r\n            // Accepted types\r\n            if (connectionPoint.acceptedConnectionPointTypes && connectionPoint.acceptedConnectionPointTypes.indexOf(this.type) !== -1) {\r\n                return NodeParticleConnectionPointCompatibilityStates.Compatible;\r\n            } else {\r\n                return NodeParticleConnectionPointCompatibilityStates.TypeIncompatible;\r\n            }\r\n        }\r\n\r\n        // Excluded\r\n        if (connectionPoint.excludedConnectionPointTypes && connectionPoint.excludedConnectionPointTypes.indexOf(this.type) !== -1) {\r\n            return NodeParticleConnectionPointCompatibilityStates.TypeIncompatible;\r\n        }\r\n\r\n        // Check hierarchy\r\n        let targetBlock = otherBlock;\r\n        let sourceBlock = ownerBlock;\r\n        if (this.direction === NodeParticleConnectionPointDirection.Input) {\r\n            targetBlock = ownerBlock;\r\n            sourceBlock = otherBlock;\r\n        }\r\n\r\n        if (targetBlock.isAnAncestorOf(sourceBlock)) {\r\n            return NodeParticleConnectionPointCompatibilityStates.HierarchyIssue;\r\n        }\r\n\r\n        return NodeParticleConnectionPointCompatibilityStates.Compatible;\r\n    }\r\n\r\n    /**\r\n     * Connect this point to another connection point\r\n     * @param connectionPoint defines the other connection point\r\n     * @param ignoreConstraints defines if the system will ignore connection type constraints (default is false)\r\n     * @returns the current connection point\r\n     */\r\n    public connectTo(connectionPoint: NodeParticleConnectionPoint, ignoreConstraints = false): NodeParticleConnectionPoint {\r\n        if (!ignoreConstraints && !this.canConnectTo(connectionPoint)) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw `Cannot connect these two connectors. source: \"${this.ownerBlock.name}\".${this.name}, target: \"${connectionPoint.ownerBlock.name}\".${connectionPoint.name}`;\r\n        }\r\n\r\n        this._endpoints.push(connectionPoint);\r\n        connectionPoint._connectedPoint = this;\r\n\r\n        this.onConnectionObservable.notifyObservers(connectionPoint);\r\n        connectionPoint.onConnectionObservable.notifyObservers(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Disconnect this point from one of his endpoint\r\n     * @param endpoint defines the other connection point\r\n     * @returns the current connection point\r\n     */\r\n    public disconnectFrom(endpoint: NodeParticleConnectionPoint): NodeParticleConnectionPoint {\r\n        const index = this._endpoints.indexOf(endpoint);\r\n\r\n        if (index === -1) {\r\n            return this;\r\n        }\r\n\r\n        this._endpoints.splice(index, 1);\r\n        endpoint._connectedPoint = null;\r\n\r\n        this.onDisconnectionObservable.notifyObservers(endpoint);\r\n        endpoint.onDisconnectionObservable.notifyObservers(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Fill the list of excluded connection point types with all types other than those passed in the parameter\r\n     * @param mask Types (ORed values of NodeMaterialBlockConnectionPointTypes) that are allowed, and thus will not be pushed to the excluded list\r\n     */\r\n    public addExcludedConnectionPointFromAllowedTypes(mask: number): void {\r\n        let bitmask = 1;\r\n        while (bitmask < NodeParticleBlockConnectionPointTypes.All) {\r\n            if (!(mask & bitmask)) {\r\n                this.excludedConnectionPointTypes.push(bitmask);\r\n            }\r\n            bitmask = bitmask << 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Serializes this point in a JSON representation\r\n     * @param isInput defines if the connection point is an input (default is true)\r\n     * @returns the serialized point object\r\n     */\r\n    public serialize(isInput = true): any {\r\n        const serializationObject: any = {};\r\n\r\n        serializationObject.name = this.name;\r\n        serializationObject.displayName = this.displayName;\r\n        if (this.value !== undefined && this.value !== null) {\r\n            if (this.value.asArray) {\r\n                serializationObject.valueType = \"BABYLON.\" + this.value.getClassName();\r\n                serializationObject.value = this.value.asArray();\r\n            } else {\r\n                serializationObject.valueType = \"number\";\r\n                serializationObject.value = this.value;\r\n            }\r\n        }\r\n\r\n        if (isInput && this.connectedPoint) {\r\n            serializationObject.inputName = this.name;\r\n            serializationObject.targetBlockId = this.connectedPoint.ownerBlock.uniqueId;\r\n            serializationObject.targetConnectionName = this.connectedPoint.name;\r\n            serializationObject.isExposedOnFrame = true;\r\n            serializationObject.exposedPortPosition = this.exposedPortPosition;\r\n        }\r\n\r\n        if (this.isExposedOnFrame || this.exposedPortPosition >= 0) {\r\n            serializationObject.isExposedOnFrame = true;\r\n            serializationObject.exposedPortPosition = this.exposedPortPosition;\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public dispose() {\r\n        this.onConnectionObservable.clear();\r\n        this.onDisconnectionObservable.clear();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/nodeParticleBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/nodeParticleBlock.ts"],"sourcesContent":["import { serialize } from \"core/Misc/decorators\";\r\nimport { UniqueIdGenerator } from \"core/Misc/uniqueIdGenerator\";\r\nimport { NodeParticleConnectionPoint, NodeParticleConnectionPointDirection } from \"./nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBlockConnectionPointTypes } from \"./Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleBuildState } from \"./nodeParticleBuildState\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { GetClass } from \"core/Misc/typeStore\";\r\n\r\n/**\r\n * Defines a block that can be used inside a node based particle system\r\n */\r\nexport class NodeParticleBlock {\r\n    private _name = \"\";\r\n    protected _buildId: number;\r\n    protected _isInput = false;\r\n    protected _isSystem = false;\r\n    protected _isDebug = false;\r\n    protected _isTeleportOut = false;\r\n    protected _isTeleportIn = false;\r\n\r\n    /**\r\n     * Gets or sets the unique id of the node\r\n     */\r\n    public uniqueId: number;\r\n\r\n    /** @internal */\r\n    public _inputs = new Array<NodeParticleConnectionPoint>();\r\n    /** @internal */\r\n    public _outputs = new Array<NodeParticleConnectionPoint>();\r\n\r\n    /**\r\n     * Gets an observable raised when the block is built\r\n     */\r\n    public onBuildObservable = new Observable<NodeParticleBlock>();\r\n\r\n    /**\r\n     * Gets an observable raised when the block is disposed\r\n     */\r\n    public onDisposeObservable = new Observable<NodeParticleBlock>();\r\n\r\n    /**\r\n     * Gets an observable raised when the inputs of the block change\r\n     */\r\n    public onInputChangedObservable = new Observable<NodeParticleConnectionPoint>();\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a teleport out\r\n     */\r\n    public get isTeleportOut(): boolean {\r\n        return this._isTeleportOut;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a teleport in\r\n     */\r\n    public get isTeleportIn(): boolean {\r\n        return this._isTeleportIn;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating that this block is a system block\r\n     */\r\n    public get isSystem(): boolean {\r\n        return this._isSystem;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating that this block is an input block\r\n     */\r\n    public get isInput(): boolean {\r\n        return this._isInput;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a debug block\r\n     */\r\n    public get isDebug(): boolean {\r\n        return this._isDebug;\r\n    }\r\n\r\n    /**\r\n     * A free comment about the block\r\n     */\r\n    @serialize(\"comment\")\r\n    public comments: string;\r\n\r\n    /** Gets or sets a boolean indicating that this input can be edited from a collapsed frame */\r\n    public visibleOnFrame = false;\r\n\r\n    /**\r\n     * Gets or set the name of the block\r\n     */\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name e.g. \"NodeParticleBlock\"\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"NodeParticleBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the list of input points\r\n     */\r\n    public get inputs(): NodeParticleConnectionPoint[] {\r\n        return this._inputs;\r\n    }\r\n\r\n    /** Gets the list of output points */\r\n    public get outputs(): NodeParticleConnectionPoint[] {\r\n        return this._outputs;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeParticleBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        this._name = name;\r\n        this.uniqueId = UniqueIdGenerator.UniqueId;\r\n    }\r\n\r\n    protected _inputRename(name: string) {\r\n        return name;\r\n    }\r\n\r\n    protected _outputRename(name: string) {\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given block\r\n     * @param block defines the potential descendant block to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public isAnAncestorOf(block: NodeParticleBlock): boolean {\r\n        for (const output of this._outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                if (endpoint.ownerBlock === block) {\r\n                    return true;\r\n                }\r\n                if (endpoint.ownerBlock.isAnAncestorOf(block)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given type\r\n     * @param type defines the potential type to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public isAnAncestorOfType(type: string): boolean {\r\n        if (this.getClassName() === type) {\r\n            return true;\r\n        }\r\n\r\n        for (const output of this._outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                if (endpoint.ownerBlock.isAnAncestorOfType(type)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Find an input by its name\r\n     * @param name defines the name of the input to look for\r\n     * @returns the input or null if not found\r\n     */\r\n    public getInputByName(name: string) {\r\n        const filter = this._inputs.filter((e) => e.name === name);\r\n\r\n        if (filter.length) {\r\n            return filter[0];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    protected _linkConnectionTypes(inputIndex0: number, inputIndex1: number, looseCoupling = false) {\r\n        if (looseCoupling) {\r\n            this._inputs[inputIndex1]._acceptedConnectionPointType = this._inputs[inputIndex0];\r\n        } else {\r\n            this._inputs[inputIndex0]._linkedConnectionSource = this._inputs[inputIndex1];\r\n            this._inputs[inputIndex0]._isMainLinkSource = true;\r\n        }\r\n        this._inputs[inputIndex1]._linkedConnectionSource = this._inputs[inputIndex0];\r\n    }\r\n\r\n    /**\r\n     * Register a new input. Must be called inside a block constructor\r\n     * @param name defines the connection point name\r\n     * @param type defines the connection point type\r\n     * @param isOptional defines a boolean indicating that this input can be omitted\r\n     * @param value value to return if there is no connection\r\n     * @param valueMin min value accepted for value\r\n     * @param valueMax max value accepted for value\r\n     * @returns the current block\r\n     */\r\n    public registerInput(name: string, type: NodeParticleBlockConnectionPointTypes, isOptional: boolean = false, value?: any, valueMin?: any, valueMax?: any) {\r\n        const point = new NodeParticleConnectionPoint(name, this, NodeParticleConnectionPointDirection.Input);\r\n        point.type = type;\r\n        point.isOptional = isOptional;\r\n        point.defaultValue = value;\r\n        point.value = value;\r\n        point.valueMin = valueMin;\r\n        point.valueMax = valueMax;\r\n\r\n        this._inputs.push(point);\r\n\r\n        this.onInputChangedObservable.notifyObservers(point);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Register a new output. Must be called inside a block constructor\r\n     * @param name defines the connection point name\r\n     * @param type defines the connection point type\r\n     * @param point an already created connection point. If not provided, create a new one\r\n     * @returns the current block\r\n     */\r\n    public registerOutput(name: string, type: NodeParticleBlockConnectionPointTypes, point?: NodeParticleConnectionPoint) {\r\n        point = point ?? new NodeParticleConnectionPoint(name, this, NodeParticleConnectionPointDirection.Output);\r\n        point.type = type;\r\n\r\n        this._outputs.push(point);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Builds the block. Must be implemented by derived classes.\r\n     * @param _state defines the current build state\r\n     */\r\n    public _build(_state: NodeParticleBuildState) {}\r\n\r\n    protected _customBuildStep(_state: NodeParticleBuildState): void {\r\n        // Must be implemented by children\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     * @returns the built block\r\n     */\r\n    public build(state: NodeParticleBuildState) {\r\n        if (this._buildId === state.buildId) {\r\n            return true;\r\n        }\r\n\r\n        if (this._outputs.length > 0) {\r\n            if (!this._outputs.some((o) => o.hasEndpoints) && !this.isDebug && !this.isSystem) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this._buildId = state.buildId;\r\n\r\n        // Check if \"parent\" blocks are compiled\r\n        for (const input of this._inputs) {\r\n            if (!input.connectedPoint) {\r\n                if (!input.isOptional) {\r\n                    // Emit a warning\r\n                    state.notConnectedNonOptionalInputs.push(input);\r\n                }\r\n                continue;\r\n            }\r\n\r\n            const block = input.connectedPoint.ownerBlock;\r\n            if (block && block !== this && !block.isSystem) {\r\n                block.build(state);\r\n            }\r\n        }\r\n\r\n        this._customBuildStep(state);\r\n\r\n        // Logs\r\n        if (state.verbose) {\r\n            Logger.Log(`Building ${this.name} [${this.getClassName()}]`);\r\n        }\r\n\r\n        this._build(state);\r\n\r\n        this.onBuildObservable.notifyObservers(this);\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public serialize(): any {\r\n        const serializationObject: any = {};\r\n        serializationObject.customType = \"BABYLON.\" + this.getClassName();\r\n        serializationObject.id = this.uniqueId;\r\n        serializationObject.name = this.name;\r\n        serializationObject.visibleOnFrame = this.visibleOnFrame;\r\n        serializationObject.comments = this.comments;\r\n\r\n        serializationObject.inputs = [];\r\n        serializationObject.outputs = [];\r\n\r\n        for (const input of this.inputs) {\r\n            serializationObject.inputs.push(input.serialize());\r\n        }\r\n\r\n        for (const output of this.outputs) {\r\n            serializationObject.outputs.push(output.serialize(false));\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _deserialize(serializationObject: any) {\r\n        this._name = serializationObject.name;\r\n        this.comments = serializationObject.comments;\r\n        this.visibleOnFrame = !!serializationObject.visibleOnFrame;\r\n        this._deserializePortDisplayNamesAndExposedOnFrame(serializationObject);\r\n    }\r\n\r\n    private _deserializePortDisplayNamesAndExposedOnFrame(serializationObject: any) {\r\n        const serializedInputs = serializationObject.inputs;\r\n        const serializedOutputs = serializationObject.outputs;\r\n        if (serializedInputs) {\r\n            for (const port of serializedInputs) {\r\n                const input = this.inputs.find((i) => i.name === port.name);\r\n\r\n                if (!input) {\r\n                    return;\r\n                }\r\n\r\n                if (port.displayName) {\r\n                    input.displayName = port.displayName;\r\n                }\r\n                if (port.isExposedOnFrame) {\r\n                    input.isExposedOnFrame = port.isExposedOnFrame;\r\n                    input.exposedPortPosition = port.exposedPortPosition;\r\n                }\r\n                if (port.value !== undefined && port.value !== null) {\r\n                    if (port.valueType === \"number\") {\r\n                        input.value = port.value;\r\n                    } else {\r\n                        const valueType = GetClass(port.valueType);\r\n\r\n                        if (valueType) {\r\n                            input.value = valueType.FromArray(port.value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (serializedOutputs) {\r\n            for (let i = 0; i < serializedOutputs.length; i++) {\r\n                const port = serializedOutputs[i];\r\n                if (port.displayName) {\r\n                    this.outputs[i].displayName = port.displayName;\r\n                }\r\n                if (port.isExposedOnFrame) {\r\n                    this.outputs[i].isExposedOnFrame = port.isExposedOnFrame;\r\n                    this.outputs[i].exposedPortPosition = port.exposedPortPosition;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clone the current block to a new identical block\r\n     * @returns a copy of the current block\r\n     */\r\n    public clone() {\r\n        const serializationObject = this.serialize();\r\n\r\n        const blockType = GetClass(serializationObject.customType);\r\n        if (blockType) {\r\n            const block: NodeParticleBlock = new blockType();\r\n            block._deserialize(serializationObject);\r\n\r\n            return block;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public dispose() {\r\n        this.onDisposeObservable.notifyObservers(this);\r\n        this.onDisposeObservable.clear();\r\n\r\n        for (const input of this.inputs) {\r\n            input.dispose();\r\n        }\r\n\r\n        for (const output of this.outputs) {\r\n            output.dispose();\r\n        }\r\n\r\n        this.onBuildObservable.clear();\r\n        this.onInputChangedObservable.clear();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Enums/nodeParticleContextualSources.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Enums/nodeParticleContextualSources.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/naming-convention */\r\n/**\r\n * Defines the kind of contextual sources for node particles\r\n */\r\nexport enum NodeParticleContextualSources {\r\n    /** None */\r\n    None = 0x0000,\r\n    /** Position */\r\n    Position = 0x0001,\r\n    /** Direction */\r\n    Direction = 0x0002,\r\n    /** Age */\r\n    Age = 0x0003,\r\n    /** Lifetime */\r\n    Lifetime = 0x0004,\r\n    /** Color */\r\n    Color = 0x0005,\r\n    /** ScaledDirection */\r\n    ScaledDirection = 0x0006,\r\n    /** Scale */\r\n    Scale = 0x0007,\r\n    /** AgeGradient */\r\n    AgeGradient = 0x0008,\r\n    /** Angle */\r\n    Angle = 0x0009,\r\n    /** SpriteCellIndex */\r\n    SpriteCellIndex = 0x0010,\r\n    /** SpriteCellStart */\r\n    SpriteCellStart = 0x0011,\r\n    /** SpriteCellEnd */\r\n    SpriteCellEnd = 0x0012,\r\n    /** Initial Color */\r\n    InitialColor = 0x0013,\r\n    /** Color Dead*/\r\n    ColorDead = 0x0014,\r\n    /** Initial Direction */\r\n    InitialDirection = 0x0015,\r\n    /** Color Step */\r\n    ColorStep = 0x0016,\r\n    /** Scaled Color Step */\r\n    ScaledColorStep = 0x0017,\r\n    /** Local Position Updated */\r\n    LocalPositionUpdated = 0x0018,\r\n    /** Size */\r\n    Size = 0x0019,\r\n    /** Direction Scale */\r\n    DirectionScale = 0x0020,\r\n}\r\n"],"names":[],"mappings":"AAAA,uDAAA,EAAyD,CACzD;;GAEG;;;;AACH,IAAY,6BA2CX;AA3CD,CAAA,SAAY,6BAA6B;IACrC,SAAA,EAAW,CACX,6BAAA,CAAA,6BAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAa,CAAA;IACb,aAAA,EAAe,CACf,6BAAA,CAAA,6BAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAiB,CAAA;IACjB,cAAA,EAAgB,CAChB,6BAAA,CAAA,6BAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAkB,CAAA;IAClB,QAAA,EAAU,CACV,6BAAA,CAAA,6BAAA,CAAA,MAAA,GAAA,EAAA,GAAA,KAAY,CAAA;IACZ,aAAA,EAAe,CACf,6BAAA,CAAA,6BAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAiB,CAAA;IACjB,UAAA,EAAY,CACZ,6BAAA,CAAA,6BAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAc,CAAA;IACd,oBAAA,EAAsB,CACtB,6BAAA,CAAA,6BAAA,CAAA,kBAAA,GAAA,EAAA,GAAA,iBAAwB,CAAA;IACxB,UAAA,EAAY,CACZ,6BAAA,CAAA,6BAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAc,CAAA;IACd,gBAAA,EAAkB,CAClB,6BAAA,CAAA,6BAAA,CAAA,cAAA,GAAA,EAAA,GAAA,aAAoB,CAAA;IACpB,UAAA,EAAY,CACZ,6BAAA,CAAA,6BAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAc,CAAA;IACd,oBAAA,EAAsB,CACtB,6BAAA,CAAA,6BAAA,CAAA,kBAAA,GAAA,GAAA,GAAA,iBAAwB,CAAA;IACxB,oBAAA,EAAsB,CACtB,6BAAA,CAAA,6BAAA,CAAA,kBAAA,GAAA,GAAA,GAAA,iBAAwB,CAAA;IACxB,kBAAA,EAAoB,CACpB,6BAAA,CAAA,6BAAA,CAAA,gBAAA,GAAA,GAAA,GAAA,eAAsB,CAAA;IACtB,kBAAA,EAAoB,CACpB,6BAAA,CAAA,6BAAA,CAAA,eAAA,GAAA,GAAA,GAAA,cAAqB,CAAA;IACrB,cAAA,EAAgB,CAChB,6BAAA,CAAA,6BAAA,CAAA,YAAA,GAAA,GAAA,GAAA,WAAkB,CAAA;IAClB,sBAAA,EAAwB,CACxB,6BAAA,CAAA,6BAAA,CAAA,mBAAA,GAAA,GAAA,GAAA,kBAAyB,CAAA;IACzB,eAAA,EAAiB,CACjB,6BAAA,CAAA,6BAAA,CAAA,YAAA,GAAA,GAAA,GAAA,WAAkB,CAAA;IAClB,sBAAA,EAAwB,CACxB,6BAAA,CAAA,6BAAA,CAAA,kBAAA,GAAA,GAAA,GAAA,iBAAwB,CAAA;IACxB,2BAAA,EAA6B,CAC7B,6BAAA,CAAA,6BAAA,CAAA,uBAAA,GAAA,GAAA,GAAA,sBAA6B,CAAA;IAC7B,SAAA,EAAW,CACX,6BAAA,CAAA,6BAAA,CAAA,OAAA,GAAA,GAAA,GAAA,MAAa,CAAA;IACb,oBAAA,EAAsB,CACtB,6BAAA,CAAA,6BAAA,CAAA,iBAAA,GAAA,GAAA,GAAA,gBAAuB,CAAA;AAC3B,CAAC,EA3CW,6BAA6B,IAAA,CAA7B,6BAA6B,GAAA,CAAA,CAAA,GA2CxC"}},
    {"offset": {"line": 700, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Enums/nodeParticleSystemSources.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Enums/nodeParticleSystemSources.ts"],"sourcesContent":["/**\r\n * Enum used to define system values e.g. values automatically provided by the system\r\n */\r\nexport enum NodeParticleSystemSources {\r\n    /** None */\r\n    None = 0,\r\n    /** Time */\r\n    Time = 1,\r\n    /** Delta time */\r\n    Delta = 2,\r\n    /** Emitter */\r\n    Emitter = 3,\r\n    /** Camera position */\r\n    CameraPosition = 4,\r\n}\r\n"],"names":[],"mappings":"AAAA;;GAEG;;;;AACH,IAAY,yBAWX;AAXD,CAAA,SAAY,yBAAyB;IACjC,SAAA,EAAW,CACX,yBAAA,CAAA,yBAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAQ,CAAA;IACR,SAAA,EAAW,CACX,yBAAA,CAAA,yBAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAQ,CAAA;IACR,eAAA,EAAiB,CACjB,yBAAA,CAAA,yBAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAS,CAAA;IACT,YAAA,EAAc,CACd,yBAAA,CAAA,yBAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAW,CAAA;IACX,oBAAA,EAAsB,CACtB,yBAAA,CAAA,yBAAA,CAAA,iBAAA,GAAA,EAAA,GAAA,gBAAkB,CAAA;AACtB,CAAC,EAXW,yBAAyB,IAAA,CAAzB,yBAAyB,GAAA,CAAA,CAAA,GAWpC"}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/nodeParticleBuildState.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/nodeParticleBuildState.ts"],"sourcesContent":["import type { Scene } from \"core/scene\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { AbstractMesh } from \"core/Meshes/abstractMesh\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\n\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleContextualSources } from \"core/Particles/Node/Enums/nodeParticleContextualSources\";\r\nimport { NodeParticleSystemSources } from \"core/Particles/Node/Enums/nodeParticleSystemSources\";\r\n\r\n/**\r\n * Class used to store node based geometry build state\r\n */\r\nexport class NodeParticleBuildState {\r\n    /**\r\n     * Gets the capactity of the particle system to build\r\n     */\r\n    public capacity: number;\r\n\r\n    /**\r\n     * Gets the scene where the particle system is built\r\n     */\r\n    public scene: Scene;\r\n\r\n    /** Gets or sets the build identifier */\r\n    public buildId: number;\r\n\r\n    /** Gets or sets the list of non connected mandatory inputs */\r\n    public notConnectedNonOptionalInputs: NodeParticleConnectionPoint[] = [];\r\n\r\n    /** Gets or sets a boolean indicating that verbose mode is on */\r\n    public verbose: boolean;\r\n\r\n    /**\r\n     * Gets or sets the particle context for contextual data\r\n     */\r\n    public particleContext: Nullable<Particle> = null;\r\n\r\n    /**\r\n     * Gets or sets the system context for contextual data\r\n     */\r\n    public systemContext: Nullable<ThinParticleSystem> = null;\r\n\r\n    /**\r\n     * Gets or sets the index of the gradient to use\r\n     */\r\n    public gradientIndex: number = 0;\r\n    /**\r\n     * Gets or sets next gradient in line\r\n     */\r\n    public nextGradientIndex: number = 0;\r\n    /**\r\n     * Gets or sets the next gradient value\r\n     */\r\n    public nextGradientValue: any;\r\n\r\n    /**\r\n     * Emits errors if any\r\n     */\r\n    public emitErrors() {\r\n        let errorMessage = \"\";\r\n\r\n        for (const notConnectedInput of this.notConnectedNonOptionalInputs) {\r\n            errorMessage += `input ${notConnectedInput.name} from block ${\r\n                notConnectedInput.ownerBlock.name\r\n            }[${notConnectedInput.ownerBlock.getClassName()}] is not connected and is not optional.\\n`;\r\n        }\r\n\r\n        if (errorMessage) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw \"Build of Node Particle System Set failed:\\n\" + errorMessage;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adapt a value to a target type\r\n     * @param source defines the value to adapt\r\n     * @param targetType defines the target type\r\n     * @returns the adapted value\r\n     */\r\n    adapt(source: NodeParticleConnectionPoint, targetType: NodeParticleBlockConnectionPointTypes) {\r\n        const value = source.getConnectedValue(this) || 0;\r\n\r\n        if (source.type === targetType) {\r\n            return value;\r\n        }\r\n\r\n        switch (targetType) {\r\n            case NodeParticleBlockConnectionPointTypes.Vector2:\r\n                return new Vector2(value, value);\r\n            case NodeParticleBlockConnectionPointTypes.Vector3:\r\n                return new Vector3(value, value, value);\r\n            case NodeParticleBlockConnectionPointTypes.Color4:\r\n                return new Color4(value, value, value, value);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the value associated with a contextual source\r\n     * @param source Source of the contextual value\r\n     * @returns the value associated with the source\r\n     */\r\n    public getContextualValue(source: NodeParticleContextualSources) {\r\n        if (!this.particleContext || !this.systemContext) {\r\n            return null;\r\n        }\r\n\r\n        switch (source) {\r\n            case NodeParticleContextualSources.Position:\r\n                return this.particleContext.position;\r\n            case NodeParticleContextualSources.Direction:\r\n                return this.particleContext.direction;\r\n            case NodeParticleContextualSources.DirectionScale:\r\n                return this.particleContext._directionScale;\r\n            case NodeParticleContextualSources.ScaledDirection:\r\n                this.particleContext.direction.scaleToRef(this.particleContext._directionScale, this.particleContext._scaledDirection);\r\n                return this.particleContext._scaledDirection;\r\n            case NodeParticleContextualSources.Color:\r\n                return this.particleContext.color;\r\n            case NodeParticleContextualSources.InitialColor:\r\n                return this.particleContext.initialColor;\r\n            case NodeParticleContextualSources.ColorDead:\r\n                return this.particleContext.colorDead;\r\n            case NodeParticleContextualSources.Age:\r\n                return this.particleContext.age;\r\n            case NodeParticleContextualSources.Lifetime:\r\n                return this.particleContext.lifeTime;\r\n            case NodeParticleContextualSources.Angle:\r\n                return this.particleContext.angle;\r\n            case NodeParticleContextualSources.Scale:\r\n                return this.particleContext.scale;\r\n            case NodeParticleContextualSources.Size:\r\n                return this.particleContext.size;\r\n            case NodeParticleContextualSources.AgeGradient:\r\n                return this.particleContext.age / this.particleContext.lifeTime;\r\n            case NodeParticleContextualSources.SpriteCellEnd:\r\n                return this.systemContext.endSpriteCellID;\r\n            case NodeParticleContextualSources.SpriteCellIndex:\r\n                return this.particleContext.cellIndex;\r\n            case NodeParticleContextualSources.SpriteCellStart:\r\n                return this.systemContext.startSpriteCellID;\r\n            case NodeParticleContextualSources.InitialDirection:\r\n                return this.particleContext._initialDirection;\r\n            case NodeParticleContextualSources.ColorStep:\r\n                return this.particleContext.colorStep;\r\n            case NodeParticleContextualSources.ScaledColorStep:\r\n                this.particleContext.colorStep.scaleToRef(this.systemContext._scaledUpdateSpeed, this.systemContext._scaledColorStep);\r\n                return this.systemContext._scaledColorStep;\r\n            case NodeParticleContextualSources.LocalPositionUpdated:\r\n                this.particleContext.direction.scaleToRef(this.particleContext._directionScale, this.particleContext._scaledDirection);\r\n                this.particleContext._localPosition!.addInPlace(this.particleContext._scaledDirection);\r\n                Vector3.TransformCoordinatesToRef(this.particleContext._localPosition!, this.systemContext._emitterWorldMatrix, this.particleContext.position);\r\n                return this.particleContext.position;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the emitter world matrix\r\n     */\r\n    public get emitterWorldMatrix() {\r\n        if (!this.systemContext) {\r\n            return null;\r\n        }\r\n        return this.systemContext._emitterWorldMatrix;\r\n    }\r\n\r\n    /**\r\n     * Gets the emitter inverse world matrix\r\n     */\r\n    public get emitterInverseWorldMatrix() {\r\n        if (!this.systemContext) {\r\n            return null;\r\n        }\r\n        return this.systemContext._emitterInverseWorldMatrix;\r\n    }\r\n\r\n    /**\r\n     * Gets the emitter position\r\n     */\r\n    public get emitterPosition(): Nullable<Vector3> {\r\n        if (!this.systemContext) {\r\n            return null;\r\n        }\r\n\r\n        if (!this.systemContext.emitter) {\r\n            return null;\r\n        }\r\n\r\n        if (this.systemContext.emitter instanceof Vector3) {\r\n            return this.systemContext.emitter;\r\n        }\r\n\r\n        return (<AbstractMesh>this.systemContext.emitter).absolutePosition;\r\n    }\r\n\r\n    /**\r\n     * Gets the value associated with a system source\r\n     * @param source Source of the system value\r\n     * @returns the value associated with the source\r\n     */\r\n    public getSystemValue(source: NodeParticleSystemSources) {\r\n        if (!this.systemContext) {\r\n            return null;\r\n        }\r\n\r\n        switch (source) {\r\n            case NodeParticleSystemSources.Time:\r\n                return this.systemContext._actualFrame;\r\n            case NodeParticleSystemSources.Delta:\r\n                return this.systemContext._scaledUpdateSpeed;\r\n            case NodeParticleSystemSources.Emitter:\r\n                return this.emitterPosition;\r\n            case NodeParticleSystemSources.CameraPosition:\r\n                return this.scene.activeCamera?.globalPosition || Vector3.Zero();\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Triggers/triggerTools.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Triggers/triggerTools.ts"],"sourcesContent":["import type { Scene } from \"core/scene\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport type { SystemBlock } from \"../systemBlock\";\r\nimport { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\n\r\n/**\r\n * @internal\r\n * Tools for managing particle triggers and sub-emitter systems.\r\n */\r\nexport function _TriggerSubEmitter(template: SystemBlock, scene: Scene, location: Vector3): ParticleSystem {\r\n    const newState = new NodeParticleBuildState();\r\n    newState.scene = scene;\r\n    const clone = template.createSystem(newState);\r\n    clone.canStart = () => true; // Allow the cloned system to start\r\n    clone.emitter = location.clone(); // Set the emitter to the particle's position\r\n    clone.disposeOnStop = true; // Clean up the system when it stops\r\n    clone.start();\r\n\r\n    return clone;\r\n}\r\n"],"names":[],"mappings":";;;;AAGA,OAAO,EAAE,sBAAsB,EAAE,MAAM,8BAA8B,CAAC;;AAOhE,SAAU,kBAAkB,CAAC,QAAqB,EAAE,KAAY,EAAE,QAAiB;IACrF,MAAM,QAAQ,GAAG,IAAI,gRAAsB,EAAE,CAAC;IAC9C,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,MAAM,KAAK,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;IAC9C,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAG,CAAD,GAAK,CAAC,CAAC,mCAAmC;IAChE,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,6CAA6C;IAC/E,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,oCAAoC;IAChE,KAAK,CAAC,KAAK,EAAE,CAAC;IAEd,OAAO,KAAK,CAAC;AACjB,CAAC"}},
    {"offset": {"line": 912, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/systemBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/systemBlock.ts"],"sourcesContent":["import type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\n\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { BaseParticleSystem } from \"core/Particles/baseParticleSystem\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { _TriggerSubEmitter } from \"core/Particles/Node/Blocks/Triggers/triggerTools\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\n\r\n/**\r\n * Block used to get a system of particles\r\n */\r\nexport class SystemBlock extends NodeParticleBlock {\r\n    private static _IdCounter = 0;\r\n\r\n    /**\r\n     * Gets or sets the blend mode for the particle system\r\n     */\r\n    @editableInPropertyPage(\"Blend mode\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        notifiers: { rebuild: true },\r\n        embedded: true,\r\n        options: [\r\n            { label: \"OneOne\", value: BaseParticleSystem.BLENDMODE_ONEONE },\r\n            { label: \"Standard\", value: BaseParticleSystem.BLENDMODE_STANDARD },\r\n            { label: \"Add\", value: BaseParticleSystem.BLENDMODE_ADD },\r\n            { label: \"Multiply\", value: BaseParticleSystem.BLENDMODE_MULTIPLY },\r\n            { label: \"MultiplyAdd\", value: BaseParticleSystem.BLENDMODE_MULTIPLYADD },\r\n        ],\r\n    })\r\n    public blendMode = BaseParticleSystem.BLENDMODE_ONEONE;\r\n\r\n    /**\r\n     * Gets or sets the epsilon value used for comparison\r\n     */\r\n    @editableInPropertyPage(\"Capacity\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0, max: 10000 })\r\n    public capacity = 1000;\r\n\r\n    /**\r\n     * Gets or sets the manual emit count\r\n     */\r\n    @editableInPropertyPage(\"Manual emit count\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: -1 })\r\n    public manualEmitCount = -1;\r\n\r\n    /**\r\n     * Gets or sets the target stop duration for the particle system\r\n     */\r\n    @editableInPropertyPage(\"Delay start(ms)\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public startDelay = 0;\r\n\r\n    /**\r\n     * Gets or sets the target stop duration for the particle system\r\n     */\r\n    @editableInPropertyPage(\"updateSpeed\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0, max: 0.1 })\r\n    public updateSpeed = 0.0167;\r\n\r\n    /**\r\n     * Gets or sets the number of pre-warm cycles before rendering the particle system\r\n     */\r\n    @editableInPropertyPage(\"Pre-warm cycles\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public preWarmCycles = 0;\r\n\r\n    /**\r\n     * Gets or sets the time step multiplier used for pre-warm\r\n     */\r\n    @editableInPropertyPage(\"Pre-warm step multiplier\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public preWarmStepOffset = 0;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the system is billboard based\r\n     */\r\n    @editableInPropertyPage(\"Is billboard based\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public isBillboardBased = true;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the system coordinate space is local or global\r\n     */\r\n    @editableInPropertyPage(\"Is local\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public isLocal = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the system should be disposed when stopped\r\n     */\r\n    @editableInPropertyPage(\"Dispose on stop\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public disposeOnStop = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the system should not start automatically\r\n     */\r\n    @editableInPropertyPage(\"Do no start\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public doNoStart = false;\r\n\r\n    /** @internal */\r\n    public _internalId = SystemBlock._IdCounter++;\r\n\r\n    /**\r\n     * Create a new SystemBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this._isSystem = true;\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"emitRate\", NodeParticleBlockConnectionPointTypes.Int, true, 10, 0);\r\n        this.registerInput(\"texture\", NodeParticleBlockConnectionPointTypes.Texture);\r\n        this.registerInput(\"translationPivot\", NodeParticleBlockConnectionPointTypes.Vector2, true);\r\n        this.registerInput(\"textureMask\", NodeParticleBlockConnectionPointTypes.Color4, true);\r\n        this.registerInput(\"targetStopDuration\", NodeParticleBlockConnectionPointTypes.Float, true, 0, 0);\r\n        this.registerInput(\"onStart\", NodeParticleBlockConnectionPointTypes.System, true);\r\n        this.registerInput(\"onEnd\", NodeParticleBlockConnectionPointTypes.System, true);\r\n        this.registerOutput(\"system\", NodeParticleBlockConnectionPointTypes.System);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"SystemBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle input component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the emitRate input component\r\n     */\r\n    public get emitRate(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the texture input component\r\n     */\r\n    public get texture(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the translationPivot input component\r\n     */\r\n    public get translationPivot(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the textureMask input component\r\n     */\r\n    public get textureMask(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the targetStopDuration input component\r\n     */\r\n    public get targetStopDuration(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the onStart input component\r\n     */\r\n    public get onStart(): NodeParticleConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the onEnd input component\r\n     */\r\n    public get onEnd(): NodeParticleConnectionPoint {\r\n        return this._inputs[7];\r\n    }\r\n\r\n    /**\r\n     * Gets the system output component\r\n     */\r\n    public get system(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block and return a functional particle system\r\n     * @param state defines the building state\r\n     * @returns the built particle system\r\n     */\r\n    public createSystem(state: NodeParticleBuildState): ParticleSystem {\r\n        state.capacity = this.capacity;\r\n        state.buildId = this._buildId++;\r\n\r\n        this.build(state);\r\n\r\n        const particleSystem = this.particle.getConnectedValue(state) as ParticleSystem;\r\n        particleSystem.particleTexture = this.texture.getConnectedValue(state);\r\n        particleSystem.emitRate = this.emitRate.getConnectedValue(state) as number;\r\n        particleSystem.manualEmitCount = this.manualEmitCount;\r\n        particleSystem.updateSpeed = this.updateSpeed;\r\n        particleSystem.preWarmCycles = this.preWarmCycles;\r\n        particleSystem.preWarmStepOffset = this.preWarmStepOffset;\r\n        particleSystem.blendMode = this.blendMode;\r\n        particleSystem.name = this.name;\r\n        particleSystem._targetStopDuration = (this.targetStopDuration.getConnectedValue(state) as number) ?? 0;\r\n        particleSystem.startDelay = this.startDelay;\r\n        particleSystem.isBillboardBased = this.isBillboardBased;\r\n        particleSystem.translationPivot = (this.translationPivot.getConnectedValue(state) as Vector2) || Vector2.Zero();\r\n        particleSystem.textureMask = this.textureMask.getConnectedValue(state) ?? new Color4(1, 1, 1, 1);\r\n        particleSystem.isLocal = this.isLocal;\r\n        particleSystem.disposeOnStop = this.disposeOnStop;\r\n\r\n        // The emit rate can vary if it is connected to another block like a gradient\r\n        particleSystem._calculateEmitRate = () => {\r\n            state.systemContext = particleSystem;\r\n            return this.emitRate.getConnectedValue(state) as number;\r\n        };\r\n\r\n        this.system._storedValue = this;\r\n\r\n        particleSystem.canStart = () => {\r\n            return !this.doNoStart;\r\n        };\r\n\r\n        particleSystem.onStartedObservable.add((system) => {\r\n            // Triggers\r\n            const onStartSystem = this.onStart.getConnectedValue(state);\r\n            if (onStartSystem) {\r\n                system.onStartedObservable.addOnce(() => {\r\n                    state.systemContext = particleSystem;\r\n                    const clone = _TriggerSubEmitter(onStartSystem, state.scene, state.emitterPosition!);\r\n\r\n                    this.onDisposeObservable.addOnce(() => {\r\n                        // Clean up the cloned system when the original system is disposed\r\n                        clone.dispose();\r\n                    });\r\n                });\r\n            }\r\n\r\n            const onEndSystem = this.onEnd.getConnectedValue(state);\r\n            if (onEndSystem) {\r\n                system.onStoppedObservable.addOnce(() => {\r\n                    state.systemContext = particleSystem;\r\n                    const clone = _TriggerSubEmitter(onEndSystem, state.scene, state.emitterPosition!);\r\n\r\n                    this.onDisposeObservable.addOnce(() => {\r\n                        // Clean up the cloned system when the original system is disposed\r\n                        clone.dispose();\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        this.onDisposeObservable.addOnce(() => {\r\n            particleSystem.dispose();\r\n        });\r\n\r\n        // Return\r\n        return particleSystem;\r\n    }\r\n\r\n    /**\r\n     * Serializes the system block\r\n     * @returns The serialized object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.capacity = this.capacity;\r\n        serializationObject.manualEmitCount = this.manualEmitCount;\r\n        serializationObject.blendMode = this.blendMode;\r\n        serializationObject.updateSpeed = this.updateSpeed;\r\n        serializationObject.preWarmCycles = this.preWarmCycles;\r\n        serializationObject.preWarmStepOffset = this.preWarmStepOffset;\r\n        serializationObject.isBillboardBased = this.isBillboardBased;\r\n        serializationObject.isLocal = this.isLocal;\r\n        serializationObject.disposeOnStop = this.disposeOnStop;\r\n        serializationObject.doNoStart = this.doNoStart;\r\n        serializationObject.startDelay = this.startDelay;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Deserializes the system block\r\n     * @param serializationObject The serialized system\r\n     */\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.capacity = serializationObject.capacity;\r\n        this.manualEmitCount = serializationObject.manualEmitCount ?? -1;\r\n        this.updateSpeed = serializationObject.updateSpeed ?? 0.0167;\r\n        this.preWarmCycles = serializationObject.preWarmCycles ?? 0;\r\n        this.preWarmStepOffset = serializationObject.preWarmStepOffset ?? 0;\r\n        this.isBillboardBased = serializationObject.isBillboardBased ?? true;\r\n        this.isLocal = serializationObject.isLocal ?? false;\r\n        this.disposeOnStop = serializationObject.disposeOnStop ?? false;\r\n        this.doNoStart = !!serializationObject.doNoStart;\r\n\r\n        if (serializationObject.emitRate !== undefined) {\r\n            this.emitRate.value = serializationObject.emitRate;\r\n        }\r\n\r\n        if (serializationObject.blendMode !== undefined) {\r\n            this.blendMode = serializationObject.blendMode;\r\n        }\r\n\r\n        if (serializationObject.startDelay !== undefined) {\r\n            this.startDelay = serializationObject.startDelay;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.SystemBlock\", SystemBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1267, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleInputBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleInputBlock.ts"],"sourcesContent":["import { Observable } from \"../../../Misc/observable\";\r\nimport { GetClass, RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { Matrix, Vector2, Vector3 } from \"../../../Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { NodeParticleContextualSources } from \"../Enums/nodeParticleContextualSources\";\r\nimport { NodeParticleSystemSources } from \"../Enums/nodeParticleSystemSources\";\r\n\r\n/**\r\n * Block used to expose an input value\r\n */\r\nexport class ParticleInputBlock extends NodeParticleBlock {\r\n    private _storedValue: any;\r\n    private _valueCallback: () => any;\r\n    private _type: NodeParticleBlockConnectionPointTypes = NodeParticleBlockConnectionPointTypes.Undefined;\r\n\r\n    /** Gets or set a value used to limit the range of float values */\r\n    public min: number = 0;\r\n\r\n    /** Gets or set a value used to limit the range of float values */\r\n    public max: number = 0;\r\n\r\n    /** Gets or sets the group to use to display this block in the Inspector */\r\n    public groupInInspector = \"\";\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this input is displayed in the Inspector\r\n     */\r\n    public displayInInspector = true;\r\n\r\n    /** Gets an observable raised when the value is changed */\r\n    public onValueChangedObservable = new Observable<ParticleInputBlock>();\r\n\r\n    /**\r\n     * Gets or sets the connection point type (default is float)\r\n     */\r\n    public get type(): NodeParticleBlockConnectionPointTypes {\r\n        if (this._type === NodeParticleBlockConnectionPointTypes.AutoDetect) {\r\n            if (this.value != null) {\r\n                if (!isNaN(this.value)) {\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Float;\r\n                    return this._type;\r\n                }\r\n\r\n                switch (this.value.getClassName()) {\r\n                    case \"Vector2\":\r\n                        this._type = NodeParticleBlockConnectionPointTypes.Vector2;\r\n                        return this._type;\r\n                    case \"Vector3\":\r\n                        this._type = NodeParticleBlockConnectionPointTypes.Vector3;\r\n                        return this._type;\r\n                    case \"Color4\":\r\n                        this._type = NodeParticleBlockConnectionPointTypes.Color4;\r\n                        return this._type;\r\n                    case \"Matrix\":\r\n                        this._type = NodeParticleBlockConnectionPointTypes.Matrix;\r\n                        return this._type;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this._type;\r\n    }\r\n\r\n    /** @internal */\r\n    private _systemSource: NodeParticleSystemSources = NodeParticleSystemSources.None;\r\n\r\n    /**\r\n     * Gets a boolean indicating that the current connection point is a system source\r\n     */\r\n    public get isSystemSource(): boolean {\r\n        return this._contextualSource === NodeParticleContextualSources.None && this._systemSource !== NodeParticleSystemSources.None;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the system source used by this input block\r\n     */\r\n    public get systemSource(): NodeParticleSystemSources {\r\n        return this._systemSource;\r\n    }\r\n\r\n    public set systemSource(value: NodeParticleSystemSources) {\r\n        this._systemSource = value;\r\n\r\n        if (value !== NodeParticleSystemSources.None) {\r\n            this._contextualSource = NodeParticleContextualSources.None;\r\n            this._type = NodeParticleBlockConnectionPointTypes.Float;\r\n\r\n            switch (value) {\r\n                case NodeParticleSystemSources.Time:\r\n                case NodeParticleSystemSources.Delta:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Float;\r\n                    break;\r\n                case NodeParticleSystemSources.Emitter:\r\n                case NodeParticleSystemSources.CameraPosition:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Vector3;\r\n                    break;\r\n            }\r\n\r\n            if (this.output) {\r\n                this.output.type = this._type;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _contextualSource = NodeParticleContextualSources.None;\r\n    /**\r\n     * Gets a boolean indicating that the current connection point is a contextual value\r\n     */\r\n    public get isContextual(): boolean {\r\n        return this._contextualSource !== NodeParticleContextualSources.None;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the current contextual value\r\n     */\r\n    public get contextualValue(): NodeParticleContextualSources {\r\n        return this._contextualSource;\r\n    }\r\n\r\n    public set contextualValue(value: NodeParticleContextualSources) {\r\n        this._contextualSource = value;\r\n\r\n        if (value !== NodeParticleContextualSources.None) {\r\n            this._systemSource = NodeParticleSystemSources.None;\r\n\r\n            switch (value) {\r\n                case NodeParticleContextualSources.Scale:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Vector2;\r\n                    break;\r\n                case NodeParticleContextualSources.Position:\r\n                case NodeParticleContextualSources.Direction:\r\n                case NodeParticleContextualSources.ScaledDirection:\r\n                case NodeParticleContextualSources.InitialDirection:\r\n                case NodeParticleContextualSources.LocalPositionUpdated:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Vector3;\r\n                    break;\r\n                case NodeParticleContextualSources.Color:\r\n                case NodeParticleContextualSources.InitialColor:\r\n                case NodeParticleContextualSources.ColorDead:\r\n                case NodeParticleContextualSources.ColorStep:\r\n                case NodeParticleContextualSources.ScaledColorStep:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Color4;\r\n                    break;\r\n                case NodeParticleContextualSources.Age:\r\n                case NodeParticleContextualSources.Lifetime:\r\n                case NodeParticleContextualSources.Angle:\r\n                case NodeParticleContextualSources.AgeGradient:\r\n                case NodeParticleContextualSources.Size:\r\n                case NodeParticleContextualSources.DirectionScale:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Float;\r\n                    break;\r\n                case NodeParticleContextualSources.SpriteCellEnd:\r\n                case NodeParticleContextualSources.SpriteCellStart:\r\n                case NodeParticleContextualSources.SpriteCellIndex:\r\n                    this._type = NodeParticleBlockConnectionPointTypes.Int;\r\n                    break;\r\n            }\r\n\r\n            if (this.output) {\r\n                this.output.type = this._type;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new InputBlock\r\n     * @param name defines the block name\r\n     * @param type defines the type of the input (can be set to NodeParticleBlockConnectionPointTypes.AutoDetect)\r\n     */\r\n    public constructor(name: string, type: NodeParticleBlockConnectionPointTypes = NodeParticleBlockConnectionPointTypes.AutoDetect) {\r\n        super(name);\r\n\r\n        this._type = type;\r\n        this._isInput = true;\r\n        this._storedValue = null;\r\n\r\n        this.setDefaultValue();\r\n\r\n        this.registerOutput(\"output\", type);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the value of that point.\r\n     * Please note that this value will be ignored if valueCallback is defined\r\n     */\r\n    public get value(): any {\r\n        return this._storedValue;\r\n    }\r\n\r\n    public set value(value: any) {\r\n        if (this.type === NodeParticleBlockConnectionPointTypes.Float) {\r\n            if (this.min !== this.max) {\r\n                value = Math.max(this.min, value);\r\n                value = Math.min(this.max, value);\r\n            }\r\n        }\r\n\r\n        this._storedValue = value;\r\n\r\n        this.onValueChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a callback used to get the value of that point.\r\n     * Please note that setting this value will force the connection point to ignore the value property\r\n     */\r\n    public get valueCallback(): () => any {\r\n        return this._valueCallback;\r\n    }\r\n\r\n    public set valueCallback(value: () => any) {\r\n        this._valueCallback = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleInputBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Set the input block to its default value (based on its type)\r\n     */\r\n    public setDefaultValue() {\r\n        switch (this.type) {\r\n            case NodeParticleBlockConnectionPointTypes.Int:\r\n            case NodeParticleBlockConnectionPointTypes.Float:\r\n                this.value = 0;\r\n                break;\r\n            case NodeParticleBlockConnectionPointTypes.Vector2:\r\n                this.value = Vector2.Zero();\r\n                break;\r\n            case NodeParticleBlockConnectionPointTypes.Vector3:\r\n                this.value = Vector3.Zero();\r\n                break;\r\n            case NodeParticleBlockConnectionPointTypes.Color4:\r\n                this.value = new Color4(1, 1, 1, 1);\r\n                break;\r\n            case NodeParticleBlockConnectionPointTypes.Matrix:\r\n                this.value = Matrix.Identity();\r\n                break;\r\n        }\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n\r\n        if (this.isSystemSource) {\r\n            this.output._storedValue = null;\r\n            this.output._storedFunction = (state) => {\r\n                return state.getSystemValue(this._systemSource);\r\n            };\r\n        } else if (this.isContextual) {\r\n            this.output._storedValue = null;\r\n            this.output._storedFunction = (state) => {\r\n                return state.getContextualValue(this._contextualSource);\r\n            };\r\n        } else {\r\n            this.output._storedValue = this.value;\r\n            // As a function to let the user dynamically change the value at runtime\r\n            this.output._storedFunction = () => {\r\n                return this.value;\r\n            };\r\n        }\r\n    }\r\n\r\n    public override dispose() {\r\n        this.onValueChangedObservable.clear();\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.type = this.type;\r\n        serializationObject.contextualValue = this.contextualValue;\r\n        serializationObject.systemSource = this.systemSource;\r\n        serializationObject.min = this.min;\r\n        serializationObject.max = this.max;\r\n        serializationObject.groupInInspector = this.groupInInspector;\r\n        serializationObject.displayInInspector = this.displayInInspector;\r\n\r\n        if (this._storedValue !== null && !this.isContextual && !this.isSystemSource) {\r\n            if (this._storedValue.asArray) {\r\n                serializationObject.valueType = \"BABYLON.\" + this._storedValue.getClassName();\r\n                serializationObject.value = this._storedValue.asArray();\r\n            } else {\r\n                serializationObject.valueType = \"number\";\r\n                serializationObject.value = this._storedValue;\r\n            }\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this._type = serializationObject.type;\r\n        this.contextualValue = serializationObject.contextualValue;\r\n        this.systemSource = serializationObject.systemSource || NodeParticleSystemSources.None;\r\n\r\n        this.min = serializationObject.min || 0;\r\n        this.max = serializationObject.max || 0;\r\n        this.groupInInspector = serializationObject.groupInInspector || \"\";\r\n        if (serializationObject.displayInInspector !== undefined) {\r\n            this.displayInInspector = serializationObject.displayInInspector;\r\n        }\r\n\r\n        if (!serializationObject.valueType) {\r\n            return;\r\n        }\r\n\r\n        if (serializationObject.valueType === \"number\") {\r\n            this._storedValue = serializationObject.value;\r\n        } else {\r\n            const valueType = GetClass(serializationObject.valueType);\r\n\r\n            if (valueType) {\r\n                this._storedValue = valueType.FromArray(serializationObject.value);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleInputBlock\", ParticleInputBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleSourceTextureBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleSourceTextureBlock.ts"],"sourcesContent":["import { Texture } from \"core/Materials/Textures/texture\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { TextureTools } from \"core/Misc/textureTools\";\r\nimport type { BaseTexture } from \"../../../Materials/Textures/baseTexture\";\r\n\r\n/**\r\n * Block used to provide a texture for particles in a particle system\r\n */\r\nexport class ParticleTextureSourceBlock extends NodeParticleBlock {\r\n    private _url: string = \"\";\r\n    private _textureDataUrl: string = \"\";\r\n    private _sourceTexture: Nullable<BaseTexture> = null;\r\n    private _cachedData: Nullable<{\r\n        width: number;\r\n        height: number;\r\n        data: Uint8ClampedArray;\r\n    }> = null;\r\n\r\n    /**\r\n     * Indicates if the texture data should be serialized as a base64 string.\r\n     */\r\n    public serializedCachedData: boolean = false;\r\n\r\n    /**\r\n     * Gets or sets the URL of the texture to be used by this block.\r\n     */\r\n    public get url(): string {\r\n        return this._url;\r\n    }\r\n\r\n    public set url(value: string) {\r\n        if (this._url === value) {\r\n            return;\r\n        }\r\n        this._cachedData = null;\r\n        this._url = value;\r\n        this._textureDataUrl = \"\";\r\n        this._sourceTexture = null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the data URL of the texture to be used by this block.\r\n     * This is a base64 encoded string representing the texture data.\r\n     */\r\n    public get textureDataUrl(): string {\r\n        return this._textureDataUrl;\r\n    }\r\n\r\n    public set textureDataUrl(value: string) {\r\n        if (this._textureDataUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._cachedData = null;\r\n        this._textureDataUrl = value;\r\n        this._url = \"\";\r\n        this._sourceTexture = null;\r\n    }\r\n\r\n    /**\r\n     * Directly sets the texture to be used by this block.\r\n     * This value will not be serialized.\r\n     */\r\n    public set sourceTexture(value: Nullable<BaseTexture>) {\r\n        if (this._sourceTexture === value) {\r\n            return;\r\n        }\r\n        this._cachedData = null;\r\n        this._sourceTexture = value;\r\n        this._url = (value as Texture).url || \"\";\r\n        this._textureDataUrl = \"\";\r\n    }\r\n\r\n    /**\r\n     * Create a new ParticleTextureSourceBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerOutput(\"texture\", NodeParticleBlockConnectionPointTypes.Texture);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleTextureSourceBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the texture output component\r\n     */\r\n    public get texture(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the texture content as a promise\r\n     * @returns a promise that resolves to the texture content, including width, height, and pixel data\r\n     */\r\n    async extractTextureContentAsync() {\r\n        if (!this.texture._storedValue && !this._sourceTexture) {\r\n            return null;\r\n        }\r\n\r\n        if (this._cachedData) {\r\n            return this._cachedData;\r\n        }\r\n\r\n        const texture = this.texture._storedValue || this._sourceTexture;\r\n        return await new Promise<\r\n            Nullable<{\r\n                width: number;\r\n                height: number;\r\n                data: Uint8ClampedArray;\r\n            }>\r\n        >((resolve, reject) => {\r\n            if (!texture.isReady()) {\r\n                // eslint-disable-next-line @typescript-eslint/no-misused-promises\r\n                texture.onLoadObservable.addOnce(async () => {\r\n                    try {\r\n                        this._cachedData = await this.extractTextureContentAsync();\r\n                        resolve(this._cachedData);\r\n                    } catch (e) {\r\n                        // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                        reject(e);\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n            const size = texture.getSize();\r\n            TextureTools.GetTextureDataAsync(texture, size.width, size.height)\r\n                // eslint-disable-next-line github/no-then\r\n                .then((data) => {\r\n                    this._cachedData = {\r\n                        width: size.width,\r\n                        height: size.height,\r\n                        data: new Uint8ClampedArray(data),\r\n                    };\r\n                    texture.dispose();\r\n                    resolve(this._cachedData);\r\n                })\r\n                // eslint-disable-next-line github/no-then\r\n                .catch(reject);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        if (this._sourceTexture) {\r\n            this.texture._storedValue = this._sourceTexture;\r\n            return;\r\n        }\r\n\r\n        if (!this._textureDataUrl && !this._url) {\r\n            this.texture._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        if (this._textureDataUrl) {\r\n            this.texture._storedValue = new Texture(this._textureDataUrl, state.scene);\r\n            return;\r\n        }\r\n\r\n        this.texture._storedValue = new Texture(this._url, state.scene);\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.url = this.url;\r\n        serializationObject.serializedCachedData = this.serializedCachedData;\r\n\r\n        if (this.serializedCachedData) {\r\n            serializationObject.textureDataUrl = this.textureDataUrl;\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.url = serializationObject.url;\r\n        this.serializedCachedData = !!serializationObject.serializedCachedData;\r\n\r\n        if (serializationObject.textureDataUrl) {\r\n            this.textureDataUrl = serializationObject.textureDataUrl;\r\n        }\r\n    }\r\n\r\n    public override dispose(): void {\r\n        if (!this._sourceTexture) {\r\n            if (this.texture._storedValue) {\r\n                this.texture._storedValue.dispose();\r\n                this.texture._storedValue = null;\r\n            }\r\n        }\r\n        super.dispose();\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleTextureSourceBlock\", ParticleTextureSourceBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,+CAAwC;AAC1D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,qCAAqC,EAAE,MAAM,gDAAgD,CAAC;AACvG,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AAIzD,OAAO,EAAE,YAAY,EAAE,sCAA+B;;;;;;AAMhD,MAAO,0BAA2B,SAAQ,sQAAiB;IAe7D;;OAEG,CACH,IAAW,GAAG,GAAA;QACV,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAW,GAAG,CAAC,KAAa,EAAA;QACxB,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;YACtB,OAAO;QACX,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED;;;OAGG,CACH,IAAW,cAAc,GAAA;QACrB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED,IAAW,cAAc,CAAC,KAAa,EAAA;QACnC,IAAI,IAAI,CAAC,eAAe,KAAK,KAAK,EAAE,CAAC;YACjC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED;;;OAGG,CACH,IAAW,aAAa,CAAC,KAA4B,EAAA;QACjD,IAAI,IAAI,CAAC,cAAc,KAAK,KAAK,EAAE,CAAC;YAChC,OAAO;QACX,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,IAAI,GAAI,KAAiB,CAAC,GAAG,IAAI,EAAE,CAAC;QACzC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QArER,IAAA,CAAA,IAAI,GAAW,EAAE,CAAC;QAClB,IAAA,CAAA,eAAe,GAAW,EAAE,CAAC;QAC7B,IAAA,CAAA,cAAc,GAA0B,IAAI,CAAC;QAC7C,IAAA,CAAA,WAAW,GAId,IAAI,CAAC;QAEV;;WAEG,CACI,IAAA,CAAA,oBAAoB,GAAY,KAAK,CAAC;QA2DzC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;IAClF,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,4BAA4B,CAAC;IACxC,CAAC;IAED;;OAEG,CACH,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACH,KAAK,CAAC,0BAA0B,GAAA;QAC5B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YACrD,OAAO,IAAI,CAAC;QAChB,CAAC;QAED,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC;QACjE,OAAO,MAAM,IAAI,OAAO,CAMtB,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YAClB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;gBACrB,kEAAkE;gBAClE,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;oBACxC,IAAI,CAAC;wBACD,IAAI,CAAC,WAAW,GAAG,MAAM,IAAI,CAAC,0BAA0B,EAAE,CAAC;wBAC3D,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBAC9B,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;wBACT,2EAA2E;wBAC3E,MAAM,CAAC,CAAC,CAAC,CAAC;oBACd,CAAC;gBACL,CAAC,CAAC,CAAC;gBACH,OAAO;YACX,CAAC;YACD,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YAC/B,+OAAY,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,AAC9D,0CAA0C;aACzC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBACX,IAAI,CAAC,WAAW,GAAG;oBACf,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,IAAI,EAAE,IAAI,iBAAiB,CAAC,IAAI,CAAC;iBACpC,CAAC;gBACF,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC9B,CAAC,CAAC,AACF,0CAA0C;aACzC,KAAK,CAAC,MAAM,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC;YAChD,OAAO;QACX,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACtC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;YACjC,OAAO;QACX,CAAC;QAED,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,sPAAO,CAAC,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;YAC3E,OAAO;QACX,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,sPAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;IACpE,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE9C,mBAAmB,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACnC,mBAAmB,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAErE,IAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,mBAAmB,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;QAC7D,CAAC;QAED,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAExC,IAAI,CAAC,GAAG,GAAG,mBAAmB,CAAC,GAAG,CAAC;QACnC,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,mBAAmB,CAAC,oBAAoB,CAAC;QAEvE,IAAI,mBAAmB,CAAC,cAAc,EAAE,CAAC;YACrC,IAAI,CAAC,cAAc,GAAG,mBAAmB,CAAC,cAAc,CAAC;QAC7D,CAAC;IACL,CAAC;IAEe,OAAO,GAAA;QACnB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;gBAC5B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;gBACpC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;YACrC,CAAC;QACL,CAAC;QACD,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;CACJ;IAED,6OAAa,EAAC,oCAAoC,EAAE,0BAA0B,CAAC,CAAC"}},
    {"offset": {"line": 1719, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updatePositionBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updatePositionBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * Block used to update the position of a particle\r\n */\r\nexport class UpdatePositionBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateDirectionBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"position\", NodeParticleBlockConnectionPointTypes.Vector3);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the position input component\r\n     */\r\n    public get position(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdatePositionBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.position.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processPosition = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.position.copyFrom(this.position.getConnectedValue(state) as Vector3);\r\n        };\r\n\r\n        const positionProcessing = {\r\n            process: processPosition,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(positionProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = positionProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdatePositionBlock\", UpdatePositionBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAMjE,MAAO,mBAAoB,SAAQ,sQAAiB;IACtD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,qBAAqB,CAAC;IACjC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAC5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;YAC7B,OAAO;QACX,CAAC;QAED,MAAM,eAAe,GAAG,CAAC,QAAkB,EAAE,EAAE;YAC3C,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAY,CAAC,CAAC;QAClF,CAAC,CAAC;QAEF,MAAM,kBAAkB,GAAG;YACvB,OAAO,EAAE,eAAe;YACxB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,kBAAkB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACnE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,kBAAkB,CAAC;QAClD,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,6BAA6B,EAAE,mBAAmB,CAAC,CAAC"}},
    {"offset": {"line": 1793, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleMathBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleMathBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"../../../Decorators/nodeDecorator\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\n\r\n/**\r\n * Operations supported by the Math block\r\n */\r\nexport enum ParticleMathBlockOperations {\r\n    /** Add */\r\n    Add,\r\n    /** Subtract */\r\n    Subtract,\r\n    /** Multiply */\r\n    Multiply,\r\n    /** Divide */\r\n    Divide,\r\n    /** Max */\r\n    Max,\r\n    /** Min */\r\n    Min,\r\n}\r\n\r\n/**\r\n * Block used to apply math functions\r\n */\r\nexport class ParticleMathBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the operation applied by the block\r\n     */\r\n    @editableInPropertyPage(\"Operation\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        notifiers: { rebuild: true },\r\n        embedded: true,\r\n        options: [\r\n            { label: \"Add\", value: ParticleMathBlockOperations.Add },\r\n            { label: \"Subtract\", value: ParticleMathBlockOperations.Subtract },\r\n            { label: \"Multiply\", value: ParticleMathBlockOperations.Multiply },\r\n            { label: \"Divide\", value: ParticleMathBlockOperations.Divide },\r\n            { label: \"Max\", value: ParticleMathBlockOperations.Max },\r\n            { label: \"Min\", value: ParticleMathBlockOperations.Min },\r\n        ],\r\n    })\r\n    public operation = ParticleMathBlockOperations.Add;\r\n\r\n    private readonly _connectionObservers: Observer<NodeParticleConnectionPoint>[];\r\n\r\n    /**\r\n     * Create a new ParticleMathBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"left\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"right\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.output._typeConnectionSource = this.left;\r\n\r\n        const excludedConnectionPointTypes = [\r\n            NodeParticleBlockConnectionPointTypes.Matrix,\r\n            NodeParticleBlockConnectionPointTypes.Particle,\r\n            NodeParticleBlockConnectionPointTypes.Texture,\r\n            NodeParticleBlockConnectionPointTypes.System,\r\n            NodeParticleBlockConnectionPointTypes.FloatGradient,\r\n            NodeParticleBlockConnectionPointTypes.Color4Gradient,\r\n            NodeParticleBlockConnectionPointTypes.Vector2Gradient,\r\n            NodeParticleBlockConnectionPointTypes.Vector3Gradient,\r\n        ] as const;\r\n\r\n        this.left.excludedConnectionPointTypes.push(...excludedConnectionPointTypes);\r\n        this.right.excludedConnectionPointTypes.push(...excludedConnectionPointTypes);\r\n\r\n        this._linkConnectionTypes(0, 1);\r\n\r\n        this._connectionObservers = [\r\n            this.left.onConnectionObservable.add(() => this._updateInputOutputTypes()),\r\n            this.left.onDisconnectionObservable.add(() => this._updateInputOutputTypes()),\r\n            this.right.onConnectionObservable.add(() => this._updateInputOutputTypes()),\r\n            this.right.onDisconnectionObservable.add(() => this._updateInputOutputTypes()),\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleMathBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the left input component\r\n     */\r\n    public get left(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the right input component\r\n     */\r\n    public get right(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        let func: (state: NodeParticleBuildState) => any;\r\n        const left = this.left;\r\n        const right = this.right;\r\n\r\n        if (!left.isConnected || !right.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        const leftIsScalar = left.type === NodeParticleBlockConnectionPointTypes.Float || left.type === NodeParticleBlockConnectionPointTypes.Int;\r\n        const rightIsScalar = right.type === NodeParticleBlockConnectionPointTypes.Float || right.type === NodeParticleBlockConnectionPointTypes.Int;\r\n\r\n        // If both input types are scalars, then this is a scalar operation.\r\n        const isScalar = leftIsScalar && rightIsScalar;\r\n\r\n        switch (this.operation) {\r\n            case ParticleMathBlockOperations.Add: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state) + right.getConnectedValue(state);\r\n                    };\r\n                } else if (leftIsScalar) {\r\n                    func = (state) => {\r\n                        return state.adapt(left, right.type).add(right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state).add(state.adapt(right, left.type));\r\n                    };\r\n                }\r\n                break;\r\n            }\r\n            case ParticleMathBlockOperations.Subtract: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state) - right.getConnectedValue(state);\r\n                    };\r\n                } else if (leftIsScalar) {\r\n                    func = (state) => {\r\n                        return state.adapt(left, right.type).subtract(right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state).subtract(state.adapt(right, left.type));\r\n                    };\r\n                }\r\n                break;\r\n            }\r\n            case ParticleMathBlockOperations.Multiply: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state) * right.getConnectedValue(state);\r\n                    };\r\n                } else if (leftIsScalar) {\r\n                    func = (state) => {\r\n                        return state.adapt(left, right.type).multiply(right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state).multiply(state.adapt(right, left.type));\r\n                    };\r\n                }\r\n                break;\r\n            }\r\n            case ParticleMathBlockOperations.Divide: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state) / right.getConnectedValue(state);\r\n                    };\r\n                } else if (leftIsScalar) {\r\n                    func = (state) => {\r\n                        return state.adapt(left, right.type).divide(right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    func = (state) => {\r\n                        return left.getConnectedValue(state).divide(state.adapt(right, left.type));\r\n                    };\r\n                }\r\n                break;\r\n            }\r\n            case ParticleMathBlockOperations.Min: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return Math.min(left.getConnectedValue(state), right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    const [vector, scalar] = leftIsScalar ? [right, left] : [left, right];\r\n\r\n                    switch (vector.type) {\r\n                        case NodeParticleBlockConnectionPointTypes.Vector2: {\r\n                            func = (state) => {\r\n                                return Vector2.Minimize(vector.getConnectedValue(state), state.adapt(scalar, vector.type));\r\n                            };\r\n                            break;\r\n                        }\r\n                        case NodeParticleBlockConnectionPointTypes.Vector3: {\r\n                            func = (state) => {\r\n                                return Vector3.Minimize(vector.getConnectedValue(state), state.adapt(scalar, vector.type));\r\n                            };\r\n                            break;\r\n                        }\r\n                        case NodeParticleBlockConnectionPointTypes.Color4: {\r\n                            func = (state) => {\r\n                                const other = vector.getConnectedValue(state);\r\n                                const { r, g, b, a } = state.adapt(scalar, vector.type);\r\n\r\n                                return new Color4(Math.min(other.r, r), Math.min(other.g, g), Math.min(other.b, b), Math.min(other.a, a));\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case ParticleMathBlockOperations.Max: {\r\n                if (isScalar) {\r\n                    func = (state) => {\r\n                        return Math.max(left.getConnectedValue(state), right.getConnectedValue(state));\r\n                    };\r\n                } else {\r\n                    const [vector, scalar] = leftIsScalar ? [right, left] : [left, right];\r\n\r\n                    switch (vector.type) {\r\n                        case NodeParticleBlockConnectionPointTypes.Vector2: {\r\n                            func = (state) => {\r\n                                return Vector2.Maximize(vector.getConnectedValue(state), state.adapt(scalar, vector.type));\r\n                            };\r\n                            break;\r\n                        }\r\n                        case NodeParticleBlockConnectionPointTypes.Vector3: {\r\n                            func = (state) => {\r\n                                return Vector3.Maximize(vector.getConnectedValue(state), state.adapt(scalar, vector.type));\r\n                            };\r\n                            break;\r\n                        }\r\n                        case NodeParticleBlockConnectionPointTypes.Color4: {\r\n                            func = (state) => {\r\n                                const other = vector.getConnectedValue(state);\r\n                                const { r, g, b, a } = state.adapt(scalar, vector.type);\r\n\r\n                                return new Color4(Math.max(other.r, r), Math.min(other.g, g), Math.min(other.b, b), Math.min(other.a, a));\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.output._storedFunction = (state) => {\r\n            if (left.type === NodeParticleBlockConnectionPointTypes.Int) {\r\n                return func(state) | 0;\r\n            }\r\n            return func(state);\r\n        };\r\n    }\r\n\r\n    private _updateInputOutputTypes() {\r\n        // First update the output type with the initial assumption that we'll base it on the left input.\r\n        this.output._typeConnectionSource = this.left;\r\n\r\n        if (this.left.isConnected && this.right.isConnected) {\r\n            // Both inputs are connected, so we need to determine the output type based on the input types.\r\n            if (\r\n                this.left.type === NodeParticleBlockConnectionPointTypes.Int ||\r\n                (this.left.type === NodeParticleBlockConnectionPointTypes.Float && this.right.type !== NodeParticleBlockConnectionPointTypes.Int)\r\n            ) {\r\n                this.output._typeConnectionSource = this.right;\r\n            }\r\n        } else if (this.left.isConnected !== this.right.isConnected) {\r\n            // Only one input is connected, so we need to determine the output type based on the connected input.\r\n            this.output._typeConnectionSource = this.left.isConnected ? this.left : this.right;\r\n        }\r\n\r\n        // Next update the accepted connection point types for the inputs based on the current input connection state.\r\n        if (this.left.isConnected || this.right.isConnected) {\r\n            for (const [first, second] of [\r\n                [this.left, this.right],\r\n                [this.right, this.left],\r\n            ]) {\r\n                // Always allow Ints and Floats.\r\n                first.acceptedConnectionPointTypes = [NodeParticleBlockConnectionPointTypes.Int, NodeParticleBlockConnectionPointTypes.Float];\r\n\r\n                if (second.isConnected) {\r\n                    // The same types as the connected input are always allowed.\r\n                    first.acceptedConnectionPointTypes.push(second.type);\r\n\r\n                    // If the other input is a scalar, then we also allow Vector types.\r\n                    if (second.type === NodeParticleBlockConnectionPointTypes.Int || second.type === NodeParticleBlockConnectionPointTypes.Float) {\r\n                        first.acceptedConnectionPointTypes.push(\r\n                            NodeParticleBlockConnectionPointTypes.Vector2,\r\n                            NodeParticleBlockConnectionPointTypes.Vector3,\r\n                            NodeParticleBlockConnectionPointTypes.Color4\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public override dispose() {\r\n        super.dispose();\r\n        for (const observer of this._connectionObservers) {\r\n            observer.remove();\r\n        }\r\n        this._connectionObservers.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.operation = this.operation;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.operation = serializationObject.operation;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleMathBlock\", ParticleMathBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2151, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/emitters.functions.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/emitters.functions.ts"],"sourcesContent":["import type { Particle } from \"core/Particles/particle\";\r\n\r\n/**\r\n * Creates the local position data for the particle\r\n * @param particle The particle to update\r\n */\r\nexport function _CreateLocalPositionData(particle: Particle): void {\r\n    if (!particle._localPosition) {\r\n        particle._localPosition = particle.position.clone();\r\n    } else {\r\n        particle._localPosition.copyFrom(particle.position);\r\n    }\r\n}\r\n"],"names":[],"mappings":"AAEA;;;GAGG;;;;AACG,SAAU,wBAAwB,CAAC,QAAkB;IACvD,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;QAC3B,QAAQ,CAAC,cAAc,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;IACxD,CAAC,MAAM,CAAC;QACJ,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IACxD,CAAC;AACL,CAAC"}},
    {"offset": {"line": 2169, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/boxShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/boxShapeBlock.ts"],"sourcesContent":["import type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a box shape.\r\n */\r\nexport class BoxShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    /**\r\n     * Create a new BoxShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerInput(\"minEmitBox\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(-0.5, -0.5, -0.5));\r\n        this.registerInput(\"maxEmitBox\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0.5, 0.5, 0.5));\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"BoxShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle input component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the minEmitBox input component\r\n     */\r\n    public get minEmitBox(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the maxEmitBox input component\r\n     */\r\n    public get maxEmitBox(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n            const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n            const randX = RandomRange(direction1.x, direction2.x);\r\n            const randY = RandomRange(direction1.y, direction2.y);\r\n            const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n            if (system.isLocal) {\r\n                particle.direction.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const minEmitBox = this.minEmitBox.getConnectedValue(state) as Vector3;\r\n            const maxEmitBox = this.maxEmitBox.getConnectedValue(state) as Vector3;\r\n\r\n            const randX = RandomRange(minEmitBox.x, maxEmitBox.x);\r\n            const randY = RandomRange(minEmitBox.y, maxEmitBox.y);\r\n            const randZ = RandomRange(minEmitBox.z, maxEmitBox.z);\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.BoxShapeBlock\", BoxShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2277, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/createParticleBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/createParticleBlock.ts"],"sourcesContent":["import { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport type { _IExecutionQueueItem } from \"core/Particles/Queue/executionQueue\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { _RemoveFromQueue } from \"core/Particles/Queue/executionQueue\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { PointParticleEmitter } from \"core/Particles/EmitterTypes/pointParticleEmitter\";\r\n\r\nconst ColorDiff = new Color4();\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class CreateParticleBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new CreateParticleBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"emitPower\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"lifeTime\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"color\", NodeParticleBlockConnectionPointTypes.Color4, true, new Color4(1, 1, 1, 1));\r\n        this.registerInput(\"colorDead\", NodeParticleBlockConnectionPointTypes.Color4, true, new Color4(0, 0, 0, 0));\r\n        this.registerInput(\"scale\", NodeParticleBlockConnectionPointTypes.Vector2, true, new Vector2(1, 1));\r\n        this.registerInput(\"angle\", NodeParticleBlockConnectionPointTypes.Float, true, 0);\r\n        this.registerInput(\"size\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerOutput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n\r\n        this.scale.acceptedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Float);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"CreateParticleBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the emitPower input component\r\n     */\r\n    public get emitPower(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the lifeTime input component\r\n     */\r\n    public get lifeTime(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the color input component\r\n     */\r\n    public get color(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the color dead input component\r\n     */\r\n    public get colorDead(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the scale input component\r\n     */\r\n    public get scale(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the angle input component\r\n     */\r\n    public get angle(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the size component\r\n     */\r\n    public get size(): NodeParticleConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the particle output component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = new ParticleSystem(this.name, state.capacity, state.scene, null, false, undefined, true);\r\n        system.particleEmitterType = new PointParticleEmitter();\r\n\r\n        // Creation\r\n        system._lifeTimeCreation.process = (particle: Particle, system: ThinParticleSystem) => {\r\n            state.particleContext = particle;\r\n            particle.lifeTime = this.lifeTime.getConnectedValue(state);\r\n            system._emitPower = this.emitPower.getConnectedValue(state);\r\n        };\r\n\r\n        system._colorCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n\r\n            const color = this.color.getConnectedValue(state);\r\n            if (color !== undefined) {\r\n                particle.color.copyFrom(color);\r\n            }\r\n        };\r\n\r\n        system._colorDeadCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n\r\n            particle.colorDead.copyFrom(this.colorDead.getConnectedValue(state));\r\n            particle.initialColor.copyFrom(particle.color);\r\n            particle.colorDead.subtractToRef(particle.initialColor, ColorDiff);\r\n            ColorDiff.scaleToRef(1.0 / particle.lifeTime, particle.colorStep);\r\n        };\r\n\r\n        system._sizeCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n\r\n            const size = this.size.getConnectedValue(state);\r\n            if (size !== undefined) {\r\n                particle.size = size;\r\n            } else {\r\n                particle.size = 1.0;\r\n            }\r\n\r\n            const scale = this.scale.getConnectedValue(state);\r\n            if (scale.x !== undefined) {\r\n                particle.scale.x = scale.x;\r\n                particle.scale.y = scale.y;\r\n            } else {\r\n                particle.scale.x = scale;\r\n                particle.scale.y = scale;\r\n            }\r\n        };\r\n\r\n        system._angleCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n\r\n            particle.angle = this.angle.getConnectedValue(state);\r\n        };\r\n\r\n        this.particle._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.CreateParticleBlock\", CreateParticleBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2412, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/nodeParticleSystemSet.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/nodeParticleSystemSet.ts"],"sourcesContent":["import { serialize } from \"core/Misc/decorators\";\r\nimport { ParticleSystemSet } from \"../particleSystemSet\";\r\nimport { SystemBlock } from \"./Blocks/systemBlock\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { NodeParticleBuildState } from \"./nodeParticleBuildState\";\r\nimport type { NodeParticleBlock } from \"./nodeParticleBlock\";\r\nimport { SerializationHelper } from \"core/Misc/decorators.serialization\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { GetClass } from \"core/Misc/typeStore\";\r\nimport { WebRequest } from \"core/Misc/webRequest\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { AbstractEngine } from \"core/Engines/abstractEngine\";\r\nimport { ParticleInputBlock } from \"./Blocks/particleInputBlock\";\r\nimport { ParticleTextureSourceBlock } from \"./Blocks/particleSourceTextureBlock\";\r\nimport { NodeParticleContextualSources } from \"./Enums/nodeParticleContextualSources\";\r\nimport { UpdatePositionBlock } from \"./Blocks/Update/updatePositionBlock\";\r\nimport { ParticleMathBlock, ParticleMathBlockOperations } from \"./Blocks/particleMathBlock\";\r\nimport type { ParticleTeleportOutBlock } from \"./Blocks/Teleport/particleTeleportOutBlock\";\r\nimport type { ParticleTeleportInBlock } from \"./Blocks/Teleport/particleTeleportInBlock\";\r\nimport { BoxShapeBlock } from \"./Blocks/Emitters/boxShapeBlock\";\r\nimport { CreateParticleBlock } from \"./Blocks/Emitters/createParticleBlock\";\r\nimport type { Color4 } from \"core/Maths/math.color\";\r\nimport type { Nullable } from \"../../types\";\r\n\r\n// declare NODEPARTICLEEDITOR namespace for compilation issue\r\ndeclare let NODEPARTICLEEDITOR: any;\r\ndeclare let BABYLON: any;\r\n\r\n/**\r\n * Interface used to configure the node particle editor\r\n */\r\nexport interface INodeParticleEditorOptions {\r\n    /** Define the URL to load node editor script from */\r\n    editorURL?: string;\r\n    /** Additional configuration for the NPE */\r\n    nodeEditorConfig?: {\r\n        backgroundColor?: Color4;\r\n    };\r\n}\r\n\r\n/**\r\n * Defines a set of particle systems defined as a node graph.\r\n * NPE: #K6F1ZB#1\r\n * PG: #ZT509U#1\r\n */\r\nexport class NodeParticleSystemSet {\r\n    private _systemBlocks: SystemBlock[] = [];\r\n    private _buildId: number = 0;\r\n\r\n    /** Define the Url to load node editor script */\r\n    public static EditorURL = `${Tools._DefaultCdnUrl}/v${AbstractEngine.Version}/nodeParticleEditor/babylon.nodeParticleEditor.js`;\r\n\r\n    /** Define the Url to load snippets */\r\n    public static SnippetUrl = Constants.SnippetUrl;\r\n\r\n    /**\r\n     * Snippet ID if the material was created from the snippet server\r\n     */\r\n    public snippetId: string;\r\n\r\n    /**\r\n     * Gets an array of blocks that needs to be serialized even if they are not yet connected\r\n     */\r\n    public attachedBlocks: NodeParticleBlock[] = [];\r\n\r\n    /**\r\n     * Gets or sets data used by visual editor\r\n     * @see https://npe.babylonjs.com\r\n     */\r\n    public editorData: any = null;\r\n\r\n    /**\r\n     * Observable raised when the particle set is built\r\n     */\r\n    public onBuildObservable = new Observable<NodeParticleSystemSet>();\r\n\r\n    /**\r\n     * The name of the set\r\n     */\r\n    @serialize()\r\n    public name: string;\r\n\r\n    /**\r\n     * A free comment about the set\r\n     */\r\n    @serialize(\"comment\")\r\n    public comment: string;\r\n\r\n    /**\r\n     * Gets the system blocks\r\n     */\r\n    public get systemBlocks(): SystemBlock[] {\r\n        return this._systemBlocks;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of input blocks attached to this material\r\n     * @returns an array of InputBlocks\r\n     */\r\n    public get inputBlocks() {\r\n        const blocks: ParticleInputBlock[] = [];\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.isInput) {\r\n                blocks.push(block as ParticleInputBlock);\r\n            }\r\n        }\r\n\r\n        return blocks;\r\n    }\r\n\r\n    /**\r\n     * Get a block by its name\r\n     * @param name defines the name of the block to retrieve\r\n     * @returns the required block or null if not found\r\n     */\r\n    public getBlockByName(name: string) {\r\n        let result = null;\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.name === name) {\r\n                if (!result) {\r\n                    result = block;\r\n                } else {\r\n                    Tools.Warn(\"More than one block was found with the name `\" + name + \"`\");\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get a block using a predicate\r\n     * @param predicate defines the predicate used to find the good candidate\r\n     * @returns the required block or null if not found\r\n     */\r\n    public getBlockByPredicate(predicate: (block: NodeParticleBlock) => boolean) {\r\n        for (const block of this.attachedBlocks) {\r\n            if (predicate(block)) {\r\n                return block;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Get an input block using a predicate\r\n     * @param predicate defines the predicate used to find the good candidate\r\n     * @returns the required input block or null if not found\r\n     */\r\n    public getInputBlockByPredicate(predicate: (block: ParticleInputBlock) => boolean): Nullable<ParticleInputBlock> {\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.isInput && predicate(block as ParticleInputBlock)) {\r\n                return block as ParticleInputBlock;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n    /**\r\n     * Creates a new set\r\n     * @param name defines the name of the set\r\n     */\r\n    public constructor(name: string) {\r\n        this.name = name;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name of the node particle set e.g. \"NodeParticleSystemSet\"\r\n     * @returns the class name\r\n     */\r\n    public getClassName(): string {\r\n        return \"NodeParticleSystemSet\";\r\n    }\r\n\r\n    private _initializeBlock(node: NodeParticleBlock, autoConfigure = true) {\r\n        if (this.attachedBlocks.indexOf(node) === -1) {\r\n            this.attachedBlocks.push(node);\r\n        }\r\n\r\n        for (const input of node.inputs) {\r\n            const connectedPoint = input.connectedPoint;\r\n            if (connectedPoint) {\r\n                const block = connectedPoint.ownerBlock;\r\n                if (block !== node) {\r\n                    this._initializeBlock(block, autoConfigure);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private BJSNODEPARTICLEEDITOR = this._getGlobalNodeParticleEditor();\r\n\r\n    /** Get the editor from bundle or global\r\n     * @returns the global NPE\r\n     */\r\n    private _getGlobalNodeParticleEditor(): any {\r\n        // UMD Global name detection from Webpack Bundle UMD Name.\r\n        if (typeof NODEPARTICLEEDITOR !== \"undefined\") {\r\n            return NODEPARTICLEEDITOR;\r\n        }\r\n\r\n        // In case of module let's check the global emitted from the editor entry point.\r\n        if (typeof BABYLON !== \"undefined\" && typeof BABYLON.NodeParticleEditor !== \"undefined\") {\r\n            return BABYLON;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    /** Creates the node editor window.\r\n     * @param additionalConfig Define the configuration of the editor\r\n     */\r\n    private _createNodeParticleEditor(additionalConfig?: any) {\r\n        const nodeEditorConfig: any = {\r\n            nodeParticleSet: this,\r\n            ...additionalConfig,\r\n        };\r\n        this.BJSNODEPARTICLEEDITOR.NodeParticleEditor.Show(nodeEditorConfig);\r\n    }\r\n\r\n    /**\r\n     * Launch the node particle editor\r\n     * @param config Define the configuration of the editor\r\n     * @returns a promise fulfilled when the node editor is visible\r\n     */\r\n    public async editAsync(config?: INodeParticleEditorOptions): Promise<void> {\r\n        return await new Promise((resolve) => {\r\n            this.BJSNODEPARTICLEEDITOR = this.BJSNODEPARTICLEEDITOR || this._getGlobalNodeParticleEditor();\r\n            if (typeof this.BJSNODEPARTICLEEDITOR == \"undefined\") {\r\n                const editorUrl = config && config.editorURL ? config.editorURL : NodeParticleSystemSet.EditorURL;\r\n\r\n                // Load editor and add it to the DOM\r\n                Tools.LoadBabylonScript(editorUrl, () => {\r\n                    this.BJSNODEPARTICLEEDITOR = this.BJSNODEPARTICLEEDITOR || this._getGlobalNodeParticleEditor();\r\n                    this._createNodeParticleEditor(config?.nodeEditorConfig);\r\n                    resolve();\r\n                });\r\n            } else {\r\n                // Otherwise creates the editor\r\n                this._createNodeParticleEditor(config?.nodeEditorConfig);\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Builds the particle system set from the defined blocks.\r\n     * @param scene defines the hosting scene\r\n     * @param verbose defines whether to log detailed information during the build process (false by default)\r\n     * @returns a promise that resolves to the built particle system set\r\n     */\r\n    public async buildAsync(scene: Scene, verbose = false): Promise<ParticleSystemSet> {\r\n        return await new Promise<ParticleSystemSet>((resolve) => {\r\n            const output = new ParticleSystemSet();\r\n\r\n            // Initialize all blocks\r\n            for (const block of this._systemBlocks) {\r\n                this._initializeBlock(block);\r\n            }\r\n\r\n            // Build the blocks\r\n            for (const block of this.systemBlocks) {\r\n                const state = new NodeParticleBuildState();\r\n                state.buildId = this._buildId++;\r\n                state.scene = scene;\r\n                state.verbose = verbose;\r\n\r\n                const system = block.createSystem(state);\r\n                system._source = this;\r\n                system._blockReference = block._internalId;\r\n\r\n                // Errors\r\n                state.emitErrors();\r\n\r\n                output.systems.push(system);\r\n            }\r\n\r\n            this.onBuildObservable.notifyObservers(this);\r\n\r\n            resolve(output);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Clear the current node particle set\r\n     */\r\n    public clear() {\r\n        this.attachedBlocks.length = 0;\r\n        this._systemBlocks.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Clear the current set and restore it to a default state\r\n     */\r\n    public setToDefault() {\r\n        this.clear();\r\n\r\n        this.editorData = null;\r\n\r\n        // Main system\r\n        const system = new SystemBlock(\"Particle system\");\r\n\r\n        // Update position\r\n        const updatePositionBlock = new UpdatePositionBlock(\"Update position\");\r\n        updatePositionBlock.output.connectTo(system.particle);\r\n\r\n        // Contextual inputs\r\n        const positionBlock = new ParticleInputBlock(\"Position\");\r\n        positionBlock.contextualValue = NodeParticleContextualSources.Position;\r\n        const directionBlock = new ParticleInputBlock(\"Scaled direction\");\r\n        directionBlock.contextualValue = NodeParticleContextualSources.ScaledDirection;\r\n\r\n        // Add\r\n        const addBlock = new ParticleMathBlock(\"Add\");\r\n        addBlock.operation = ParticleMathBlockOperations.Add;\r\n        positionBlock.output.connectTo(addBlock.left);\r\n        directionBlock.output.connectTo(addBlock.right);\r\n        addBlock.output.connectTo(updatePositionBlock.position);\r\n\r\n        // Create particle\r\n        const createParticleBlock = new CreateParticleBlock(\"Create particle\");\r\n\r\n        // Shape\r\n        const emitterShape = new BoxShapeBlock(\"Box shape\");\r\n        createParticleBlock.particle.connectTo(emitterShape.particle);\r\n        emitterShape.output.connectTo(updatePositionBlock.particle);\r\n\r\n        // Texture\r\n        const textureBlock = new ParticleTextureSourceBlock(\"Texture\");\r\n        textureBlock.texture.connectTo(system.texture);\r\n        textureBlock.url = Tools.GetAssetUrl(\"https://assets.babylonjs.com/core/textures/flare.png\");\r\n\r\n        this._systemBlocks.push(system);\r\n    }\r\n\r\n    /**\r\n     * Remove a block from the current system set\r\n     * @param block defines the block to remove\r\n     */\r\n    public removeBlock(block: NodeParticleBlock) {\r\n        const attachedBlockIndex = this.attachedBlocks.indexOf(block);\r\n        if (attachedBlockIndex > -1) {\r\n            this.attachedBlocks.splice(attachedBlockIndex, 1);\r\n        }\r\n\r\n        if (block.isSystem) {\r\n            const index = this._systemBlocks.indexOf(block as SystemBlock);\r\n            if (index > -1) {\r\n                this._systemBlocks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the current graph and load a new one from a serialization object\r\n     * @param source defines the JSON representation of the particle set\r\n     * @param merge defines whether or not the source must be merged or replace the current content\r\n     */\r\n    public parseSerializedObject(source: any, merge = false) {\r\n        if (!merge) {\r\n            this.clear();\r\n        }\r\n\r\n        const map: { [key: number]: NodeParticleBlock } = {};\r\n\r\n        // Create blocks\r\n        for (const parsedBlock of source.blocks) {\r\n            const blockType = GetClass(parsedBlock.customType);\r\n            if (blockType) {\r\n                const block: NodeParticleBlock = new blockType();\r\n                block._deserialize(parsedBlock);\r\n                map[parsedBlock.id] = block;\r\n\r\n                this.attachedBlocks.push(block);\r\n\r\n                if (block.isSystem) {\r\n                    this._systemBlocks.push(block as SystemBlock);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Reconnect teleportation\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.isTeleportOut) {\r\n                const teleportOut = block as ParticleTeleportOutBlock;\r\n                const id = teleportOut._tempEntryPointUniqueId;\r\n                if (id) {\r\n                    const source = map[id] as ParticleTeleportInBlock;\r\n                    if (source) {\r\n                        source.attachToEndpoint(teleportOut);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Connections - Starts with input blocks only (except if in \"merge\" mode where we scan all blocks)\r\n        for (let blockIndex = 0; blockIndex < source.blocks.length; blockIndex++) {\r\n            const parsedBlock = source.blocks[blockIndex];\r\n            const block = map[parsedBlock.id];\r\n\r\n            if (!block) {\r\n                continue;\r\n            }\r\n\r\n            if (block.inputs.length && parsedBlock.inputs.some((i: any) => i.targetConnectionName) && !merge) {\r\n                continue;\r\n            }\r\n            this._restoreConnections(block, source, map);\r\n        }\r\n\r\n        // UI related info\r\n        if (source.locations || (source.editorData && source.editorData.locations)) {\r\n            const locations: {\r\n                blockId: number;\r\n                x: number;\r\n                y: number;\r\n                isCollapsed: boolean;\r\n            }[] = source.locations || source.editorData.locations;\r\n\r\n            for (const location of locations) {\r\n                if (map[location.blockId]) {\r\n                    location.blockId = map[location.blockId].uniqueId;\r\n                }\r\n            }\r\n\r\n            if (merge && this.editorData && this.editorData.locations) {\r\n                locations.concat(this.editorData.locations);\r\n            }\r\n\r\n            if (source.locations) {\r\n                this.editorData = {\r\n                    locations: locations,\r\n                };\r\n            } else {\r\n                this.editorData = source.editorData;\r\n                this.editorData.locations = locations;\r\n            }\r\n\r\n            const blockMap: { [key: number]: number } = {};\r\n\r\n            for (const key in map) {\r\n                blockMap[key] = map[key].uniqueId;\r\n            }\r\n\r\n            this.editorData.map = blockMap;\r\n        }\r\n\r\n        this.comment = source.comment;\r\n    }\r\n\r\n    private _restoreConnections(block: NodeParticleBlock, source: any, map: { [key: number]: NodeParticleBlock }) {\r\n        for (const outputPoint of block.outputs) {\r\n            for (const candidate of source.blocks) {\r\n                const target = map[candidate.id];\r\n\r\n                if (!target) {\r\n                    continue;\r\n                }\r\n\r\n                for (const input of candidate.inputs) {\r\n                    if (map[input.targetBlockId] === block && input.targetConnectionName === outputPoint.name) {\r\n                        const inputPoint = target.getInputByName(input.inputName);\r\n                        if (!inputPoint || inputPoint.isConnected) {\r\n                            continue;\r\n                        }\r\n\r\n                        outputPoint.connectTo(inputPoint, true);\r\n                        this._restoreConnections(target, source, map);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Serializes this node particle set in a JSON representation\r\n     * @param selectedBlocks defines the list of blocks to save (if null the whole node particle set will be saved)\r\n     * @returns the serialized particle system set object\r\n     */\r\n    public serialize(selectedBlocks?: NodeParticleBlock[]): any {\r\n        const serializationObject = selectedBlocks ? {} : SerializationHelper.Serialize(this);\r\n        serializationObject.editorData = JSON.parse(JSON.stringify(this.editorData)); // Copy\r\n\r\n        let blocks: NodeParticleBlock[] = [];\r\n\r\n        if (selectedBlocks) {\r\n            blocks = selectedBlocks;\r\n        } else {\r\n            serializationObject.customType = \"BABYLON.NodeParticleSystemSet\";\r\n        }\r\n\r\n        // Blocks\r\n        serializationObject.blocks = [];\r\n\r\n        for (const block of blocks) {\r\n            serializationObject.blocks.push(block.serialize());\r\n        }\r\n\r\n        if (!selectedBlocks) {\r\n            for (const block of this.attachedBlocks) {\r\n                if (blocks.indexOf(block) !== -1) {\r\n                    continue;\r\n                }\r\n                serializationObject.blocks.push(block.serialize());\r\n            }\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Makes a duplicate of the current particle system set.\r\n     * @param name defines the name to use for the new particle system set\r\n     * @returns the cloned particle system set\r\n     */\r\n    public clone(name: string): NodeParticleSystemSet {\r\n        const serializationObject = this.serialize();\r\n\r\n        const clone = SerializationHelper.Clone(() => new NodeParticleSystemSet(name), this);\r\n        clone.name = name;\r\n        clone.snippetId = this.snippetId;\r\n\r\n        clone.parseSerializedObject(serializationObject);\r\n        clone._buildId = this._buildId;\r\n\r\n        return clone;\r\n    }\r\n\r\n    /**\r\n     * Disposes the resources\r\n     */\r\n    public dispose(): void {\r\n        for (const block of this.attachedBlocks) {\r\n            block.dispose();\r\n        }\r\n\r\n        this.attachedBlocks.length = 0;\r\n        this.onBuildObservable.clear();\r\n    }\r\n\r\n    /**\r\n     * Creates a new node particle set set to default basic configuration\r\n     * @param name defines the name of the particle set\r\n     * @returns a new NodeParticleSystemSet\r\n     */\r\n    public static CreateDefault(name: string) {\r\n        const nodeParticleSet = new NodeParticleSystemSet(name);\r\n\r\n        nodeParticleSet.setToDefault();\r\n\r\n        return nodeParticleSet;\r\n    }\r\n\r\n    /**\r\n     * Creates a node particle set from parsed data\r\n     * @param source defines the JSON representation of the particle set\r\n     * @returns a new node particle set\r\n     */\r\n    public static Parse(source: any): NodeParticleSystemSet {\r\n        const nodeParticleSet = SerializationHelper.Parse(() => new NodeParticleSystemSet(source.name), source, null);\r\n\r\n        nodeParticleSet.parseSerializedObject(source);\r\n\r\n        return nodeParticleSet;\r\n    }\r\n\r\n    /**\r\n     * Creates a node particle set from a snippet saved in a remote file\r\n     * @param name defines the name of the node particle set to create\r\n     * @param url defines the url to load from\r\n     * @param nodeParticleSet defines a node particle set to update (instead of creating a new one)\r\n     * @returns a promise that will resolve to the new node particle set\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\r\n    public static ParseFromFileAsync(name: string, url: string, nodeParticleSet?: NodeParticleSystemSet): Promise<NodeParticleSystemSet> {\r\n        return new Promise((resolve, reject) => {\r\n            const request = new WebRequest();\r\n            request.addEventListener(\"readystatechange\", () => {\r\n                if (request.readyState == 4) {\r\n                    if (request.status == 200) {\r\n                        const serializationObject = JSON.parse(request.responseText);\r\n                        if (!nodeParticleSet) {\r\n                            nodeParticleSet = SerializationHelper.Parse(() => new NodeParticleSystemSet(name), serializationObject, null);\r\n                        }\r\n\r\n                        nodeParticleSet.parseSerializedObject(serializationObject);\r\n\r\n                        resolve(nodeParticleSet);\r\n                    } else {\r\n                        // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                        reject(\"Unable to load the node particle system set\");\r\n                    }\r\n                }\r\n            });\r\n\r\n            request.open(\"GET\", url);\r\n            request.send();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates a node particle set from a snippet saved by the node particle editor\r\n     * @param snippetId defines the snippet to load\r\n     * @param nodeParticleSet defines a node particle set to update (instead of creating a new one)\r\n     * @returns a promise that will resolve to the new node particle set\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\r\n    public static ParseFromSnippetAsync(snippetId: string, nodeParticleSet?: NodeParticleSystemSet): Promise<NodeParticleSystemSet> {\r\n        if (snippetId === \"_BLANK\") {\r\n            return Promise.resolve(NodeParticleSystemSet.CreateDefault(\"blank\"));\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const request = new WebRequest();\r\n            request.addEventListener(\"readystatechange\", () => {\r\n                if (request.readyState == 4) {\r\n                    if (request.status == 200) {\r\n                        const snippet = JSON.parse(JSON.parse(request.responseText).jsonPayload);\r\n                        const serializationObject = JSON.parse(snippet.nodeParticle);\r\n\r\n                        if (!nodeParticleSet) {\r\n                            nodeParticleSet = SerializationHelper.Parse(() => new NodeParticleSystemSet(snippetId), serializationObject, null);\r\n                        }\r\n\r\n                        nodeParticleSet.parseSerializedObject(serializationObject);\r\n                        nodeParticleSet.snippetId = snippetId;\r\n\r\n                        try {\r\n                            resolve(nodeParticleSet);\r\n                        } catch (err) {\r\n                            // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                            reject(err);\r\n                        }\r\n                    } else {\r\n                        // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                        reject(\"Unable to load the snippet \" + snippetId);\r\n                    }\r\n                }\r\n            });\r\n\r\n            request.open(\"GET\", this.SnippetUrl + \"/\" + snippetId.replace(/#/g, \"/\"));\r\n            request.send();\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2921, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleConverterBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleConverterBlock.ts"],"sourcesContent":["import { Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2, Vector3 } from \"../../../Maths/math.vector\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\n\r\n/**\r\n * Block used to create a Vector2/3 and Color4 out of individual or partial inputs\r\n */\r\nexport class ParticleConverterBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new ParticleConverterBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"color \", NodeParticleBlockConnectionPointTypes.Color4, true);\r\n        this.registerInput(\"xyz \", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerInput(\"xy \", NodeParticleBlockConnectionPointTypes.Vector2, true);\r\n        this.registerInput(\"zw \", NodeParticleBlockConnectionPointTypes.Vector2, true);\r\n        this.registerInput(\"x \", NodeParticleBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"y \", NodeParticleBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"z \", NodeParticleBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"w \", NodeParticleBlockConnectionPointTypes.Float, true);\r\n\r\n        this.registerOutput(\"color\", NodeParticleBlockConnectionPointTypes.Color4);\r\n        this.registerOutput(\"xyz\", NodeParticleBlockConnectionPointTypes.Vector3);\r\n        this.registerOutput(\"xy\", NodeParticleBlockConnectionPointTypes.Vector2);\r\n        this.registerOutput(\"zw\", NodeParticleBlockConnectionPointTypes.Vector2);\r\n        this.registerOutput(\"x\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"y\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"z\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"w\", NodeParticleBlockConnectionPointTypes.Float);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleConverterBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the color component (input)\r\n     */\r\n    public get colorIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the xyz component (input)\r\n     */\r\n    public get xyzIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the xy component (input)\r\n     */\r\n    public get xyIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the zw component (input)\r\n     */\r\n    public get zwIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the x component (input)\r\n     */\r\n    public get xIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the y component (input)\r\n     */\r\n    public get yIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the z component (input)\r\n     */\r\n    public get zIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the w component (input)\r\n     */\r\n    public get wIn(): NodeParticleConnectionPoint {\r\n        return this._inputs[7];\r\n    }\r\n\r\n    /**\r\n     * Gets the xyzw component (output)\r\n     */\r\n    public get colorOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the xyz component (output)\r\n     */\r\n    public get xyzOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the xy component (output)\r\n     */\r\n    public get xyOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the zw component (output)\r\n     */\r\n    public get zwOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the x component (output)\r\n     */\r\n    public get xOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the y component (output)\r\n     */\r\n    public get yOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the z component (output)\r\n     */\r\n    public get zOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the w component (output)\r\n     */\r\n    public get wOut(): NodeParticleConnectionPoint {\r\n        return this._outputs[7];\r\n    }\r\n\r\n    protected override _inputRename(name: string) {\r\n        if (name === \"color \") {\r\n            return \"colorIn\";\r\n        }\r\n        if (name === \"xyz \") {\r\n            return \"xyzIn\";\r\n        }\r\n        if (name === \"xy \") {\r\n            return \"xyIn\";\r\n        }\r\n        if (name === \"zw \") {\r\n            return \"zwIn\";\r\n        }\r\n        if (name === \"x \") {\r\n            return \"xIn\";\r\n        }\r\n        if (name === \"y \") {\r\n            return \"yIn\";\r\n        }\r\n        if (name === \"z \") {\r\n            return \"zIn\";\r\n        }\r\n        if (name === \"w \") {\r\n            return \"wIn\";\r\n        }\r\n        return name;\r\n    }\r\n\r\n    protected override _outputRename(name: string) {\r\n        switch (name) {\r\n            case \"x\":\r\n                return \"xOut\";\r\n            case \"y\":\r\n                return \"yOut\";\r\n            case \"z\":\r\n                return \"zOut\";\r\n            case \"w\":\r\n                return \"wOut\";\r\n            case \"xy\":\r\n                return \"xyOut\";\r\n            case \"zw\":\r\n                return \"zwOut\";\r\n            case \"xyz\":\r\n                return \"xyzOut\";\r\n            case \"color\":\r\n                return \"colorOut\";\r\n            default:\r\n                return name;\r\n        }\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n\r\n        const xInput = this.xIn;\r\n        const yInput = this.yIn;\r\n        const zInput = this.zIn;\r\n        const wInput = this.wIn;\r\n        const xyInput = this.xyIn;\r\n        const zwInput = this.zwIn;\r\n        const xyzInput = this.xyzIn;\r\n        const colorInput = this.colorIn;\r\n\r\n        const colorOutput = this.colorOut;\r\n        const xyzOutput = this.xyzOut;\r\n        const xyOutput = this.xyOut;\r\n        const zwOutput = this.zwOut;\r\n        const xOutput = this.xOut;\r\n        const yOutput = this.yOut;\r\n        const zOutput = this.zOut;\r\n        const wOutput = this.wOut;\r\n\r\n        const getData = (state: NodeParticleBuildState): Color4 => {\r\n            if (colorInput.isConnected) {\r\n                return colorInput.getConnectedValue(state);\r\n            }\r\n\r\n            let x: number = 0;\r\n            let y: number = 0;\r\n            let z: number = 0;\r\n            let w: number = 0;\r\n\r\n            if (xInput.isConnected) {\r\n                x = xInput.getConnectedValue(state);\r\n            }\r\n            if (yInput.isConnected) {\r\n                y = yInput.getConnectedValue(state);\r\n            }\r\n            if (zInput.isConnected) {\r\n                z = zInput.getConnectedValue(state);\r\n            }\r\n            if (wInput.isConnected) {\r\n                w = wInput.getConnectedValue(state);\r\n            }\r\n\r\n            if (xyInput.isConnected) {\r\n                const temp = xyInput.getConnectedValue(state);\r\n                if (temp) {\r\n                    x = temp.x;\r\n                    y = temp.y;\r\n                }\r\n            }\r\n            if (zwInput.isConnected) {\r\n                const temp = zwInput.getConnectedValue(state);\r\n                if (temp) {\r\n                    z = temp.x;\r\n                    w = temp.y;\r\n                }\r\n            }\r\n            if (xyzInput.isConnected) {\r\n                const temp = xyzInput.getConnectedValue(state);\r\n                if (temp) {\r\n                    x = temp.x;\r\n                    y = temp.y;\r\n                    z = temp.z;\r\n                }\r\n            }\r\n\r\n            return new Color4(x, y, z, w);\r\n        };\r\n\r\n        colorOutput._storedFunction = (state) => getData(state);\r\n        xyzOutput._storedFunction = (state) => {\r\n            const data = getData(state);\r\n            return new Vector3(data.r, data.g, data.b);\r\n        };\r\n        xyOutput._storedFunction = (state) => {\r\n            const data = getData(state);\r\n            return new Vector2(data.r, data.g);\r\n        };\r\n        zwOutput._storedFunction = (state) => {\r\n            const data = getData(state);\r\n            return new Vector2(data.b, data.a);\r\n        };\r\n        xOutput._storedFunction = (state) => getData(state).r;\r\n        yOutput._storedFunction = (state) => getData(state).g;\r\n        zOutput._storedFunction = (state) => getData(state).b;\r\n        wOutput._storedFunction = (state) => getData(state).a;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleConverterBlock\", ParticleConverterBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3179, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleFloatToIntBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleFloatToIntBlock.ts"],"sourcesContent":["import type { Nullable } from \"core/types\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\n\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"core/Decorators/nodeDecorator\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\n\r\n/**\r\n * Operations supported by the FloatToInt block\r\n */\r\nexport enum ParticleFloatToIntBlockOperations {\r\n    /** Round */\r\n    Round,\r\n    /** Ceil */\r\n    Ceil,\r\n    /** Floor */\r\n    Floor,\r\n    /** Truncate */\r\n    Truncate,\r\n}\r\n\r\n/**\r\n * Block used to transform a float to an int\r\n */\r\nexport class ParticleFloatToIntBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the operation applied by the block\r\n     */\r\n    @editableInPropertyPage(\"Operation\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        notifiers: { rebuild: true },\r\n        embedded: true,\r\n        options: [\r\n            { label: \"Round\", value: ParticleFloatToIntBlockOperations.Round },\r\n            { label: \"Ceil\", value: ParticleFloatToIntBlockOperations.Ceil },\r\n            { label: \"Floor\", value: ParticleFloatToIntBlockOperations.Floor },\r\n            { label: \"Truncate\", value: ParticleFloatToIntBlockOperations.Truncate },\r\n        ],\r\n    })\r\n    public operation = ParticleFloatToIntBlockOperations.Round;\r\n\r\n    /**\r\n     * Creates a new ParticleFloatToIntBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Int);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(NodeParticleBlockConnectionPointTypes.Float | NodeParticleBlockConnectionPointTypes.Int);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleFloatToIntBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n        let func: Nullable<(value: NodeParticleBuildState) => number> = null;\r\n        const input = this.input;\r\n\r\n        switch (this.operation) {\r\n            case ParticleFloatToIntBlockOperations.Round: {\r\n                func = (state) => {\r\n                    return Math.round(input.getConnectedValue(state));\r\n                };\r\n                break;\r\n            }\r\n            case ParticleFloatToIntBlockOperations.Ceil: {\r\n                func = (state) => {\r\n                    return Math.ceil(input.getConnectedValue(state));\r\n                };\r\n                break;\r\n            }\r\n            case ParticleFloatToIntBlockOperations.Floor: {\r\n                func = (state) => {\r\n                    return Math.floor(input.getConnectedValue(state));\r\n                };\r\n                break;\r\n            }\r\n            case ParticleFloatToIntBlockOperations.Truncate: {\r\n                func = (state) => {\r\n                    return Math.trunc(input.getConnectedValue(state));\r\n                };\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!func) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        this.output._storedFunction = (state) => {\r\n            return func(state);\r\n        };\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.operation = this.operation;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.operation = serializationObject.operation;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleFloatToIntBlock\", ParticleFloatToIntBlock);\r\n"],"names":[],"mappings":";;;;;;;AAIA,OAAO,EAAE,aAAa,EAAE,mCAA4B;AACpD,OAAO,EAA0B,sBAAsB,EAAE,6CAAsC;AAC/F,OAAO,EAAE,iBAAiB,EAAE,gCAA8C;AAC1E,OAAO,EAAE,qCAAqC,EAAE,0DAAwE;;;;;;AAKxH,IAAY,iCASX;AATD,CAAA,SAAY,iCAAiC;IACzC,UAAA,EAAY,CACZ,iCAAA,CAAA,iCAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAK,CAAA;IACL,SAAA,EAAW,CACX,iCAAA,CAAA,iCAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAI,CAAA;IACJ,UAAA,EAAY,CACZ,iCAAA,CAAA,iCAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAK,CAAA;IACL,aAAA,EAAe,CACf,iCAAA,CAAA,iCAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;AACZ,CAAC,EATW,iCAAiC,IAAA,CAAjC,iCAAiC,GAAA,CAAA,CAAA,GAS5C;AAKK,MAAO,uBAAwB,SAAQ,sQAAiB;IAgB1D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QApBhB;;WAEG,CAWI,IAAA,CAAA,SAAS,GAAG,iCAAiC,CAAC,KAAK,CAAC;QASvD,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,GAAG,CAAC,CAAC;QAEzE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,0CAA0C,CAAC,uTAAqC,CAAC,KAAK,GAAG,uTAAqC,CAAC,GAAG,CAAC,CAAC;IACxJ,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,yBAAyB,CAAC;IACrC,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEe,MAAM,CAAC,KAA6B,EAAA;QAChD,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpB,IAAI,IAAI,GAAwD,IAAI,CAAC;QACrE,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAEzB,OAAQ,IAAI,CAAC,SAAS,EAAE,CAAC;YACrB,KAAK,iCAAiC,CAAC,KAAK,CAAC;gBAAC,CAAC;oBAC3C,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;wBACb,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;oBACtD,CAAC,CAAC;oBACF,MAAM;gBACV,CAAC;YACD,KAAK,iCAAiC,CAAC,IAAI,CAAC;gBAAC,CAAC;oBAC1C,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;wBACb,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;oBACrD,CAAC,CAAC;oBACF,MAAM;gBACV,CAAC;YACD,KAAK,iCAAiC,CAAC,KAAK,CAAC;gBAAC,CAAC;oBAC3C,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;wBACb,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;oBACtD,CAAC,CAAC;oBACF,MAAM;gBACV,CAAC;YACD,KAAK,iCAAiC,CAAC,QAAQ,CAAC;gBAAC,CAAC;oBAC9C,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;wBACb,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;oBACtD,CAAC,CAAC;oBACF,MAAM;gBACV,CAAC;QACL,CAAC;QAED,IAAI,CAAC,IAAI,EAAE,CAAC;YACR,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;YAChC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;YACpC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CAAC;IACN,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE9C,mBAAmB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAE/C,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAExC,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,CAAC;IACnD,CAAC;CACJ;IA9FU,qOAAA,EAAA;QAVN,gQAAsB,EAAC,WAAW,EAAA,EAAA,+BAAA,KAA+B,UAAU,EAAE;QAC1E,SAAS,EAAE;YAAE,OAAO,EAAE,IAAI;QAAA,CAAE;QAC5B,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE;YACL;gBAAE,KAAK,EAAE,OAAO;gBAAE,KAAK,EAAE,iCAAiC,CAAC,KAAK;YAAA,CAAE;YAClE;gBAAE,KAAK,EAAE,MAAM;gBAAE,KAAK,EAAE,iCAAiC,CAAC,IAAI;YAAA,CAAE;YAChE;gBAAE,KAAK,EAAE,OAAO;gBAAE,KAAK,EAAE,iCAAiC,CAAC,KAAK;YAAA,CAAE;YAClE;gBAAE,KAAK,EAAE,UAAU;gBAAE,KAAK,EAAE,iCAAiC,CAAC,QAAQ;YAAA,CAAE;SAC3E;KACJ,CAAC;0DACyD;IAgG/D,6OAAa,EAAC,iCAAiC,EAAE,uBAAuB,CAAC,CAAC"}},
    {"offset": {"line": 3316, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleGradientBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleGradientBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { ParticleGradientValueBlock } from \"./particleGradientValueBlock\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { Lerp } from \"core/Maths/math.scalar.functions\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\n/**\r\n * Block used to define a list of gradient entries\r\n */\r\nexport class ParticleGradientBlock extends NodeParticleBlock {\r\n    private _entryCount = 1;\r\n    /**\r\n     * Creates a new ParticleGradientBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"gradient\", NodeParticleBlockConnectionPointTypes.Float, true, 1, 0, 1);\r\n        this.registerInput(\"value0\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[1];\r\n        this._outputs[0]._typeConnectionSourceTranslation = (type) => {\r\n            switch (type) {\r\n                case NodeParticleBlockConnectionPointTypes.FloatGradient:\r\n                    return NodeParticleBlockConnectionPointTypes.Float;\r\n                case NodeParticleBlockConnectionPointTypes.Vector2Gradient:\r\n                    return NodeParticleBlockConnectionPointTypes.Vector2;\r\n                case NodeParticleBlockConnectionPointTypes.Vector3Gradient:\r\n                    return NodeParticleBlockConnectionPointTypes.Vector3;\r\n                case NodeParticleBlockConnectionPointTypes.Color4Gradient:\r\n                    return NodeParticleBlockConnectionPointTypes.Color4;\r\n            }\r\n            return type;\r\n        };\r\n\r\n        this._inputs[1].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.FloatGradient |\r\n                NodeParticleBlockConnectionPointTypes.Vector2Gradient |\r\n                NodeParticleBlockConnectionPointTypes.Vector3Gradient |\r\n                NodeParticleBlockConnectionPointTypes.Color4Gradient\r\n        );\r\n\r\n        this._manageExtendedInputs(1);\r\n    }\r\n\r\n    private _extend() {\r\n        this._entryCount++;\r\n        this.registerInput(\"value\" + (this._entryCount - 1), NodeParticleBlockConnectionPointTypes.AutoDetect, true);\r\n        this._linkConnectionTypes(1, this._entryCount);\r\n\r\n        this._manageExtendedInputs(this._entryCount);\r\n    }\r\n\r\n    private _manageExtendedInputs(index: number) {\r\n        this._inputs[index].onConnectionObservable.add(() => {\r\n            if (this._entryCount > index) {\r\n                return;\r\n            }\r\n\r\n            this._extend();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleGradientBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the gradient operand input component\r\n     */\r\n    public get gradient(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        // Building the list of entries in order\r\n        const entries: ParticleGradientValueBlock[] = [];\r\n        for (let i = 1; i < this._inputs.length; i++) {\r\n            if (this._inputs[i].isConnected) {\r\n                entries.push(this._inputs[i].connectedPoint?.ownerBlock as ParticleGradientValueBlock);\r\n            }\r\n        }\r\n\r\n        entries.sort((a, b) => {\r\n            return a.reference - b.reference;\r\n        });\r\n\r\n        this.output._storedFunction = (state) => {\r\n            const gradient = this.gradient.getConnectedValue(state);\r\n\r\n            if (entries.length === 1) {\r\n                return entries[0].value.getConnectedValue(state);\r\n            }\r\n\r\n            // Go down the entries list in reverse order\r\n            let nextEntry: Nullable<ParticleGradientValueBlock> = null;\r\n            for (let i = entries.length - 1; i >= 0; i--) {\r\n                const entry = entries[i];\r\n                if (entry.reference <= gradient) {\r\n                    const currentValue = entry.value.getConnectedValue(state);\r\n                    if (nextEntry) {\r\n                        const nextValue = nextEntry.value.getConnectedValue(state);\r\n                        const nextReference = nextEntry.reference;\r\n                        const currentReference = entry.reference;\r\n                        const scale = Math.max(0, Math.min(1, (gradient - currentReference) / (nextReference - currentReference)));\r\n\r\n                        switch (this.output.type) {\r\n                            case NodeParticleBlockConnectionPointTypes.Float:\r\n                                return Lerp(currentValue, nextValue, scale);\r\n                            case NodeParticleBlockConnectionPointTypes.Vector2:\r\n                                return Vector2.Lerp(currentValue, nextValue, scale);\r\n                            case NodeParticleBlockConnectionPointTypes.Vector3:\r\n                                return Vector3.Lerp(currentValue, nextValue, scale);\r\n                            case NodeParticleBlockConnectionPointTypes.Color4:\r\n                                return Color4.Lerp(currentValue, nextValue, scale);\r\n                        }\r\n                    }\r\n                    return currentValue;\r\n                }\r\n\r\n                nextEntry = entry;\r\n            }\r\n\r\n            return 0;\r\n        };\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject._entryCount = this._entryCount;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        if (serializationObject._entryCount && serializationObject._entryCount > 1) {\r\n            for (let i = 1; i < serializationObject._entryCount; i++) {\r\n                this._extend();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleGradientBlock\", ParticleGradientBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3453, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleGradientValueBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleGradientValueBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\n/**\r\n * Block used to define a gradient entry for a gradient block\r\n */\r\nexport class ParticleGradientValueBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the epsilon value used for comparison\r\n     */\r\n    @editableInPropertyPage(\"Reference\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0, max: 1 })\r\n    public reference = 0;\r\n\r\n    /**\r\n     * Creates a new ParticleGradientEntryBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"value\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._outputs[0]._typeConnectionSourceTranslation = (type) => {\r\n            switch (type) {\r\n                case NodeParticleBlockConnectionPointTypes.Float:\r\n                    return NodeParticleBlockConnectionPointTypes.FloatGradient;\r\n                case NodeParticleBlockConnectionPointTypes.Vector2:\r\n                    return NodeParticleBlockConnectionPointTypes.Vector2Gradient;\r\n                case NodeParticleBlockConnectionPointTypes.Vector3:\r\n                    return NodeParticleBlockConnectionPointTypes.Vector3Gradient;\r\n                case NodeParticleBlockConnectionPointTypes.Color4:\r\n                    return NodeParticleBlockConnectionPointTypes.Color4Gradient;\r\n            }\r\n            return type;\r\n        };\r\n\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.Float |\r\n                NodeParticleBlockConnectionPointTypes.Vector2 |\r\n                NodeParticleBlockConnectionPointTypes.Vector3 |\r\n                NodeParticleBlockConnectionPointTypes.Color4\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleGradientValueBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the value operand input component\r\n     */\r\n    public get value(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        this.output._storedFunction = (state) => {\r\n            return null;\r\n        };\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.reference = this.reference;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.reference = serializationObject.reference;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleGradientValueBlock\", ParticleGradientValueBlock);\r\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,qCAAqC,EAAE,MAAM,gDAAgD,CAAC;AAEvG,OAAO,EAAE,sBAAsB,EAA0B,6CAAsC;;;;;;AAIzF,MAAO,0BAA2B,SAAQ,sQAAiB;IAO7D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAXhB;;WAEG,CAEI,IAAA,CAAA,SAAS,GAAG,CAAC,CAAC;QASjB,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,YAAY,CAAC,CAAC;QAElF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,gCAAgC,GAAG,CAAC,IAAI,EAAE,EAAE;YACzD,OAAQ,IAAI,EAAE,CAAC;gBACX,KAAK,uTAAqC,CAAC,KAAK;oBAC5C,OAAO,uTAAqC,CAAC,aAAa,CAAC;gBAC/D,KAAK,uTAAqC,CAAC,OAAO;oBAC9C,OAAO,uTAAqC,CAAC,eAAe,CAAC;gBACjE,KAAK,uTAAqC,CAAC,OAAO;oBAC9C,OAAO,uTAAqC,CAAC,eAAe,CAAC;gBACjE,KAAK,uTAAqC,CAAC,MAAM;oBAC7C,OAAO,uTAAqC,CAAC,cAAc,CAAC;YACpE,CAAC;YACD,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,0CAA0C,CACtD,uTAAqC,CAAC,KAAK,GACvC,uTAAqC,CAAC,OAAO,GAC7C,uTAAqC,CAAC,OAAO,GAC7C,uTAAqC,CAAC,MAAM,CACnD,CAAC;IACN,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,4BAA4B,CAAC;IACxC,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;YACpC,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC;IACN,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE9C,mBAAmB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAE/C,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAExC,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,CAAC;IACnD,CAAC;CACJ;IA5EU,qOAAA,EAAA;QADN,gQAAsB,EAAC,WAAW,EAAA,EAAA,gCAAA,KAAgC,UAAU,EAAE;QAAE,QAAQ,EAAE,IAAI;QAAE,SAAS,EAAE;YAAE,OAAO,EAAE,IAAI;QAAA,CAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;6DAC3H;IA8EzB,6OAAa,EAAC,oCAAoC,EAAE,0BAA0B,CAAC,CAAC"}},
    {"offset": {"line": 3540, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleRandomBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleRandomBlock.ts"],"sourcesContent":["import type { Nullable } from \"core/types\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\n\r\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"core/Decorators/nodeDecorator\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\n\r\n/**\r\n * Locks supported by the random block\r\n */\r\nexport enum ParticleRandomBlockLocks {\r\n    /** None */\r\n    None = 0,\r\n    /** PerParticle */\r\n    PerParticle = 1,\r\n    /** PerSystem */\r\n    PerSystem = 2,\r\n    /** OncePerParticle */\r\n    OncePerParticle = 3,\r\n}\r\n\r\n/**\r\n * Block used to get a random number\r\n */\r\nexport class ParticleRandomBlock extends NodeParticleBlock {\r\n    private _currentLockId = -2;\r\n    private _oncePerParticleMap: Map<number, any> = new Map();\r\n\r\n    /**\r\n     * Gets or sets a value indicating if that block will lock its value for a specific event\r\n     */\r\n    @editableInPropertyPage(\"LockMode\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        notifiers: { rebuild: true },\r\n        embedded: true,\r\n        options: [\r\n            { label: \"None\", value: ParticleRandomBlockLocks.None },\r\n            { label: \"Per particle\", value: ParticleRandomBlockLocks.PerParticle },\r\n            { label: \"Per system\", value: ParticleRandomBlockLocks.PerSystem },\r\n            { label: \"Once per particle\", value: ParticleRandomBlockLocks.OncePerParticle },\r\n        ],\r\n    })\r\n    public lockMode = ParticleRandomBlockLocks.PerParticle;\r\n\r\n    /**\r\n     * Create a new ParticleRandomBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"min\", NodeParticleBlockConnectionPointTypes.AutoDetect, true, 0);\r\n        this.registerInput(\"max\", NodeParticleBlockConnectionPointTypes.AutoDetect, true, 1);\r\n\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.Float |\r\n                NodeParticleBlockConnectionPointTypes.Int |\r\n                NodeParticleBlockConnectionPointTypes.Vector2 |\r\n                NodeParticleBlockConnectionPointTypes.Vector3 |\r\n                NodeParticleBlockConnectionPointTypes.Color4\r\n        );\r\n        this._inputs[1].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.Float |\r\n                NodeParticleBlockConnectionPointTypes.Int |\r\n                NodeParticleBlockConnectionPointTypes.Vector2 |\r\n                NodeParticleBlockConnectionPointTypes.Vector3 |\r\n                NodeParticleBlockConnectionPointTypes.Color4\r\n        );\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._outputs[0]._defaultConnectionPointType = NodeParticleBlockConnectionPointTypes.Float;\r\n        this._linkConnectionTypes(0, 1);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleRandomBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the min input component\r\n     */\r\n    public get min(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the max input component\r\n     */\r\n    public get max(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        let func: Nullable<(state: NodeParticleBuildState) => any> = null;\r\n        this._currentLockId = -2;\r\n        this._oncePerParticleMap.clear();\r\n\r\n        switch (this.min.type) {\r\n            case NodeParticleBlockConnectionPointTypes.AutoDetect:\r\n            case NodeParticleBlockConnectionPointTypes.Int:\r\n            case NodeParticleBlockConnectionPointTypes.Float: {\r\n                func = (state) => {\r\n                    const min = this.min.getConnectedValue(state) ?? 0;\r\n                    const max = this.max.getConnectedValue(state) ?? 1;\r\n                    return min + Math.random() * (max - min);\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Vector2: {\r\n                func = (state) => {\r\n                    const min = this.min.getConnectedValue(state) ?? Vector2.Zero();\r\n                    const max = this.max.getConnectedValue(state) ?? Vector2.One();\r\n                    return new Vector2(min.x + Math.random() * (max.x - min.x), min.y + Math.random() * (max.y - min.y));\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Vector3: {\r\n                func = (state) => {\r\n                    const min = this.min.getConnectedValue(state) ?? Vector3.Zero();\r\n                    const max = this.max.getConnectedValue(state) ?? Vector3.One();\r\n                    return new Vector3(min.x + Math.random() * (max.x - min.x), min.y + Math.random() * (max.y - min.y), min.z + Math.random() * (max.z - min.z));\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Color4: {\r\n                func = (state) => {\r\n                    const min = this.min.getConnectedValue(state) ?? new Color4(0, 0, 0, 0);\r\n                    const max = this.max.getConnectedValue(state) ?? new Color4(1, 1, 1, 1);\r\n                    return new Color4(\r\n                        min.r + Math.random() * (max.r - min.r),\r\n                        min.g + Math.random() * (max.g - min.g),\r\n                        min.b + Math.random() * (max.b - min.b),\r\n                        min.a + Math.random() * (max.a - min.a)\r\n                    );\r\n                };\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.output._storedFunction = (state) => {\r\n            if (this.lockMode === ParticleRandomBlockLocks.OncePerParticle) {\r\n                const particleId = state.particleContext?.id ?? -1;\r\n                let cachedValue = this._oncePerParticleMap.get(particleId);\r\n\r\n                if (!cachedValue) {\r\n                    cachedValue = func!(state);\r\n                    this._oncePerParticleMap.set(particleId, cachedValue);\r\n                }\r\n\r\n                this.output._storedValue = cachedValue;\r\n            } else {\r\n                let lockId = -2;\r\n\r\n                switch (this.lockMode) {\r\n                    case ParticleRandomBlockLocks.PerParticle:\r\n                        lockId = state.particleContext?.id ?? -1;\r\n                        break;\r\n                    case ParticleRandomBlockLocks.PerSystem:\r\n                        lockId = state.buildId ?? 0;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n                if (this.lockMode === ParticleRandomBlockLocks.None || this._currentLockId !== lockId) {\r\n                    if (this.lockMode !== ParticleRandomBlockLocks.None) {\r\n                        this._currentLockId = lockId;\r\n                    }\r\n\r\n                    this.output._storedValue = func!(state);\r\n                }\r\n            }\r\n\r\n            return this.output._storedValue;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.lockMode = this.lockMode;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.lockMode = serializationObject.lockMode;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleRandomBlock\", ParticleRandomBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3727, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleVectorLengthBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleVectorLengthBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\n\r\n/**\r\n * Block used to compute vector length\r\n */\r\nexport class ParticleVectorLengthBlock extends NodeParticleBlock {\r\n    /**\r\n     * Creates a new ParticleVectorLengthBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Float);\r\n\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(NodeParticleBlockConnectionPointTypes.Vector2 | NodeParticleBlockConnectionPointTypes.Vector3);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleVectorLengthBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input operand input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        if (!this.input.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        this.output._storedFunction = (state) => {\r\n            const input = this.input.getConnectedValue(state);\r\n            return input.length();\r\n        };\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleVectorLengthBlock\", ParticleVectorLengthBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,qCAAqC,EAAE,MAAM,gDAAgD,CAAC;;;;AAMjG,MAAO,yBAA0B,SAAQ,sQAAiB;IAC5D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,KAAK,CAAC,CAAC;QAE3E,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,0CAA0C,CAAC,uTAAqC,CAAC,OAAO,GAAG,uTAAqC,CAAC,OAAO,CAAC,CAAC;IAC9J,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,2BAA2B,CAAC;IACvC,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;YAChC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;YACpC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAClD,OAAO,KAAK,CAAC,MAAM,EAAE,CAAC;QAC1B,CAAC,CAAC;IACN,CAAC;CACJ;IAED,6OAAa,EAAC,mCAAmC,EAAE,yBAAyB,CAAC,CAAC"}},
    {"offset": {"line": 3780, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Conditions/particleConditionBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Conditions/particleConditionBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { WithinEpsilon } from \"../../../../Maths/math.scalar.functions\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\n\r\n/**\r\n * Conditions supported by the condition block\r\n */\r\nexport enum ParticleConditionBlockTests {\r\n    /** Equal */\r\n    Equal,\r\n    /** NotEqual */\r\n    NotEqual,\r\n    /** LessThan */\r\n    LessThan,\r\n    /** GreaterThan */\r\n    GreaterThan,\r\n    /** LessOrEqual */\r\n    LessOrEqual,\r\n    /** GreaterOrEqual */\r\n    GreaterOrEqual,\r\n    /** Logical Exclusive OR */\r\n    Xor,\r\n    /** Logical Or */\r\n    Or,\r\n    /** Logical And */\r\n    And,\r\n}\r\n\r\n/**\r\n * Block used to evaluate a condition and return a true or false value as a float (1 or 0).\r\n */\r\nexport class ParticleConditionBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the test used by the block\r\n     */\r\n    @editableInPropertyPage(\"Test\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        notifiers: { rebuild: true },\r\n        embedded: true,\r\n        options: [\r\n            { label: \"Equal\", value: ParticleConditionBlockTests.Equal },\r\n            { label: \"NotEqual\", value: ParticleConditionBlockTests.NotEqual },\r\n            { label: \"LessThan\", value: ParticleConditionBlockTests.LessThan },\r\n            { label: \"GreaterThan\", value: ParticleConditionBlockTests.GreaterThan },\r\n            { label: \"LessOrEqual\", value: ParticleConditionBlockTests.LessOrEqual },\r\n            { label: \"GreaterOrEqual\", value: ParticleConditionBlockTests.GreaterOrEqual },\r\n            { label: \"Xor\", value: ParticleConditionBlockTests.Xor },\r\n            { label: \"Or\", value: ParticleConditionBlockTests.Or },\r\n            { label: \"And\", value: ParticleConditionBlockTests.And },\r\n        ],\r\n    })\r\n    public test = ParticleConditionBlockTests.Equal;\r\n\r\n    /**\r\n     * Gets or sets the epsilon value used for comparison\r\n     */\r\n    @editableInPropertyPage(\"Epsilon\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public epsilon = 0;\r\n\r\n    /**\r\n     * Create a new ParticleConditionBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"left\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerInput(\"right\", NodeParticleBlockConnectionPointTypes.Float, true, 0);\r\n        this.registerInput(\"ifTrue\", NodeParticleBlockConnectionPointTypes.AutoDetect, true, 1);\r\n        this.registerInput(\"ifFalse\", NodeParticleBlockConnectionPointTypes.AutoDetect, true, 0);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.output._typeConnectionSource = this._inputs[2];\r\n        this.output._defaultConnectionPointType = NodeParticleBlockConnectionPointTypes.Float;\r\n        this._inputs[0].acceptedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Int);\r\n        this._inputs[1].acceptedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Int);\r\n        this._linkConnectionTypes(2, 3);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleConditionBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the left input component\r\n     */\r\n    public get left(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the right input component\r\n     */\r\n    public get right(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the ifTrue input component\r\n     */\r\n    public get ifTrue(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the ifFalse input component\r\n     */\r\n    public get ifFalse(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        const func = (state: NodeParticleBuildState) => {\r\n            const left = this.left.getConnectedValue(state) as number;\r\n            const right = this.right.getConnectedValue(state) as number;\r\n            let condition = false;\r\n\r\n            switch (this.test) {\r\n                case ParticleConditionBlockTests.Equal:\r\n                    condition = WithinEpsilon(left, right, this.epsilon);\r\n                    break;\r\n                case ParticleConditionBlockTests.NotEqual:\r\n                    condition = !WithinEpsilon(left, right, this.epsilon);\r\n                    break;\r\n                case ParticleConditionBlockTests.LessThan:\r\n                    condition = left < right + this.epsilon;\r\n                    break;\r\n                case ParticleConditionBlockTests.GreaterThan:\r\n                    condition = left > right - this.epsilon;\r\n                    break;\r\n                case ParticleConditionBlockTests.LessOrEqual:\r\n                    condition = left <= right + this.epsilon;\r\n                    break;\r\n                case ParticleConditionBlockTests.GreaterOrEqual:\r\n                    condition = left >= right - this.epsilon;\r\n                    break;\r\n                case ParticleConditionBlockTests.Xor:\r\n                    condition = (!!left && !right) || (!left && !!right);\r\n                    break;\r\n                case ParticleConditionBlockTests.Or:\r\n                    condition = !!left || !!right;\r\n                    break;\r\n                case ParticleConditionBlockTests.And:\r\n                    condition = !!left && !!right;\r\n                    break;\r\n            }\r\n            return condition;\r\n        };\r\n\r\n        this.output._storedFunction = (state) => {\r\n            if (func(state)) {\r\n                return this.ifTrue.getConnectedValue(state);\r\n            }\r\n\r\n            return this.ifFalse.getConnectedValue(state);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.test = this.test;\r\n        serializationObject.epsilon = this.epsilon;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.test = serializationObject.test;\r\n        if (serializationObject.epsilon !== undefined) {\r\n            this.epsilon = serializationObject.epsilon;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleConditionBlock\", ParticleConditionBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3983, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/coneShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/coneShapeBlock.ts"],"sourcesContent":["import type { IShapeBlock } from \"./IShapeBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\n\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a cone shape.\r\n */\r\nexport class ConeShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    /**\r\n     * Gets or sets a boolean indicating if the system should emit only from the spawn point\r\n     * DirectionRandomizer will be used for the particles initial direction unless both direction1 and direction2 are connected.\r\n     */\r\n    @editableInPropertyPage(\"Emit from spawn point only\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public emitFromSpawnPointOnly = false;\r\n\r\n    /**\r\n     * Create a new ConeShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"radius\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"angle\", NodeParticleBlockConnectionPointTypes.Float, true, Math.PI);\r\n        this.registerInput(\"radiusRange\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"heightRange\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"directionRandomizer\", NodeParticleBlockConnectionPointTypes.Float, true, 0);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ConeShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle input component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the radius input component\r\n     */\r\n    public get radius(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the angle input component\r\n     */\r\n    public get angle(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the radiusRange input component\r\n     */\r\n    public get radiusRange(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the heightRange input component\r\n     */\r\n    public get heightRange(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the directionRandomizer input component\r\n     */\r\n    public get directionRandomizer(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[7];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            // We always use directionRandomizer unless both directions are connected\r\n            if (this.direction1.isConnected === false || this.direction2.isConnected === false) {\r\n                const directionRandomizer = this.directionRandomizer.getConnectedValue(state) as number;\r\n\r\n                const direction = particle.position.subtract(state.emitterPosition!).normalize();\r\n                const randX = RandomRange(0, directionRandomizer);\r\n                const randY = RandomRange(0, directionRandomizer);\r\n                const randZ = RandomRange(0, directionRandomizer);\r\n                direction.x += randX;\r\n                direction.y += randY;\r\n                direction.z += randZ;\r\n                direction.normalize();\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFromFloats(direction.x, direction.y, direction.z);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(direction.x, direction.y, direction.z, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            } else {\r\n                const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n                const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n                const randX = RandomRange(direction1.x, direction2.x);\r\n                const randY = RandomRange(direction1.y, direction2.y);\r\n                const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFromFloats(randX, randY, randZ);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            // Connected values\r\n            const radius = this.radius.getConnectedValue(state) as number;\r\n            const angle = this.angle.getConnectedValue(state) as number;\r\n            const radiusRange = this.radiusRange.getConnectedValue(state) as number;\r\n            const heightRange = this.heightRange.getConnectedValue(state) as number;\r\n\r\n            // Calculate position creation logic\r\n            let h: number;\r\n            if (!this.emitFromSpawnPointOnly) {\r\n                h = RandomRange(0, heightRange);\r\n                // Better distribution in a cone at normal angles.\r\n                h = 1 - h * h;\r\n            } else {\r\n                h = 0.0001;\r\n            }\r\n\r\n            let newRadius = radius - RandomRange(0, radius * radiusRange);\r\n            newRadius = newRadius * h;\r\n            const s = RandomRange(0, Math.PI * 2);\r\n\r\n            const randX = newRadius * Math.sin(s);\r\n            const randZ = newRadius * Math.cos(s);\r\n            const randY = h * this._calculateHeight(angle, radius);\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    private _calculateHeight(angle: number, radius: number): number {\r\n        if (angle !== 0) {\r\n            return radius / Math.tan(angle / 2);\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.emitFromSpawnPointOnly = this.emitFromSpawnPointOnly;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.emitFromSpawnPointOnly = serializationObject.emitFromSpawnPointOnly;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ConeShapeBlock\", ConeShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4174, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/cylinderShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/cylinderShapeBlock.ts"],"sourcesContent":["import type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a cylinder shape.\r\n * DirectionRandomizer will be used for the particles initial direction unless both direction1 and direction2 are connected.\r\n */\r\nexport class CylinderShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    private _tempVector = Vector3.Zero();\r\n    /**\r\n     * Create a new CylinderShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"radius\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"height\", NodeParticleBlockConnectionPointTypes.Float, true, 1, 0);\r\n        this.registerInput(\"radiusRange\", NodeParticleBlockConnectionPointTypes.Float, true, 1, 0, 1);\r\n        this.registerInput(\"directionRandomizer\", NodeParticleBlockConnectionPointTypes.Float, true, 0, 0, 1);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"CylinderShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the radius input component\r\n     */\r\n    public get radius(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the height input component\r\n     */\r\n    public get height(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the radiusRange input component\r\n     */\r\n    public get radiusRange(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the directionRandomizer input component\r\n     */\r\n    public get directionRandomizer(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            // We always use directionRandomizer unless both directions are connected\r\n            if (this.direction1.isConnected === false || this.direction2.isConnected === false) {\r\n                const directionRandomizer = this.directionRandomizer.getConnectedValue(state) as number;\r\n\r\n                particle.position.subtractToRef(state.emitterPosition!, this._tempVector);\r\n                this._tempVector.normalize();\r\n\r\n                if (state.emitterInverseWorldMatrix) {\r\n                    Vector3.TransformNormalToRef(this._tempVector, state.emitterInverseWorldMatrix, this._tempVector);\r\n                }\r\n\r\n                const randY = RandomRange(-directionRandomizer / 2, directionRandomizer / 2);\r\n\r\n                let angle = Math.atan2(this._tempVector.x, this._tempVector.z);\r\n                angle += RandomRange(-Math.PI / 2, Math.PI / 2) * directionRandomizer;\r\n\r\n                this._tempVector.y = randY; // set direction y to rand y to mirror normal of cylinder surface\r\n                this._tempVector.x = Math.sin(angle);\r\n                this._tempVector.z = Math.cos(angle);\r\n                this._tempVector.normalize();\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFrom(this._tempVector);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(this._tempVector.x, this._tempVector.y, this._tempVector.z, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            } else {\r\n                const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n                const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n                const randX = RandomRange(direction1.x, direction2.x);\r\n                const randY = RandomRange(direction1.y, direction2.y);\r\n                const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFromFloats(randX, randY, randZ);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const height = this.height.getConnectedValue(state) as number;\r\n            const radiusRange = this.radiusRange.getConnectedValue(state) as number;\r\n            const radius = this.radius.getConnectedValue(state) as number;\r\n\r\n            const yPos = RandomRange(-height / 2, height / 2);\r\n            const angle = RandomRange(0, 2 * Math.PI);\r\n\r\n            // Pick a properly distributed point within the circle https://programming.guide/random-point-within-circle.html\r\n            const radiusDistribution = RandomRange((1 - radiusRange) * (1 - radiusRange), 1);\r\n            const positionRadius = Math.sqrt(radiusDistribution) * radius;\r\n            const xPos = positionRadius * Math.cos(angle);\r\n            const zPos = positionRadius * Math.sin(angle);\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(xPos, yPos, zPos);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(xPos, yPos, zPos, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.CylinderShapeBlock\", CylinderShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4322, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/customShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/customShapeBlock.ts"],"sourcesContent":["import type { Nullable } from \"core/types\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { TmpVectors, Vector3 } from \"core/Maths/math.vector\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { EmptyGeneratorFunc } from \"core/Particles/EmitterTypes/customParticleEmitter\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/** Function that generates particle position/direction data */\r\ntype ParticleGeneratorFunction = (index: number, particle: Nullable<Particle>, outPosition: Vector3) => void;\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a custom position.\r\n */\r\nexport class CustomShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    /** The particle position generator function */\r\n    public particlePositionGenerator: ParticleGeneratorFunction = EmptyGeneratorFunc;\r\n    /** The particle destination generator function */\r\n    public particleDestinationGenerator: ParticleGeneratorFunction = EmptyGeneratorFunc;\r\n    /** The particle direction generator function */\r\n    public particleDirectionGenerator: ParticleGeneratorFunction = EmptyGeneratorFunc;\r\n\r\n    /**\r\n     * Create a new CustomShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"CustomShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const tmpVector = TmpVectors.Vector3[0];\r\n\r\n            if (this.particleDirectionGenerator && this.particleDirectionGenerator !== EmptyGeneratorFunc) {\r\n                this.particleDirectionGenerator(-1, particle, tmpVector);\r\n            } else if (this.particleDestinationGenerator && this.particleDestinationGenerator !== EmptyGeneratorFunc) {\r\n                this.particleDestinationGenerator(-1, particle, tmpVector);\r\n\r\n                // Get direction\r\n                const diffVector = TmpVectors.Vector3[1];\r\n                tmpVector.subtractToRef(particle.position, diffVector);\r\n\r\n                diffVector.scaleToRef(1 / particle.lifeTime, tmpVector);\r\n            } else {\r\n                tmpVector.set(0, 0, 0);\r\n            }\r\n\r\n            if (system.isLocal) {\r\n                particle.direction.copyFrom(tmpVector);\r\n            } else {\r\n                Vector3.TransformNormalToRef(tmpVector, state.emitterWorldMatrix!, particle.direction);\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const tmpVector = TmpVectors.Vector3[0];\r\n\r\n            if (this.particlePositionGenerator && this.particlePositionGenerator !== EmptyGeneratorFunc) {\r\n                this.particlePositionGenerator(-1, particle, tmpVector);\r\n            } else {\r\n                tmpVector.set(0, 0, 0);\r\n            }\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFrom(tmpVector);\r\n            } else {\r\n                Vector3.TransformCoordinatesToRef(tmpVector, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.CustomShapeBlock\", CustomShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4417, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/meshShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/meshShapeBlock.ts"],"sourcesContent":["import type { FloatArray, IndicesArray, Nullable } from \"core/types\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { VertexData } from \"core/Meshes/mesh.vertexData\";\r\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"core/Decorators/nodeDecorator\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { TmpVectors, Vector3, Vector4 } from \"core/Maths/math.vector\";\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/**\r\n * Defines a block used to generate particle shape from mesh geometry data\r\n */\r\nexport class MeshShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    private _mesh: Nullable<Mesh>;\r\n    private _cachedVertexData: Nullable<VertexData> = null;\r\n    private _indices: Nullable<IndicesArray> = null;\r\n    private _positions: Nullable<FloatArray> = null;\r\n    private _normals: Nullable<FloatArray> = null;\r\n    private _colors: Nullable<FloatArray> = null;\r\n    private _storedNormal = Vector3.Zero();\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this block should serialize its cached data\r\n     */\r\n    @editableInPropertyPage(\"Serialize cached data\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public serializedCachedData = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the mesh normals should be used for particle direction\r\n     */\r\n    @editableInPropertyPage(\"Use normals for direction\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public useMeshNormalsForDirection = true;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the mesh colors should be used for particle color\r\n     */\r\n    @editableInPropertyPage(\"Use vertex color for color\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public useMeshColorForColor = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the coordinates should be in world space (local space by default)\r\n     */\r\n    @editableInPropertyPage(\"World space\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public worldSpace = false;\r\n\r\n    /**\r\n     * Gets or sets the mesh to use to get vertex data\r\n     */\r\n    public get mesh() {\r\n        return this._mesh;\r\n    }\r\n\r\n    public set mesh(value: Nullable<Mesh>) {\r\n        this._mesh = value;\r\n    }\r\n\r\n    /**\r\n     * Create a new MeshShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"MeshShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the block is using cached data\r\n     */\r\n    public get isUsingCachedData() {\r\n        return !this.mesh && !!this._cachedVertexData;\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Remove stored data\r\n     */\r\n    public cleanData() {\r\n        this._mesh = null;\r\n        this._cachedVertexData = null;\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        if (!this._mesh && !this._cachedVertexData) {\r\n            this.output._storedValue = system;\r\n            return;\r\n        }\r\n\r\n        if (this._mesh) {\r\n            this._cachedVertexData = VertexData.ExtractFromMesh(this._mesh, false, true);\r\n        }\r\n\r\n        if (!this._cachedVertexData) {\r\n            this.output._storedValue = system;\r\n            return;\r\n        }\r\n\r\n        this._indices = this._cachedVertexData.indices;\r\n        this._positions = this._cachedVertexData.positions;\r\n        this._normals = this._cachedVertexData.normals;\r\n        this._colors = this._cachedVertexData.colors;\r\n\r\n        if (this.useMeshColorForColor && this._colors) {\r\n            system._colorCreation.process = () => {};\r\n        }\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            if (this.useMeshNormalsForDirection && this._normals) {\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFrom(this._storedNormal);\r\n                } else {\r\n                    Vector3.TransformNormalToRef(this._storedNormal, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n                return;\r\n            }\r\n\r\n            const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n            const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n            const randX = RandomRange(direction1.x, direction2.x);\r\n            const randY = RandomRange(direction1.y, direction2.y);\r\n            const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n            if (system.isLocal) {\r\n                particle.direction.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            if (!this._indices || !this._positions) {\r\n                return;\r\n            }\r\n\r\n            const randomFaceIndex = 3 * ((Math.random() * (this._indices.length / 3)) | 0);\r\n            const bu = Math.random();\r\n            const bv = Math.random() * (1.0 - bu);\r\n            const bw = 1.0 - bu - bv;\r\n\r\n            const faceIndexA = this._indices[randomFaceIndex];\r\n            const faceIndexB = this._indices[randomFaceIndex + 1];\r\n            const faceIndexC = this._indices[randomFaceIndex + 2];\r\n            const vertexA = TmpVectors.Vector3[0];\r\n            const vertexB = TmpVectors.Vector3[1];\r\n            const vertexC = TmpVectors.Vector3[2];\r\n            const randomVertex = TmpVectors.Vector3[3];\r\n\r\n            Vector3.FromArrayToRef(this._positions, faceIndexA * 3, vertexA);\r\n            Vector3.FromArrayToRef(this._positions, faceIndexB * 3, vertexB);\r\n            Vector3.FromArrayToRef(this._positions, faceIndexC * 3, vertexC);\r\n\r\n            randomVertex.x = bu * vertexA.x + bv * vertexB.x + bw * vertexC.x;\r\n            randomVertex.y = bu * vertexA.y + bv * vertexB.y + bw * vertexC.y;\r\n            randomVertex.z = bu * vertexA.z + bv * vertexB.z + bw * vertexC.z;\r\n\r\n            if (this.worldSpace && this.mesh) {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(randomVertex.x, randomVertex.y, randomVertex.z, this.mesh.getWorldMatrix(), randomVertex);\r\n            }\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(randomVertex.x, randomVertex.y, randomVertex.z);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(randomVertex.x, randomVertex.y, randomVertex.z, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n\r\n            if (this.useMeshNormalsForDirection && this._normals) {\r\n                Vector3.FromArrayToRef(this._normals, faceIndexA * 3, vertexA);\r\n                Vector3.FromArrayToRef(this._normals, faceIndexB * 3, vertexB);\r\n                Vector3.FromArrayToRef(this._normals, faceIndexC * 3, vertexC);\r\n\r\n                this._storedNormal.x = bu * vertexA.x + bv * vertexB.x + bw * vertexC.x;\r\n                this._storedNormal.y = bu * vertexA.y + bv * vertexB.y + bw * vertexC.y;\r\n                this._storedNormal.z = bu * vertexA.z + bv * vertexB.z + bw * vertexC.z;\r\n            }\r\n\r\n            if (this.useMeshColorForColor && this._colors) {\r\n                Vector4.FromArrayToRef(this._colors, faceIndexA * 4, TmpVectors.Vector4[0]);\r\n                Vector4.FromArrayToRef(this._colors, faceIndexB * 4, TmpVectors.Vector4[1]);\r\n                Vector4.FromArrayToRef(this._colors, faceIndexC * 4, TmpVectors.Vector4[2]);\r\n\r\n                particle.color.copyFromFloats(\r\n                    bu * TmpVectors.Vector4[0].x + bv * TmpVectors.Vector4[1].x + bw * TmpVectors.Vector4[2].x,\r\n                    bu * TmpVectors.Vector4[0].y + bv * TmpVectors.Vector4[1].y + bw * TmpVectors.Vector4[2].y,\r\n                    bu * TmpVectors.Vector4[0].z + bv * TmpVectors.Vector4[1].z + bw * TmpVectors.Vector4[2].z,\r\n                    bu * TmpVectors.Vector4[0].w + bv * TmpVectors.Vector4[1].w + bw * TmpVectors.Vector4[2].w\r\n                );\r\n            }\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.serializedCachedData = this.serializedCachedData;\r\n\r\n        if (this.serializedCachedData) {\r\n            if (this._mesh) {\r\n                serializationObject.cachedVertexData = VertexData.ExtractFromMesh(this._mesh, false, true).serialize();\r\n            } else if (this._cachedVertexData) {\r\n                serializationObject.cachedVertexData = this._cachedVertexData.serialize();\r\n            }\r\n        }\r\n\r\n        serializationObject.useMeshNormalsForDirection = this.useMeshNormalsForDirection;\r\n        serializationObject.useMeshColorForColor = this.useMeshColorForColor;\r\n        serializationObject.worldSpace = this.worldSpace;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        if (serializationObject.cachedVertexData) {\r\n            this._cachedVertexData = VertexData.Parse(serializationObject.cachedVertexData);\r\n        }\r\n\r\n        this.serializedCachedData = !!serializationObject.serializedCachedData;\r\n        this.useMeshNormalsForDirection = !!serializationObject.useMeshNormalsForDirection;\r\n        this.useMeshColorForColor = !!serializationObject.useMeshColorForColor;\r\n        this.worldSpace = !!serializationObject.worldSpace;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.MeshShapeBlock\", MeshShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4674, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/pointShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/pointShapeBlock.ts"],"sourcesContent":["import type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a point.\r\n */\r\nexport class PointShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    /**\r\n     * Create a new PointShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true, new Vector3(0, 1.0, 0));\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"PointShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n            const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n            const randX = RandomRange(direction1.x, direction2.x);\r\n            const randY = RandomRange(direction1.y, direction2.y);\r\n            const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n            if (system.isLocal) {\r\n                particle.direction.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.systemContext = system;\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(0, 0, 0);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(0, 0, 0, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.PointShapeBlock\", PointShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4764, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/sphereShapeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/sphereShapeBlock.ts"],"sourcesContent":["import type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { IShapeBlock } from \"./IShapeBlock\";\r\n\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { RandomRange } from \"core/Maths/math.scalar.functions\";\r\nimport { _CreateLocalPositionData } from \"./emitters.functions\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\n\r\n/**\r\n * Block used to provide a flow of particles emitted from a sphere shape.\r\n * DirectionRandomizer will be used for the particles initial direction unless both direction1 and direction2 are connected.\r\n */\r\nexport class SphereShapeBlock extends NodeParticleBlock implements IShapeBlock {\r\n    /**\r\n     * Gets or sets a boolean indicating whether to emit in a hemispheric mode (top half of the sphere) or not\r\n     */\r\n    @editableInPropertyPage(\"Is hemispheric\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public isHemispheric = false;\r\n\r\n    /**\r\n     * Create a new SphereShapeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"radius\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerInput(\"radiusRange\", NodeParticleBlockConnectionPointTypes.Float, true, 1, 0, 1);\r\n        this.registerInput(\"directionRandomizer\", NodeParticleBlockConnectionPointTypes.Float, true, 0, 0, 1);\r\n        this.registerInput(\"direction1\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerInput(\"direction2\", NodeParticleBlockConnectionPointTypes.Vector3, true);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"SphereShapeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the radius input component\r\n     */\r\n    public get radius(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the radiusRange input component\r\n     */\r\n    public get radiusRange(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the directionRandomizer input component\r\n     */\r\n    public get directionRandomizer(): NodeParticleConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction1 input component\r\n     */\r\n    public get direction1(): NodeParticleConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction2 input component\r\n     */\r\n    public get direction2(): NodeParticleConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state);\r\n\r\n        system._directionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            // We always use directionRandomizer unless both directions are connected\r\n            if (this.direction1.isConnected === false || this.direction2.isConnected === false) {\r\n                const directionRandomizer = this.directionRandomizer.getConnectedValue(state) as number;\r\n\r\n                const direction = particle.position.subtract(state.emitterPosition!).normalize();\r\n                const randX = RandomRange(0, directionRandomizer);\r\n                const randY = RandomRange(0, directionRandomizer);\r\n                const randZ = RandomRange(0, directionRandomizer);\r\n                direction.x += randX;\r\n                direction.y += randY;\r\n                direction.z += randZ;\r\n                direction.normalize();\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFromFloats(direction.x, direction.y, direction.z);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(direction.x, direction.y, direction.z, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            } else {\r\n                const direction1 = this.direction1.getConnectedValue(state) as Vector3;\r\n                const direction2 = this.direction2.getConnectedValue(state) as Vector3;\r\n\r\n                const randX = RandomRange(direction1.x, direction2.x);\r\n                const randY = RandomRange(direction1.y, direction2.y);\r\n                const randZ = RandomRange(direction1.z, direction2.z);\r\n\r\n                if (system.isLocal) {\r\n                    particle.direction.copyFromFloats(randX, randY, randZ);\r\n                } else {\r\n                    Vector3.TransformNormalFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.direction);\r\n                }\r\n            }\r\n\r\n            particle._initialDirection = particle.direction.clone();\r\n        };\r\n\r\n        system._positionCreation.process = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            const radius = this.radius.getConnectedValue(state) as number;\r\n            const radiusRange = this.radiusRange.getConnectedValue(state) as number;\r\n\r\n            const randRadius = radius - RandomRange(0, radius * radiusRange);\r\n            const v = RandomRange(0, 1.0);\r\n            const phi = RandomRange(0, 2 * Math.PI);\r\n            const theta = Math.acos(2 * v - 1);\r\n            const randX = randRadius * Math.cos(phi) * Math.sin(theta);\r\n            let randY = randRadius * Math.cos(theta);\r\n            const randZ = randRadius * Math.sin(phi) * Math.sin(theta);\r\n\r\n            if (this.isHemispheric) {\r\n                randY = Math.abs(randY);\r\n            }\r\n\r\n            if (system.isLocal) {\r\n                particle.position.copyFromFloats(randX, randY, randZ);\r\n            } else {\r\n                Vector3.TransformCoordinatesFromFloatsToRef(randX, randY, randZ, state.emitterWorldMatrix!, particle.position);\r\n            }\r\n\r\n            _CreateLocalPositionData(particle);\r\n        };\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.isHemispheric = this.isHemispheric;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.isHemispheric = serializationObject.isHemispheric;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.SphereShapeBlock\", SphereShapeBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4927, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateAngleBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateAngleBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to update the angle of a particle\r\n */\r\nexport class UpdateAngleBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateAngleBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"angle\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the angle input component\r\n     */\r\n    public get angle(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateAngleBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.angle.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processAngle = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.angle = this.angle.getConnectedValue(state);\r\n        };\r\n\r\n        const angleProcessing = {\r\n            process: processAngle,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(angleProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = angleProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateAngleBlock\", UpdateAngleBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,gBAAiB,SAAQ,sQAAiB;IACnD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,KAAK,CAAC,CAAC;QACzE,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,kBAAkB,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YAC1B,OAAO;QACX,CAAC;QAED,MAAM,YAAY,GAAG,CAAC,QAAkB,EAAE,EAAE;YACxC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QACzD,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG;YACpB,OAAO,EAAE,YAAY;YACrB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,eAAe,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAChE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAC;QAC/C,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,0BAA0B,EAAE,gBAAgB,CAAC,CAAC"}},
    {"offset": {"line": 5001, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateColorBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateColorBlock.ts"],"sourcesContent":["import type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport type { Color4 } from \"core/Maths\";\r\n\r\n/**\r\n * Block used to update the color of a particle\r\n */\r\nexport class UpdateColorBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateColorBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"color\", NodeParticleBlockConnectionPointTypes.Color4);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the color input component\r\n     */\r\n    public get color(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateColorBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.color.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processColor = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.color.copyFrom(this.color.getConnectedValue(state) as Color4);\r\n        };\r\n\r\n        const colorProcessing = {\r\n            process: processColor,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(colorProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = colorProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateColorBlock\", UpdateColorBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAI5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAMjE,MAAO,gBAAiB,SAAQ,sQAAiB;IACnD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,MAAM,CAAC,CAAC;QAC1E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,kBAAkB,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YAC1B,OAAO;QACX,CAAC;QAED,MAAM,YAAY,GAAG,CAAC,QAAkB,EAAE,EAAE;YACxC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAW,CAAC,CAAC;QAC3E,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG;YACpB,OAAO,EAAE,YAAY;YACrB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,eAAe,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAChE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAC;QAC/C,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,0BAA0B,EAAE,gBAAgB,CAAC,CAAC"}},
    {"offset": {"line": 5075, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateDirectionBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateDirectionBlock.ts"],"sourcesContent":["import type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport type { Vector3 } from \"core/Maths/math.vector\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to update the direction of a particle\r\n */\r\nexport class UpdateDirectionBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateDirectionBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"direction\", NodeParticleBlockConnectionPointTypes.Vector3);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the direction input component\r\n     */\r\n    public get direction(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateDirectionBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.direction.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processDirection = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.direction.copyFrom(this.direction.getConnectedValue(state) as Vector3);\r\n        };\r\n\r\n        const directionProcessing = {\r\n            process: processDirection,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(directionProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = directionProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateDirectionBlock\", UpdateDirectionBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,oBAAqB,SAAQ,sQAAiB;IACvD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,sBAAsB,CAAC;IAClC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;YAC9B,OAAO;QACX,CAAC;QAED,MAAM,gBAAgB,GAAG,CAAC,QAAkB,EAAE,EAAE;YAC5C,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,KAAK,CAAY,CAAC,CAAC;QACpF,CAAC,CAAC;QAEF,MAAM,mBAAmB,GAAG;YACxB,OAAO,EAAE,gBAAgB;YACzB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,mBAAmB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACpE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,mBAAmB,CAAC;QACnD,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,8BAA8B,EAAE,oBAAoB,CAAC,CAAC"}},
    {"offset": {"line": 5149, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateSizeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateSizeBlock.ts"],"sourcesContent":["import type { Particle } from \"core/Particles/particle\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"core/Particles/Node/nodeParticleBuildState\";\r\n\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"core/Particles/Node/nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to update the size of a particle\r\n */\r\nexport class UpdateSizeBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateSizeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"size\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the size input component\r\n     */\r\n    public get size(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateSizeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.size.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processSize = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.size = this.size.getConnectedValue(state) as number;\r\n        };\r\n\r\n        const sizeProcessing = {\r\n            process: processSize,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(sizeProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = sizeProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateSizeBlock\", UpdateSizeBlock);\r\n"],"names":[],"mappings":";;;;AAKA,OAAO,EAAE,aAAa,EAAE,sCAA4B;AACpD,OAAO,EAAE,iBAAiB,EAAE,mCAA8C;AAC1E,OAAO,EAAE,qCAAqC,EAAE,6DAAwE;AACxH,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,eAAgB,SAAQ,sQAAiB;IAClD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,uTAAqC,CAAC,KAAK,CAAC,CAAC;QACxE,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,iBAAiB,CAAC;IAC7B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,OAAO;QACX,CAAC;QAED,MAAM,WAAW,GAAG,CAAC,QAAkB,EAAE,EAAE;YACvC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAW,CAAC;QACjE,CAAC,CAAC;QAEF,MAAM,cAAc,GAAG;YACnB,OAAO,EAAE,WAAW;YACpB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,cAAc,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC/D,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,cAAc,CAAC;QAC9C,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,yBAAyB,EAAE,eAAe,CAAC,CAAC"}},
    {"offset": {"line": 5223, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/nodeParticleSystemSet.helper.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/nodeParticleSystemSet.helper.ts"],"sourcesContent":["import type { Nullable } from \"core/types\";\r\nimport type { Color4 } from \"core/Maths/math.color\";\r\nimport type { Texture } from \"core/Materials/Textures/texture\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { ColorGradient, FactorGradient } from \"core/Misc\";\r\nimport type { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport type { IParticleSystem } from \"core/Particles/IParticleSystem\";\r\nimport type { BoxParticleEmitter } from \"core/Particles/EmitterTypes/boxParticleEmitter\";\r\nimport type { ConeDirectedParticleEmitter, ConeParticleEmitter } from \"core/Particles/EmitterTypes/coneParticleEmitter\";\r\nimport type { CustomParticleEmitter } from \"core/Particles/EmitterTypes/customParticleEmitter\";\r\nimport type { CylinderDirectedParticleEmitter, CylinderParticleEmitter } from \"core/Particles/EmitterTypes/cylinderParticleEmitter\";\r\nimport type { HemisphericParticleEmitter } from \"core/Particles/EmitterTypes/hemisphericParticleEmitter\";\r\nimport type { MeshParticleEmitter } from \"core/Particles/EmitterTypes/meshParticleEmitter\";\r\nimport type { PointParticleEmitter } from \"core/Particles/EmitterTypes/pointParticleEmitter\";\r\nimport type { SphereDirectedParticleEmitter, SphereParticleEmitter } from \"core/Particles/EmitterTypes/sphereParticleEmitter\";\r\nimport type { NodeParticleConnectionPoint } from \"core/Particles/Node/nodeParticleBlockConnectionPoint\";\r\nimport type { IShapeBlock } from \"core/Particles/Node/Blocks/Emitters/IShapeBlock\";\r\nimport type { NodeParticleBlockConnectionPointTypes } from \"core/Particles/Node/Enums/nodeParticleBlockConnectionPointTypes\";\r\n\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleSystemSet } from \"./nodeParticleSystemSet\";\r\nimport { NodeParticleContextualSources } from \"./Enums/nodeParticleContextualSources\";\r\nimport { NodeParticleSystemSources } from \"./Enums/nodeParticleSystemSources\";\r\nimport { ParticleConverterBlock } from \"./Blocks/particleConverterBlock\";\r\nimport { ParticleFloatToIntBlock, ParticleFloatToIntBlockOperations } from \"./Blocks/particleFloatToIntBlock\";\r\nimport { ParticleGradientBlock } from \"./Blocks/particleGradientBlock\";\r\nimport { ParticleGradientValueBlock } from \"./Blocks/particleGradientValueBlock\";\r\nimport { ParticleInputBlock } from \"./Blocks/particleInputBlock\";\r\nimport { ParticleMathBlock, ParticleMathBlockOperations } from \"./Blocks/particleMathBlock\";\r\nimport { ParticleRandomBlock, ParticleRandomBlockLocks } from \"./Blocks/particleRandomBlock\";\r\nimport { ParticleTextureSourceBlock } from \"./Blocks/particleSourceTextureBlock\";\r\nimport { ParticleVectorLengthBlock } from \"./Blocks/particleVectorLengthBlock\";\r\nimport { SystemBlock } from \"./Blocks/systemBlock\";\r\nimport { ParticleConditionBlock, ParticleConditionBlockTests } from \"./Blocks/Conditions/particleConditionBlock\";\r\nimport { CreateParticleBlock } from \"./Blocks/Emitters/createParticleBlock\";\r\nimport { BoxShapeBlock } from \"./Blocks/Emitters/boxShapeBlock\";\r\nimport { ConeShapeBlock } from \"./Blocks/Emitters/coneShapeBlock\";\r\nimport { CylinderShapeBlock } from \"./Blocks/Emitters/cylinderShapeBlock\";\r\nimport { CustomShapeBlock } from \"./Blocks/Emitters/customShapeBlock\";\r\nimport { MeshShapeBlock } from \"./Blocks/Emitters/meshShapeBlock\";\r\nimport { PointShapeBlock } from \"./Blocks/Emitters/pointShapeBlock\";\r\nimport { SphereShapeBlock } from \"./Blocks/Emitters/sphereShapeBlock\";\r\nimport { UpdateAngleBlock } from \"./Blocks/Update/updateAngleBlock\";\r\nimport { UpdateColorBlock } from \"./Blocks/Update/updateColorBlock\";\r\nimport { UpdateDirectionBlock } from \"./Blocks/Update/updateDirectionBlock\";\r\nimport { UpdatePositionBlock } from \"./Blocks/Update/updatePositionBlock\";\r\nimport { UpdateSizeBlock } from \"./Blocks/Update/updateSizeBlock\";\r\n\r\n/** Represents blocks or groups of blocks that can be used in multiple places in the graph, so they are stored in this context to be reused */\r\ntype ConversionContext = {\r\n    targetStopDurationBlockOutput: NodeParticleConnectionPoint;\r\n    // Connections that represent calculated ratios values\r\n    timeToStopTimeRatioBlockGroupOutput: NodeParticleConnectionPoint;\r\n    ageToLifeTimeRatioBlockGroupOutput: NodeParticleConnectionPoint;\r\n    // Connections for the start value of a gradient. These are stored so they can be reused for the Creation phase and the Update phase of the particle\r\n    sizeGradientValue0Output: NodeParticleConnectionPoint;\r\n    colorGradientValue0Output: NodeParticleConnectionPoint;\r\n    // Updated scaled direction direction based on velocity and drag\r\n    scaledDirection: NodeParticleConnectionPoint;\r\n};\r\n\r\ntype RuntimeConversionContext = Partial<ConversionContext>;\r\n\r\n/**\r\n * Converts a ParticleSystem to a NodeParticleSystemSet.\r\n * @param name The name of the node particle system set.\r\n * @param particleSystemsList The particle systems to convert.\r\n * @returns The converted node particle system set or null if conversion failed.\r\n */\r\nexport async function ConvertToNodeParticleSystemSetAsync(name: string, particleSystemsList: ParticleSystem[]): Promise<Nullable<NodeParticleSystemSet>> {\r\n    if (!particleSystemsList || !particleSystemsList.length) {\r\n        return null;\r\n    }\r\n\r\n    const nodeParticleSystemSet = new NodeParticleSystemSet(name);\r\n    const promises: Promise<void>[] = [];\r\n\r\n    for (const particleSystem of particleSystemsList) {\r\n        promises.push(_ExtractDatafromParticleSystemAsync(nodeParticleSystemSet, particleSystem, {}));\r\n    }\r\n\r\n    await Promise.all(promises);\r\n    return nodeParticleSystemSet;\r\n}\r\n\r\nasync function _ExtractDatafromParticleSystemAsync(newSet: NodeParticleSystemSet, oldSystem: ParticleSystem, context: RuntimeConversionContext): Promise<void> {\r\n    // CreateParticle block group\r\n    const createParticleOutput = _CreateParticleBlockGroup(oldSystem, context);\r\n\r\n    // Emitter Shape block\r\n    const shapeOutput = _EmitterShapeBlock(oldSystem);\r\n    createParticleOutput.particle.connectTo(shapeOutput.particle);\r\n\r\n    // UpdateParticle block group\r\n    const updateParticleOutput = _UpdateParticleBlockGroup(shapeOutput.output, oldSystem, context);\r\n\r\n    // System block\r\n    const newSystem = _SystemBlockGroup(oldSystem, context);\r\n    updateParticleOutput.connectTo(newSystem.particle);\r\n\r\n    // Register\r\n    newSet.systemBlocks.push(newSystem);\r\n}\r\n\r\n// ------------- CREATE PARTICLE FUNCTIONS -------------\r\n\r\n// The creation of the different properties follows the order they are added to the CreationQueue in ThinParticleSystem:\r\n// Lifetime, Emit Power, Size, Scale/StartSize, Angle, Color, Noise, ColorDead, Ramp, Sheet\r\nfunction _CreateParticleBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): CreateParticleBlock {\r\n    // Create particle block\r\n    const createParticleBlock = new CreateParticleBlock(\"Create Particle\");\r\n\r\n    _CreateParticleLifetimeBlockGroup(oldSystem, context).connectTo(createParticleBlock.lifeTime);\r\n    _CreateParticleEmitPowerBlockGroup(oldSystem).connectTo(createParticleBlock.emitPower);\r\n    _CreateParticleSizeBlockGroup(oldSystem, context).connectTo(createParticleBlock.size);\r\n    _CreateParticleScaleBlockGroup(oldSystem, context).connectTo(createParticleBlock.scale);\r\n    _CreateParticleAngleBlockGroup(oldSystem).connectTo(createParticleBlock.angle);\r\n    _CreateParticleColorBlockGroup(oldSystem, context).connectTo(createParticleBlock.color);\r\n\r\n    // Dead color\r\n    _CreateAndConnectInput(\"Dead Color\", oldSystem.colorDead, createParticleBlock.colorDead);\r\n\r\n    return createParticleBlock;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle lifetime\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle lifetime\r\n */\r\nfunction _CreateParticleLifetimeBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    if (oldSystem.targetStopDuration && oldSystem._lifeTimeGradients && oldSystem._lifeTimeGradients.length > 0) {\r\n        context.timeToStopTimeRatioBlockGroupOutput = _CreateTimeToStopTimeRatioBlockGroup(oldSystem, context);\r\n        const gradientBlockGroupOutput = _CreateGradientBlockGroup(\r\n            context.timeToStopTimeRatioBlockGroupOutput,\r\n            oldSystem._lifeTimeGradients,\r\n            ParticleRandomBlockLocks.PerParticle,\r\n            \"Lifetime\"\r\n        );\r\n        return gradientBlockGroupOutput;\r\n    } else {\r\n        const randomLifetimeBlock = new ParticleRandomBlock(\"Random Lifetime\");\r\n        _CreateAndConnectInput(\"Min Lifetime\", oldSystem.minLifeTime, randomLifetimeBlock.min);\r\n        _CreateAndConnectInput(\"Max Lifetime\", oldSystem.maxLifeTime, randomLifetimeBlock.max);\r\n        return randomLifetimeBlock.output;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle emit power\r\n * @param oldSystem The old particle system to convert\r\n * @returns The output of the group of blocks that represent the particle emit power\r\n */\r\nfunction _CreateParticleEmitPowerBlockGroup(oldSystem: ParticleSystem): NodeParticleConnectionPoint {\r\n    const randomEmitPowerBlock = new ParticleRandomBlock(\"Random Emit Power\");\r\n    _CreateAndConnectInput(\"Min Emit Power\", oldSystem.minEmitPower, randomEmitPowerBlock.min);\r\n    _CreateAndConnectInput(\"Max Emit Power\", oldSystem.maxEmitPower, randomEmitPowerBlock.max);\r\n    return randomEmitPowerBlock.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle size\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle size\r\n */\r\nfunction _CreateParticleSizeBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    if (oldSystem._sizeGradients && oldSystem._sizeGradients.length > 0) {\r\n        context.sizeGradientValue0Output = _CreateParticleInitialValueFromGradient(oldSystem._sizeGradients);\r\n        return context.sizeGradientValue0Output;\r\n    } else {\r\n        const randomSizeBlock = new ParticleRandomBlock(\"Random size\");\r\n        _CreateAndConnectInput(\"Min size\", oldSystem.minSize, randomSizeBlock.min);\r\n        _CreateAndConnectInput(\"Max size\", oldSystem.maxSize, randomSizeBlock.max);\r\n        return randomSizeBlock.output;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle scale\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle scale\r\n */\r\nfunction _CreateParticleScaleBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // Create the random scale\r\n    const randomScaleBlock = new ParticleRandomBlock(\"Random Scale\");\r\n    _CreateAndConnectInput(\"Min Scale\", new Vector2(oldSystem.minScaleX, oldSystem.minScaleY), randomScaleBlock.min);\r\n    _CreateAndConnectInput(\"Max Scale\", new Vector2(oldSystem.maxScaleX, oldSystem.maxScaleY), randomScaleBlock.max);\r\n\r\n    if (oldSystem.targetStopDuration && oldSystem._startSizeGradients && oldSystem._startSizeGradients.length > 0) {\r\n        // Create the start size gradient\r\n        context.timeToStopTimeRatioBlockGroupOutput = _CreateTimeToStopTimeRatioBlockGroup(oldSystem, context);\r\n        const gradientBlockGroupOutput = _CreateGradientBlockGroup(\r\n            context.timeToStopTimeRatioBlockGroupOutput,\r\n            oldSystem._startSizeGradients,\r\n            ParticleRandomBlockLocks.PerParticle,\r\n            \"Start Size\"\r\n        );\r\n\r\n        // Multiply the initial random scale by the start size gradient\r\n        const multiplyScaleBlock = new ParticleMathBlock(\"Multiply Scale by Start Size Gradient\");\r\n        multiplyScaleBlock.operation = ParticleMathBlockOperations.Multiply;\r\n        randomScaleBlock.output.connectTo(multiplyScaleBlock.left);\r\n        gradientBlockGroupOutput.connectTo(multiplyScaleBlock.right);\r\n\r\n        return multiplyScaleBlock.output;\r\n    } else {\r\n        return randomScaleBlock.output;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle angle (rotation)\r\n * @param oldSystem The old particle system to convert\r\n * @returns The output of the group of blocks that represent the particle angle (rotation)\r\n */\r\nfunction _CreateParticleAngleBlockGroup(oldSystem: ParticleSystem): NodeParticleConnectionPoint {\r\n    const randomRotationBlock = new ParticleRandomBlock(\"Random Rotation\");\r\n    _CreateAndConnectInput(\"Min Rotation\", oldSystem.minInitialRotation, randomRotationBlock.min);\r\n    _CreateAndConnectInput(\"Max Rotation\", oldSystem.maxInitialRotation, randomRotationBlock.max);\r\n    return randomRotationBlock.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle color\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle color\r\n */\r\nfunction _CreateParticleColorBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    if (oldSystem._colorGradients && oldSystem._colorGradients.length > 0) {\r\n        context.colorGradientValue0Output = _CreateParticleInitialValueFromGradient(oldSystem._colorGradients);\r\n        return context.colorGradientValue0Output;\r\n    } else {\r\n        const randomColorBlock = new ParticleRandomBlock(\"Random color\");\r\n        _CreateAndConnectInput(\"Color 1\", oldSystem.color1, randomColorBlock.min);\r\n        _CreateAndConnectInput(\"Color 2\", oldSystem.color2, randomColorBlock.max);\r\n        return randomColorBlock.output;\r\n    }\r\n}\r\n\r\nfunction _CreateParticleInitialValueFromGradient(gradients: Array<FactorGradient> | Array<ColorGradient>): NodeParticleConnectionPoint {\r\n    if (gradients.length === 0) {\r\n        throw new Error(\"No gradients provided.\");\r\n    }\r\n\r\n    const gradientStep = gradients[0];\r\n    const value1 = (gradientStep as any).factor1 ?? (gradientStep as any).color1;\r\n    const value2 = (gradientStep as any).factor2 ?? (gradientStep as any).color2;\r\n\r\n    if (value2 !== undefined) {\r\n        // Create a random between value1 and value2\r\n        const randomBlock = new ParticleRandomBlock(\"Random Value 0\");\r\n        randomBlock.lockMode = ParticleRandomBlockLocks.OncePerParticle;\r\n        _CreateAndConnectInput(\"Value 1\", value1, randomBlock.min);\r\n        _CreateAndConnectInput(\"Value 2\", value2, randomBlock.max);\r\n        return randomBlock.output;\r\n    } else {\r\n        // Single value\r\n        const sizeBlock = new ParticleInputBlock(\"Value\");\r\n        sizeBlock.value = value1;\r\n        return sizeBlock.output;\r\n    }\r\n}\r\n\r\n// ------------- EMITTER SHAPE FUNCTIONS -------------\r\n\r\nfunction _EmitterShapeBlock(oldSystem: IParticleSystem): IShapeBlock {\r\n    const emitter = oldSystem.particleEmitterType;\r\n    if (!emitter) {\r\n        throw new Error(\"Particle system has no emitter type.\");\r\n    }\r\n\r\n    let shapeBlock: Nullable<IShapeBlock> = null;\r\n    switch (emitter.getClassName()) {\r\n        case \"BoxParticleEmitter\": {\r\n            const source = emitter as BoxParticleEmitter;\r\n            shapeBlock = new BoxShapeBlock(\"Box Shape\");\r\n\r\n            const target = shapeBlock as BoxShapeBlock;\r\n            _CreateAndConnectInput(\"Direction 1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction 2\", source.direction2, target.direction2);\r\n            _CreateAndConnectInput(\"Min Emit Box\", source.minEmitBox, target.minEmitBox);\r\n            _CreateAndConnectInput(\"Max Emit Box\", source.maxEmitBox, target.maxEmitBox);\r\n            break;\r\n        }\r\n        case \"ConeParticleEmitter\": {\r\n            const source = emitter as ConeParticleEmitter;\r\n            shapeBlock = new ConeShapeBlock(\"Cone Shape\");\r\n\r\n            const target = shapeBlock as ConeShapeBlock;\r\n            target.emitFromSpawnPointOnly = source.emitFromSpawnPointOnly;\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Angle\", source.angle, target.angle);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Height Range\", source.heightRange, target.heightRange);\r\n            _CreateAndConnectInput(\"Direction Randomizer\", source.directionRandomizer, target.directionRandomizer);\r\n            break;\r\n        }\r\n        case \"ConeDirectedParticleEmitter\": {\r\n            const source = emitter as ConeDirectedParticleEmitter;\r\n            shapeBlock = new ConeShapeBlock(\"Cone Shape\");\r\n\r\n            const target = shapeBlock as ConeShapeBlock;\r\n            target.emitFromSpawnPointOnly = source.emitFromSpawnPointOnly;\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Angle\", source.angle, target.angle);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Height Range\", source.heightRange, target.heightRange);\r\n            _CreateAndConnectInput(\"Direction 1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction 2\", source.direction2, target.direction2);\r\n            break;\r\n        }\r\n        case \"CustomParticleEmitter\": {\r\n            const source = emitter as CustomParticleEmitter;\r\n            shapeBlock = new CustomShapeBlock(\"Custom Shape\");\r\n\r\n            const target = shapeBlock as CustomShapeBlock;\r\n            target.particlePositionGenerator = source.particlePositionGenerator;\r\n            target.particleDestinationGenerator = source.particleDestinationGenerator;\r\n            target.particleDirectionGenerator = source.particleDirectionGenerator;\r\n            break;\r\n        }\r\n        case \"CylinderParticleEmitter\": {\r\n            const source = emitter as CylinderParticleEmitter;\r\n            shapeBlock = new CylinderShapeBlock(\"Cylinder Shape\");\r\n\r\n            const target = shapeBlock as CylinderShapeBlock;\r\n            _CreateAndConnectInput(\"Height\", source.height, target.height);\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Direction Randomizer\", source.directionRandomizer, target.directionRandomizer);\r\n            break;\r\n        }\r\n        case \"CylinderDirectedParticleEmitter\": {\r\n            const source = emitter as CylinderDirectedParticleEmitter;\r\n            shapeBlock = new CylinderShapeBlock(\"Cylinder Shape\");\r\n\r\n            const target = shapeBlock as CylinderShapeBlock;\r\n            _CreateAndConnectInput(\"Height\", source.height, target.height);\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Direction 1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction 2\", source.direction2, target.direction2);\r\n            break;\r\n        }\r\n        case \"HemisphericParticleEmitter\": {\r\n            const source = emitter as HemisphericParticleEmitter;\r\n            shapeBlock = new SphereShapeBlock(\"Sphere Shape\");\r\n\r\n            const target = shapeBlock as SphereShapeBlock;\r\n            target.isHemispheric = true;\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Direction Randomizer\", source.directionRandomizer, target.directionRandomizer);\r\n            break;\r\n        }\r\n        case \"MeshParticleEmitter\": {\r\n            const source = emitter as MeshParticleEmitter;\r\n            shapeBlock = new MeshShapeBlock(\"Mesh Shape\");\r\n\r\n            const target = shapeBlock as MeshShapeBlock;\r\n            target.useMeshNormalsForDirection = source.useMeshNormalsForDirection;\r\n            _CreateAndConnectInput(\"Direction 1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction 2\", source.direction2, target.direction2);\r\n\r\n            target.mesh = source.mesh as Mesh;\r\n            break;\r\n        }\r\n        case \"PointParticleEmitter\": {\r\n            const source = emitter as PointParticleEmitter;\r\n            shapeBlock = new PointShapeBlock(\"Point Shape\");\r\n\r\n            const target = shapeBlock as PointShapeBlock;\r\n            _CreateAndConnectInput(\"Direction 1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction 2\", source.direction2, target.direction2);\r\n            break;\r\n        }\r\n        case \"SphereParticleEmitter\": {\r\n            const source = emitter as SphereParticleEmitter;\r\n            shapeBlock = new SphereShapeBlock(\"Sphere Shape\");\r\n\r\n            const target = shapeBlock as SphereShapeBlock;\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Direction Randomizer\", source.directionRandomizer, target.directionRandomizer);\r\n            break;\r\n        }\r\n        case \"SphereDirectedParticleEmitter\": {\r\n            const source = emitter as SphereDirectedParticleEmitter;\r\n            shapeBlock = new SphereShapeBlock(\"Sphere Shape\");\r\n\r\n            const target = shapeBlock as SphereShapeBlock;\r\n            _CreateAndConnectInput(\"Radius\", source.radius, target.radius);\r\n            _CreateAndConnectInput(\"Radius Range\", source.radiusRange, target.radiusRange);\r\n            _CreateAndConnectInput(\"Direction1\", source.direction1, target.direction1);\r\n            _CreateAndConnectInput(\"Direction2\", source.direction2, target.direction2);\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!shapeBlock) {\r\n        throw new Error(`Unsupported particle emitter type: ${emitter.getClassName()}`);\r\n    }\r\n\r\n    return shapeBlock;\r\n}\r\n\r\n// ------------- UPDATE PARTICLE FUNCTIONS -------------\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle system update\r\n * The creation of the different properties follows the order they are added to the ProcessQueue in ThinParticleSystem:\r\n * Color, AngularSpeedGradients, AngularSpeed, VelocityGradients, Direction, LimitVelocityGradients, DragGradients, Position, Noise, SizeGradients, Gravity, RemapGradients\r\n * @param inputParticle The particle input connection point\r\n * @param oldSystem The old particle system to convert\r\n * @param context The runtime conversion context\r\n * @returns The output connection point after all updates have been applied\r\n */\r\nfunction _UpdateParticleBlockGroup(inputParticle: NodeParticleConnectionPoint, oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    let updateBlockGroupOutput: NodeParticleConnectionPoint = inputParticle;\r\n\r\n    updateBlockGroupOutput = _UpdateParticleColorBlockGroup(updateBlockGroupOutput, oldSystem._colorGradients, context);\r\n    updateBlockGroupOutput = _UpdateParticleAngleBlockGroup(updateBlockGroupOutput, oldSystem, context);\r\n\r\n    if (oldSystem._velocityGradients && oldSystem._velocityGradients.length > 0) {\r\n        context.scaledDirection = _UpdateParticleVelocityGradientBlockGroup(oldSystem._velocityGradients, context);\r\n    }\r\n\r\n    if (oldSystem._dragGradients && oldSystem._dragGradients.length > 0) {\r\n        context.scaledDirection = _UpdateParticleDragGradientBlockGroup(oldSystem._dragGradients, context);\r\n    }\r\n\r\n    updateBlockGroupOutput = _UpdateParticlePositionBlockGroup(updateBlockGroupOutput, oldSystem.isLocal, context);\r\n\r\n    if (oldSystem._limitVelocityGradients && oldSystem._limitVelocityGradients.length > 0 && oldSystem.limitVelocityDamping !== 0) {\r\n        updateBlockGroupOutput = _UpdateParticleVelocityLimitGradientBlockGroup(updateBlockGroupOutput, oldSystem._limitVelocityGradients, oldSystem.limitVelocityDamping, context);\r\n    }\r\n\r\n    if (oldSystem._sizeGradients && oldSystem._sizeGradients.length > 0) {\r\n        updateBlockGroupOutput = _UpdateParticleSizeGradientBlockGroup(updateBlockGroupOutput, oldSystem._sizeGradients, context);\r\n    }\r\n\r\n    if (oldSystem.gravity.equalsToFloats(0, 0, 0) === false) {\r\n        updateBlockGroupOutput = _UpdateParticleGravityBlockGroup(updateBlockGroupOutput, oldSystem.gravity);\r\n    }\r\n\r\n    return updateBlockGroupOutput;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle color update\r\n * @param inputParticle The input particle to update\r\n * @param colorGradients The color gradients (if any)\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle color update\r\n */\r\nfunction _UpdateParticleColorBlockGroup(\r\n    inputParticle: NodeParticleConnectionPoint,\r\n    colorGradients: Nullable<Array<ColorGradient>>,\r\n    context: RuntimeConversionContext\r\n): NodeParticleConnectionPoint {\r\n    let colorCalculation: NodeParticleConnectionPoint | undefined = undefined;\r\n    if (colorGradients && colorGradients.length > 0) {\r\n        if (context.colorGradientValue0Output === undefined) {\r\n            throw new Error(\"Initial color gradient values not found in context.\");\r\n        }\r\n\r\n        context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n        colorCalculation = _CreateGradientBlockGroup(context.ageToLifeTimeRatioBlockGroupOutput, colorGradients, ParticleRandomBlockLocks.OncePerParticle, \"Color\", [\r\n            context.colorGradientValue0Output,\r\n        ]);\r\n    } else {\r\n        colorCalculation = _BasicColorUpdateBlockGroup();\r\n    }\r\n\r\n    // Create the color update block clamping alpha >= 0\r\n    const colorUpdateBlock = new UpdateColorBlock(\"Color update\");\r\n    inputParticle.connectTo(colorUpdateBlock.particle);\r\n    _ClampUpdateColorAlpha(colorCalculation).connectTo(colorUpdateBlock.color);\r\n\r\n    return colorUpdateBlock.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle angle update\r\n * @param inputParticle The input particle to update\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle color update\r\n */\r\nfunction _UpdateParticleAngleBlockGroup(inputParticle: NodeParticleConnectionPoint, oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // We will try to use gradients if they exist\r\n    // If not, we will try to use min/max angular speed\r\n    let angularSpeedCalculation = null;\r\n    if (oldSystem._angularSpeedGradients && oldSystem._angularSpeedGradients.length > 0) {\r\n        angularSpeedCalculation = _UpdateParticleAngularSpeedGradientBlockGroup(oldSystem._angularSpeedGradients, context);\r\n    } else if (oldSystem.minAngularSpeed !== 0 || oldSystem.maxAngularSpeed !== 0) {\r\n        angularSpeedCalculation = _UpdateParticleAngularSpeedBlockGroup(oldSystem.minAngularSpeed, oldSystem.maxAngularSpeed);\r\n    }\r\n\r\n    // If we have an angular speed calculation, then update the angle\r\n    if (angularSpeedCalculation) {\r\n        // Create the angular speed delta\r\n        const angleSpeedDeltaOutput = _CreateDeltaModifiedInput(\"Angular Speed\", angularSpeedCalculation);\r\n\r\n        // Add it to the angle\r\n        const addAngle = new ParticleMathBlock(\"Add Angular Speed to Angle\");\r\n        addAngle.operation = ParticleMathBlockOperations.Add;\r\n        _CreateAndConnectContextualSource(\"Angle\", NodeParticleContextualSources.Angle, addAngle.left);\r\n        angleSpeedDeltaOutput.connectTo(addAngle.right);\r\n\r\n        // Update the particle angle\r\n        const updateAngle = new UpdateAngleBlock(\"Angle Update with Angular Speed\");\r\n        inputParticle.connectTo(updateAngle.particle);\r\n        addAngle.output.connectTo(updateAngle.angle);\r\n\r\n        return updateAngle.output;\r\n    } else {\r\n        return inputParticle;\r\n    }\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle velocity update\r\n * @param velocityGradients The velocity gradients\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle velocity update\r\n */\r\nfunction _UpdateParticleVelocityGradientBlockGroup(velocityGradients: Array<FactorGradient>, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n\r\n    // Generate the gradient\r\n    const velocityValueOutput = _CreateGradientBlockGroup(context.ageToLifeTimeRatioBlockGroupOutput, velocityGradients, ParticleRandomBlockLocks.OncePerParticle, \"Velocity\");\r\n\r\n    // Update the direction scale based on the velocity\r\n    const multiplyScaleByVelocity = new ParticleMathBlock(\"Multiply Direction Scale by Velocity\");\r\n    multiplyScaleByVelocity.operation = ParticleMathBlockOperations.Multiply;\r\n    velocityValueOutput.connectTo(multiplyScaleByVelocity.left);\r\n    _CreateAndConnectContextualSource(\"Direction Scale\", NodeParticleContextualSources.DirectionScale, multiplyScaleByVelocity.right);\r\n\r\n    // Update the particle direction scale\r\n    const multiplyDirection = new ParticleMathBlock(\"Scaled Direction\");\r\n    multiplyDirection.operation = ParticleMathBlockOperations.Multiply;\r\n    multiplyScaleByVelocity.output.connectTo(multiplyDirection.left);\r\n    _CreateAndConnectContextualSource(\"Direction\", NodeParticleContextualSources.Direction, multiplyDirection.right);\r\n\r\n    // Store the new calculation of the scaled direction in the context\r\n    context.scaledDirection = multiplyDirection.output;\r\n    return multiplyDirection.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle velocity limit update\r\n * @param inputParticle The input particle to update\r\n * @param velocityLimitGradients The velocity limit gradients\r\n * @param limitVelocityDamping The limit velocity damping factor\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle velocity limit update\r\n */\r\nfunction _UpdateParticleVelocityLimitGradientBlockGroup(\r\n    inputParticle: NodeParticleConnectionPoint,\r\n    velocityLimitGradients: Array<FactorGradient>,\r\n    limitVelocityDamping: number,\r\n    context: RuntimeConversionContext\r\n): NodeParticleConnectionPoint {\r\n    context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n\r\n    // Calculate the current speed\r\n    const currentSpeedBlock = new ParticleVectorLengthBlock(\"Current Speed\");\r\n    _CreateAndConnectContextualSource(\"Direction\", NodeParticleContextualSources.Direction, currentSpeedBlock.input);\r\n\r\n    // Calculate the velocity limit from the gradient\r\n    const velocityLimitValueOutput = _CreateGradientBlockGroup(\r\n        context.ageToLifeTimeRatioBlockGroupOutput,\r\n        velocityLimitGradients,\r\n        ParticleRandomBlockLocks.OncePerParticle,\r\n        \"Velocity Limit\"\r\n    );\r\n\r\n    // Blocks that will calculate the new velocity if over the limit\r\n    const damped = new ParticleMathBlock(\"Damped Speed\");\r\n    damped.operation = ParticleMathBlockOperations.Multiply;\r\n    _CreateAndConnectContextualSource(\"Direction\", NodeParticleContextualSources.Direction, damped.left);\r\n    _CreateAndConnectInput(\"Limit Velocity Damping\", limitVelocityDamping, damped.right);\r\n\r\n    // Compare current speed and limit\r\n    const compareSpeed = new ParticleConditionBlock(\"Compare Speed to Limit\");\r\n    compareSpeed.test = ParticleConditionBlockTests.GreaterThan;\r\n    currentSpeedBlock.output.connectTo(compareSpeed.left);\r\n    velocityLimitValueOutput.connectTo(compareSpeed.right);\r\n    damped.output.connectTo(compareSpeed.ifTrue);\r\n    _CreateAndConnectContextualSource(\"Direction\", NodeParticleContextualSources.Direction, compareSpeed.ifFalse);\r\n\r\n    // Update the direction based on the calculted value\r\n    const updateDirection = new UpdateDirectionBlock(\"Direction Update\");\r\n    inputParticle.connectTo(updateDirection.particle);\r\n    compareSpeed.output.connectTo(updateDirection.direction);\r\n\r\n    return updateDirection.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle drag update\r\n * @param dragGradients The drag gradients\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle drag update\r\n */\r\nfunction _UpdateParticleDragGradientBlockGroup(dragGradients: Array<FactorGradient>, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n\r\n    // Generate the gradient\r\n    const dragValueOutput = _CreateGradientBlockGroup(context.ageToLifeTimeRatioBlockGroupOutput, dragGradients, ParticleRandomBlockLocks.OncePerParticle, \"Drag\");\r\n\r\n    // Calculate drag factor\r\n    const oneMinusDragBlock = new ParticleMathBlock(\"1 - Drag\");\r\n    oneMinusDragBlock.operation = ParticleMathBlockOperations.Subtract;\r\n    _CreateAndConnectInput(\"One\", 1, oneMinusDragBlock.left);\r\n    dragValueOutput.connectTo(oneMinusDragBlock.right);\r\n\r\n    // Multiply the scaled direction by drag factor\r\n    const multiplyDirection = new ParticleMathBlock(\"Scaled Direction with Drag\");\r\n    multiplyDirection.operation = ParticleMathBlockOperations.Multiply;\r\n    oneMinusDragBlock.output.connectTo(multiplyDirection.left);\r\n    if (context.scaledDirection === undefined) {\r\n        _CreateAndConnectContextualSource(\"Scaled Direction\", NodeParticleContextualSources.ScaledDirection, multiplyDirection.right);\r\n    } else {\r\n        context.scaledDirection.connectTo(multiplyDirection.right);\r\n    }\r\n\r\n    // Store the new calculation of the scaled direction in the context\r\n    context.scaledDirection = multiplyDirection.output;\r\n    return multiplyDirection.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle position update\r\n * @param inputParticle The input particle to update\r\n * @param isLocal Whether the particle coordinate system is local or not\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle position update\r\n */\r\nfunction _UpdateParticlePositionBlockGroup(inputParticle: NodeParticleConnectionPoint, isLocal: boolean, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // Update the particle position\r\n    const updatePosition = new UpdatePositionBlock(\"Position Update\");\r\n    inputParticle.connectTo(updatePosition.particle);\r\n\r\n    if (isLocal) {\r\n        _CreateAndConnectContextualSource(\"Local Position Updated\", NodeParticleContextualSources.LocalPositionUpdated, updatePosition.position);\r\n    } else {\r\n        // Calculate the new position\r\n        const addPositionBlock = new ParticleMathBlock(\"Add Position\");\r\n        addPositionBlock.operation = ParticleMathBlockOperations.Add;\r\n        _CreateAndConnectContextualSource(\"Position\", NodeParticleContextualSources.Position, addPositionBlock.left);\r\n        if (context.scaledDirection === undefined) {\r\n            _CreateAndConnectContextualSource(\"Scaled Direction\", NodeParticleContextualSources.ScaledDirection, addPositionBlock.right);\r\n        } else {\r\n            context.scaledDirection.connectTo(addPositionBlock.right);\r\n        }\r\n\r\n        addPositionBlock.output.connectTo(updatePosition.position);\r\n    }\r\n\r\n    return updatePosition.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle size update\r\n * @param inputParticle The input particle to update\r\n * @param sizeGradients The size gradients (if any)\r\n * @param context The context of the current conversion\r\n * @returns The output of the group of blocks that represent the particle size update\r\n */\r\nfunction _UpdateParticleSizeGradientBlockGroup(\r\n    inputParticle: NodeParticleConnectionPoint,\r\n    sizeGradients: Array<FactorGradient>,\r\n    context: RuntimeConversionContext\r\n): NodeParticleConnectionPoint {\r\n    if (context.sizeGradientValue0Output === undefined) {\r\n        throw new Error(\"Initial size gradient values not found in context.\");\r\n    }\r\n\r\n    context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n\r\n    // Generate the gradient\r\n    const sizeValueOutput = _CreateGradientBlockGroup(context.ageToLifeTimeRatioBlockGroupOutput, sizeGradients, ParticleRandomBlockLocks.OncePerParticle, \"Size\", [\r\n        context.sizeGradientValue0Output,\r\n    ]);\r\n\r\n    // Create the update size\r\n    const updateSizeBlock = new UpdateSizeBlock(\"Size Update\");\r\n    inputParticle.connectTo(updateSizeBlock.particle);\r\n    sizeValueOutput.connectTo(updateSizeBlock.size);\r\n\r\n    return updateSizeBlock.output;\r\n}\r\n\r\n/**\r\n * Creates the group of blocks that represent the particle gravity update\r\n * @param inputParticle The input particle to update\r\n * @param gravity The gravity vector to apply\r\n * @returns The output of the group of blocks that represent the particle gravity update\r\n */\r\nfunction _UpdateParticleGravityBlockGroup(inputParticle: NodeParticleConnectionPoint, gravity: Vector3): NodeParticleConnectionPoint {\r\n    // Create the gravity delta\r\n    const gravityDeltaOutput = _CreateDeltaModifiedInput(\"Gravity\", gravity);\r\n\r\n    // Add it to the direction\r\n    const addDirectionBlock = new ParticleMathBlock(\"Add Gravity to Direction\");\r\n    addDirectionBlock.operation = ParticleMathBlockOperations.Add;\r\n    _CreateAndConnectContextualSource(\"Direction\", NodeParticleContextualSources.Direction, addDirectionBlock.left);\r\n    gravityDeltaOutput.connectTo(addDirectionBlock.right);\r\n\r\n    // Update the particle direction\r\n    const updateDirection = new UpdateDirectionBlock(\"Direction Update with Gravity\");\r\n    inputParticle.connectTo(updateDirection.particle);\r\n    addDirectionBlock.output.connectTo(updateDirection.direction);\r\n\r\n    return updateDirection.output;\r\n}\r\n\r\nfunction _UpdateParticleAngularSpeedGradientBlockGroup(angularSpeedGradients: Array<FactorGradient>, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    context.ageToLifeTimeRatioBlockGroupOutput = _CreateAgeToLifeTimeRatioBlockGroup(context);\r\n\r\n    // Generate the gradient\r\n    const angularSpeedValueOutput = _CreateGradientBlockGroup(\r\n        context.ageToLifeTimeRatioBlockGroupOutput,\r\n        angularSpeedGradients,\r\n        ParticleRandomBlockLocks.OncePerParticle,\r\n        \"Angular Speed\"\r\n    );\r\n    return angularSpeedValueOutput;\r\n}\r\n\r\nfunction _UpdateParticleAngularSpeedBlockGroup(minAngularSpeed: number, maxAngularSpeed: number): NodeParticleConnectionPoint {\r\n    // Random value between for the angular speed of the particle\r\n    const randomAngularSpeedBlock = new ParticleRandomBlock(\"Random Angular Speed\");\r\n    randomAngularSpeedBlock.lockMode = ParticleRandomBlockLocks.OncePerParticle;\r\n    _CreateAndConnectInput(\"Min Angular Speed\", minAngularSpeed, randomAngularSpeedBlock.min);\r\n    _CreateAndConnectInput(\"Max Angular Speed\", maxAngularSpeed, randomAngularSpeedBlock.max);\r\n    return randomAngularSpeedBlock.output;\r\n}\r\n\r\nfunction _BasicColorUpdateBlockGroup(): NodeParticleConnectionPoint {\r\n    const addColorBlock = new ParticleMathBlock(\"Add Color\");\r\n    addColorBlock.operation = ParticleMathBlockOperations.Add;\r\n    _CreateAndConnectContextualSource(\"Color\", NodeParticleContextualSources.Color, addColorBlock.left);\r\n    _CreateAndConnectContextualSource(\"Scaled Color Step\", NodeParticleContextualSources.ScaledColorStep, addColorBlock.right);\r\n    return addColorBlock.output;\r\n}\r\n\r\nfunction _ClampUpdateColorAlpha(colorCalculationOutput: NodeParticleConnectionPoint): NodeParticleConnectionPoint {\r\n    // Decompose color to clamp alpha\r\n    const decomposeColorBlock = new ParticleConverterBlock(\"Decompose Color\");\r\n    colorCalculationOutput.connectTo(decomposeColorBlock.colorIn);\r\n\r\n    // Clamp alpha to be >= 0\r\n    const maxAlphaBlock = new ParticleMathBlock(\"Alpha >= 0\");\r\n    maxAlphaBlock.operation = ParticleMathBlockOperations.Max;\r\n    decomposeColorBlock.wOut.connectTo(maxAlphaBlock.left);\r\n    _CreateAndConnectInput(\"Zero\", 0, maxAlphaBlock.right);\r\n\r\n    // Recompose color\r\n    const composeColorBlock = new ParticleConverterBlock(\"Compose Color\");\r\n    decomposeColorBlock.xyzOut.connectTo(composeColorBlock.xyzIn);\r\n    maxAlphaBlock.output.connectTo(composeColorBlock.wIn);\r\n\r\n    return composeColorBlock.colorOut;\r\n}\r\n\r\n// ------------- SYSTEM FUNCTIONS -------------\r\n\r\nfunction _SystemBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): SystemBlock {\r\n    const newSystem = new SystemBlock(oldSystem.name);\r\n\r\n    newSystem.translationPivot.value = oldSystem.translationPivot;\r\n    newSystem.textureMask.value = oldSystem.textureMask;\r\n    newSystem.manualEmitCount = oldSystem.manualEmitCount;\r\n    newSystem.blendMode = oldSystem.blendMode;\r\n    newSystem.capacity = oldSystem.getCapacity();\r\n    newSystem.startDelay = oldSystem.startDelay;\r\n    newSystem.updateSpeed = oldSystem.updateSpeed;\r\n    newSystem.preWarmCycles = oldSystem.preWarmCycles;\r\n    newSystem.preWarmStepOffset = oldSystem.preWarmStepOffset;\r\n    newSystem.isBillboardBased = oldSystem.isBillboardBased;\r\n    newSystem.isLocal = oldSystem.isLocal;\r\n    newSystem.disposeOnStop = oldSystem.disposeOnStop;\r\n\r\n    _SystemEmitRateValue(oldSystem, newSystem, context);\r\n    _SystemTextureBlock(oldSystem).connectTo(newSystem.texture);\r\n    _SystemTargetStopDuration(oldSystem, newSystem, context);\r\n\r\n    return newSystem;\r\n}\r\n\r\nfunction _SystemEmitRateValue(oldSystem: ParticleSystem, newSystem: SystemBlock, context: RuntimeConversionContext): void {\r\n    const emitGradients = oldSystem.getEmitRateGradients();\r\n    if (emitGradients && emitGradients.length > 0 && oldSystem.targetStopDuration > 0) {\r\n        // Create the emit gradients\r\n        context.timeToStopTimeRatioBlockGroupOutput = _CreateTimeToStopTimeRatioBlockGroup(oldSystem, context);\r\n        const gradientValue = _CreateGradientBlockGroup(context.timeToStopTimeRatioBlockGroupOutput, emitGradients, ParticleRandomBlockLocks.PerSystem, \"Emit Rate\");\r\n\r\n        // Round the value to an int\r\n        const roundBlock = new ParticleFloatToIntBlock(\"Round to Int\");\r\n        roundBlock.operation = ParticleFloatToIntBlockOperations.Round;\r\n        gradientValue.connectTo(roundBlock.input);\r\n        roundBlock.output.connectTo(newSystem.emitRate);\r\n    } else {\r\n        newSystem.emitRate.value = oldSystem.emitRate;\r\n    }\r\n}\r\n\r\nfunction _SystemTextureBlock(oldSystem: ParticleSystem): NodeParticleConnectionPoint {\r\n    // Texture\r\n    const textureBlock = new ParticleTextureSourceBlock(\"Texture\");\r\n    const url = (oldSystem.particleTexture as Texture).url || \"\";\r\n    if (url) {\r\n        textureBlock.url = url;\r\n    } else {\r\n        textureBlock.sourceTexture = oldSystem.particleTexture;\r\n    }\r\n\r\n    return textureBlock.texture;\r\n}\r\n\r\nfunction _SystemTargetStopDuration(oldSystem: ParticleSystem, newSystem: SystemBlock, context: RuntimeConversionContext): void {\r\n    // If something else uses the target stop duration (like a gradient),\r\n    // then the block is already created and stored in the context\r\n    if (context.targetStopDurationBlockOutput) {\r\n        context.targetStopDurationBlockOutput.connectTo(newSystem.targetStopDuration);\r\n    } else {\r\n        // If no one used it, do not create a block just set the value\r\n        newSystem.targetStopDuration.value = oldSystem.targetStopDuration;\r\n    }\r\n}\r\n\r\n// ------------- UTILITY FUNCTIONS -------------\r\n\r\nfunction _CreateDeltaModifiedInput(name: string, value: Vector3 | NodeParticleConnectionPoint): NodeParticleConnectionPoint {\r\n    const multiplyBlock = new ParticleMathBlock(\"Multiply by Delta\");\r\n    multiplyBlock.operation = ParticleMathBlockOperations.Multiply;\r\n    if (value instanceof Vector3) {\r\n        _CreateAndConnectInput(name, value, multiplyBlock.left);\r\n    } else {\r\n        value.connectTo(multiplyBlock.left);\r\n    }\r\n    _CreateAndConnectSystemSource(\"Delta\", NodeParticleSystemSources.Delta, multiplyBlock.right);\r\n\r\n    return multiplyBlock.output;\r\n}\r\n\r\nfunction _CreateAndConnectInput(\r\n    inputBlockName: string,\r\n    value: number | Vector2 | Vector3 | Color4,\r\n    targetToConnectTo: NodeParticleConnectionPoint,\r\n    inputType?: NodeParticleBlockConnectionPointTypes\r\n): void {\r\n    const input = new ParticleInputBlock(inputBlockName, inputType);\r\n    input.value = value;\r\n    input.output.connectTo(targetToConnectTo);\r\n}\r\n\r\nfunction _CreateAndConnectContextualSource(contextualBlockName: string, contextSource: NodeParticleContextualSources, targetToConnectTo: NodeParticleConnectionPoint): void {\r\n    const input = new ParticleInputBlock(contextualBlockName);\r\n    input.contextualValue = contextSource;\r\n    input.output.connectTo(targetToConnectTo);\r\n}\r\n\r\nfunction _CreateAndConnectSystemSource(systemBlockName: string, systemSource: NodeParticleSystemSources, targetToConnectTo: NodeParticleConnectionPoint): void {\r\n    const input = new ParticleInputBlock(systemBlockName);\r\n    input.systemSource = systemSource;\r\n    input.output.connectTo(targetToConnectTo);\r\n}\r\n\r\n/**\r\n * Creates the target stop duration input block, as it can be shared in multiple places\r\n * This block is stored in the context so the same block is shared in the graph\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns\r\n */\r\nfunction _CreateTargetStopDurationInputBlock(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // If we have already created the target stop duration input block, return it\r\n    if (context.targetStopDurationBlockOutput) {\r\n        return context.targetStopDurationBlockOutput;\r\n    }\r\n\r\n    // Create the target stop duration input block if not already created\r\n    const targetStopDurationInputBlock = new ParticleInputBlock(\"Target Stop Duration\");\r\n    targetStopDurationInputBlock.value = oldSystem.targetStopDuration;\r\n\r\n    // Save the output in our context to avoid regenerating it again\r\n    context.targetStopDurationBlockOutput = targetStopDurationInputBlock.output;\r\n    return context.targetStopDurationBlockOutput;\r\n}\r\n\r\n/**\r\n * Create a group of blocks that calculates the ratio between the actual frame and the target stop duration, clamped between 0 and 1.\r\n * This is used to simulate the behavior of the old particle system where several particle gradient values are affected by the target stop duration.\r\n * This block group is stored in the context so the same group is shared in the graph\r\n * @param oldSystem The old particle system to convert\r\n * @param context The context of the current conversion\r\n * @returns The ratio block output connection point\r\n */\r\nfunction _CreateTimeToStopTimeRatioBlockGroup(oldSystem: ParticleSystem, context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // If we have already generated this group, return it\r\n    if (context.timeToStopTimeRatioBlockGroupOutput) {\r\n        return context.timeToStopTimeRatioBlockGroupOutput;\r\n    }\r\n\r\n    context.targetStopDurationBlockOutput = _CreateTargetStopDurationInputBlock(oldSystem, context);\r\n\r\n    // Find the ratio between the actual frame and the target stop duration\r\n    const ratio = new ParticleMathBlock(\"Frame/Stop Ratio\");\r\n    ratio.operation = ParticleMathBlockOperations.Divide;\r\n    _CreateAndConnectSystemSource(\"Actual Frame\", NodeParticleSystemSources.Time, ratio.left);\r\n    context.targetStopDurationBlockOutput.connectTo(ratio.right);\r\n\r\n    // Make sure values is >=0\r\n    const clampMin = new ParticleMathBlock(\"Clamp Min 0\");\r\n    clampMin.operation = ParticleMathBlockOperations.Max;\r\n    _CreateAndConnectInput(\"Zero\", 0, clampMin.left);\r\n    ratio.output.connectTo(clampMin.right);\r\n\r\n    // Make sure values is <=1\r\n    const clampMax = new ParticleMathBlock(\"Clamp Max 1\");\r\n    clampMax.operation = ParticleMathBlockOperations.Min;\r\n    _CreateAndConnectInput(\"One\", 1, clampMax.left);\r\n    clampMin.output.connectTo(clampMax.right);\r\n\r\n    // Save the group output in our context to avoid regenerating it again\r\n    context.timeToStopTimeRatioBlockGroupOutput = clampMax.output;\r\n    return context.timeToStopTimeRatioBlockGroupOutput;\r\n}\r\n\r\nfunction _CreateAgeToLifeTimeRatioBlockGroup(context: RuntimeConversionContext): NodeParticleConnectionPoint {\r\n    // If we have already generated this group, return it\r\n    if (context.ageToLifeTimeRatioBlockGroupOutput) {\r\n        return context.ageToLifeTimeRatioBlockGroupOutput;\r\n    }\r\n\r\n    // Find the ratio between the age and the lifetime\r\n    const ratio = new ParticleMathBlock(\"Age/LifeTime Ratio\");\r\n    ratio.operation = ParticleMathBlockOperations.Divide;\r\n    _CreateAndConnectContextualSource(\"Age\", NodeParticleContextualSources.Age, ratio.left);\r\n    _CreateAndConnectContextualSource(\"LifeTime\", NodeParticleContextualSources.Lifetime, ratio.right);\r\n\r\n    // Save the group output in our context to avoid regenerating it again\r\n    context.ageToLifeTimeRatioBlockGroupOutput = ratio.output;\r\n    return ratio.output;\r\n}\r\n\r\n/**\r\n * Creates the blocks that represent a gradient\r\n * @param gradientSelector The value that determines which gradient to use\r\n * @param gradientValues The list of gradient values\r\n * @param randomLockMode The type of random to use for the gradient values\r\n * @param prefix The prefix to use for naming the blocks\r\n * @param initialValues Optional initial values to connect to the gradient inputs that were calculated during other steps of the conversion\r\n * @returns The output connection point of the gradient block\r\n */\r\nfunction _CreateGradientBlockGroup(\r\n    gradientSelector: NodeParticleConnectionPoint,\r\n    gradientValues: Array<FactorGradient> | Array<ColorGradient>,\r\n    randomLockMode: ParticleRandomBlockLocks,\r\n    prefix: string,\r\n    initialValues: NodeParticleConnectionPoint[] = []\r\n): NodeParticleConnectionPoint {\r\n    // Create the gradient block and connect the value that controls the gradient selection\r\n    const gradientBlock = new ParticleGradientBlock(prefix + \" Gradient Block\");\r\n    gradientSelector.connectTo(gradientBlock.gradient);\r\n\r\n    // If initial values are provided, we use them instead of the values in the gradientValues array\r\n    // These means this values were already transformed into blocks on a previous step of the conversion and we must reuse them\r\n    for (let i = 0; i < initialValues.length; i++) {\r\n        const reference = i < gradientValues.length ? gradientValues[i].gradient : 1;\r\n        const gradientValueBlock = new ParticleGradientValueBlock(prefix + \" Gradient Value \" + i);\r\n        gradientValueBlock.reference = reference;\r\n        initialValues[i].connectTo(gradientValueBlock.value);\r\n        gradientValueBlock.output.connectTo(gradientBlock.inputs[i + 1]);\r\n    }\r\n\r\n    // Create the gradient values\r\n    for (let i = 0 + initialValues.length; i < gradientValues.length; i++) {\r\n        const gradientValueBlockGroupOutput = _CreateGradientValueBlockGroup(gradientValues[i], randomLockMode, prefix, i);\r\n        gradientValueBlockGroupOutput.connectTo(gradientBlock.inputs[i + 1]);\r\n    }\r\n\r\n    return gradientBlock.output;\r\n}\r\n\r\n/**\r\n * Creates the blocks that represent a gradient value\r\n * This can be either a single value or a random between two values\r\n * @param gradientStep The gradient step data\r\n * @param randomLockMode The lock mode to use for random values\r\n * @param prefix The prefix to use for naming the blocks\r\n * @param index The index of the gradient step\r\n * @returns The output connection point of the gradient value block\r\n */\r\nfunction _CreateGradientValueBlockGroup(\r\n    gradientStep: FactorGradient | ColorGradient,\r\n    randomLockMode: ParticleRandomBlockLocks,\r\n    prefix: string,\r\n    index: number\r\n): NodeParticleConnectionPoint {\r\n    const gradientValueBlock = new ParticleGradientValueBlock(prefix + \" Gradient Value \" + index);\r\n    gradientValueBlock.reference = gradientStep.gradient;\r\n\r\n    const value1 = (gradientStep as any).factor1 ?? (gradientStep as any).color1;\r\n    const value2 = (gradientStep as any).factor2 ?? (gradientStep as any).color2;\r\n\r\n    if (value2 !== undefined) {\r\n        // Create a random between value1 and value2\r\n        const randomBlock = new ParticleRandomBlock(\"Random Value \" + index);\r\n        randomBlock.lockMode = randomLockMode;\r\n        _CreateAndConnectInput(\"Value 1\", value1, randomBlock.min);\r\n        _CreateAndConnectInput(\"Value 2\", value2, randomBlock.max);\r\n        randomBlock.output.connectTo(gradientValueBlock.value);\r\n    } else {\r\n        // Single value\r\n        _CreateAndConnectInput(\"Value\", value1, gradientValueBlock.value);\r\n    }\r\n\r\n    return gradientValueBlock.output;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6054, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleLerpBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleLerpBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { Vector2, Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\n/**\r\n * Block used to lerp between 2 values\r\n */\r\nexport class ParticleLerpBlock extends NodeParticleBlock {\r\n    /**\r\n     * Creates a new ParticleLerpBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"left\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"right\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"gradient\", NodeParticleBlockConnectionPointTypes.Float, true, 0, 0, 1);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._linkConnectionTypes(0, 1);\r\n\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.Float |\r\n                NodeParticleBlockConnectionPointTypes.Int |\r\n                NodeParticleBlockConnectionPointTypes.Vector2 |\r\n                NodeParticleBlockConnectionPointTypes.Vector3 |\r\n                NodeParticleBlockConnectionPointTypes.Color4\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleLerpBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the left operand input component\r\n     */\r\n    public get left(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the right operand input component\r\n     */\r\n    public get right(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the gradient operand input component\r\n     */\r\n    public get gradient(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        if (!this.left.isConnected || !this.right.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        const func = (gradient: number, left: number, right: number) => {\r\n            return (1 - gradient) * left + gradient * right;\r\n        };\r\n\r\n        this.output._storedFunction = (state) => {\r\n            const left = this.left.getConnectedValue(state);\r\n            const right = this.right.getConnectedValue(state);\r\n            const gradient = this.gradient.getConnectedValue(state);\r\n            switch (this.left.type) {\r\n                case NodeParticleBlockConnectionPointTypes.Int:\r\n                case NodeParticleBlockConnectionPointTypes.Float: {\r\n                    return func(gradient, left, right);\r\n                }\r\n                case NodeParticleBlockConnectionPointTypes.Vector2: {\r\n                    return new Vector2(func(gradient, left.x, right.x), func(gradient, left.y, right.y));\r\n                }\r\n                case NodeParticleBlockConnectionPointTypes.Vector3: {\r\n                    return new Vector3(func(gradient, left.x, right.x), func(gradient, left.y, right.y), func(gradient, left.z, right.z));\r\n                }\r\n                case NodeParticleBlockConnectionPointTypes.Color4: {\r\n                    return new Color4(func(gradient, left.r, right.r), func(gradient, left.g, right.g), func(gradient, left.b, right.b), func(gradient, left.a, right.a));\r\n                }\r\n            }\r\n\r\n            return 0;\r\n        };\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleLerpBlock\", ParticleLerpBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6149, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateScaleBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateScaleBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * Block used to update the scale of a particle\r\n */\r\nexport class UpdateScaleBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateScaleBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"scale\", NodeParticleBlockConnectionPointTypes.Vector2);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the scale input component\r\n     */\r\n    public get scale(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateScaleBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.scale.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processScale = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.scale.copyFrom(this.scale.getConnectedValue(state) as Vector2);\r\n        };\r\n\r\n        const scaleProcessing = {\r\n            process: processScale,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(scaleProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = scaleProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateScaleBlock\", UpdateScaleBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAMjE,MAAO,gBAAiB,SAAQ,sQAAiB;IACnD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;QAC3E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,kBAAkB,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YAC1B,OAAO;QACX,CAAC;QAED,MAAM,YAAY,GAAG,CAAC,QAAkB,EAAE,EAAE;YACxC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAY,CAAC,CAAC;QAC5E,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG;YACpB,OAAO,EAAE,YAAY;YACrB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,eAAe,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAChE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAC;QAC/C,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,0BAA0B,EAAE,gBAAgB,CAAC,CAAC"}},
    {"offset": {"line": 6223, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateAgeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateAgeBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to update the age of a particle\r\n */\r\nexport class UpdateAgeBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateAgeBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"age\", NodeParticleBlockConnectionPointTypes.Float);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the age input component\r\n     */\r\n    public get age(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateAgeBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.age.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processAge = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.age = this.age.getConnectedValue(state);\r\n        };\r\n\r\n        const ageProcessing = {\r\n            process: processAge,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(ageProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = ageProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateAgeBlock\", UpdateAgeBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,cAAe,SAAQ,sQAAiB;IACjD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,uTAAqC,CAAC,KAAK,CAAC,CAAC;QACvE,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,GAAG,GAAA;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;YACxB,OAAO;QACX,CAAC;QAED,MAAM,UAAU,GAAG,CAAC,QAAkB,EAAE,EAAE;YACtC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QACrD,CAAC,CAAC;QAEF,MAAM,aAAa,GAAG;YAClB,OAAO,EAAE,UAAU;YACnB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,aAAa,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9D,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,aAAa,CAAC;QAC7C,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,wBAAwB,EAAE,cAAc,CAAC,CAAC"}},
    {"offset": {"line": 6297, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/basicPositionUpdateBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/basicPositionUpdateBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to provide the basic update functionality for particles.\r\n */\r\nexport class BasicPositionUpdateBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new BasicPositionUpdateBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"BasicPositionUpdateBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        const processPosition = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.direction.scaleToRef(particle._directionScale, particle._scaledDirection);\r\n            particle.position.addInPlace(particle._scaledDirection);\r\n        };\r\n\r\n        const positionProcessing = {\r\n            process: processPosition,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(positionProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = positionProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.BasicPositionUpdateBlock\", BasicPositionUpdateBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,wBAAyB,SAAQ,sQAAiB;IAC3D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,0BAA0B,CAAC;IACtC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,MAAM,eAAe,GAAG,CAAC,QAAkB,EAAE,EAAE;YAC3C,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACnF,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QAC5D,CAAC,CAAC;QAEF,MAAM,kBAAkB,GAAG;YACvB,OAAO,EAAE,eAAe;YACxB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,kBAAkB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACnE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,kBAAkB,CAAC;QAClD,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;IACtC,CAAC;CACJ;IAED,6OAAa,EAAC,kCAAkC,EAAE,wBAAwB,CAAC,CAAC"}},
    {"offset": {"line": 6363, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/basicSpriteUpdateBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/basicSpriteUpdateBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to provide the basic update functionality for particle sprite index.\r\n */\r\nexport class BasicSpriteUpdateBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new BasicSpriteUpdateBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"BasicSpriteUpdateBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        const processSprite = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.updateCellIndex();\r\n        };\r\n\r\n        const spriteProcessing = {\r\n            process: processSprite,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(spriteProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = spriteProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.BasicSpriteUpdateBlock\", BasicSpriteUpdateBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,sBAAuB,SAAQ,sQAAiB;IACzD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,wBAAwB,CAAC;IACpC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,MAAM,aAAa,GAAG,CAAC,QAAkB,EAAE,EAAE;YACzC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,eAAe,EAAE,CAAC;QAC/B,CAAC,CAAC;QAEF,MAAM,gBAAgB,GAAG;YACrB,OAAO,EAAE,aAAa;YACtB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,gBAAgB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACjE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;QAChD,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;IACtC,CAAC;CACJ;IAED,6OAAa,EAAC,gCAAgC,EAAE,sBAAsB,CAAC,CAAC"}},
    {"offset": {"line": 6428, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/basicColorUpdateBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/basicColorUpdateBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to provide the basic update functionality for particle colors.\r\n */\r\nexport class BasicColorUpdateBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new BasicColorUpdateBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"BasicColorUpdateBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        const processColor = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            particle.colorStep.scaleToRef(system._scaledUpdateSpeed, system._scaledColorStep);\r\n            particle.color.addInPlace(system._scaledColorStep);\r\n\r\n            if (particle.color.a < 0) {\r\n                particle.color.a = 0;\r\n            }\r\n        };\r\n\r\n        const colorProcessing = {\r\n            process: processColor,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(colorProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = colorProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.BasicColorUpdateBlock\", BasicColorUpdateBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,qBAAsB,SAAQ,sQAAiB;IACxD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,uBAAuB,CAAC;IACnC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,MAAM,YAAY,GAAG,CAAC,QAAkB,EAAE,EAAE;YACxC,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAE7B,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;YAClF,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;YAEnD,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;gBACvB,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;QACL,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG;YACpB,OAAO,EAAE,YAAY;YACrB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,eAAe,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAChE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAC;QAC/C,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;IACtC,CAAC;CACJ;IAED,6OAAa,EAAC,+BAA+B,EAAE,qBAAqB,CAAC,CAAC"}},
    {"offset": {"line": 6497, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateSpriteCellIndexBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateSpriteCellIndexBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\n\r\n/**\r\n * Block used to update the sprite cell index of a particle\r\n */\r\nexport class UpdateSpriteCellIndexBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateSpriteCellIndexBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"cellIndex\", NodeParticleBlockConnectionPointTypes.Int);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n\r\n        this.cellIndex.acceptedConnectionPointTypes = [NodeParticleBlockConnectionPointTypes.Float];\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the cellIndex input component\r\n     */\r\n    public get cellIndex(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateSpriteCellIndexBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        if (!this.cellIndex.isConnected) {\r\n            return;\r\n        }\r\n\r\n        const processSpriteCellIndex = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n            particle.cellIndex = Math.floor(this.cellIndex.getConnectedValue(state));\r\n        };\r\n\r\n        const spriteCellIndexProcessing = {\r\n            process: processSpriteCellIndex,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(spriteCellIndexProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = spriteCellIndexProcessing;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateSpriteCellIndexBlock\", UpdateSpriteCellIndexBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;;;;;AAKjE,MAAO,0BAA2B,SAAQ,sQAAiB;IAC7D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,uTAAqC,CAAC,GAAG,CAAC,CAAC;QAC3E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAE9E,IAAI,CAAC,SAAS,CAAC,4BAA4B,GAAG;YAAC,uTAAqC,CAAC,KAAK;SAAC,CAAC;IAChG,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,4BAA4B,CAAC;IACxC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;YAC9B,OAAO;QACX,CAAC;QAED,MAAM,sBAAsB,GAAG,CAAC,QAAkB,EAAE,EAAE;YAClD,KAAK,CAAC,eAAe,GAAG,QAAQ,CAAC;YACjC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;YAC7B,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC7E,CAAC,CAAC;QAEF,MAAM,yBAAyB,GAAG;YAC9B,OAAO,EAAE,sBAAsB;YAC/B,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,yBAAyB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC1E,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,yBAAyB,CAAC;QACzD,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,oCAAoC,EAAE,0BAA0B,CAAC,CAAC"}},
    {"offset": {"line": 6574, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateFlowMapBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateFlowMapBlock.ts"],"sourcesContent":["import type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport { FlowMap } from \"core/Particles/flowMap\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport type { ParticleTextureSourceBlock } from \"../particleSourceTextureBlock\";\r\n\r\n/**\r\n * Block used to update particle position based on a flow map\r\n */\r\nexport class UpdateFlowMapBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the strenght of the flow map effect\r\n     */\r\n    @editableInPropertyPage(\"strength\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public strength = 1;\r\n    /**\r\n     * Create a new UpdateFlowMapBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"flowMap\", NodeParticleBlockConnectionPointTypes.Texture);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the flowMap input component\r\n     */\r\n    public get flowMap(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateFlowMapBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n        const scene = state.scene;\r\n\r\n        const flowMapTexture = this.flowMap.connectedPoint?.ownerBlock as ParticleTextureSourceBlock;\r\n        let flowMap: FlowMap;\r\n\r\n        // eslint-disable-next-line github/no-then\r\n        void flowMapTexture.extractTextureContentAsync().then((textureContent) => {\r\n            if (!textureContent) {\r\n                return;\r\n            }\r\n            flowMap = new FlowMap(textureContent.width, textureContent.height, textureContent.data as Uint8ClampedArray);\r\n        });\r\n\r\n        const processFlowMap = (particle: Particle) => {\r\n            const matrix = scene.getTransformMatrix();\r\n            if (!flowMap) {\r\n                // If the flow map is not ready, we skip processing\r\n                return;\r\n            }\r\n\r\n            flowMap._processParticle(particle, this.strength * system._tempScaledUpdateSpeed, matrix);\r\n        };\r\n\r\n        const flowMapProcessing = {\r\n            process: processFlowMap,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(flowMapProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = flowMapProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.strength = this.strength;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.strength = serializationObject.strength;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateFlowMapBlock\", UpdateFlowMapBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6685, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/updateAttractorBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/updateAttractorBlock.ts"],"sourcesContent":["import type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\n\r\nconst ToAttractor: Vector3 = Vector3.Zero();\r\nconst Force: Vector3 = Vector3.Zero();\r\nconst ScaledForce: Vector3 = Vector3.Zero();\r\n\r\n/**\r\n * Block used to update particle position based on an attractor\r\n */\r\nexport class UpdateAttractorBlock extends NodeParticleBlock {\r\n    /**\r\n     * Create a new UpdateAttractorBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"attractor\", NodeParticleBlockConnectionPointTypes.Vector3, true, Vector3.Zero());\r\n        this.registerInput(\"strength\", NodeParticleBlockConnectionPointTypes.Float, true, 1);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the attractor input component\r\n     */\r\n    public get attractor(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the strength input component\r\n     */\r\n    public get strength(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"UpdateAttractorBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        const processAttractor = (particle: Particle) => {\r\n            const attractorPosition = this.attractor.getConnectedValue(state) as Vector3;\r\n            const strength = this.strength.getConnectedValue(state) as number;\r\n            attractorPosition.subtractToRef(particle.position, ToAttractor);\r\n            const distanceSquared = ToAttractor.lengthSquared() + 1; // Avoid going under 1.0\r\n            ToAttractor.normalize().scaleToRef(strength / distanceSquared, Force);\r\n\r\n            Force.scaleToRef(system._tempScaledUpdateSpeed, ScaledForce);\r\n\r\n            particle.direction.addInPlace(ScaledForce); // Update particle velocity\r\n        };\r\n\r\n        const attractorProcessing = {\r\n            process: processAttractor,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(attractorProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = attractorProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.UpdateAttractorBlock\", UpdateAttractorBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAI5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;AACvE,OAAO,EAAE,OAAO,EAAE,yCAA+B;;;;;;AAEjD,MAAM,WAAW,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;AAC5C,MAAM,KAAK,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;AACtC,MAAM,WAAW,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;AAKtC,MAAO,oBAAqB,SAAQ,sQAAiB;IACvD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,uTAAqC,CAAC,OAAO,EAAE,IAAI,EAAE,6OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QACrG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QACrF,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,sBAAsB,CAAC;IAClC,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,MAAM,gBAAgB,GAAG,CAAC,QAAkB,EAAE,EAAE;YAC5C,MAAM,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,KAAK,CAAY,CAAC;YAC7E,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAW,CAAC;YAClE,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;YAChE,MAAM,eAAe,GAAG,WAAW,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC,wBAAwB;YACjF,WAAW,CAAC,SAAS,EAAE,CAAC,UAAU,CAAC,QAAQ,GAAG,eAAe,EAAE,KAAK,CAAC,CAAC;YAEtE,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,sBAAsB,EAAE,WAAW,CAAC,CAAC;YAE7D,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,2BAA2B;QAC3E,CAAC,CAAC;QAEF,MAAM,mBAAmB,GAAG;YACxB,OAAO,EAAE,gBAAgB;YACzB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,mBAAmB,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACpE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,mBAAmB,CAAC;QACnD,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;IACtC,CAAC;CACJ;IAED,6OAAa,EAAC,8BAA8B,EAAE,oBAAoB,CAAC,CAAC"}},
    {"offset": {"line": 6771, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Update/alignAngleBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Update/alignAngleBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport { Vector3 } from \"../../../../Maths/math.vector\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\n\r\n/**\r\n * Block used to align the angle of a particle to its direction\r\n * We assume the sprite is facing +Y\r\n * NPE: #W5054F\r\n * PG: #H5RP91\r\n */\r\nexport class AlignAngleBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the strenght of the flow map effect\r\n     */\r\n    @editableInPropertyPage(\"alignment\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: -0, max: 2 * Math.PI })\r\n    public alignment = Math.PI / 2; // Default to 90 degrees, aligning +Y with direction\r\n\r\n    /**\r\n     * Create a new AlignAngleBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"AlignAngleBlock\";\r\n    }\r\n\r\n    /**\r\n     * Builds the block\r\n     * @param state defines the current build state\r\n     */\r\n    public override _build(state: NodeParticleBuildState) {\r\n        const system = this.particle.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        this.output._storedValue = system;\r\n\r\n        const tempVector3 = new Vector3();\r\n\r\n        const processAngle = (particle: Particle) => {\r\n            const cam = state.scene.activeCamera;\r\n            if (!cam) {\r\n                return;\r\n            }\r\n            const dir = particle.direction;\r\n            const view = cam.getViewMatrix();\r\n\r\n            const dirInView = Vector3.TransformNormalToRef(dir, view, tempVector3);\r\n\r\n            // Angle so sprites +Y aligns with projected direction\r\n            const angle = Math.atan2(dirInView.y, dirInView.x) + this.alignment;\r\n            particle.angle = angle; // radians\r\n        };\r\n\r\n        const angleProcessing = {\r\n            process: processAngle,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(angleProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = angleProcessing;\r\n        }\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.alignment = this.alignment;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        if (serializationObject.alignment !== undefined) {\r\n            this.alignment = serializationObject.alignment;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.AlignAngleBlock\", AlignAngleBlock);\r\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;AAC1G,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAK5D,OAAO,EAAE,gBAAgB,EAAE,yCAA4C;AACvE,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AACxD,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;;;;;;;;AAQhG,MAAO,eAAgB,SAAQ,sQAAiB;IAOlD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAXhB;;WAEG,CAEI,IAAA,CAAA,SAAS,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,oDAAoD;QAShF,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;QAC/E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,QAAQ,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,iBAAiB,CAAC;IAC7B,CAAC;IAED;;;OAGG,CACa,MAAM,CAAC,KAA6B,EAAA;QAChD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAuB,CAAC;QAE5E,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC;QAElC,MAAM,WAAW,GAAG,IAAI,6OAAO,EAAE,CAAC;QAElC,MAAM,YAAY,GAAG,CAAC,QAAkB,EAAE,EAAE;YACxC,MAAM,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC;YACrC,IAAI,CAAC,GAAG,EAAE,CAAC;gBACP,OAAO;YACX,CAAC;YACD,MAAM,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC;YAC/B,MAAM,IAAI,GAAG,GAAG,CAAC,aAAa,EAAE,CAAC;YAEjC,MAAM,SAAS,GAAG,6OAAO,CAAC,oBAAoB,CAAC,GAAG,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;YAEvE,uDAAuD;YACvD,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;YACpE,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,UAAU;QACtC,CAAC,CAAC;QAEF,MAAM,eAAe,GAAG;YACpB,OAAO,EAAE,YAAY;YACrB,YAAY,EAAE,IAAI;YAClB,QAAQ,EAAE,IAAI;SACjB,CAAC;QAEF,IAAI,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,mQAAgB,EAAC,eAAe,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAChE,CAAC,MAAM,CAAC;YACJ,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAC;QAC/C,CAAC;IACL,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE9C,mBAAmB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAE/C,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAExC,IAAI,mBAAmB,CAAC,SAAS,KAAK,SAAS,EAAE,CAAC;YAC9C,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,CAAC;QACnD,CAAC;IACL,CAAC;CACJ;IAzFU,qOAAA,EAAA;QADN,gQAAsB,EAAC,WAAW,EAAA,EAAA,gCAAA,KAAgC,UAAU,EAAE;QAAE,QAAQ,EAAE,IAAI;QAAE,SAAS,EAAE;YAAE,OAAO,EAAE,IAAI;QAAA,CAAE;QAAE,GAAG,EAAE,CAAC,CAAC;QAAE,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE;IAAA,CAAE,CAAC;kDAC5H;IA2FnC,6OAAa,EAAC,yBAAyB,EAAE,eAAe,CAAC,CAAC"}},
    {"offset": {"line": 6874, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/setupSpriteSheetBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/setupSpriteSheetBlock.ts"],"sourcesContent":["import { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ParticleSystem } from \"core/Particles\";\r\n/**\r\n * Block used as configure the sprite sheet for particles\r\n */\r\nexport class SetupSpriteSheetBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the start cell of the sprite sheet\r\n     */\r\n    @editableInPropertyPage(\"Start\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public start = 0;\r\n\r\n    /**\r\n     * Gets or sets the end cell of the sprite sheet\r\n     */\r\n    @editableInPropertyPage(\"End\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public end = 8;\r\n\r\n    /**\r\n     * Gets or sets the width of the sprite sheet\r\n     */\r\n    @editableInPropertyPage(\"Width\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public width = 64;\r\n\r\n    /**\r\n     * Gets or sets the height of the sprite sheet\r\n     */\r\n    @editableInPropertyPage(\"Height\", PropertyTypeForEdition.Float, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public height = 64;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the sprite sheet should loop\r\n     */\r\n    @editableInPropertyPage(\"Loop\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public loop = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the sprite sheet should start at a random cell\r\n     */\r\n    @editableInPropertyPage(\"Random start cell\", PropertyTypeForEdition.Boolean, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true } })\r\n    public randomStartCell = false;\r\n\r\n    /**\r\n     * Creates a new SetupSpriteSheetBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"particle\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"SetupSpriteSheetBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the particle component\r\n     */\r\n    public get particle(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n\r\n        const system = this.particle.getConnectedValue(state) as ParticleSystem;\r\n\r\n        system._isAnimationSheetEnabled = true;\r\n        system.spriteCellWidth = this.width;\r\n        system.spriteCellHeight = this.height;\r\n        system.startSpriteCellID = this.start;\r\n        system.endSpriteCellID = this.end;\r\n        system.spriteRandomStartCell = this.randomStartCell;\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.width = this.width;\r\n        serializationObject.height = this.height;\r\n        serializationObject.start = this.start;\r\n        serializationObject.end = this.end;\r\n        serializationObject.randomStartCell = this.randomStartCell;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.width = serializationObject.width;\r\n        this.height = serializationObject.height;\r\n        this.start = serializationObject.start;\r\n        this.end = serializationObject.end;\r\n        this.randomStartCell = serializationObject.randomStartCell;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.SetupSpriteSheetBlock\", SetupSpriteSheetBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7018, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Emitters/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Emitters/index.ts"],"sourcesContent":["export * from \"./createParticleBlock\";\r\nexport * from \"./boxShapeBlock\";\r\nexport * from \"./coneShapeBlock\";\r\nexport * from \"./cylinderShapeBlock\";\r\nexport * from \"./customShapeBlock\";\r\nexport * from \"./meshShapeBlock\";\r\nexport * from \"./pointShapeBlock\";\r\nexport * from \"./setupSpriteSheetBlock\";\r\nexport * from \"./sphereShapeBlock\";\r\n"],"names":[],"mappings":";AAAA,cAAc,uBAAuB,CAAC;AACtC,cAAc,iBAAiB,CAAC;AAChC,cAAc,kBAAkB,CAAC;AACjC,cAAc,sBAAsB,CAAC;AACrC,cAAc,oBAAoB,CAAC;AACnC,cAAc,kBAAkB,CAAC;AACjC,cAAc,mBAAmB,CAAC;AAClC,cAAc,yBAAyB,CAAC;AACxC,cAAc,oBAAoB,CAAC"}},
    {"offset": {"line": 7041, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleTrigonometryBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleTrigonometryBlock.ts"],"sourcesContent":["import type { Nullable } from \"../../../types\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { Vector2, Vector3 } from \"../../../Maths/math.vector\";\r\nimport { PropertyTypeForEdition, editableInPropertyPage } from \"../../../Decorators/nodeDecorator\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\n\r\n/**\r\n * Operations supported by the Trigonometry block\r\n */\r\nexport enum ParticleTrigonometryBlockOperations {\r\n    /** Cos */\r\n    Cos,\r\n    /** Sin */\r\n    Sin,\r\n    /** Abs */\r\n    Abs,\r\n    /** Exp */\r\n    Exp,\r\n    /** Exp2 */\r\n    Exp2,\r\n    /** Round */\r\n    Round,\r\n    /** Floor */\r\n    Floor,\r\n    /** Ceiling */\r\n    Ceiling,\r\n    /** Square root */\r\n    Sqrt,\r\n    /** Log */\r\n    Log,\r\n    /** Tangent */\r\n    Tan,\r\n    /** Arc tangent */\r\n    ArcTan,\r\n    /** Arc cosinus */\r\n    ArcCos,\r\n    /** Arc sinus */\r\n    ArcSin,\r\n    /** Sign */\r\n    Sign,\r\n    /** Negate */\r\n    Negate,\r\n    /** OneMinus */\r\n    OneMinus,\r\n    /** Reciprocal */\r\n    Reciprocal,\r\n    /** ToDegrees */\r\n    ToDegrees,\r\n    /** ToRadians */\r\n    ToRadians,\r\n    /** Fract */\r\n    Fract,\r\n}\r\n\r\n/**\r\n * Block used to apply trigonometry operation to floats\r\n */\r\nexport class ParticleTrigonometryBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the operation applied by the block\r\n     */\r\n    @editableInPropertyPage(\"Operation\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        embedded: true,\r\n        notifiers: { rebuild: true },\r\n        options: [\r\n            { label: \"Cos\", value: ParticleTrigonometryBlockOperations.Cos },\r\n            { label: \"Sin\", value: ParticleTrigonometryBlockOperations.Sin },\r\n            { label: \"Abs\", value: ParticleTrigonometryBlockOperations.Abs },\r\n            { label: \"Exp\", value: ParticleTrigonometryBlockOperations.Exp },\r\n            { label: \"Exp2\", value: ParticleTrigonometryBlockOperations.Exp2 },\r\n            { label: \"Round\", value: ParticleTrigonometryBlockOperations.Round },\r\n            { label: \"Floor\", value: ParticleTrigonometryBlockOperations.Floor },\r\n            { label: \"Ceiling\", value: ParticleTrigonometryBlockOperations.Ceiling },\r\n            { label: \"Sqrt\", value: ParticleTrigonometryBlockOperations.Sqrt },\r\n            { label: \"Log\", value: ParticleTrigonometryBlockOperations.Log },\r\n            { label: \"Tan\", value: ParticleTrigonometryBlockOperations.Tan },\r\n            { label: \"ArcTan\", value: ParticleTrigonometryBlockOperations.ArcTan },\r\n            { label: \"ArcCos\", value: ParticleTrigonometryBlockOperations.ArcCos },\r\n            { label: \"ArcSin\", value: ParticleTrigonometryBlockOperations.ArcSin },\r\n            { label: \"Sign\", value: ParticleTrigonometryBlockOperations.Sign },\r\n            { label: \"Negate\", value: ParticleTrigonometryBlockOperations.Negate },\r\n            { label: \"OneMinus\", value: ParticleTrigonometryBlockOperations.OneMinus },\r\n            { label: \"Reciprocal\", value: ParticleTrigonometryBlockOperations.Reciprocal },\r\n            { label: \"ToDegrees\", value: ParticleTrigonometryBlockOperations.ToDegrees },\r\n            { label: \"ToRadians\", value: ParticleTrigonometryBlockOperations.ToRadians },\r\n            { label: \"Fract\", value: ParticleTrigonometryBlockOperations.Fract },\r\n        ],\r\n    })\r\n    public operation = ParticleTrigonometryBlockOperations.Cos;\r\n\r\n    /**\r\n     * Creates a new GeometryTrigonometryBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n\r\n        this._inputs[0].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeParticleBlockConnectionPointTypes.Float |\r\n                NodeParticleBlockConnectionPointTypes.Int |\r\n                NodeParticleBlockConnectionPointTypes.Vector2 |\r\n                NodeParticleBlockConnectionPointTypes.Vector3 |\r\n                NodeParticleBlockConnectionPointTypes.Color4\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleTrigonometryBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n        let func: Nullable<(value: number) => number> = null;\r\n\r\n        switch (this.operation) {\r\n            case ParticleTrigonometryBlockOperations.Cos: {\r\n                func = (value: number) => Math.cos(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Sin: {\r\n                func = (value: number) => Math.sin(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Abs: {\r\n                func = (value: number) => Math.abs(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Exp: {\r\n                func = (value: number) => Math.exp(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Exp2: {\r\n                func = (value: number) => Math.pow(2, value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Round: {\r\n                func = (value: number) => Math.round(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Floor: {\r\n                func = (value: number) => Math.floor(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Ceiling: {\r\n                func = (value: number) => Math.ceil(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Sqrt: {\r\n                func = (value: number) => Math.sqrt(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Log: {\r\n                func = (value: number) => Math.log(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Tan: {\r\n                func = (value: number) => Math.tan(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.ArcTan: {\r\n                func = (value: number) => Math.atan(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.ArcCos: {\r\n                func = (value: number) => Math.acos(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.ArcSin: {\r\n                func = (value: number) => Math.asin(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Sign: {\r\n                func = (value: number) => Math.sign(value);\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Negate: {\r\n                func = (value: number) => -value;\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.OneMinus: {\r\n                func = (value: number) => 1 - value;\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Reciprocal: {\r\n                func = (value: number) => 1 / value;\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.ToRadians: {\r\n                func = (value: number) => (value * Math.PI) / 180;\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.ToDegrees: {\r\n                func = (value: number) => (value * 180) / Math.PI;\r\n                break;\r\n            }\r\n            case ParticleTrigonometryBlockOperations.Fract: {\r\n                func = (value: number) => {\r\n                    if (value >= 0) {\r\n                        return value - Math.floor(value);\r\n                    } else {\r\n                        return value - Math.ceil(value);\r\n                    }\r\n                };\r\n                break;\r\n            }\r\n        }\r\n        if (!func) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        switch (this.input.type) {\r\n            case NodeParticleBlockConnectionPointTypes.Int:\r\n            case NodeParticleBlockConnectionPointTypes.Float: {\r\n                this.output._storedFunction = (state) => {\r\n                    const source = this.input.getConnectedValue(state);\r\n                    return func(source);\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Vector2: {\r\n                this.output._storedFunction = (state) => {\r\n                    const source = this.input.getConnectedValue(state);\r\n                    return new Vector2(func(source.x), func(source.y));\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Vector3: {\r\n                this.output._storedFunction = (state) => {\r\n                    const source = this.input.getConnectedValue(state);\r\n                    return new Vector3(func(source.x), func(source.y), func(source.z));\r\n                };\r\n                break;\r\n            }\r\n            case NodeParticleBlockConnectionPointTypes.Color4: {\r\n                this.output._storedFunction = (state) => {\r\n                    const source = this.input.getConnectedValue(state);\r\n                    return new Color4(func(source.r), func(source.g), func(source.b), func(source.a));\r\n                };\r\n                break;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.operation = this.operation;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.operation = serializationObject.operation;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleTrigonometryBlock\", ParticleTrigonometryBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7382, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleDebugBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleDebugBlock.ts"],"sourcesContent":["import { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { Vector2ToFixed, Vector3ToFixed } from \"../../../Maths/math.vector.functions\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\n/**\r\n * Defines a block used to debug values going through it\r\n */\r\nexport class ParticleDebugBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets the log entries\r\n     */\r\n    public log: string[][] = [];\r\n\r\n    /**\r\n     * Gets or sets the number of logs to keep\r\n     */\r\n    @editableInPropertyPage(\"Reference\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: false, notifiers: { rebuild: true }, min: 1, max: 100 })\r\n    public stackSize = 10;\r\n\r\n    /**\r\n     * Create a new ParticleDebugBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this._isDebug = true;\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.FloatGradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Vector2Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Vector3Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Color4Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.System);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Particle);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Texture);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleDebugBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Observable raised when data is collected\r\n     */\r\n    public onDataCollectedObservable = new Observable<ParticleDebugBlock>(undefined, true);\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        if (!this.input.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        this.log = [];\r\n        const func = (state: NodeParticleBuildState) => {\r\n            const input = this.input.getConnectedValue(state);\r\n\r\n            if (this.log.length >= this.stackSize) {\r\n                return input;\r\n            }\r\n\r\n            if (input === null || input === undefined) {\r\n                this.log.push([\"null\", \"\"]);\r\n                return input;\r\n            }\r\n\r\n            switch (this.input.type) {\r\n                case NodeParticleBlockConnectionPointTypes.Vector2:\r\n                    this.log.push([Vector2ToFixed(input, 4), input.toString()]);\r\n                    break;\r\n                case NodeParticleBlockConnectionPointTypes.Vector3:\r\n                    this.log.push([Vector3ToFixed(input, 4), input.toString()]);\r\n                    break;\r\n                case NodeParticleBlockConnectionPointTypes.Color4:\r\n                    this.log.push([`{R: ${input.r.toFixed(4)} G: ${input.g.toFixed(4)} B: ${input.b.toFixed(4)} A: ${input.a.toFixed(4)}}`, input.toString()]);\r\n                    break;\r\n                default:\r\n                    this.log.push([input.toString(), input.toString()]);\r\n                    break;\r\n            }\r\n\r\n            this.onDataCollectedObservable.notifyObservers(this);\r\n\r\n            return input;\r\n        };\r\n\r\n        if (this.output.isConnected) {\r\n            this.output._storedFunction = func;\r\n        } else {\r\n            this.output._storedValue = func(state);\r\n        }\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.stackSize = this.stackSize;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.stackSize = serializationObject.stackSize;\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this.onDataCollectedObservable.clear();\r\n        super.dispose();\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleDebugBlock\", ParticleDebugBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7526, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleElbowBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleElbowBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\n/**\r\n * Block used as a pass through\r\n */\r\nexport class ParticleElbowBlock extends NodeParticleBlock {\r\n    /**\r\n     * Creates a new ParticleElbowBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleElbowBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        super._build(state);\r\n\r\n        const output = this._outputs[0];\r\n        const input = this._inputs[0];\r\n\r\n        output._storedFunction = (state) => {\r\n            return input.getConnectedValue(state);\r\n        };\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleElbowBlock\", ParticleElbowBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,qCAAqC,EAAE,MAAM,gDAAgD,CAAC;AACvG,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;;;;AAMnD,MAAO,kBAAmB,SAAQ,sQAAiB;IACrD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,uTAAqC,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,YAAY,CAAC,CAAC;QAElF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7D,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,oBAAoB,CAAC;IAChC,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEe,MAAM,CAAC,KAA6B,EAAA;QAChD,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAEpB,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAChC,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAE9B,MAAM,CAAC,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;YAC/B,OAAO,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAC1C,CAAC,CAAC;IACN,CAAC;CACJ;IAED,6OAAa,EAAC,4BAA4B,EAAE,kBAAkB,CAAC,CAAC"}},
    {"offset": {"line": 7576, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Teleport/particleTeleportInBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Teleport/particleTeleportInBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport type { ParticleTeleportOutBlock } from \"./particleTeleportOutBlock\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\n\r\n/**\r\n * Defines a block used to teleport a value to an endpoint\r\n */\r\nexport class ParticleTeleportInBlock extends NodeParticleBlock {\r\n    private _endpoints: ParticleTeleportOutBlock[] = [];\r\n\r\n    /** Gets the list of attached endpoints */\r\n    public get endpoints() {\r\n        return this._endpoints;\r\n    }\r\n\r\n    /**\r\n     * Create a new ParticleTeleportInBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n        this._isTeleportIn = true;\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleTeleportInBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given type\r\n     * @param type defines the potential type to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public override isAnAncestorOfType(type: string): boolean {\r\n        if (this.getClassName() === type) {\r\n            return true;\r\n        }\r\n\r\n        for (const endpoint of this.endpoints) {\r\n            if (endpoint.isAnAncestorOfType(type)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given block\r\n     * @param block defines the potential descendant block to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public override isAnAncestorOf(block: NodeParticleBlock): boolean {\r\n        for (const endpoint of this.endpoints) {\r\n            if (endpoint === block) {\r\n                return true;\r\n            }\r\n\r\n            if (endpoint.isAnAncestorOf(block)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Add an enpoint to this block\r\n     * @param endpoint define the endpoint to attach to\r\n     */\r\n    public attachToEndpoint(endpoint: ParticleTeleportOutBlock) {\r\n        endpoint.detach();\r\n\r\n        this._endpoints.push(endpoint);\r\n        endpoint._entryPoint = this;\r\n        endpoint._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        endpoint._tempEntryPointUniqueId = null;\r\n        endpoint.name = \"> \" + this.name;\r\n    }\r\n\r\n    /**\r\n     * Remove enpoint from this block\r\n     * @param endpoint define the endpoint to remove\r\n     */\r\n    public detachFromEndpoint(endpoint: ParticleTeleportOutBlock) {\r\n        const index = this._endpoints.indexOf(endpoint);\r\n\r\n        if (index !== -1) {\r\n            this._endpoints.splice(index, 1);\r\n            endpoint._outputs[0]._typeConnectionSource = null;\r\n            endpoint._entryPoint = null;\r\n        }\r\n    }\r\n\r\n    public override _build() {\r\n        for (const endpoint of this._endpoints) {\r\n            endpoint.output._storedFunction = (state) => {\r\n                return this.input.getConnectedValue(state);\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleTeleportInBlock\", ParticleTeleportInBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7675, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Teleport/particleTeleportOutBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Teleport/particleTeleportOutBlock.ts"],"sourcesContent":["import type { Nullable } from \"../../../../types\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { ParticleTeleportInBlock } from \"./particleTeleportInBlock\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\n\r\n/**\r\n * Defines a block used to receive a value from a teleport entry point\r\n */\r\nexport class ParticleTeleportOutBlock extends NodeParticleBlock {\r\n    /** @internal */\r\n    public _entryPoint: Nullable<ParticleTeleportInBlock> = null;\r\n    /** @internal */\r\n    public _tempEntryPointUniqueId: Nullable<number> = null;\r\n\r\n    /**\r\n     * Create a new ParticleTeleportOutBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this._isTeleportOut = true;\r\n\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n    }\r\n\r\n    /**\r\n     * Gets the entry point\r\n     */\r\n    public get entryPoint() {\r\n        return this._entryPoint;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleTeleportOutBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /** Detach from entry point */\r\n    public detach() {\r\n        if (!this._entryPoint) {\r\n            return;\r\n        }\r\n        this._entryPoint.detachFromEndpoint(this);\r\n    }\r\n\r\n    public override _build() {\r\n        // Do nothing\r\n        // All work done by the emitter\r\n    }\r\n\r\n    protected override _customBuildStep(state: NodeParticleBuildState): void {\r\n        if (this.entryPoint) {\r\n            this.entryPoint.build(state);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clone the current block to a new identical block\r\n     * @returns a copy of the current block\r\n     */\r\n    public override clone() {\r\n        const clone = super.clone();\r\n\r\n        if (this.entryPoint) {\r\n            this.entryPoint.attachToEndpoint(clone as ParticleTeleportOutBlock);\r\n        }\r\n\r\n        return clone;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.entryPoint = this.entryPoint?.uniqueId ?? \"\";\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this._tempEntryPointUniqueId = serializationObject.entryPoint;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleTeleportOutBlock\", ParticleTeleportOutBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AAC5D,OAAO,EAAE,qCAAqC,EAAE,MAAM,mDAAmD,CAAC;;;;AAQpG,MAAO,wBAAyB,SAAQ,sQAAiB;IAM3D;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAVhB,cAAA,EAAgB,CACT,IAAA,CAAA,WAAW,GAAsC,IAAI,CAAC;QAC7D,cAAA,EAAgB,CACT,IAAA,CAAA,uBAAuB,GAAqB,IAAI,CAAC;QASpD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,YAAY,CAAC,CAAC;IACtF,CAAC;IAED;;OAEG,CACH,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,0BAA0B,CAAC;IACtC,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED,4BAAA,EAA8B,CACvB,MAAM,GAAA;QACT,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACpB,OAAO;QACX,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;IAEe,MAAM,GAAA;IAClB,aAAa;IACb,+BAA+B;IACnC,CAAC;IAEkB,gBAAgB,CAAC,KAA6B,EAAA;QAC7D,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;IACL,CAAC;IAED;;;OAGG,CACa,KAAK,GAAA;QACjB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;QAE5B,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,KAAiC,CAAC,CAAC;QACxE,CAAC;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAED;;;OAGG,CACa,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE9C,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,QAAQ,IAAI,EAAE,CAAC;QAEjE,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAExC,IAAI,CAAC,uBAAuB,GAAG,mBAAmB,CAAC,UAAU,CAAC;IAClE,CAAC;CACJ;IAED,6OAAa,EAAC,kCAAkC,EAAE,wBAAwB,CAAC,CAAC"}},
    {"offset": {"line": 7755, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/Triggers/particleTriggerBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/Triggers/particleTriggerBlock.ts"],"sourcesContent":["import { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { NodeParticleBlock } from \"../../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../../nodeParticleBuildState\";\r\nimport type { ThinParticleSystem } from \"core/Particles/thinParticleSystem\";\r\nimport type { Particle } from \"core/Particles/particle\";\r\nimport { _ConnectAtTheEnd } from \"core/Particles/Queue/executionQueue\";\r\nimport type { SystemBlock } from \"../systemBlock\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { _TriggerSubEmitter } from \"./triggerTools\";\r\nimport type { Nullable } from \"core/types\";\r\n\r\n/**\r\n * Block used to trigger a particle system based on a condition.\r\n */\r\nexport class ParticleTriggerBlock extends NodeParticleBlock {\r\n    private _triggerCount = 0;\r\n\r\n    /**\r\n     * Gets or sets the emit rate\r\n     */\r\n    @editableInPropertyPage(\"Max simultaneous\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public limit = 5;\r\n\r\n    /**\r\n     * Gets or sets the emit rate\r\n     */\r\n    @editableInPropertyPage(\"Delay between calls (ms)\", PropertyTypeForEdition.Int, \"ADVANCED\", { embedded: true, notifiers: { rebuild: true }, min: 0 })\r\n    public delay = 250;\r\n\r\n    /**\r\n     * Create a new ParticleTriggerBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.Particle);\r\n        this.registerInput(\"condition\", NodeParticleBlockConnectionPointTypes.Float, true, 0);\r\n        this.registerInput(\"system\", NodeParticleBlockConnectionPointTypes.System);\r\n\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Particle);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleTriggerBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the condition input component\r\n     */\r\n    public get condition(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the target system input component\r\n     */\r\n    public get system(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    private _previousOne: Nullable<number> = null;\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        this._triggerCount = 0;\r\n        const system = this.input.getConnectedValue(state) as ThinParticleSystem;\r\n\r\n        const processCondition = (particle: Particle) => {\r\n            state.particleContext = particle;\r\n            state.systemContext = system;\r\n\r\n            if (this.condition.getConnectedValue(state) !== 0) {\r\n                if (this.limit === 0 || this._triggerCount < this.limit) {\r\n                    const now = new Date().getTime();\r\n                    if (this._previousOne && now - this._previousOne < this.delay) {\r\n                        return; // Skip if the delay has not passed\r\n                    }\r\n\r\n                    this._triggerCount++;\r\n                    this._previousOne = now;\r\n                    // Trigger the target particle system\r\n                    const targetSystem = this.system.getConnectedValue(state) as SystemBlock;\r\n                    if (targetSystem) {\r\n                        const clone = _TriggerSubEmitter(targetSystem, state.scene, particle.position);\r\n                        clone.onDisposeObservable.addOnce(() => {\r\n                            this._triggerCount--;\r\n                        });\r\n\r\n                        system.onDisposeObservable.addOnce(() => {\r\n                            // Clean up the cloned system when the original system is disposed\r\n                            clone.dispose();\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        const conditionProcessing = {\r\n            process: processCondition,\r\n            previousItem: null,\r\n            nextItem: null,\r\n        };\r\n\r\n        if (system._updateQueueStart) {\r\n            _ConnectAtTheEnd(conditionProcessing, system._updateQueueStart);\r\n        } else {\r\n            system._updateQueueStart = conditionProcessing;\r\n        }\r\n\r\n        this.output._storedValue = system;\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.limit = this.limit;\r\n        serializationObject.delay = this.delay;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        if (serializationObject.limit !== undefined) {\r\n            this.limit = serializationObject.limit;\r\n        }\r\n\r\n        if (serializationObject.delay !== undefined) {\r\n            this.delay = serializationObject.delay;\r\n        }\r\n    }\r\n\r\n    public override dispose(): void {\r\n        super.dispose();\r\n        this._triggerCount = 0;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleTriggerBlock\", ParticleTriggerBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7902, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleLocalVariableBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleLocalVariableBlock.ts"],"sourcesContent":["import { editableInPropertyPage, PropertyTypeForEdition } from \"core/Decorators/nodeDecorator\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\nimport type { NodeParticleBuildState } from \"../nodeParticleBuildState\";\r\n\r\nexport enum ParticleLocalVariableBlockScope {\r\n    Particle = 0,\r\n    Loop = 1,\r\n}\r\n\r\n/**\r\n * Defines a block used to store local values\r\n * #A1OS53#5\r\n */\r\nexport class ParticleLocalVariableBlock extends NodeParticleBlock {\r\n    /**\r\n     * Gets or sets the scope used by the block\r\n     */\r\n    @editableInPropertyPage(\"Scope\", PropertyTypeForEdition.List, \"ADVANCED\", {\r\n        embedded: true,\r\n        notifiers: { rebuild: true },\r\n        options: [\r\n            { label: \"Particle\", value: ParticleLocalVariableBlockScope.Particle },\r\n            { label: \"Loop\", value: ParticleLocalVariableBlockScope.Loop },\r\n        ],\r\n    })\r\n    public scope = ParticleLocalVariableBlockScope.Particle;\r\n\r\n    /**\r\n     * Create a new ParticleLocalVariableBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this._isDebug = true;\r\n\r\n        this.registerInput(\"input\", NodeParticleBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.FloatGradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Vector2Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Vector3Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Color4Gradient);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.System);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Particle);\r\n        this._inputs[0].excludedConnectionPointTypes.push(NodeParticleBlockConnectionPointTypes.Texture);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleLocalVariableBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build(state: NodeParticleBuildState) {\r\n        if (!this.input.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        let storedValue: any = null;\r\n        let localId = -1;\r\n\r\n        const func = (state: NodeParticleBuildState) => {\r\n            if (!state.particleContext && !state.systemContext) {\r\n                storedValue = null;\r\n                return null;\r\n            }\r\n\r\n            const id = (this.scope === ParticleLocalVariableBlockScope.Particle ? state.particleContext?.id : state.systemContext?.getScene()!.getFrameId()) || -1;\r\n\r\n            if (localId !== id) {\r\n                localId = id;\r\n                storedValue = null;\r\n            }\r\n\r\n            if (storedValue === null) {\r\n                storedValue = this.input.getConnectedValue(state);\r\n            }\r\n\r\n            return storedValue;\r\n        };\r\n\r\n        if (this.output.isConnected) {\r\n            this.output._storedFunction = func;\r\n        } else {\r\n            this.output._storedValue = func(state);\r\n        }\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.scope = this.scope;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this.scope = serializationObject.scope;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleLocalVariableBlock\", ParticleLocalVariableBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8022, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/particleFresnelBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/particleFresnelBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { NodeParticleBlock } from \"../nodeParticleBlock\";\r\nimport { NodeParticleBlockConnectionPointTypes } from \"../Enums/nodeParticleBlockConnectionPointTypes\";\r\nimport type { NodeParticleConnectionPoint } from \"../nodeParticleBlockConnectionPoint\";\r\n\r\n/**\r\n * Block used to compute the fresnel term\r\n */\r\nexport class ParticleFresnelBlock extends NodeParticleBlock {\r\n    /**\r\n     * Creates a new ParticleFresnelBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name);\r\n\r\n        this.registerInput(\"view\", NodeParticleBlockConnectionPointTypes.Vector3);\r\n        this.registerInput(\"normal\", NodeParticleBlockConnectionPointTypes.Vector3);\r\n        this.registerOutput(\"output\", NodeParticleBlockConnectionPointTypes.Float);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"ParticleFresnelBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the view input component\r\n     */\r\n    public get view(): NodeParticleConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the normal input component\r\n     */\r\n    public get normal(): NodeParticleConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the gradient operand input component\r\n     */\r\n    public get gradient(): NodeParticleConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeParticleConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    public override _build() {\r\n        if (!this.view.isConnected || !this.normal.isConnected) {\r\n            this.output._storedFunction = null;\r\n            this.output._storedValue = null;\r\n            return;\r\n        }\r\n\r\n        this.output._storedFunction = (state) => {\r\n            const view = this.view.getConnectedValue(state);\r\n            const normal = this.normal.getConnectedValue(state);\r\n            const f0 = 0.04; // base reflectance at normal incidence (e.g. 0.04 for dielectrics)\r\n\r\n            const nLen = normal.length();\r\n            const vLen = view.length();\r\n\r\n            // Guard against zero-length inputs\r\n            if (nLen < 1e-8 || vLen < 1e-8) {\r\n                return f0;\r\n            }\r\n\r\n            const cosTheta = Math.min(Math.max(Vector3.Dot(normal, view) / (nLen * vLen), 0.0), 1.0);\r\n\r\n            // Schlick approximation\r\n            const oneMinusCos = 1.0 - cosTheta;\r\n            return f0 + (1.0 - f0) * Math.pow(oneMinusCos, 5.0);\r\n        };\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ParticleFresnelBlock\", ParticleFresnelBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,OAAO,EAAE,sCAA+B;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,qCAAqC,EAAE,MAAM,gDAAgD,CAAC;;;;;AAMjG,MAAO,oBAAqB,SAAQ,sQAAiB;IACvD;;;OAGG,CACH,YAAmB,IAAY,CAAA;QAC3B,KAAK,CAAC,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;QAC1E,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,uTAAqC,CAAC,OAAO,CAAC,CAAC;QAC5E,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,uTAAqC,CAAC,KAAK,CAAC,CAAC;IAC/E,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,sBAAsB,CAAC;IAClC,CAAC;IAED;;OAEG,CACH,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;YACrD,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;YAChC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;YACpC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAChD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YACpD,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,mEAAmE;YAEpF,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;YAC7B,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;YAE3B,mCAAmC;YACnC,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,EAAE,CAAC;gBAC7B,OAAO,EAAE,CAAC;YACd,CAAC;YAED,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,6OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YAEzF,wBAAwB;YACxB,MAAM,WAAW,GAAG,GAAG,GAAG,QAAQ,CAAC;YACnC,OAAO,EAAE,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;QACxD,CAAC,CAAC;IACN,CAAC;CACJ;IAED,6OAAa,EAAC,8BAA8B,EAAE,oBAAoB,CAAC,CAAC"}},
    {"offset": {"line": 8098, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/Blocks/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/Blocks/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./systemBlock\";\r\nexport * from \"./particleFloatToIntBlock\";\r\nexport * from \"./particleInputBlock\";\r\nexport * from \"./particleSourceTextureBlock\";\r\nexport * from \"./particleMathBlock\";\r\nexport * from \"./particleLerpBlock\";\r\nexport * from \"./Update/updateDirectionBlock\";\r\nexport * from \"./Update/updatePositionBlock\";\r\nexport * from \"./Update/updateColorBlock\";\r\nexport * from \"./Update/updateScaleBlock\";\r\nexport * from \"./Update/updateSizeBlock\";\r\nexport * from \"./Update/updateAngleBlock\";\r\nexport * from \"./Update/updateAgeBlock\";\r\nexport * from \"./Update/basicPositionUpdateBlock\";\r\nexport * from \"./Update/basicSpriteUpdateBlock\";\r\nexport * from \"./Update/basicColorUpdateBlock\";\r\nexport * from \"./Update/updateSpriteCellIndexBlock\";\r\nexport * from \"./Update/updateFlowMapBlock\";\r\nexport * from \"./Update/updateAttractorBlock\";\r\nexport * from \"./Update/alignAngleBlock\";\r\nexport * from \"./Emitters/index\";\r\nexport * from \"./particleGradientValueBlock\";\r\nexport * from \"./particleGradientBlock\";\r\nexport * from \"./particleConverterBlock\";\r\nexport * from \"./particleTrigonometryBlock\";\r\nexport * from \"./particleRandomBlock\";\r\nexport * from \"./particleDebugBlock\";\r\nexport * from \"./particleElbowBlock\";\r\nexport * from \"./Teleport/particleTeleportInBlock\";\r\nexport * from \"./Teleport/particleTeleportOutBlock\";\r\nexport * from \"./Conditions/particleConditionBlock\";\r\nexport * from \"./Triggers/particleTriggerBlock\";\r\nexport * from \"./particleLocalVariableBlock\";\r\nexport * from \"./particleVectorLengthBlock\";\r\nexport * from \"./particleFresnelBlock\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,cAAc,eAAe,CAAC;AAC9B,cAAc,2BAA2B,CAAC;AAC1C,cAAc,sBAAsB,CAAC;AACrC,cAAc,8BAA8B,CAAC;AAC7C,cAAc,qBAAqB,CAAC;AACpC,cAAc,qBAAqB,CAAC;AACpC,cAAc,+BAA+B,CAAC;AAC9C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,0BAA0B,CAAC;AACzC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,yBAAyB,CAAC;AACxC,cAAc,mCAAmC,CAAC;AAClD,cAAc,iCAAiC,CAAC;AAChD,cAAc,gCAAgC,CAAC;AAC/C,cAAc,qCAAqC,CAAC;AACpD,cAAc,6BAA6B,CAAC;AAC5C,cAAc,+BAA+B,CAAC;AAC9C,cAAc,0BAA0B,CAAC;AACzC,cAAc,kBAAkB,CAAC;AACjC,cAAc,8BAA8B,CAAC;AAC7C,cAAc,yBAAyB,CAAC;AACxC,cAAc,0BAA0B,CAAC;AACzC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,uBAAuB,CAAC;AACtC,cAAc,sBAAsB,CAAC;AACrC,cAAc,sBAAsB,CAAC;AACrC,cAAc,oCAAoC,CAAC;AACnD,cAAc,qCAAqC,CAAC;AACpD,cAAc,qCAAqC,CAAC;AACpD,cAAc,iCAAiC,CAAC;AAChD,cAAc,8BAA8B,CAAC;AAC7C,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC"}},
    {"offset": {"line": 8173, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Particles/Node/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Particles/Node/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./nodeParticleBlock\";\r\nexport * from \"./nodeParticleSystemSet\";\r\nexport * from \"./nodeParticleSystemSet.helper\";\r\nexport * from \"./nodeParticleBlockConnectionPoint\";\r\nexport * from \"./nodeParticleBuildState\";\r\nexport * from \"./Enums/nodeParticleBlockConnectionPointTypes\";\r\nexport * from \"./Enums/nodeParticleContextualSources\";\r\nexport * from \"./Enums/nodeParticleSystemSources\";\r\nexport * from \"./Blocks/index\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,cAAc,qBAAqB,CAAC;AACpC,cAAc,yBAAyB,CAAC;AACxC,cAAc,gCAAgC,CAAC;AAC/C,cAAc,oCAAoC,CAAC;AACnD,cAAc,0BAA0B,CAAC;AACzC,cAAc,+CAA+C,CAAC;AAC9D,cAAc,uCAAuC,CAAC;AACtD,cAAc,mCAAmC,CAAC;AAClD,cAAc,gBAAgB,CAAC"}}]
}