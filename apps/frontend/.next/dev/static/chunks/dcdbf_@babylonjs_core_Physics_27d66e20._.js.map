{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/physicsJoint.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/physicsJoint.ts"],"sourcesContent":["import type { Vector3 } from \"../../Maths/math.vector\";\r\nimport type { IPhysicsEnginePlugin } from \"./IPhysicsEnginePlugin\";\r\n/**\r\n * Interface for Physics-Joint data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsJointData {\r\n    //Important for some engines, optional!\r\n    /**\r\n     * The main pivot of the joint\r\n     */\r\n    mainPivot?: Vector3;\r\n    /**\r\n     * The connected pivot of the joint\r\n     */\r\n    connectedPivot?: Vector3;\r\n    /**\r\n     * The main axis of the joint\r\n     */\r\n    mainAxis?: Vector3;\r\n    /**\r\n     * The connected axis of the joint\r\n     */\r\n    connectedAxis?: Vector3;\r\n    /**\r\n     * The collision of the joint\r\n     */\r\n    collision?: boolean;\r\n    /**\r\n     * Native Oimo/Cannon/Energy data\r\n     */\r\n    nativeParams?: any;\r\n}\r\n\r\n/**\r\n * This is a holder class for the physics joint created by the physics plugin\r\n * It holds a set of functions to control the underlying joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsJoint {\r\n    private _physicsJoint: any;\r\n    protected _physicsPlugin: IPhysicsEnginePlugin;\r\n\r\n    /**\r\n     * Initializes the physics joint\r\n     * @param type The type of the physics joint\r\n     * @param jointData The data for the physics joint\r\n     */\r\n    constructor(\r\n        /**\r\n         * The type of the physics joint\r\n         */\r\n        public type: number,\r\n        /**\r\n         * The data for the physics joint\r\n         */\r\n        public jointData: PhysicsJointData\r\n    ) {\r\n        jointData.nativeParams = jointData.nativeParams || {};\r\n    }\r\n\r\n    /**\r\n     * Gets the physics joint\r\n     */\r\n    public get physicsJoint(): any {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n        return this._physicsJoint;\r\n    }\r\n\r\n    /**\r\n     * Sets the physics joint\r\n     */\r\n    public set physicsJoint(newJoint: any) {\r\n        this._physicsJoint = newJoint;\r\n    }\r\n\r\n    /**\r\n     * Sets the physics plugin\r\n     */\r\n    public set physicsPlugin(physicsPlugin: IPhysicsEnginePlugin) {\r\n        this._physicsPlugin = physicsPlugin;\r\n    }\r\n\r\n    /**\r\n     * Execute a function that is physics-plugin specific.\r\n     * @param {Function} func the function that will be executed.\r\n     *                        It accepts two parameters: the physics world and the physics joint\r\n     */\r\n    public executeNativeFunction(func: (world: any, physicsJoint: any) => void) {\r\n        func(this._physicsPlugin.world, this._physicsJoint);\r\n    }\r\n\r\n    //TODO check if the native joints are the same\r\n\r\n    //Joint Types\r\n    /**\r\n     * Distance-Joint type\r\n     */\r\n    public static DistanceJoint = 0;\r\n    /**\r\n     * Hinge-Joint type\r\n     */\r\n    public static HingeJoint = 1;\r\n    /**\r\n     * Ball-and-Socket joint type\r\n     */\r\n    public static BallAndSocketJoint = 2;\r\n    /**\r\n     * Wheel-Joint type\r\n     */\r\n    public static WheelJoint = 3;\r\n    /**\r\n     * Slider-Joint type\r\n     */\r\n    public static SliderJoint = 4;\r\n    //OIMO\r\n    /**\r\n     * Prismatic-Joint type\r\n     */\r\n    public static PrismaticJoint = 5;\r\n    //\r\n    /**\r\n     * Universal-Joint type\r\n     * ENERGY FTW! (compare with this - @see http://ode-wiki.org/wiki/index.php?title=Manual:_Joint_Types_and_Functions)\r\n     */\r\n    public static UniversalJoint = 6;\r\n    /**\r\n     * Hinge-Joint 2 type\r\n     */\r\n    public static Hinge2Joint = PhysicsJoint.WheelJoint;\r\n    //Cannon\r\n    /**\r\n     * Point to Point Joint type.  Similar to a Ball-Joint.  Different in parameters\r\n     */\r\n    public static PointToPointJoint = 8;\r\n    //Cannon only at the moment\r\n    /**\r\n     * Spring-Joint type\r\n     */\r\n    public static SpringJoint = 9;\r\n    /**\r\n     * Lock-Joint type\r\n     */\r\n    public static LockJoint = 10;\r\n}\r\n\r\n/**\r\n * A class representing a physics distance joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class DistanceJoint extends PhysicsJoint {\r\n    /**\r\n     *\r\n     * @param jointData The data for the Distance-Joint\r\n     */\r\n    constructor(jointData: DistanceJointData) {\r\n        super(PhysicsJoint.DistanceJoint, jointData);\r\n    }\r\n\r\n    /**\r\n     * Update the predefined distance.\r\n     * @param maxDistance The maximum preferred distance\r\n     * @param minDistance The minimum preferred distance\r\n     */\r\n    public updateDistance(maxDistance: number, minDistance?: number) {\r\n        this._physicsPlugin.updateDistanceJoint(this, maxDistance, minDistance);\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a Motor-Enabled Joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class MotorEnabledJoint extends PhysicsJoint implements IMotorEnabledJoint {\r\n    /**\r\n     * Initializes the Motor-Enabled Joint\r\n     * @param type The type of the joint\r\n     * @param jointData The physical joint data for the joint\r\n     */\r\n    constructor(type: number, jointData: PhysicsJointData) {\r\n        super(type, jointData);\r\n    }\r\n\r\n    /**\r\n     * Set the motor values.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param force the force to apply\r\n     * @param maxForce max force for this motor.\r\n     */\r\n    public setMotor(force?: number, maxForce?: number) {\r\n        this._physicsPlugin.setMotor(this, force || 0, maxForce);\r\n    }\r\n\r\n    /**\r\n     * Set the motor's limits.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param upperLimit The upper limit of the motor\r\n     * @param lowerLimit The lower limit of the motor\r\n     */\r\n    public setLimit(upperLimit: number, lowerLimit?: number) {\r\n        this._physicsPlugin.setLimit(this, upperLimit, lowerLimit);\r\n    }\r\n}\r\n\r\n/**\r\n * This class represents a single physics Hinge-Joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class HingeJoint extends MotorEnabledJoint {\r\n    /**\r\n     * Initializes the Hinge-Joint\r\n     * @param jointData The joint data for the Hinge-Joint\r\n     */\r\n    constructor(jointData: PhysicsJointData) {\r\n        super(PhysicsJoint.HingeJoint, jointData);\r\n    }\r\n\r\n    /**\r\n     * Set the motor values.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param {number} force the force to apply\r\n     * @param {number} maxForce max force for this motor.\r\n     */\r\n    public override setMotor(force?: number, maxForce?: number) {\r\n        this._physicsPlugin.setMotor(this, force || 0, maxForce);\r\n    }\r\n\r\n    /**\r\n     * Set the motor's limits.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param upperLimit The upper limit of the motor\r\n     * @param lowerLimit The lower limit of the motor\r\n     */\r\n    public override setLimit(upperLimit: number, lowerLimit?: number) {\r\n        this._physicsPlugin.setLimit(this, upperLimit, lowerLimit);\r\n    }\r\n}\r\n\r\n/**\r\n * This class represents a dual hinge physics joint (same as wheel joint)\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class Hinge2Joint extends MotorEnabledJoint {\r\n    /**\r\n     * Initializes the Hinge2-Joint\r\n     * @param jointData The joint data for the Hinge2-Joint\r\n     */\r\n    constructor(jointData: PhysicsJointData) {\r\n        super(PhysicsJoint.Hinge2Joint, jointData);\r\n    }\r\n\r\n    /**\r\n     * Set the motor values.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param targetSpeed the speed the motor is to reach\r\n     * @param maxForce max force for this motor.\r\n     * @param motorIndex motor's index, 0 or 1.\r\n     */\r\n    public override setMotor(targetSpeed?: number, maxForce?: number, motorIndex: number = 0) {\r\n        this._physicsPlugin.setMotor(this, targetSpeed || 0, maxForce, motorIndex);\r\n    }\r\n\r\n    /**\r\n     * Set the motor limits.\r\n     * Attention, this function is plugin specific. Engines won't react 100% the same.\r\n     * @param upperLimit the upper limit\r\n     * @param lowerLimit lower limit\r\n     * @param motorIndex the motor's index, 0 or 1.\r\n     */\r\n    public override setLimit(upperLimit: number, lowerLimit?: number, motorIndex: number = 0) {\r\n        this._physicsPlugin.setLimit(this, upperLimit, lowerLimit, motorIndex);\r\n    }\r\n}\r\n\r\n/**\r\n * Interface for a motor enabled joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport interface IMotorEnabledJoint {\r\n    /**\r\n     * Physics joint\r\n     */\r\n    physicsJoint: any;\r\n    /**\r\n     * Sets the motor of the motor-enabled joint\r\n     * @param force The force of the motor\r\n     * @param maxForce The maximum force of the motor\r\n     * @param motorIndex The index of the motor\r\n     */\r\n    setMotor(force?: number, maxForce?: number, motorIndex?: number): void;\r\n    /**\r\n     * Sets the limit of the motor\r\n     * @param upperLimit The upper limit of the motor\r\n     * @param lowerLimit The lower limit of the motor\r\n     * @param motorIndex The index of the motor\r\n     */\r\n    setLimit(upperLimit: number, lowerLimit?: number, motorIndex?: number): void;\r\n}\r\n\r\n/**\r\n * Joint data for a Distance-Joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface DistanceJointData extends PhysicsJointData {\r\n    /**\r\n     * Max distance the 2 joint objects can be apart\r\n     */\r\n    maxDistance: number;\r\n    //Oimo - minDistance\r\n    //Cannon - maxForce\r\n}\r\n\r\n/**\r\n * Joint data from a spring joint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface SpringJointData extends PhysicsJointData {\r\n    /**\r\n     * Length of the spring\r\n     */\r\n    length: number;\r\n    /**\r\n     * Stiffness of the spring\r\n     */\r\n    stiffness: number;\r\n    /**\r\n     * Damping of the spring\r\n     */\r\n    damping: number;\r\n    /** this callback will be called when applying the force to the impostors. */\r\n    forceApplicationCallback: () => void;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/physicsImpostor.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/physicsImpostor.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-return */\r\nimport type { Nullable, IndicesArray } from \"../../types\";\r\nimport { Logger } from \"../../Misc/logger\";\r\nimport { BuildArray } from \"../../Misc/arrayTools\";\r\nimport type { Matrix } from \"../../Maths/math.vector\";\r\nimport { Vector3, Quaternion } from \"../../Maths/math.vector\";\r\nimport type { TransformNode } from \"../../Meshes/transformNode\";\r\nimport { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport { Mesh } from \"../../Meshes/mesh\";\r\nimport type { Scene } from \"../../scene\";\r\nimport type { Bone } from \"../../Bones/bone\";\r\nimport type { BoundingInfo } from \"../../Culling/boundingInfo\";\r\nimport type { PhysicsEngine as PhysicsEngineV1 } from \"./physicsEngine\";\r\n\r\nimport type { PhysicsJointData } from \"./physicsJoint\";\r\nimport { PhysicsJoint } from \"./physicsJoint\";\r\nimport { Space } from \"../../Maths/math.axis\";\r\n\r\n/**\r\n * The interface for the physics imposter parameters\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsImpostorParameters {\r\n    /**\r\n     * The mass of the physics imposter\r\n     */\r\n    mass: number;\r\n    /**\r\n     * The friction of the physics imposter\r\n     */\r\n    friction?: number;\r\n    /**\r\n     * The coefficient of restitution of the physics imposter\r\n     */\r\n    restitution?: number;\r\n    /**\r\n     * The native options of the physics imposter\r\n     */\r\n    nativeOptions?: any;\r\n    /**\r\n     * Specifies if the parent should be ignored\r\n     */\r\n    ignoreParent?: boolean;\r\n    /**\r\n     * Specifies if bi-directional transformations should be disabled\r\n     */\r\n    disableBidirectionalTransformation?: boolean;\r\n    /**\r\n     * The pressure inside the physics imposter, soft object only\r\n     */\r\n    pressure?: number;\r\n    /**\r\n     * The stiffness the physics imposter, soft object only\r\n     */\r\n    stiffness?: number;\r\n    /**\r\n     * The number of iterations used in maintaining consistent vertex velocities, soft object only\r\n     */\r\n    velocityIterations?: number;\r\n    /**\r\n     * The number of iterations used in maintaining consistent vertex positions, soft object only\r\n     */\r\n    positionIterations?: number;\r\n    /**\r\n     * The number used to fix points on a cloth (0, 1, 2, 4, 8) or rope (0, 1, 2) only\r\n     * 0 None, 1, back left or top, 2, back right or bottom, 4, front left, 8, front right\r\n     * Add to fix multiple points\r\n     */\r\n    fixedPoints?: number;\r\n    /**\r\n     * The collision margin around a soft object\r\n     */\r\n    margin?: number;\r\n    /**\r\n     * The collision margin around a soft object\r\n     */\r\n    damping?: number;\r\n    /**\r\n     * The path for a rope based on an extrusion\r\n     */\r\n    path?: any;\r\n    /**\r\n     * The shape of an extrusion used for a rope based on an extrusion\r\n     */\r\n    shape?: any;\r\n}\r\n\r\n/**\r\n * Interface for a physics-enabled object\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport interface IPhysicsEnabledObject {\r\n    /**\r\n     * The position of the physics-enabled object\r\n     */\r\n    position: Vector3;\r\n    /**\r\n     * The rotation of the physics-enabled object\r\n     */\r\n    rotationQuaternion: Nullable<Quaternion>;\r\n    /**\r\n     * The scale of the physics-enabled object\r\n     */\r\n    scaling: Vector3;\r\n    /**\r\n     * The rotation of the physics-enabled object\r\n     */\r\n    rotation?: Vector3;\r\n    /**\r\n     * The parent of the physics-enabled object\r\n     */\r\n    parent?: any;\r\n    /**\r\n     * The bounding info of the physics-enabled object\r\n     * @returns The bounding info of the physics-enabled object\r\n     */\r\n    getBoundingInfo(): BoundingInfo;\r\n    /**\r\n     * Computes the world matrix\r\n     * @param force Specifies if the world matrix should be computed by force\r\n     * @returns A world matrix\r\n     */\r\n    computeWorldMatrix(force: boolean): Matrix;\r\n    /**\r\n     * Gets the world matrix\r\n     * @returns A world matrix\r\n     */\r\n    getWorldMatrix?(): Matrix;\r\n    /**\r\n     * Gets the child meshes\r\n     * @param directDescendantsOnly Specifies if only direct-descendants should be obtained\r\n     * @returns An array of abstract meshes\r\n     */\r\n    getChildMeshes?(directDescendantsOnly?: boolean): Array<AbstractMesh>;\r\n    /**\r\n     * Gets the vertex data\r\n     * @param kind The type of vertex data\r\n     * @returns A nullable array of numbers, or a float32 array\r\n     */\r\n    getVerticesData(kind: string): Nullable<Array<number> | Float32Array>;\r\n    /**\r\n     * Gets the indices from the mesh\r\n     * @returns A nullable array of index arrays\r\n     */\r\n    getIndices?(): Nullable<IndicesArray>;\r\n    /**\r\n     * Gets the scene from the mesh\r\n     * @returns the indices array or null\r\n     */\r\n    getScene?(): Scene;\r\n    /**\r\n     * Gets the absolute position from the mesh\r\n     * @returns the absolute position\r\n     */\r\n    getAbsolutePosition(): Vector3;\r\n    /**\r\n     * Gets the absolute pivot point from the mesh\r\n     * @returns the absolute pivot point\r\n     */\r\n    getAbsolutePivotPoint(): Vector3;\r\n    /**\r\n     * Rotates the mesh\r\n     * @param axis The axis of rotation\r\n     * @param amount The amount of rotation\r\n     * @param space The space of the rotation\r\n     * @returns The rotation transform node\r\n     */\r\n    rotate(axis: Vector3, amount: number, space?: Space): TransformNode;\r\n    /**\r\n     * Translates the mesh\r\n     * @param axis The axis of translation\r\n     * @param distance The distance of translation\r\n     * @param space The space of the translation\r\n     * @returns The transform node\r\n     */\r\n    translate(axis: Vector3, distance: number, space?: Space): TransformNode;\r\n    /**\r\n     * Sets the absolute position of the mesh\r\n     * @param absolutePosition The absolute position of the mesh\r\n     * @returns The transform node\r\n     */\r\n    setAbsolutePosition(absolutePosition: Vector3): TransformNode;\r\n    /**\r\n     * Gets the class name of the mesh\r\n     * @returns The class name\r\n     */\r\n    getClassName(): string;\r\n}\r\n\r\nMesh._PhysicsImpostorParser = function (scene: Scene, physicObject: IPhysicsEnabledObject, jsonObject: any): PhysicsImpostor {\r\n    return new PhysicsImpostor(\r\n        physicObject,\r\n        jsonObject.physicsImpostor,\r\n        {\r\n            mass: jsonObject.physicsMass,\r\n            friction: jsonObject.physicsFriction,\r\n            restitution: jsonObject.physicsRestitution,\r\n        },\r\n        scene\r\n    );\r\n};\r\n\r\n/**\r\n * Represents a physics imposter\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsImpostor {\r\n    /**\r\n     * The default object size of the imposter\r\n     */\r\n    public static DEFAULT_OBJECT_SIZE: Vector3 = new Vector3(1, 1, 1);\r\n\r\n    /**\r\n     * The identity quaternion of the imposter\r\n     */\r\n    public static IDENTITY_QUATERNION = Quaternion.Identity();\r\n\r\n    /** @internal */\r\n    public _pluginData: any = {};\r\n\r\n    private _physicsEngine: Nullable<PhysicsEngineV1>;\r\n    //The native cannon/oimo/energy physics body object.\r\n    private _physicsBody: any;\r\n    private _bodyUpdateRequired: boolean = false;\r\n\r\n    private _onBeforePhysicsStepCallbacks = new Array<(impostor: PhysicsImpostor) => void>();\r\n    private _onAfterPhysicsStepCallbacks = new Array<(impostor: PhysicsImpostor) => void>();\r\n    /** @internal */\r\n    public _onPhysicsCollideCallbacks: Array<{\r\n        callback: (collider: PhysicsImpostor, collidedAgainst: PhysicsImpostor, point: Nullable<Vector3>, distance: number, impulse: number, normal: Nullable<Vector3>) => void;\r\n        otherImpostors: Array<PhysicsImpostor>;\r\n    }> = [];\r\n\r\n    private _deltaPosition: Vector3 = Vector3.Zero();\r\n    private _deltaRotation: Quaternion;\r\n    private _deltaRotationConjugated: Quaternion;\r\n\r\n    /** @internal */\r\n    public _isFromLine: boolean;\r\n\r\n    //If set, this is this impostor's parent\r\n    private _parent: Nullable<PhysicsImpostor>;\r\n\r\n    private _isDisposed = false;\r\n\r\n    private static _TmpVecs: Vector3[] = BuildArray(3, Vector3.Zero);\r\n    private static _TmpQuat: Quaternion = Quaternion.Identity();\r\n\r\n    /**\r\n     * Specifies if the physics imposter is disposed\r\n     */\r\n    get isDisposed(): boolean {\r\n        return this._isDisposed;\r\n    }\r\n\r\n    /**\r\n     * Gets the mass of the physics imposter\r\n     */\r\n    get mass(): number {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyMass(this) : 0;\r\n    }\r\n\r\n    set mass(value: number) {\r\n        this.setMass(value);\r\n    }\r\n\r\n    /**\r\n     * Gets the coefficient of friction\r\n     */\r\n    get friction(): number {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyFriction(this) : 0;\r\n    }\r\n\r\n    /**\r\n     * Sets the coefficient of friction\r\n     */\r\n    set friction(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        this._physicsEngine.getPhysicsPlugin().setBodyFriction(this, value);\r\n    }\r\n\r\n    /**\r\n     * Gets the coefficient of restitution\r\n     */\r\n    get restitution(): number {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyRestitution(this) : 0;\r\n    }\r\n\r\n    /**\r\n     * Sets the coefficient of restitution\r\n     */\r\n    set restitution(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        this._physicsEngine.getPhysicsPlugin().setBodyRestitution(this, value);\r\n    }\r\n\r\n    /**\r\n     * Gets the pressure of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    get pressure(): number {\r\n        if (!this._physicsEngine) {\r\n            return 0;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.setBodyPressure) {\r\n            return 0;\r\n        }\r\n        return plugin.getBodyPressure!(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the pressure of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    set pressure(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.setBodyPressure) {\r\n            return;\r\n        }\r\n        plugin.setBodyPressure(this, value);\r\n    }\r\n\r\n    /**\r\n     * Gets the stiffness of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    get stiffness(): number {\r\n        if (!this._physicsEngine) {\r\n            return 0;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.getBodyStiffness) {\r\n            return 0;\r\n        }\r\n        return plugin.getBodyStiffness(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the stiffness of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    set stiffness(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.setBodyStiffness) {\r\n            return;\r\n        }\r\n        plugin.setBodyStiffness(this, value);\r\n    }\r\n\r\n    /**\r\n     * Gets the velocityIterations of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    get velocityIterations(): number {\r\n        if (!this._physicsEngine) {\r\n            return 0;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.getBodyVelocityIterations) {\r\n            return 0;\r\n        }\r\n        return plugin.getBodyVelocityIterations(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the velocityIterations of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    set velocityIterations(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.setBodyVelocityIterations) {\r\n            return;\r\n        }\r\n        plugin.setBodyVelocityIterations(this, value);\r\n    }\r\n\r\n    /**\r\n     * Gets the positionIterations of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    get positionIterations(): number {\r\n        if (!this._physicsEngine) {\r\n            return 0;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.getBodyPositionIterations) {\r\n            return 0;\r\n        }\r\n        return plugin.getBodyPositionIterations(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the positionIterations of a soft body; only supported by the AmmoJSPlugin\r\n     */\r\n    set positionIterations(value: number) {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.setBodyPositionIterations) {\r\n            return;\r\n        }\r\n        plugin.setBodyPositionIterations(this, value);\r\n    }\r\n\r\n    /**\r\n     * The unique id of the physics imposter\r\n     * set by the physics engine when adding this impostor to the array\r\n     */\r\n    public uniqueId: number;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public soft: boolean = false;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public segments: number = 0;\r\n\r\n    private _joints: Array<{\r\n        joint: PhysicsJoint;\r\n        otherImpostor: PhysicsImpostor;\r\n    }>;\r\n\r\n    /**\r\n     * Initializes the physics imposter\r\n     * @param object The physics-enabled object used as the physics imposter\r\n     * @param type The type of the physics imposter. Types are available as static members of this class.\r\n     * @param _options The options for the physics imposter\r\n     * @param _scene The Babylon scene\r\n     */\r\n    constructor(\r\n        /**\r\n         * The physics-enabled object used as the physics imposter\r\n         */\r\n        public object: IPhysicsEnabledObject,\r\n        /**\r\n         * The type of the physics imposter\r\n         */\r\n        public type: number,\r\n        private _options: PhysicsImpostorParameters = { mass: 0 },\r\n        private _scene?: Scene\r\n    ) {\r\n        //sanity check!\r\n        if (!this.object) {\r\n            Logger.Error(\"No object was provided. A physics object is obligatory\");\r\n            return;\r\n        }\r\n        if (this.object.parent && _options.mass !== 0) {\r\n            Logger.Warn(\"A physics impostor has been created for an object which has a parent. Babylon physics currently works in local space so unexpected issues may occur.\");\r\n        }\r\n\r\n        // Legacy support for old syntax.\r\n        if (!this._scene && object.getScene) {\r\n            this._scene = object.getScene();\r\n        }\r\n\r\n        if (!this._scene) {\r\n            return;\r\n        }\r\n\r\n        if (this.type > 100) {\r\n            this.soft = true;\r\n        }\r\n\r\n        this._physicsEngine = this._scene.getPhysicsEngine() as any;\r\n        if (!this._physicsEngine) {\r\n            Logger.Error(\"Physics not enabled. Please use scene.enablePhysics(...) before creating impostors.\");\r\n        } else {\r\n            //set the object's quaternion, if not set\r\n            if (!this.object.rotationQuaternion) {\r\n                if (this.object.rotation) {\r\n                    this.object.rotationQuaternion = Quaternion.RotationYawPitchRoll(this.object.rotation.y, this.object.rotation.x, this.object.rotation.z);\r\n                } else {\r\n                    this.object.rotationQuaternion = new Quaternion();\r\n                }\r\n            }\r\n            //default options params\r\n            this._options.mass = _options.mass === void 0 ? 0 : _options.mass;\r\n            this._options.friction = _options.friction === void 0 ? 0.2 : _options.friction;\r\n            this._options.restitution = _options.restitution === void 0 ? 0.2 : _options.restitution;\r\n            if (this.soft) {\r\n                //softbody mass must be above 0;\r\n                this._options.mass = this._options.mass > 0 ? this._options.mass : 1;\r\n                this._options.pressure = _options.pressure === void 0 ? 200 : _options.pressure;\r\n                this._options.stiffness = _options.stiffness === void 0 ? 1 : _options.stiffness;\r\n                this._options.velocityIterations = _options.velocityIterations === void 0 ? 20 : _options.velocityIterations;\r\n                this._options.positionIterations = _options.positionIterations === void 0 ? 20 : _options.positionIterations;\r\n                this._options.fixedPoints = _options.fixedPoints === void 0 ? 0 : _options.fixedPoints;\r\n                this._options.margin = _options.margin === void 0 ? 0 : _options.margin;\r\n                this._options.damping = _options.damping === void 0 ? 0 : _options.damping;\r\n                this._options.path = _options.path === void 0 ? null : _options.path;\r\n                this._options.shape = _options.shape === void 0 ? null : _options.shape;\r\n            }\r\n            this._joints = [];\r\n            //If the mesh has a parent, don't initialize the physicsBody. Instead wait for the parent to do that.\r\n            if (!this.object.parent || this._options.ignoreParent) {\r\n                this._init();\r\n            } else if (this.object.parent.physicsImpostor) {\r\n                Logger.Warn(\"You must affect impostors to children before affecting impostor to parent.\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function will completely initialize this impostor.\r\n     * It will create a new body - but only if this mesh has no parent.\r\n     * If it has, this impostor will not be used other than to define the impostor\r\n     * of the child mesh.\r\n     * @internal\r\n     */\r\n    public _init() {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n\r\n        this._physicsEngine.removeImpostor(this);\r\n        this.physicsBody = null;\r\n        this._parent = this._parent || this._getPhysicsParent();\r\n        if (!this._isDisposed && (!this.parent || this._options.ignoreParent)) {\r\n            this._physicsEngine.addImpostor(this);\r\n        }\r\n    }\r\n\r\n    private _getPhysicsParent(): Nullable<PhysicsImpostor> {\r\n        if (this.object.parent instanceof AbstractMesh) {\r\n            const parentMesh: AbstractMesh = this.object.parent;\r\n            return parentMesh.physicsImpostor;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Should a new body be generated.\r\n     * @returns boolean specifying if body initialization is required\r\n     */\r\n    public isBodyInitRequired(): boolean {\r\n        return this._bodyUpdateRequired || (!this._physicsBody && (!this._parent || !!this._options.ignoreParent));\r\n    }\r\n\r\n    /**\r\n     * Sets the updated scaling\r\n     */\r\n    public setScalingUpdated() {\r\n        this.forceUpdate();\r\n    }\r\n\r\n    /**\r\n     * Force a regeneration of this or the parent's impostor's body.\r\n     * Use with caution - This will remove all previously-instantiated joints.\r\n     */\r\n    public forceUpdate() {\r\n        this._init();\r\n        if (this.parent && !this._options.ignoreParent) {\r\n            this.parent.forceUpdate();\r\n        }\r\n    }\r\n\r\n    /*public get mesh(): AbstractMesh {\r\n        return this._mesh;\r\n    }*/\r\n\r\n    /**\r\n     * Gets the body that holds this impostor. Either its own, or its parent.\r\n     */\r\n    public get physicsBody(): any {\r\n        return this._parent && !this._options.ignoreParent ? this._parent.physicsBody : this._physicsBody;\r\n    }\r\n\r\n    /**\r\n     * Get the parent of the physics imposter\r\n     * @returns Physics imposter or null\r\n     */\r\n    public get parent(): Nullable<PhysicsImpostor> {\r\n        return !this._options.ignoreParent && this._parent ? this._parent : null;\r\n    }\r\n\r\n    /**\r\n     * Sets the parent of the physics imposter\r\n     */\r\n    public set parent(value: Nullable<PhysicsImpostor>) {\r\n        this._parent = value;\r\n    }\r\n\r\n    /**\r\n     * Set the physics body. Used mainly by the physics engine/plugin\r\n     */\r\n    public set physicsBody(physicsBody: any) {\r\n        if (this._physicsBody && this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().removePhysicsBody(this);\r\n        }\r\n        this._physicsBody = physicsBody;\r\n        this.resetUpdateFlags();\r\n    }\r\n\r\n    /**\r\n     * Resets the update flags\r\n     */\r\n    public resetUpdateFlags() {\r\n        this._bodyUpdateRequired = false;\r\n    }\r\n\r\n    /**\r\n     * Gets the object extents\r\n     * @returns the object extents\r\n     */\r\n    public getObjectExtents(): Vector3 {\r\n        if (this.object.getBoundingInfo) {\r\n            const q = this.object.rotationQuaternion;\r\n            const scaling = this.object.scaling.clone();\r\n            //reset rotation\r\n            this.object.rotationQuaternion = PhysicsImpostor.IDENTITY_QUATERNION;\r\n            //calculate the world matrix with no rotation\r\n            const worldMatrix = this.object.computeWorldMatrix && this.object.computeWorldMatrix(true);\r\n            if (worldMatrix) {\r\n                worldMatrix.decompose(scaling, undefined, undefined);\r\n            }\r\n            const boundingInfo = this.object.getBoundingInfo();\r\n            // get the global scaling of the object\r\n            const size = boundingInfo.boundingBox.extendSize.scale(2).multiplyInPlace(scaling);\r\n            size.x = Math.abs(size.x);\r\n            size.y = Math.abs(size.y);\r\n            size.z = Math.abs(size.z);\r\n            //bring back the rotation\r\n            this.object.rotationQuaternion = q;\r\n            //calculate the world matrix with the new rotation\r\n            if (this.object.computeWorldMatrix) {\r\n                this.object.computeWorldMatrix(true);\r\n            }\r\n            return size;\r\n        } else {\r\n            return PhysicsImpostor.DEFAULT_OBJECT_SIZE;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the object center\r\n     * @returns The object center\r\n     */\r\n    public getObjectCenter(): Vector3 {\r\n        if (this.object.getBoundingInfo) {\r\n            const boundingInfo = this.object.getBoundingInfo();\r\n            return boundingInfo.boundingBox.centerWorld;\r\n        } else {\r\n            return this.object.position;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get a specific parameter from the options parameters\r\n     * @param paramName The object parameter name\r\n     * @returns The object parameter\r\n     */\r\n    public getParam(paramName: string): any {\r\n        return (<any>this._options)[paramName];\r\n    }\r\n\r\n    /**\r\n     * Sets a specific parameter in the options given to the physics plugin\r\n     * @param paramName The parameter name\r\n     * @param value The value of the parameter\r\n     */\r\n    public setParam(paramName: string, value: number) {\r\n        (<any>this._options)[paramName] = value;\r\n        this._bodyUpdateRequired = true;\r\n    }\r\n\r\n    /**\r\n     * Specifically change the body's mass. Won't recreate the physics body object\r\n     * @param mass The mass of the physics imposter\r\n     */\r\n    public setMass(mass: number) {\r\n        if (this.getParam(\"mass\") !== mass) {\r\n            this.setParam(\"mass\", mass);\r\n        }\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().setBodyMass(this, mass);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the linear velocity\r\n     * @returns  linear velocity or null\r\n     */\r\n    public getLinearVelocity(): Nullable<Vector3> {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getLinearVelocity(this) : Vector3.Zero();\r\n    }\r\n\r\n    /**\r\n     * Sets the linear velocity\r\n     * @param velocity  linear velocity or null\r\n     */\r\n    public setLinearVelocity(velocity: Nullable<Vector3>) {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().setLinearVelocity(this, velocity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the angular velocity\r\n     * @returns angular velocity or null\r\n     */\r\n    public getAngularVelocity(): Nullable<Vector3> {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getAngularVelocity(this) : Vector3.Zero();\r\n    }\r\n\r\n    /**\r\n     * Sets the angular velocity\r\n     * @param velocity The velocity or null\r\n     */\r\n    public setAngularVelocity(velocity: Nullable<Vector3>) {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().setAngularVelocity(this, velocity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Execute a function with the physics plugin native code\r\n     * Provide a function the will have two variables - the world object and the physics body object\r\n     * @param func The function to execute with the physics plugin native code\r\n     */\r\n    public executeNativeFunction(func: (world: any, physicsBody: any) => void) {\r\n        if (this._physicsEngine) {\r\n            func(this._physicsEngine.getPhysicsPlugin().world, this.physicsBody);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Register a function that will be executed before the physics world is stepping forward\r\n     * @param func The function to execute before the physics world is stepped forward\r\n     */\r\n    public registerBeforePhysicsStep(func: (impostor: PhysicsImpostor) => void): void {\r\n        this._onBeforePhysicsStepCallbacks.push(func);\r\n    }\r\n\r\n    /**\r\n     * Unregister a function that will be executed before the physics world is stepping forward\r\n     * @param func The function to execute before the physics world is stepped forward\r\n     */\r\n    public unregisterBeforePhysicsStep(func: (impostor: PhysicsImpostor) => void): void {\r\n        const index = this._onBeforePhysicsStepCallbacks.indexOf(func);\r\n\r\n        if (index > -1) {\r\n            this._onBeforePhysicsStepCallbacks.splice(index, 1);\r\n        } else {\r\n            Logger.Warn(\"Function to remove was not found\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Register a function that will be executed after the physics step\r\n     * @param func The function to execute after physics step\r\n     */\r\n    public registerAfterPhysicsStep(func: (impostor: PhysicsImpostor) => void): void {\r\n        this._onAfterPhysicsStepCallbacks.push(func);\r\n    }\r\n\r\n    /**\r\n     * Unregisters a function that will be executed after the physics step\r\n     * @param func The function to execute after physics step\r\n     */\r\n    public unregisterAfterPhysicsStep(func: (impostor: PhysicsImpostor) => void): void {\r\n        const index = this._onAfterPhysicsStepCallbacks.indexOf(func);\r\n\r\n        if (index > -1) {\r\n            this._onAfterPhysicsStepCallbacks.splice(index, 1);\r\n        } else {\r\n            Logger.Warn(\"Function to remove was not found\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * register a function that will be executed when this impostor collides against a different body\r\n     * @param collideAgainst Physics imposter, or array of physics imposters to collide against\r\n     * @param func Callback that is executed on collision\r\n     */\r\n    public registerOnPhysicsCollide(\r\n        collideAgainst: PhysicsImpostor | Array<PhysicsImpostor>,\r\n        func: (collider: PhysicsImpostor, collidedAgainst: PhysicsImpostor, point: Nullable<Vector3>) => void\r\n    ): void {\r\n        const collidedAgainstList: Array<PhysicsImpostor> = collideAgainst instanceof Array ? collideAgainst : [collideAgainst];\r\n        this._onPhysicsCollideCallbacks.push({ callback: func, otherImpostors: collidedAgainstList });\r\n    }\r\n\r\n    /**\r\n     * Unregisters the physics imposter's collision callback\r\n     * @param collideAgainst The physics object to collide against\r\n     * @param func Callback to execute on collision\r\n     */\r\n    public unregisterOnPhysicsCollide(\r\n        collideAgainst: PhysicsImpostor | Array<PhysicsImpostor>,\r\n        func: (collider: PhysicsImpostor, collidedAgainst: PhysicsImpostor | Array<PhysicsImpostor>, point: Nullable<Vector3>) => void\r\n    ): void {\r\n        const collidedAgainstList: Array<PhysicsImpostor> = collideAgainst instanceof Array ? collideAgainst : [collideAgainst];\r\n        let index = -1;\r\n        const found = this._onPhysicsCollideCallbacks.some((cbDef, idx) => {\r\n            if (cbDef.callback === func && cbDef.otherImpostors.length === collidedAgainstList.length) {\r\n                // chcek the arrays match\r\n                const sameList = cbDef.otherImpostors.every((impostor) => {\r\n                    return collidedAgainstList.indexOf(impostor) > -1;\r\n                });\r\n                if (sameList) {\r\n                    index = idx;\r\n                }\r\n                return sameList;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        if (found) {\r\n            this._onPhysicsCollideCallbacks.splice(index, 1);\r\n        } else {\r\n            Logger.Warn(\"Function to remove was not found\");\r\n        }\r\n    }\r\n\r\n    //temp variables for parent rotation calculations\r\n    //private _mats: Array<Matrix> = [new Matrix(), new Matrix()];\r\n    private _tmpQuat: Quaternion = new Quaternion();\r\n    private _tmpQuat2: Quaternion = new Quaternion();\r\n\r\n    /**\r\n     * Get the parent rotation\r\n     * @returns The parent rotation\r\n     */\r\n    public getParentsRotation(): Quaternion {\r\n        let parent = this.object.parent;\r\n        this._tmpQuat.copyFromFloats(0, 0, 0, 1);\r\n        while (parent) {\r\n            if (parent.rotationQuaternion) {\r\n                this._tmpQuat2.copyFrom(parent.rotationQuaternion);\r\n            } else {\r\n                Quaternion.RotationYawPitchRollToRef(parent.rotation.y, parent.rotation.x, parent.rotation.z, this._tmpQuat2);\r\n            }\r\n            this._tmpQuat.multiplyToRef(this._tmpQuat2, this._tmpQuat);\r\n            parent = parent.parent;\r\n        }\r\n        return this._tmpQuat;\r\n    }\r\n\r\n    /**\r\n     * this function is executed by the physics engine.\r\n     */\r\n    public beforeStep = () => {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n\r\n        this.object.translate(this._deltaPosition, -1);\r\n        if (this._deltaRotationConjugated && this.object.rotationQuaternion) {\r\n            this.object.rotationQuaternion.multiplyToRef(this._deltaRotationConjugated, this.object.rotationQuaternion);\r\n        }\r\n        this.object.computeWorldMatrix(false);\r\n        if (this.object.parent && this.object.rotationQuaternion) {\r\n            this.getParentsRotation();\r\n            this._tmpQuat.multiplyToRef(this.object.rotationQuaternion, this._tmpQuat);\r\n        } else {\r\n            this._tmpQuat.copyFrom(this.object.rotationQuaternion || new Quaternion());\r\n        }\r\n        if (!this._options.disableBidirectionalTransformation) {\r\n            if (this.object.rotationQuaternion) {\r\n                this._physicsEngine.getPhysicsPlugin().setPhysicsBodyTransformation(this, /*bInfo.boundingBox.centerWorld*/ this.object.getAbsolutePosition(), this._tmpQuat);\r\n            }\r\n        }\r\n\r\n        for (const func of this._onBeforePhysicsStepCallbacks) {\r\n            func(this);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * this function is executed by the physics engine\r\n     */\r\n    public afterStep = () => {\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n\r\n        for (const func of this._onAfterPhysicsStepCallbacks) {\r\n            func(this);\r\n        }\r\n\r\n        this._physicsEngine.getPhysicsPlugin().setTransformationFromPhysicsBody(this);\r\n        // object has now its world rotation. needs to be converted to local.\r\n        if (this.object.parent && this.object.rotationQuaternion) {\r\n            this.getParentsRotation();\r\n            this._tmpQuat.conjugateInPlace();\r\n            this._tmpQuat.multiplyToRef(this.object.rotationQuaternion, this.object.rotationQuaternion);\r\n        }\r\n        // take the position set and make it the absolute position of this object.\r\n        this.object.setAbsolutePosition(this.object.position);\r\n        if (this._deltaRotation) {\r\n            if (this.object.rotationQuaternion) {\r\n                this.object.rotationQuaternion.multiplyToRef(this._deltaRotation, this.object.rotationQuaternion);\r\n            }\r\n            this._deltaPosition.applyRotationQuaternionToRef(this._deltaRotation, PhysicsImpostor._TmpVecs[0]);\r\n            this.object.translate(PhysicsImpostor._TmpVecs[0], 1);\r\n        } else {\r\n            this.object.translate(this._deltaPosition, 1);\r\n        }\r\n        this.object.computeWorldMatrix(true);\r\n    };\r\n\r\n    /**\r\n     * Legacy collision detection event support\r\n     */\r\n    public onCollideEvent: Nullable<(collider: PhysicsImpostor, collidedWith: PhysicsImpostor) => void> = null;\r\n\r\n    /**\r\n     *  define an onCollide function to call when this impostor collides against a different body\r\n     * @param e collide event data\r\n     */\r\n    public onCollide = (e: { body: any; point: Nullable<Vector3>; distance: number; impulse: number; normal: Nullable<Vector3> }) => {\r\n        if (!this._onPhysicsCollideCallbacks.length && !this.onCollideEvent) {\r\n            return;\r\n        }\r\n\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n        const otherImpostor = this._physicsEngine.getImpostorWithPhysicsBody(e.body);\r\n        if (otherImpostor) {\r\n            // Legacy collision detection event support\r\n            if (this.onCollideEvent) {\r\n                this.onCollideEvent(this, otherImpostor);\r\n            }\r\n            const callbacks = this._onPhysicsCollideCallbacks.filter((obj) => {\r\n                return obj.otherImpostors.indexOf(<PhysicsImpostor>otherImpostor) !== -1;\r\n            });\r\n\r\n            for (const obj of callbacks) {\r\n                obj.callback(this, <PhysicsImpostor>otherImpostor, e.point, e.distance, e.impulse, e.normal);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Apply a force\r\n     * @param force The force to apply\r\n     * @param contactPoint The contact point for the force\r\n     * @returns The physics imposter\r\n     */\r\n    public applyForce(force: Vector3, contactPoint: Vector3): PhysicsImpostor {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().applyForce(this, force, contactPoint);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Apply an impulse\r\n     * @param force The impulse force\r\n     * @param contactPoint The contact point for the impulse force\r\n     * @returns The physics imposter\r\n     */\r\n    public applyImpulse(force: Vector3, contactPoint: Vector3): PhysicsImpostor {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().applyImpulse(this, force, contactPoint);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * A help function to create a joint\r\n     * @param otherImpostor A physics imposter used to create a joint\r\n     * @param jointType The type of joint\r\n     * @param jointData The data for the joint\r\n     * @returns The physics imposter\r\n     */\r\n    public createJoint(otherImpostor: PhysicsImpostor, jointType: number, jointData: PhysicsJointData): PhysicsImpostor {\r\n        const joint = new PhysicsJoint(jointType, jointData);\r\n        this.addJoint(otherImpostor, joint);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Add a joint to this impostor with a different impostor\r\n     * @param otherImpostor A physics imposter used to add a joint\r\n     * @param joint The joint to add\r\n     * @returns The physics imposter\r\n     */\r\n    public addJoint(otherImpostor: PhysicsImpostor, joint: PhysicsJoint): PhysicsImpostor {\r\n        this._joints.push({\r\n            otherImpostor: otherImpostor,\r\n            joint: joint,\r\n        });\r\n\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.addJoint(this, otherImpostor, joint);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Add an anchor to a cloth impostor\r\n     * @param otherImpostor rigid impostor to anchor to\r\n     * @param width ratio across width from 0 to 1\r\n     * @param height ratio up height from 0 to 1\r\n     * @param influence the elasticity between cloth impostor and anchor from 0, very stretchy to 1, little stretch\r\n     * @param noCollisionBetweenLinkedBodies when true collisions between cloth impostor and anchor are ignored; default false\r\n     * @returns impostor the soft imposter\r\n     */\r\n    public addAnchor(otherImpostor: PhysicsImpostor, width: number, height: number, influence: number, noCollisionBetweenLinkedBodies: boolean): PhysicsImpostor {\r\n        if (!this._physicsEngine) {\r\n            return this;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.appendAnchor) {\r\n            return this;\r\n        }\r\n        if (this._physicsEngine) {\r\n            plugin.appendAnchor(this, otherImpostor, width, height, influence, noCollisionBetweenLinkedBodies);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Add a hook to a rope impostor\r\n     * @param otherImpostor rigid impostor to anchor to\r\n     * @param length ratio across rope from 0 to 1\r\n     * @param influence the elasticity between rope impostor and anchor from 0, very stretchy to 1, little stretch\r\n     * @param noCollisionBetweenLinkedBodies when true collisions between soft impostor and anchor are ignored; default false\r\n     * @returns impostor the rope imposter\r\n     */\r\n    public addHook(otherImpostor: PhysicsImpostor, length: number, influence: number, noCollisionBetweenLinkedBodies: boolean): PhysicsImpostor {\r\n        if (!this._physicsEngine) {\r\n            return this;\r\n        }\r\n        const plugin = this._physicsEngine.getPhysicsPlugin();\r\n        if (!plugin.appendAnchor) {\r\n            return this;\r\n        }\r\n        if (this._physicsEngine) {\r\n            plugin.appendHook!(this, otherImpostor, length, influence, noCollisionBetweenLinkedBodies);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Will keep this body still, in a sleep mode.\r\n     * @returns the physics imposter\r\n     */\r\n    public sleep(): PhysicsImpostor {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().sleepBody(this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Wake the body up.\r\n     * @returns The physics imposter\r\n     */\r\n    public wakeUp(): PhysicsImpostor {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().wakeUpBody(this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clones the physics imposter\r\n     * @param newObject The physics imposter clones to this physics-enabled object\r\n     * @returns A nullable physics imposter\r\n     */\r\n    public clone(newObject: IPhysicsEnabledObject): Nullable<PhysicsImpostor> {\r\n        if (!newObject) {\r\n            return null;\r\n        }\r\n        return new PhysicsImpostor(newObject, this.type, this._options, this._scene);\r\n    }\r\n\r\n    /**\r\n     * Disposes the physics imposter\r\n     */\r\n    public dispose(/*disposeChildren: boolean = true*/) {\r\n        //no dispose if no physics engine is available.\r\n        if (!this._physicsEngine) {\r\n            return;\r\n        }\r\n\r\n        for (const j of this._joints) {\r\n            if (this._physicsEngine) {\r\n                this._physicsEngine.removeJoint(this, j.otherImpostor, j.joint);\r\n            }\r\n        }\r\n        //dispose the physics body\r\n        this._physicsEngine.removeImpostor(this);\r\n        if (this.parent) {\r\n            this.parent.forceUpdate();\r\n        }\r\n\r\n        this._isDisposed = true;\r\n    }\r\n\r\n    /**\r\n     * Sets the delta position\r\n     * @param position The delta position amount\r\n     */\r\n    public setDeltaPosition(position: Vector3) {\r\n        this._deltaPosition.copyFrom(position);\r\n    }\r\n\r\n    /**\r\n     * Sets the delta rotation\r\n     * @param rotation The delta rotation amount\r\n     */\r\n    public setDeltaRotation(rotation: Quaternion) {\r\n        if (!this._deltaRotation) {\r\n            this._deltaRotation = new Quaternion();\r\n        }\r\n        this._deltaRotation.copyFrom(rotation);\r\n        this._deltaRotationConjugated = this._deltaRotation.conjugate();\r\n    }\r\n\r\n    /**\r\n     * Gets the box size of the physics imposter and stores the result in the input parameter\r\n     * @param result Stores the box size\r\n     * @returns The physics imposter\r\n     */\r\n    public getBoxSizeToRef(result: Vector3): PhysicsImpostor {\r\n        if (this._physicsEngine) {\r\n            this._physicsEngine.getPhysicsPlugin().getBoxSizeToRef(this, result);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the radius of the physics imposter\r\n     * @returns Radius of the physics imposter\r\n     */\r\n    public getRadius(): number {\r\n        return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getRadius(this) : 0;\r\n    }\r\n\r\n    /**\r\n     * Sync a bone with this impostor\r\n     * @param bone The bone to sync to the impostor.\r\n     * @param boneMesh The mesh that the bone is influencing.\r\n     * @param jointPivot The pivot of the joint / bone in local space.\r\n     * @param distToJoint Optional distance from the impostor to the joint.\r\n     * @param adjustRotation Optional quaternion for adjusting the local rotation of the bone.\r\n     */\r\n    public syncBoneWithImpostor(bone: Bone, boneMesh: AbstractMesh, jointPivot: Vector3, distToJoint?: number, adjustRotation?: Quaternion) {\r\n        const tempVec = PhysicsImpostor._TmpVecs[0];\r\n        const mesh = <AbstractMesh>this.object;\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            if (adjustRotation) {\r\n                const tempQuat = PhysicsImpostor._TmpQuat;\r\n                mesh.rotationQuaternion.multiplyToRef(adjustRotation, tempQuat);\r\n                bone.setRotationQuaternion(tempQuat, Space.WORLD, boneMesh);\r\n            } else {\r\n                bone.setRotationQuaternion(mesh.rotationQuaternion, Space.WORLD, boneMesh);\r\n            }\r\n        }\r\n\r\n        tempVec.x = 0;\r\n        tempVec.y = 0;\r\n        tempVec.z = 0;\r\n\r\n        if (jointPivot) {\r\n            tempVec.x = jointPivot.x;\r\n            tempVec.y = jointPivot.y;\r\n            tempVec.z = jointPivot.z;\r\n\r\n            bone.getDirectionToRef(tempVec, boneMesh, tempVec);\r\n\r\n            if (distToJoint === undefined || distToJoint === null) {\r\n                distToJoint = jointPivot.length();\r\n            }\r\n\r\n            tempVec.x *= distToJoint;\r\n            tempVec.y *= distToJoint;\r\n            tempVec.z *= distToJoint;\r\n        }\r\n\r\n        if (bone.getParent()) {\r\n            tempVec.addInPlace(mesh.getAbsolutePosition());\r\n            bone.setAbsolutePosition(tempVec, boneMesh);\r\n        } else {\r\n            boneMesh.setAbsolutePosition(mesh.getAbsolutePosition());\r\n            boneMesh.position.x -= tempVec.x;\r\n            boneMesh.position.y -= tempVec.y;\r\n            boneMesh.position.z -= tempVec.z;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sync impostor to a bone\r\n     * @param bone The bone that the impostor will be synced to.\r\n     * @param boneMesh The mesh that the bone is influencing.\r\n     * @param jointPivot The pivot of the joint / bone in local space.\r\n     * @param distToJoint Optional distance from the impostor to the joint.\r\n     * @param adjustRotation Optional quaternion for adjusting the local rotation of the bone.\r\n     * @param boneAxis Optional vector3 axis the bone is aligned with\r\n     */\r\n    public syncImpostorWithBone(bone: Bone, boneMesh: AbstractMesh, jointPivot: Vector3, distToJoint?: number, adjustRotation?: Quaternion, boneAxis?: Vector3) {\r\n        const mesh = <AbstractMesh>this.object;\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            if (adjustRotation) {\r\n                const tempQuat = PhysicsImpostor._TmpQuat;\r\n                bone.getRotationQuaternionToRef(Space.WORLD, boneMesh, tempQuat);\r\n                tempQuat.multiplyToRef(adjustRotation, mesh.rotationQuaternion);\r\n            } else {\r\n                bone.getRotationQuaternionToRef(Space.WORLD, boneMesh, mesh.rotationQuaternion);\r\n            }\r\n        }\r\n\r\n        const pos = PhysicsImpostor._TmpVecs[0];\r\n        const boneDir = PhysicsImpostor._TmpVecs[1];\r\n\r\n        if (!boneAxis) {\r\n            boneAxis = PhysicsImpostor._TmpVecs[2];\r\n            boneAxis.x = 0;\r\n            boneAxis.y = 1;\r\n            boneAxis.z = 0;\r\n        }\r\n\r\n        bone.getDirectionToRef(boneAxis, boneMesh, boneDir);\r\n        bone.getAbsolutePositionToRef(boneMesh, pos);\r\n\r\n        if ((distToJoint === undefined || distToJoint === null) && jointPivot) {\r\n            distToJoint = jointPivot.length();\r\n        }\r\n\r\n        if (distToJoint !== undefined && distToJoint !== null) {\r\n            pos.x += boneDir.x * distToJoint;\r\n            pos.y += boneDir.y * distToJoint;\r\n            pos.z += boneDir.z * distToJoint;\r\n        }\r\n\r\n        mesh.setAbsolutePosition(pos);\r\n    }\r\n\r\n    //Impostor types\r\n    /**\r\n     * No-Imposter type\r\n     */\r\n    public static NoImpostor = 0;\r\n    /**\r\n     * Sphere-Imposter type\r\n     */\r\n    public static SphereImpostor = 1;\r\n    /**\r\n     * Box-Imposter type\r\n     */\r\n    public static BoxImpostor = 2;\r\n    /**\r\n     * Plane-Imposter type\r\n     */\r\n    public static PlaneImpostor = 3;\r\n    /**\r\n     * Mesh-imposter type (Only available to objects with vertices data)\r\n     */\r\n    public static MeshImpostor = 4;\r\n    /**\r\n     * Capsule-Impostor type (Ammo.js plugin only)\r\n     */\r\n    public static CapsuleImpostor = 6;\r\n    /**\r\n     * Cylinder-Imposter type\r\n     */\r\n    public static CylinderImpostor = 7;\r\n    /**\r\n     * Particle-Imposter type\r\n     */\r\n    public static ParticleImpostor = 8;\r\n    /**\r\n     * Heightmap-Imposter type\r\n     */\r\n    public static HeightmapImpostor = 9;\r\n    /**\r\n     * ConvexHull-Impostor type (Ammo.js plugin only)\r\n     */\r\n    public static ConvexHullImpostor = 10;\r\n    /**\r\n     * Custom-Imposter type (Ammo.js plugin only)\r\n     */\r\n    public static CustomImpostor = 100;\r\n    /**\r\n     * Rope-Imposter type\r\n     */\r\n    public static RopeImpostor = 101;\r\n    /**\r\n     * Cloth-Imposter type\r\n     */\r\n    public static ClothImpostor = 102;\r\n    /**\r\n     * Softbody-Imposter type\r\n     */\r\n    public static SoftbodyImpostor = 103;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/castingResult.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/castingResult.ts"],"sourcesContent":["import { Vector3 } from \"../Maths/math.vector\";\r\nimport type { PhysicsShape } from \"./v2/physicsShape\";\r\nimport type { PhysicsBody } from \"./v2/physicsBody\";\r\n\r\n/**\r\n * Base class for results of casts.\r\n */\r\nexport class CastingResult {\r\n    private _hasHit: boolean = false;\r\n    protected _hitNormal: Vector3 = Vector3.Zero();\r\n    protected _hitPoint: Vector3 = Vector3.Zero();\r\n    private _triangleIndex: number = -1;\r\n\r\n    /**\r\n     * The Physics body that the query hit.\r\n     */\r\n    public body?: PhysicsBody;\r\n    /**\r\n     * The body Index in case the Physics body is using instances\r\n     */\r\n    public bodyIndex?: number;\r\n\r\n    /**\r\n     * The shape hit by the query.\r\n     */\r\n    public shape?: PhysicsShape;\r\n\r\n    /**\r\n     * Gets the hit point.\r\n     */\r\n    get hitPoint(): Vector3 {\r\n        return this._hitPoint;\r\n    }\r\n    /**\r\n     * Gets the hit normal.\r\n     */\r\n    get hitNormal(): Vector3 {\r\n        return this._hitNormal;\r\n    }\r\n    /**\r\n     * Gets if there was a hit\r\n     */\r\n    get hasHit(): boolean {\r\n        return this._hasHit;\r\n    }\r\n\r\n    /*\r\n     * The index of the original triangle which was hit. Will be -1 if contact point is not on a mesh shape\r\n     */\r\n    get triangleIndex(): number {\r\n        return this._triangleIndex;\r\n    }\r\n\r\n    /**\r\n     * Sets the hit data\r\n     * @param hitNormal defines the normal in world space\r\n     * @param hitPoint defines the point in world space\r\n     * @param triangleIndex defines the index of the triangle in case of mesh shape\r\n     */\r\n    public setHitData(hitNormal: IXYZ, hitPoint: IXYZ, triangleIndex?: number) {\r\n        this._hasHit = true;\r\n        this._hitNormal.set(hitNormal.x, hitNormal.y, hitNormal.z);\r\n        this._hitPoint.set(hitPoint.x, hitPoint.y, hitPoint.z);\r\n        this._triangleIndex = triangleIndex ?? -1;\r\n    }\r\n\r\n    /**\r\n     * Resets all the values to default\r\n     */\r\n    public reset() {\r\n        this._hasHit = false;\r\n\r\n        this._hitNormal.setAll(0);\r\n        this._hitPoint.setAll(0);\r\n        this._triangleIndex = -1;\r\n\r\n        this.body = undefined;\r\n        this.bodyIndex = undefined;\r\n\r\n        this.shape = undefined;\r\n    }\r\n}\r\n\r\n/**\r\n * Interface for the size containing width and height\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\ninterface IXYZ {\r\n    /**\r\n     * X\r\n     */\r\n    x: number;\r\n\r\n    /**\r\n     * Y\r\n     */\r\n    y: number;\r\n\r\n    /**\r\n     * Z\r\n     */\r\n    z: number;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,sBAAsB,CAAC;;AAOzC,MAAO,aAAa;IAA1B,aAAA;QACY,IAAA,CAAA,OAAO,GAAY,KAAK,CAAC;QACvB,IAAA,CAAA,UAAU,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;QACrC,IAAA,CAAA,SAAS,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;QACtC,IAAA,CAAA,cAAc,GAAW,CAAC,CAAC,CAAC;IAsExC,CAAC;IAtDG;;OAEG,CACH,IAAI,QAAQ,GAAA;QACR,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IACD;;OAEG,CACH,IAAI,SAAS,GAAA;QACT,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IACD;;OAEG,CACH,IAAI,MAAM,GAAA;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED;;OAEG,CACH,IAAI,aAAa,GAAA;QACb,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IAED;;;;;OAKG,CACI,UAAU,CAAC,SAAe,EAAE,QAAc,EAAE,aAAsB,EAAA;QACrE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,cAAc,GAAG,aAAa,IAAI,CAAC,CAAC,CAAC;IAC9C,CAAC;IAED;;OAEG,CACI,KAAK,GAAA;QACR,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;QAEzB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAE3B,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;IAC3B,CAAC;CACJ"}},
    {"offset": {"line": 1163, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/physicsRaycastResult.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/physicsRaycastResult.ts"],"sourcesContent":["import { Vector3 } from \"../Maths/math.vector\";\r\nimport { CastingResult } from \"./castingResult\";\r\nimport type { PhysicsBody } from \"./v2/physicsBody\";\r\n\r\n/**\r\n * Interface for query parameters in the raycast function.\r\n * @see the \"Collision Filtering\" section in https://github.com/eoineoineoin/glTF/tree/MSFT_RigidBodies/extensions/2.0/Vendor/MSFT_collision_primitives\r\n */\r\nexport interface IRaycastQuery {\r\n    /** Membership mask */\r\n    membership?: number;\r\n    /** CollideWith mask */\r\n    collideWith?: number;\r\n    /** Should trigger collisions be considered in the query? */\r\n    shouldHitTriggers?: boolean;\r\n    /** Ignores the body passed if it is in the query */\r\n    ignoreBody?: PhysicsBody;\r\n}\r\n\r\n/**\r\n * Holds the data for the raycast result\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsRaycastResult extends CastingResult {\r\n    private _hitDistance: number = 0;\r\n    private _rayFromWorld: Vector3 = Vector3.Zero();\r\n    private _rayToWorld: Vector3 = Vector3.Zero();\r\n\r\n    /**\r\n     * Gets the distance from the hit\r\n     */\r\n    get hitDistance(): number {\r\n        return this._hitDistance;\r\n    }\r\n\r\n    /**\r\n     * Gets the hit normal/direction in the world\r\n     */\r\n    get hitNormalWorld(): Vector3 {\r\n        return this._hitNormal;\r\n    }\r\n\r\n    /**\r\n     * Gets the hit point in the world\r\n     */\r\n    get hitPointWorld(): Vector3 {\r\n        return this._hitPoint;\r\n    }\r\n\r\n    /**\r\n     * Gets the ray \"start point\" of the ray in the world\r\n     */\r\n    get rayFromWorld(): Vector3 {\r\n        return this._rayFromWorld;\r\n    }\r\n\r\n    /**\r\n     * Gets the ray \"end point\" of the ray in the world\r\n     */\r\n    get rayToWorld(): Vector3 {\r\n        return this._rayToWorld;\r\n    }\r\n\r\n    /**\r\n     * Sets the distance from the start point to the hit point\r\n     * @param distance defines the distance to set\r\n     */\r\n    public setHitDistance(distance: number) {\r\n        this._hitDistance = distance;\r\n    }\r\n\r\n    /**\r\n     * Calculates the distance manually\r\n     */\r\n    public calculateHitDistance() {\r\n        this._hitDistance = Vector3.Distance(this._rayFromWorld, this._hitPoint);\r\n    }\r\n\r\n    /**\r\n     * Resets all the values to default\r\n     * @param from The from point on world space\r\n     * @param to The to point on world space\r\n     */\r\n    public override reset(from: Vector3 = Vector3.Zero(), to: Vector3 = Vector3.Zero()) {\r\n        super.reset();\r\n        this._rayFromWorld.copyFrom(from);\r\n        this._rayToWorld.copyFrom(to);\r\n\r\n        this._hitDistance = 0;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,sBAAsB,CAAC;AAC/C,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;;;AAsB1C,MAAO,oBAAqB,SAAQ,oPAAa;IAAvD,aAAA;;QACY,IAAA,CAAA,YAAY,GAAW,CAAC,CAAC;QACzB,IAAA,CAAA,aAAa,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;QACxC,IAAA,CAAA,WAAW,GAAY,6OAAO,CAAC,IAAI,EAAE,CAAC;IAgElD,CAAC;IA9DG;;OAEG,CACH,IAAI,WAAW,GAAA;QACX,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;OAEG,CACH,IAAI,cAAc,GAAA;QACd,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAI,aAAa,GAAA;QACb,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;OAEG,CACH,IAAI,YAAY,GAAA;QACZ,OAAO,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAED;;OAEG,CACH,IAAI,UAAU,GAAA;QACV,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACI,cAAc,CAAC,QAAgB,EAAA;QAClC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,CAAC;IAED;;OAEG,CACI,oBAAoB,GAAA;QACvB,IAAI,CAAC,YAAY,GAAG,6OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC7E,CAAC;IAED;;;;OAIG,CACa,KAAK,CAAC,OAAgB,6OAAO,CAAC,IAAI,EAAE,EAAE,KAAc,6OAAO,CAAC,IAAI,EAAE,EAAA;QAC9E,KAAK,CAAC,KAAK,EAAE,CAAC;QACd,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAE9B,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;IAC1B,CAAC;CACJ"}},
    {"offset": {"line": 1229, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/physicsEngine.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/physicsEngine.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport { Vector3 } from \"../../Maths/math.vector\";\r\nimport type { PhysicsImpostorJoint, IPhysicsEnginePlugin } from \"./IPhysicsEnginePlugin\";\r\nimport type { IPhysicsEngine } from \"../IPhysicsEngine\";\r\nimport type { PhysicsImpostor, IPhysicsEnabledObject } from \"./physicsImpostor\";\r\nimport type { PhysicsJoint } from \"./physicsJoint\";\r\nimport type { PhysicsRaycastResult } from \"../physicsRaycastResult\";\r\nimport { _WarnImport } from \"../../Misc/devTools\";\r\n\r\n/**\r\n * Class used to control physics engine\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsEngine implements IPhysicsEngine {\r\n    /**\r\n     * Global value used to control the smallest number supported by the simulation\r\n     */\r\n    private _impostors: Array<PhysicsImpostor> = [];\r\n    private _joints: Array<PhysicsImpostorJoint> = [];\r\n    private _subTimeStep: number = 0;\r\n    private _uniqueIdCounter = 0;\r\n\r\n    /**\r\n     * Gets the gravity vector used by the simulation\r\n     */\r\n    public gravity: Vector3;\r\n\r\n    /**\r\n     *\r\n     * @returns version\r\n     */\r\n    public getPluginVersion(): number {\r\n        return this._physicsPlugin.getPluginVersion();\r\n    }\r\n    /**\r\n     * @virtual\r\n     * Factory used to create the default physics plugin.\r\n     * @returns The default physics plugin\r\n     */\r\n    public static DefaultPluginFactory(): IPhysicsEnginePlugin {\r\n        throw _WarnImport(\"CannonJSPlugin\");\r\n    }\r\n\r\n    /**\r\n     * Creates a new Physics Engine\r\n     * @param gravity defines the gravity vector used by the simulation\r\n     * @param _physicsPlugin defines the plugin to use (CannonJS by default)\r\n     */\r\n    constructor(\r\n        gravity: Nullable<Vector3>,\r\n        private _physicsPlugin: IPhysicsEnginePlugin = PhysicsEngine.DefaultPluginFactory()\r\n    ) {\r\n        if (!this._physicsPlugin.isSupported()) {\r\n            throw new Error(\"Physics Engine \" + this._physicsPlugin.name + \" cannot be found. \" + \"Please make sure it is included.\");\r\n        }\r\n        gravity = gravity || new Vector3(0, -9.807, 0);\r\n        this.setGravity(gravity);\r\n        this.setTimeStep();\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity vector used by the simulation\r\n     * @param gravity defines the gravity vector to use\r\n     */\r\n    public setGravity(gravity: Vector3): void {\r\n        this.gravity = gravity;\r\n        this._physicsPlugin.setGravity(this.gravity);\r\n    }\r\n\r\n    /**\r\n     * Set the time step of the physics engine.\r\n     * Default is 1/60.\r\n     * To slow it down, enter 1/600 for example.\r\n     * To speed it up, 1/30\r\n     * @param newTimeStep defines the new timestep to apply to this world.\r\n     */\r\n    public setTimeStep(newTimeStep: number = 1 / 60) {\r\n        this._physicsPlugin.setTimeStep(newTimeStep);\r\n    }\r\n\r\n    /**\r\n     * Get the time step of the physics engine.\r\n     * @returns the current time step\r\n     */\r\n    public getTimeStep(): number {\r\n        return this._physicsPlugin.getTimeStep();\r\n    }\r\n\r\n    /**\r\n     * Set the sub time step of the physics engine.\r\n     * Default is 0 meaning there is no sub steps\r\n     * To increase physics resolution precision, set a small value (like 1 ms)\r\n     * @param subTimeStep defines the new sub timestep used for physics resolution.\r\n     */\r\n    public setSubTimeStep(subTimeStep: number = 0) {\r\n        this._subTimeStep = subTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Get the sub time step of the physics engine.\r\n     * @returns the current sub time step\r\n     */\r\n    public getSubTimeStep() {\r\n        return this._subTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        for (const impostor of this._impostors) {\r\n            impostor.dispose();\r\n        }\r\n        this._physicsPlugin.dispose();\r\n    }\r\n\r\n    /**\r\n     * Gets the name of the current physics plugin\r\n     * @returns the name of the plugin\r\n     */\r\n    public getPhysicsPluginName(): string {\r\n        return this._physicsPlugin.name;\r\n    }\r\n\r\n    /**\r\n     * Adding a new impostor for the impostor tracking.\r\n     * This will be done by the impostor itself.\r\n     * @param impostor the impostor to add\r\n     */\r\n    public addImpostor(impostor: PhysicsImpostor) {\r\n        this._impostors.push(impostor);\r\n        impostor.uniqueId = this._uniqueIdCounter++;\r\n        //if no parent, generate the body\r\n        if (!impostor.parent) {\r\n            this._physicsPlugin.generatePhysicsBody(impostor);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove an impostor from the engine.\r\n     * This impostor and its mesh will not longer be updated by the physics engine.\r\n     * @param impostor the impostor to remove\r\n     */\r\n    public removeImpostor(impostor: PhysicsImpostor) {\r\n        const index = this._impostors.indexOf(impostor);\r\n        if (index > -1) {\r\n            const removed = this._impostors.splice(index, 1);\r\n            //Is it needed?\r\n            if (removed.length) {\r\n                this.getPhysicsPlugin().removePhysicsBody(impostor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a joint to the physics engine\r\n     * @param mainImpostor defines the main impostor to which the joint is added.\r\n     * @param connectedImpostor defines the impostor that is connected to the main impostor using this joint\r\n     * @param joint defines the joint that will connect both impostors.\r\n     */\r\n    public addJoint(mainImpostor: PhysicsImpostor, connectedImpostor: PhysicsImpostor, joint: PhysicsJoint) {\r\n        const impostorJoint = {\r\n            mainImpostor: mainImpostor,\r\n            connectedImpostor: connectedImpostor,\r\n            joint: joint,\r\n        };\r\n        joint.physicsPlugin = this._physicsPlugin;\r\n        this._joints.push(impostorJoint);\r\n        this._physicsPlugin.generateJoint(impostorJoint);\r\n    }\r\n\r\n    /**\r\n     * Removes a joint from the simulation\r\n     * @param mainImpostor defines the impostor used with the joint\r\n     * @param connectedImpostor defines the other impostor connected to the main one by the joint\r\n     * @param joint defines the joint to remove\r\n     */\r\n    public removeJoint(mainImpostor: PhysicsImpostor, connectedImpostor: PhysicsImpostor, joint: PhysicsJoint) {\r\n        const matchingJoints = this._joints.filter(function (impostorJoint) {\r\n            return impostorJoint.connectedImpostor === connectedImpostor && impostorJoint.joint === joint && impostorJoint.mainImpostor === mainImpostor;\r\n        });\r\n        if (matchingJoints.length) {\r\n            this._physicsPlugin.removeJoint(matchingJoints[0]);\r\n            //TODO remove it from the list as well\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called by the scene. No need to call it.\r\n     * @param delta defines the timespan between frames\r\n     */\r\n    public _step(delta: number) {\r\n        //check if any mesh has no body / requires an update\r\n        for (const impostor of this._impostors) {\r\n            if (impostor.isBodyInitRequired()) {\r\n                this._physicsPlugin.generatePhysicsBody(impostor);\r\n            }\r\n        }\r\n\r\n        if (delta > 0.1) {\r\n            delta = 0.1;\r\n        } else if (delta <= 0) {\r\n            delta = 1.0 / 60.0;\r\n        }\r\n\r\n        this._physicsPlugin.executeStep(delta, this._impostors);\r\n    }\r\n\r\n    /**\r\n     * Gets the current plugin used to run the simulation\r\n     * @returns current plugin\r\n     */\r\n    public getPhysicsPlugin(): IPhysicsEnginePlugin {\r\n        return this._physicsPlugin;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of physic impostors\r\n     * @returns an array of PhysicsImpostor\r\n     */\r\n    public getImpostors(): Array<PhysicsImpostor> {\r\n        return this._impostors;\r\n    }\r\n\r\n    /**\r\n     * Gets the impostor for a physics enabled object\r\n     * @param object defines the object impersonated by the impostor\r\n     * @returns the PhysicsImpostor or null if not found\r\n     */\r\n    public getImpostorForPhysicsObject(object: IPhysicsEnabledObject): Nullable<PhysicsImpostor> {\r\n        for (let i = 0; i < this._impostors.length; ++i) {\r\n            if (this._impostors[i].object === object) {\r\n                return this._impostors[i];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the impostor for a physics body object\r\n     * @param body defines physics body used by the impostor\r\n     * @returns the PhysicsImpostor or null if not found\r\n     */\r\n    public getImpostorWithPhysicsBody(body: any): Nullable<PhysicsImpostor> {\r\n        for (let i = 0; i < this._impostors.length; ++i) {\r\n            if (this._impostors[i].physicsBody === body) {\r\n                return this._impostors[i];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @returns PhysicsRaycastResult\r\n     */\r\n    public raycast(from: Vector3, to: Vector3): PhysicsRaycastResult {\r\n        return this._physicsPlugin.raycast(from, to);\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param result resulting PhysicsRaycastResult\r\n     * @returns true if the ray hits an impostor, else false\r\n     */\r\n    public raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult) {\r\n        return this._physicsPlugin.raycastToRef(from, to, result);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1450, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/Plugins/cannonJSPlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/Plugins/cannonJSPlugin.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-return */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { Nullable, FloatArray } from \"../../../types\";\r\nimport { Logger } from \"../../../Misc/logger\";\r\nimport { Vector3, Matrix, Quaternion } from \"../../../Maths/math.vector\";\r\nimport { VertexBuffer } from \"../../../Buffers/buffer\";\r\nimport type { AbstractMesh } from \"../../../Meshes/abstractMesh\";\r\nimport type { IPhysicsEnginePlugin, PhysicsImpostorJoint } from \"../IPhysicsEnginePlugin\";\r\nimport type { IPhysicsEnabledObject } from \"../physicsImpostor\";\r\nimport { PhysicsImpostor } from \"../physicsImpostor\";\r\nimport type { IMotorEnabledJoint, DistanceJointData, SpringJointData } from \"../physicsJoint\";\r\nimport { PhysicsJoint } from \"../physicsJoint\";\r\nimport { PhysicsRaycastResult } from \"../../physicsRaycastResult\";\r\nimport type { TransformNode } from \"../../../Meshes/transformNode\";\r\nimport { PhysicsEngine } from \"../physicsEngine\";\r\nimport { Epsilon } from \"../../../Maths/math.constants\";\r\n\r\n//declare var require: any;\r\ndeclare let CANNON: any;\r\n\r\n/** @internal */\r\nexport class CannonJSPlugin implements IPhysicsEnginePlugin {\r\n    public world: any;\r\n    public name: string = \"CannonJSPlugin\";\r\n    private _physicsMaterials: any[] = [];\r\n    private _fixedTimeStep: number = 1 / 60;\r\n    private _cannonRaycastResult: any;\r\n    private _raycastResult: PhysicsRaycastResult;\r\n    private _physicsBodiesToRemoveAfterStep = new Array<any>();\r\n    private _firstFrame = true;\r\n    private _tmpQuaternion: Quaternion = new Quaternion();\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public BJSCANNON: any;\r\n\r\n    public constructor(\r\n        private _useDeltaForWorldStep: boolean = true,\r\n        iterations: number = 10,\r\n        cannonInjection = CANNON\r\n    ) {\r\n        this.BJSCANNON = cannonInjection;\r\n        if (!this.isSupported()) {\r\n            Logger.Error(\"CannonJS is not available. Please make sure you included the js file.\");\r\n            return;\r\n        }\r\n\r\n        this._extendNamespace();\r\n\r\n        this.world = new this.BJSCANNON.World();\r\n        this.world.broadphase = new this.BJSCANNON.NaiveBroadphase();\r\n        this.world.solver.iterations = iterations;\r\n        this._cannonRaycastResult = new this.BJSCANNON.RaycastResult();\r\n        this._raycastResult = new PhysicsRaycastResult();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns plugin version\r\n     */\r\n    public getPluginVersion(): number {\r\n        return 1;\r\n    }\r\n\r\n    public setGravity(gravity: Vector3): void {\r\n        const vec = gravity;\r\n        this.world.gravity.set(vec.x, vec.y, vec.z);\r\n    }\r\n\r\n    public setTimeStep(timeStep: number) {\r\n        this._fixedTimeStep = timeStep;\r\n    }\r\n\r\n    public getTimeStep(): number {\r\n        return this._fixedTimeStep;\r\n    }\r\n\r\n    public executeStep(delta: number, impostors: Array<PhysicsImpostor>): void {\r\n        // due to cannon's architecture, the first frame's before-step is skipped.\r\n        if (this._firstFrame) {\r\n            this._firstFrame = false;\r\n            for (const impostor of impostors) {\r\n                if (!(impostor.type == PhysicsImpostor.HeightmapImpostor || impostor.type === PhysicsImpostor.PlaneImpostor)) {\r\n                    impostor.beforeStep();\r\n                }\r\n            }\r\n        }\r\n        this.world.step(this._useDeltaForWorldStep ? delta : this._fixedTimeStep);\r\n        this._removeMarkedPhysicsBodiesFromWorld();\r\n    }\r\n\r\n    private _removeMarkedPhysicsBodiesFromWorld(): void {\r\n        if (this._physicsBodiesToRemoveAfterStep.length > 0) {\r\n            for (const physicsBody of this._physicsBodiesToRemoveAfterStep) {\r\n                if (typeof this.world.removeBody === \"function\") {\r\n                    this.world.removeBody(physicsBody);\r\n                } else {\r\n                    this.world.remove(physicsBody);\r\n                }\r\n            }\r\n            this._physicsBodiesToRemoveAfterStep.length = 0;\r\n        }\r\n    }\r\n\r\n    public applyImpulse(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        const worldPoint = new this.BJSCANNON.Vec3(contactPoint.x, contactPoint.y, contactPoint.z);\r\n        const impulse = new this.BJSCANNON.Vec3(force.x, force.y, force.z);\r\n\r\n        impostor.physicsBody.applyImpulse(impulse, worldPoint);\r\n    }\r\n\r\n    public applyForce(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        const worldPoint = new this.BJSCANNON.Vec3(contactPoint.x, contactPoint.y, contactPoint.z);\r\n        const impulse = new this.BJSCANNON.Vec3(force.x, force.y, force.z);\r\n\r\n        impostor.physicsBody.applyForce(impulse, worldPoint);\r\n    }\r\n\r\n    public generatePhysicsBody(impostor: PhysicsImpostor) {\r\n        // When calling forceUpdate generatePhysicsBody is called again, ensure that the updated body does not instantly collide with removed body\r\n        this._removeMarkedPhysicsBodiesFromWorld();\r\n\r\n        //parent-child relationship. Does this impostor have a parent impostor?\r\n        if (impostor.parent) {\r\n            if (impostor.physicsBody) {\r\n                this.removePhysicsBody(impostor);\r\n                //TODO is that needed?\r\n                impostor.forceUpdate();\r\n            }\r\n            return;\r\n        }\r\n\r\n        //should a new body be created for this impostor?\r\n        if (impostor.isBodyInitRequired()) {\r\n            const shape = this._createShape(impostor);\r\n            if (!shape) {\r\n                Logger.Warn(\"It was not possible to create a physics body for this object.\");\r\n                return;\r\n            }\r\n\r\n            //unregister events if body is being changed\r\n            const oldBody = impostor.physicsBody;\r\n            if (oldBody) {\r\n                this.removePhysicsBody(impostor);\r\n            }\r\n\r\n            //create the body and material\r\n            const material = this._addMaterial(\"mat-\" + impostor.uniqueId, impostor.getParam(\"friction\"), impostor.getParam(\"restitution\"));\r\n\r\n            const bodyCreationObject = {\r\n                mass: impostor.getParam(\"mass\"),\r\n                material: material,\r\n            };\r\n            // A simple extend, in case native options were used.\r\n            const nativeOptions = impostor.getParam(\"nativeOptions\");\r\n            for (const key in nativeOptions) {\r\n                if (Object.prototype.hasOwnProperty.call(nativeOptions, key)) {\r\n                    (<any>bodyCreationObject)[key] = nativeOptions[key];\r\n                }\r\n            }\r\n            impostor.physicsBody = new this.BJSCANNON.Body(bodyCreationObject);\r\n            impostor.physicsBody.addEventListener(\"collide\", impostor.onCollide);\r\n            this.world.addEventListener(\"preStep\", impostor.beforeStep);\r\n            this.world.addEventListener(\"postStep\", impostor.afterStep);\r\n            impostor.physicsBody.addShape(shape);\r\n            if (typeof this.world.addBody === \"function\") {\r\n                this.world.addBody(impostor.physicsBody);\r\n            } else {\r\n                this.world.add(impostor.physicsBody);\r\n            }\r\n\r\n            //try to keep the body moving in the right direction by taking old properties.\r\n            //Should be tested!\r\n            if (oldBody) {\r\n                const props = [\"force\", \"torque\", \"velocity\", \"angularVelocity\"];\r\n                for (const param of props) {\r\n                    const vec = oldBody[param];\r\n                    impostor.physicsBody[param].set(vec.x, vec.y, vec.z);\r\n                }\r\n            }\r\n            this._processChildMeshes(impostor);\r\n        }\r\n\r\n        //now update the body's transformation\r\n        this._updatePhysicsBodyTransformation(impostor);\r\n    }\r\n\r\n    private _processChildMeshes(mainImpostor: PhysicsImpostor) {\r\n        const meshChildren = mainImpostor.object.getChildMeshes ? mainImpostor.object.getChildMeshes(true) : [];\r\n        const mainRotation: Nullable<Quaternion> = mainImpostor.object.rotationQuaternion;\r\n        if (mainRotation) {\r\n            mainRotation.conjugateToRef(this._tmpQuaternion);\r\n        } else {\r\n            this._tmpQuaternion.set(0, 0, 0, 1);\r\n        }\r\n\r\n        if (meshChildren.length) {\r\n            const processMesh = (mesh: AbstractMesh) => {\r\n                if (!mesh.rotationQuaternion) {\r\n                    return;\r\n                }\r\n\r\n                const childImpostor = mesh.getPhysicsImpostor();\r\n                if (childImpostor) {\r\n                    const parent = childImpostor.parent;\r\n                    if (parent !== mainImpostor && mesh.parent) {\r\n                        const pPosition = mesh.getAbsolutePosition().subtract((mesh.parent as TransformNode).getAbsolutePosition());\r\n                        const q = mesh.rotationQuaternion.multiply(this._tmpQuaternion);\r\n\r\n                        if (childImpostor.physicsBody) {\r\n                            this.removePhysicsBody(childImpostor);\r\n                            childImpostor.physicsBody = null;\r\n                        }\r\n                        childImpostor.parent = mainImpostor;\r\n                        childImpostor.resetUpdateFlags();\r\n                        mainImpostor.physicsBody.addShape(\r\n                            this._createShape(childImpostor),\r\n                            new this.BJSCANNON.Vec3(pPosition.x, pPosition.y, pPosition.z),\r\n                            new this.BJSCANNON.Quaternion(q.x, q.y, q.z, q.w)\r\n                        );\r\n                        //Add the mass of the children.\r\n                        mainImpostor.physicsBody.mass += childImpostor.getParam(\"mass\");\r\n                    }\r\n                }\r\n                const meshes = mesh.getChildMeshes(true).filter((m) => !!m.physicsImpostor);\r\n\r\n                for (const mesh of meshes) {\r\n                    processMesh(mesh);\r\n                }\r\n            };\r\n            const meshes = meshChildren.filter((m) => !!m.physicsImpostor);\r\n\r\n            for (const mesh of meshes) {\r\n                processMesh(mesh);\r\n            }\r\n        }\r\n    }\r\n\r\n    public removePhysicsBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.removeEventListener(\"collide\", impostor.onCollide);\r\n        this.world.removeEventListener(\"preStep\", impostor.beforeStep);\r\n        this.world.removeEventListener(\"postStep\", impostor.afterStep);\r\n\r\n        // Only remove the physics body after the physics step to avoid disrupting cannon's internal state\r\n        if (this._physicsBodiesToRemoveAfterStep.indexOf(impostor.physicsBody) === -1) {\r\n            this._physicsBodiesToRemoveAfterStep.push(impostor.physicsBody);\r\n        }\r\n    }\r\n\r\n    public generateJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        const mainBody = impostorJoint.mainImpostor.physicsBody;\r\n        const connectedBody = impostorJoint.connectedImpostor.physicsBody;\r\n        if (!mainBody || !connectedBody) {\r\n            return;\r\n        }\r\n        let constraint: any;\r\n        const jointData = impostorJoint.joint.jointData;\r\n        //TODO - https://github.com/schteppe/this.BJSCANNON.js/blob/gh-pages/demos/collisionFilter.html\r\n        const constraintData = {\r\n            pivotA: jointData.mainPivot ? new this.BJSCANNON.Vec3().set(jointData.mainPivot.x, jointData.mainPivot.y, jointData.mainPivot.z) : null,\r\n            pivotB: jointData.connectedPivot ? new this.BJSCANNON.Vec3().set(jointData.connectedPivot.x, jointData.connectedPivot.y, jointData.connectedPivot.z) : null,\r\n            axisA: jointData.mainAxis ? new this.BJSCANNON.Vec3().set(jointData.mainAxis.x, jointData.mainAxis.y, jointData.mainAxis.z) : null,\r\n            axisB: jointData.connectedAxis ? new this.BJSCANNON.Vec3().set(jointData.connectedAxis.x, jointData.connectedAxis.y, jointData.connectedAxis.z) : null,\r\n            maxForce: jointData.nativeParams.maxForce,\r\n            collideConnected: !!jointData.collision,\r\n        };\r\n        switch (impostorJoint.joint.type) {\r\n            case PhysicsJoint.HingeJoint:\r\n            case PhysicsJoint.Hinge2Joint:\r\n                constraint = new this.BJSCANNON.HingeConstraint(mainBody, connectedBody, constraintData);\r\n                break;\r\n            case PhysicsJoint.DistanceJoint:\r\n                constraint = new this.BJSCANNON.DistanceConstraint(mainBody, connectedBody, (<DistanceJointData>jointData).maxDistance || 2);\r\n                break;\r\n            case PhysicsJoint.SpringJoint: {\r\n                const springData = <SpringJointData>jointData;\r\n                constraint = new this.BJSCANNON.Spring(mainBody, connectedBody, {\r\n                    restLength: springData.length,\r\n                    stiffness: springData.stiffness,\r\n                    damping: springData.damping,\r\n                    localAnchorA: constraintData.pivotA,\r\n                    localAnchorB: constraintData.pivotB,\r\n                });\r\n                break;\r\n            }\r\n            case PhysicsJoint.LockJoint:\r\n                constraint = new this.BJSCANNON.LockConstraint(mainBody, connectedBody, constraintData);\r\n                break;\r\n            case PhysicsJoint.PointToPointJoint:\r\n            case PhysicsJoint.BallAndSocketJoint:\r\n            default:\r\n                constraint = new this.BJSCANNON.PointToPointConstraint(mainBody, constraintData.pivotA, connectedBody, constraintData.pivotB, constraintData.maxForce);\r\n                break;\r\n        }\r\n        //set the collideConnected flag after the creation, since DistanceJoint ignores it.\r\n        constraint.collideConnected = !!jointData.collision;\r\n        impostorJoint.joint.physicsJoint = constraint;\r\n        //don't add spring as constraint, as it is not one.\r\n        if (impostorJoint.joint.type !== PhysicsJoint.SpringJoint) {\r\n            this.world.addConstraint(constraint);\r\n        } else {\r\n            (<SpringJointData>impostorJoint.joint.jointData).forceApplicationCallback =\r\n                (<SpringJointData>impostorJoint.joint.jointData).forceApplicationCallback ||\r\n                function () {\r\n                    constraint.applyForce();\r\n                };\r\n            impostorJoint.mainImpostor.registerAfterPhysicsStep((<SpringJointData>impostorJoint.joint.jointData).forceApplicationCallback);\r\n        }\r\n    }\r\n\r\n    public removeJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        if (impostorJoint.joint.type !== PhysicsJoint.SpringJoint) {\r\n            this.world.removeConstraint(impostorJoint.joint.physicsJoint);\r\n        } else {\r\n            impostorJoint.mainImpostor.unregisterAfterPhysicsStep((<SpringJointData>impostorJoint.joint.jointData).forceApplicationCallback);\r\n        }\r\n    }\r\n\r\n    private _addMaterial(name: string, friction: number, restitution: number) {\r\n        let index;\r\n        let mat;\r\n\r\n        for (index = 0; index < this._physicsMaterials.length; index++) {\r\n            mat = this._physicsMaterials[index];\r\n\r\n            if (mat.friction === friction && mat.restitution === restitution) {\r\n                return mat;\r\n            }\r\n        }\r\n\r\n        const currentMat = new this.BJSCANNON.Material(name);\r\n        currentMat.friction = friction;\r\n        currentMat.restitution = restitution;\r\n\r\n        this._physicsMaterials.push(currentMat);\r\n        return currentMat;\r\n    }\r\n\r\n    private _checkWithEpsilon(value: number): number {\r\n        return value < Epsilon ? Epsilon : value;\r\n    }\r\n\r\n    private _createShape(impostor: PhysicsImpostor) {\r\n        const object = impostor.object;\r\n\r\n        let returnValue;\r\n        const impostorExtents = impostor.getObjectExtents();\r\n        switch (impostor.type) {\r\n            case PhysicsImpostor.SphereImpostor: {\r\n                const radiusX = impostorExtents.x;\r\n                const radiusY = impostorExtents.y;\r\n                const radiusZ = impostorExtents.z;\r\n\r\n                returnValue = new this.BJSCANNON.Sphere(Math.max(this._checkWithEpsilon(radiusX), this._checkWithEpsilon(radiusY), this._checkWithEpsilon(radiusZ)) / 2);\r\n\r\n                break;\r\n            }\r\n            //TMP also for cylinder - TODO Cannon supports cylinder natively.\r\n            case PhysicsImpostor.CylinderImpostor: {\r\n                let nativeParams = impostor.getParam(\"nativeOptions\");\r\n                if (!nativeParams) {\r\n                    nativeParams = {};\r\n                }\r\n                const radiusTop = nativeParams.radiusTop !== undefined ? nativeParams.radiusTop : this._checkWithEpsilon(impostorExtents.x) / 2;\r\n                const radiusBottom = nativeParams.radiusBottom !== undefined ? nativeParams.radiusBottom : this._checkWithEpsilon(impostorExtents.x) / 2;\r\n                const height = nativeParams.height !== undefined ? nativeParams.height : this._checkWithEpsilon(impostorExtents.y);\r\n                const numSegments = nativeParams.numSegments !== undefined ? nativeParams.numSegments : 16;\r\n                returnValue = new this.BJSCANNON.Cylinder(radiusTop, radiusBottom, height, numSegments);\r\n\r\n                // Rotate 90 degrees as this shape is horizontal in cannon\r\n                const quat = new this.BJSCANNON.Quaternion();\r\n                quat.setFromAxisAngle(new this.BJSCANNON.Vec3(1, 0, 0), -Math.PI / 2);\r\n                const translation = new this.BJSCANNON.Vec3(0, 0, 0);\r\n                returnValue.transformAllPoints(translation, quat);\r\n                break;\r\n            }\r\n            case PhysicsImpostor.BoxImpostor: {\r\n                const box = impostorExtents.scale(0.5);\r\n                returnValue = new this.BJSCANNON.Box(new this.BJSCANNON.Vec3(this._checkWithEpsilon(box.x), this._checkWithEpsilon(box.y), this._checkWithEpsilon(box.z)));\r\n                break;\r\n            }\r\n            case PhysicsImpostor.PlaneImpostor:\r\n                Logger.Warn(\"Attention, PlaneImposter might not behave as you expect. Consider using BoxImposter instead\");\r\n                returnValue = new this.BJSCANNON.Plane();\r\n                break;\r\n            case PhysicsImpostor.MeshImpostor: {\r\n                // should transform the vertex data to world coordinates!!\r\n                const rawVerts = object.getVerticesData ? object.getVerticesData(VertexBuffer.PositionKind) : [];\r\n                const rawFaces = object.getIndices ? object.getIndices() : [];\r\n                if (!rawVerts) {\r\n                    Logger.Warn(\"Tried to create a MeshImpostor for an object without vertices. This will fail.\");\r\n                    return;\r\n                }\r\n                // get only scale! so the object could transform correctly.\r\n                const oldPosition = object.position.clone();\r\n                const oldRotation = object.rotation && object.rotation.clone();\r\n                const oldQuaternion = object.rotationQuaternion && object.rotationQuaternion.clone();\r\n                object.position.copyFromFloats(0, 0, 0);\r\n                object.rotation && object.rotation.copyFromFloats(0, 0, 0);\r\n                object.rotationQuaternion && object.rotationQuaternion.copyFrom(impostor.getParentsRotation());\r\n\r\n                object.rotationQuaternion && object.parent && object.rotationQuaternion.conjugateInPlace();\r\n\r\n                const transform = object.computeWorldMatrix(true);\r\n                // convert rawVerts to object space\r\n                const transformedVertices: number[] = [];\r\n                let index: number;\r\n                for (index = 0; index < rawVerts.length; index += 3) {\r\n                    Vector3.TransformCoordinates(Vector3.FromArray(rawVerts, index), transform).toArray(transformedVertices, index);\r\n                }\r\n\r\n                Logger.Warn(\"MeshImpostor only collides against spheres.\");\r\n                returnValue = new this.BJSCANNON.Trimesh(transformedVertices, <number[]>rawFaces);\r\n                //now set back the transformation!\r\n                object.position.copyFrom(oldPosition);\r\n                oldRotation && object.rotation && object.rotation.copyFrom(oldRotation);\r\n                oldQuaternion && object.rotationQuaternion && object.rotationQuaternion.copyFrom(oldQuaternion);\r\n                break;\r\n            }\r\n            case PhysicsImpostor.HeightmapImpostor: {\r\n                const oldPosition2 = object.position.clone();\r\n                const oldRotation2 = object.rotation && object.rotation.clone();\r\n                const oldQuaternion2 = object.rotationQuaternion && object.rotationQuaternion.clone();\r\n                object.position.copyFromFloats(0, 0, 0);\r\n                object.rotation && object.rotation.copyFromFloats(0, 0, 0);\r\n                object.rotationQuaternion && object.rotationQuaternion.copyFrom(impostor.getParentsRotation());\r\n                object.rotationQuaternion && object.parent && object.rotationQuaternion.conjugateInPlace();\r\n                object.rotationQuaternion && object.rotationQuaternion.multiplyInPlace(this._minus90X);\r\n\r\n                returnValue = this._createHeightmap(object);\r\n                object.position.copyFrom(oldPosition2);\r\n                oldRotation2 && object.rotation && object.rotation.copyFrom(oldRotation2);\r\n                oldQuaternion2 && object.rotationQuaternion && object.rotationQuaternion.copyFrom(oldQuaternion2);\r\n                object.computeWorldMatrix(true);\r\n                break;\r\n            }\r\n            case PhysicsImpostor.ParticleImpostor:\r\n                returnValue = new this.BJSCANNON.Particle();\r\n                break;\r\n            case PhysicsImpostor.NoImpostor:\r\n                returnValue = new this.BJSCANNON.Box(new this.BJSCANNON.Vec3(0, 0, 0));\r\n                break;\r\n        }\r\n\r\n        return returnValue;\r\n    }\r\n\r\n    private _createHeightmap(object: IPhysicsEnabledObject, pointDepth?: number) {\r\n        let pos = <FloatArray>object.getVerticesData(VertexBuffer.PositionKind);\r\n        const transform = object.computeWorldMatrix(true);\r\n        // convert rawVerts to object space\r\n        const transformedVertices: number[] = [];\r\n        let index: number;\r\n        for (index = 0; index < pos.length; index += 3) {\r\n            Vector3.TransformCoordinates(Vector3.FromArray(pos, index), transform).toArray(transformedVertices, index);\r\n        }\r\n        pos = transformedVertices;\r\n        const matrix = new Array<Array<any>>();\r\n\r\n        //For now pointDepth will not be used and will be automatically calculated.\r\n        //Future reference - try and find the best place to add a reference to the pointDepth variable.\r\n        const arraySize = pointDepth || ~~(Math.sqrt(pos.length / 3) - 1);\r\n        const boundingInfo = object.getBoundingInfo();\r\n        const dim = Math.min(boundingInfo.boundingBox.extendSizeWorld.x, boundingInfo.boundingBox.extendSizeWorld.y);\r\n        const minY = boundingInfo.boundingBox.extendSizeWorld.z;\r\n\r\n        const elementSize = (dim * 2) / arraySize;\r\n\r\n        for (let i = 0; i < pos.length; i = i + 3) {\r\n            const x = Math.round(pos[i + 0] / elementSize + arraySize / 2);\r\n            const z = Math.round((pos[i + 1] / elementSize - arraySize / 2) * -1);\r\n            const y = -pos[i + 2] + minY;\r\n            if (!matrix[x]) {\r\n                matrix[x] = [];\r\n            }\r\n            if (!matrix[x][z]) {\r\n                matrix[x][z] = y;\r\n            }\r\n            matrix[x][z] = Math.max(y, matrix[x][z]);\r\n        }\r\n\r\n        for (let x = 0; x <= arraySize; ++x) {\r\n            if (!matrix[x]) {\r\n                let loc = 1;\r\n                while (!matrix[(x + loc) % arraySize]) {\r\n                    loc++;\r\n                }\r\n                matrix[x] = matrix[(x + loc) % arraySize].slice();\r\n                //console.log(\"missing x\", x);\r\n            }\r\n            for (let z = 0; z <= arraySize; ++z) {\r\n                if (!matrix[x][z]) {\r\n                    let loc = 1;\r\n                    let newValue;\r\n                    while (newValue === undefined) {\r\n                        newValue = matrix[x][(z + loc++) % arraySize];\r\n                    }\r\n                    matrix[x][z] = newValue;\r\n                }\r\n            }\r\n        }\r\n\r\n        const shape = new this.BJSCANNON.Heightfield(matrix, {\r\n            elementSize: elementSize,\r\n        });\r\n\r\n        //For future reference, needed for body transformation\r\n        shape.minY = minY;\r\n\r\n        return shape;\r\n    }\r\n\r\n    private _minus90X = new Quaternion(-0.7071067811865475, 0, 0, 0.7071067811865475);\r\n    private _plus90X = new Quaternion(0.7071067811865475, 0, 0, 0.7071067811865475);\r\n    private _tmpPosition: Vector3 = Vector3.Zero();\r\n    private _tmpDeltaPosition: Vector3 = Vector3.Zero();\r\n    private _tmpUnityRotation: Quaternion = new Quaternion();\r\n\r\n    private _updatePhysicsBodyTransformation(impostor: PhysicsImpostor) {\r\n        const object = impostor.object;\r\n        //make sure it is updated...\r\n        object.computeWorldMatrix && object.computeWorldMatrix(true);\r\n        if (!object.getBoundingInfo()) {\r\n            return;\r\n        }\r\n        const center = impostor.getObjectCenter();\r\n        //m.getAbsolutePosition().subtract(m.getBoundingInfo().boundingBox.centerWorld)\r\n        // The delta between the mesh position and the mesh bounding box center\r\n        this._tmpDeltaPosition.copyFrom(object.getAbsolutePivotPoint().subtract(center));\r\n        this._tmpDeltaPosition.divideInPlace(impostor.object.scaling);\r\n        this._tmpPosition.copyFrom(center);\r\n        let quaternion = object.rotationQuaternion;\r\n\r\n        if (!quaternion) {\r\n            return;\r\n        }\r\n\r\n        //is shape is a plane or a heightmap, it must be rotated 90 degs in the X axis.\r\n        //ideally these would be rotated at time of creation like cylinder but they dont extend ConvexPolyhedron\r\n        if (impostor.type === PhysicsImpostor.PlaneImpostor || impostor.type === PhysicsImpostor.HeightmapImpostor) {\r\n            //-90 DEG in X, precalculated\r\n            quaternion = quaternion.multiply(this._minus90X);\r\n            //Invert! (Precalculated, 90 deg in X)\r\n            //No need to clone. this will never change.\r\n            impostor.setDeltaRotation(this._plus90X);\r\n        }\r\n\r\n        //If it is a heightfield, if should be centered.\r\n        if (impostor.type === PhysicsImpostor.HeightmapImpostor) {\r\n            const mesh = <AbstractMesh>(<any>object);\r\n            let boundingInfo = mesh.getBoundingInfo();\r\n            //calculate the correct body position:\r\n            const rotationQuaternion = mesh.rotationQuaternion;\r\n            mesh.rotationQuaternion = this._tmpUnityRotation;\r\n            mesh.computeWorldMatrix(true);\r\n\r\n            //get original center with no rotation\r\n            const c = center.clone();\r\n\r\n            let oldPivot = mesh.getPivotMatrix();\r\n            if (oldPivot) {\r\n                // create a copy the pivot Matrix as it is modified in place\r\n                oldPivot = oldPivot.clone();\r\n            } else {\r\n                oldPivot = Matrix.Identity();\r\n            }\r\n\r\n            //calculate the new center using a pivot (since this.BJSCANNON.js doesn't center height maps)\r\n            const p = Matrix.Translation(boundingInfo.boundingBox.extendSizeWorld.x, 0, -boundingInfo.boundingBox.extendSizeWorld.z);\r\n            mesh.setPreTransformMatrix(p);\r\n            mesh.computeWorldMatrix(true);\r\n            // force bounding box recomputation\r\n            boundingInfo = mesh.getBoundingInfo();\r\n\r\n            //calculate the translation\r\n            const translation = boundingInfo.boundingBox.centerWorld.subtract(center).subtract(mesh.position).negate();\r\n\r\n            this._tmpPosition.copyFromFloats(translation.x, translation.y - boundingInfo.boundingBox.extendSizeWorld.y, translation.z);\r\n            //add it inverted to the delta\r\n            this._tmpDeltaPosition.copyFrom(boundingInfo.boundingBox.centerWorld.subtract(c));\r\n            this._tmpDeltaPosition.y += boundingInfo.boundingBox.extendSizeWorld.y;\r\n            //rotation is back\r\n            mesh.rotationQuaternion = rotationQuaternion;\r\n\r\n            mesh.setPreTransformMatrix(oldPivot);\r\n            mesh.computeWorldMatrix(true);\r\n        } else if (impostor.type === PhysicsImpostor.MeshImpostor) {\r\n            this._tmpDeltaPosition.copyFromFloats(0, 0, 0);\r\n        }\r\n\r\n        impostor.setDeltaPosition(this._tmpDeltaPosition);\r\n        //Now update the impostor object\r\n        impostor.physicsBody.position.set(this._tmpPosition.x, this._tmpPosition.y, this._tmpPosition.z);\r\n        impostor.physicsBody.quaternion.set(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\r\n    }\r\n\r\n    public setTransformationFromPhysicsBody(impostor: PhysicsImpostor) {\r\n        impostor.object.position.set(impostor.physicsBody.position.x, impostor.physicsBody.position.y, impostor.physicsBody.position.z);\r\n        if (impostor.object.rotationQuaternion) {\r\n            const q = impostor.physicsBody.quaternion;\r\n            impostor.object.rotationQuaternion.set(q.x, q.y, q.z, q.w);\r\n        }\r\n    }\r\n\r\n    public setPhysicsBodyTransformation(impostor: PhysicsImpostor, newPosition: Vector3, newRotation: Quaternion) {\r\n        impostor.physicsBody.position.set(newPosition.x, newPosition.y, newPosition.z);\r\n        impostor.physicsBody.quaternion.set(newRotation.x, newRotation.y, newRotation.z, newRotation.w);\r\n    }\r\n\r\n    public isSupported(): boolean {\r\n        return this.BJSCANNON !== undefined;\r\n    }\r\n\r\n    public setLinearVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        impostor.physicsBody.velocity.set(velocity.x, velocity.y, velocity.z);\r\n    }\r\n\r\n    public setAngularVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        impostor.physicsBody.angularVelocity.set(velocity.x, velocity.y, velocity.z);\r\n    }\r\n\r\n    public getLinearVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        const v = impostor.physicsBody.velocity;\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        return new Vector3(v.x, v.y, v.z);\r\n    }\r\n    public getAngularVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        const v = impostor.physicsBody.angularVelocity;\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        return new Vector3(v.x, v.y, v.z);\r\n    }\r\n\r\n    public setBodyMass(impostor: PhysicsImpostor, mass: number) {\r\n        impostor.physicsBody.mass = mass;\r\n        impostor.physicsBody.updateMassProperties();\r\n    }\r\n\r\n    public getBodyMass(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.mass;\r\n    }\r\n\r\n    public getBodyFriction(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.material.friction;\r\n    }\r\n\r\n    public setBodyFriction(impostor: PhysicsImpostor, friction: number) {\r\n        impostor.physicsBody.material.friction = friction;\r\n    }\r\n\r\n    public getBodyRestitution(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.material.restitution;\r\n    }\r\n\r\n    public setBodyRestitution(impostor: PhysicsImpostor, restitution: number) {\r\n        impostor.physicsBody.material.restitution = restitution;\r\n    }\r\n\r\n    public sleepBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.sleep();\r\n    }\r\n\r\n    public wakeUpBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.wakeUp();\r\n    }\r\n\r\n    public updateDistanceJoint(joint: PhysicsJoint, maxDistance: number) {\r\n        joint.physicsJoint.distance = maxDistance;\r\n    }\r\n\r\n    public setMotor(joint: IMotorEnabledJoint, speed?: number, maxForce?: number, motorIndex?: number) {\r\n        if (!motorIndex) {\r\n            joint.physicsJoint.enableMotor();\r\n            joint.physicsJoint.setMotorSpeed(speed);\r\n            if (maxForce) {\r\n                this.setLimit(joint, maxForce);\r\n            }\r\n        }\r\n    }\r\n\r\n    public setLimit(joint: IMotorEnabledJoint, minForce: number, maxForce?: number) {\r\n        joint.physicsJoint.motorEquation.maxForce = maxForce;\r\n        joint.physicsJoint.motorEquation.minForce = minForce === void 0 ? -minForce : minForce;\r\n    }\r\n\r\n    public syncMeshWithImpostor(mesh: AbstractMesh, impostor: PhysicsImpostor) {\r\n        const body = impostor.physicsBody;\r\n\r\n        mesh.position.x = body.position.x;\r\n        mesh.position.y = body.position.y;\r\n        mesh.position.z = body.position.z;\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            mesh.rotationQuaternion.x = body.quaternion.x;\r\n            mesh.rotationQuaternion.y = body.quaternion.y;\r\n            mesh.rotationQuaternion.z = body.quaternion.z;\r\n            mesh.rotationQuaternion.w = body.quaternion.w;\r\n        }\r\n    }\r\n\r\n    public getRadius(impostor: PhysicsImpostor): number {\r\n        const shape = impostor.physicsBody.shapes[0];\r\n        return shape.boundingSphereRadius;\r\n    }\r\n\r\n    public getBoxSizeToRef(impostor: PhysicsImpostor, result: Vector3): void {\r\n        const shape = impostor.physicsBody.shapes[0];\r\n        result.x = shape.halfExtents.x * 2;\r\n        result.y = shape.halfExtents.y * 2;\r\n        result.z = shape.halfExtents.z * 2;\r\n    }\r\n\r\n    public dispose() {}\r\n\r\n    private _extendNamespace() {\r\n        //this will force cannon to execute at least one step when using interpolation\r\n        const step_tmp1 = new this.BJSCANNON.Vec3();\r\n        const engine = this.BJSCANNON;\r\n        this.BJSCANNON.World.prototype.step = function (dt: number, timeSinceLastCalled: number, maxSubSteps: number) {\r\n            maxSubSteps = maxSubSteps || 10;\r\n            timeSinceLastCalled = timeSinceLastCalled || 0;\r\n            if (timeSinceLastCalled === 0) {\r\n                this.internalStep(dt);\r\n                this.time += dt;\r\n            } else {\r\n                let internalSteps = Math.floor((this.time + timeSinceLastCalled) / dt) - Math.floor(this.time / dt);\r\n                internalSteps = Math.min(internalSteps, maxSubSteps) || 1;\r\n                const t0 = performance.now();\r\n                for (let i = 0; i !== internalSteps; i++) {\r\n                    this.internalStep(dt);\r\n                    if (performance.now() - t0 > dt * 1000) {\r\n                        break;\r\n                    }\r\n                }\r\n                this.time += timeSinceLastCalled;\r\n                const h = this.time % dt;\r\n                const h_div_dt = h / dt;\r\n                const interpvelo = step_tmp1;\r\n                const bodies = this.bodies;\r\n                for (let j = 0; j !== bodies.length; j++) {\r\n                    const b = bodies[j];\r\n                    if (b.type !== engine.Body.STATIC && b.sleepState !== engine.Body.SLEEPING) {\r\n                        b.position.vsub(b.previousPosition, interpvelo);\r\n                        interpvelo.scale(h_div_dt, interpvelo);\r\n                        b.position.vadd(interpvelo, b.interpolatedPosition);\r\n                    } else {\r\n                        b.interpolatedPosition.set(b.position.x, b.position.y, b.position.z);\r\n                        b.interpolatedQuaternion.set(b.quaternion.x, b.quaternion.y, b.quaternion.z, b.quaternion.w);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @returns PhysicsRaycastResult\r\n     */\r\n    public raycast(from: Vector3, to: Vector3): PhysicsRaycastResult {\r\n        this._raycastResult.reset(from, to);\r\n        this.raycastToRef(from, to, this._raycastResult);\r\n        return this._raycastResult;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param result resulting PhysicsRaycastResult\r\n     */\r\n    public raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult): void {\r\n        this._cannonRaycastResult.reset();\r\n        this.world.raycastClosest(from, to, {}, this._cannonRaycastResult);\r\n\r\n        result.reset(from, to);\r\n        if (this._cannonRaycastResult.hasHit) {\r\n            // TODO: do we also want to get the body it hit?\r\n            result.setHitData(\r\n                {\r\n                    x: this._cannonRaycastResult.hitNormalWorld.x,\r\n                    y: this._cannonRaycastResult.hitNormalWorld.y,\r\n                    z: this._cannonRaycastResult.hitNormalWorld.z,\r\n                },\r\n                {\r\n                    x: this._cannonRaycastResult.hitPointWorld.x,\r\n                    y: this._cannonRaycastResult.hitPointWorld.y,\r\n                    z: this._cannonRaycastResult.hitPointWorld.z,\r\n                }\r\n            );\r\n            result.setHitDistance(this._cannonRaycastResult.distance);\r\n        }\r\n    }\r\n}\r\n\r\nPhysicsEngine.DefaultPluginFactory = () => {\r\n    return new CannonJSPlugin();\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2149, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/Plugins/oimoJSPlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/Plugins/oimoJSPlugin.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-return */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { IPhysicsEnabledObject } from \"../physicsImpostor\";\r\nimport { PhysicsImpostor } from \"../physicsImpostor\";\r\nimport type { IMotorEnabledJoint, DistanceJointData, SpringJointData } from \"../physicsJoint\";\r\nimport { PhysicsJoint } from \"../physicsJoint\";\r\nimport type { AbstractMesh } from \"../../../Meshes/abstractMesh\";\r\nimport { Vector3, Quaternion } from \"../../../Maths/math.vector\";\r\nimport type { Nullable } from \"../../../types\";\r\nimport { Logger } from \"../../../Misc/logger\";\r\nimport { PhysicsRaycastResult } from \"../../physicsRaycastResult\";\r\nimport type { IPhysicsEnginePlugin, PhysicsImpostorJoint } from \"../IPhysicsEnginePlugin\";\r\nimport { Epsilon } from \"../../../Maths/math.constants\";\r\n\r\ndeclare let OIMO: any;\r\n\r\n/** @internal */\r\nexport class OimoJSPlugin implements IPhysicsEnginePlugin {\r\n    public world: any;\r\n    public name: string = \"OimoJSPlugin\";\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public BJSOIMO: any;\r\n    private _raycastResult: PhysicsRaycastResult;\r\n    private _fixedTimeStep: number = 1 / 60;\r\n\r\n    constructor(\r\n        private _useDeltaForWorldStep: boolean = true,\r\n        iterations?: number,\r\n        oimoInjection = OIMO\r\n    ) {\r\n        this.BJSOIMO = oimoInjection;\r\n        this.world = new this.BJSOIMO.World({\r\n            iterations: iterations,\r\n        });\r\n        this.world.clear();\r\n        this._raycastResult = new PhysicsRaycastResult();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns plugin version\r\n     */\r\n    public getPluginVersion(): number {\r\n        return 1;\r\n    }\r\n\r\n    public setGravity(gravity: Vector3) {\r\n        this.world.gravity.set(gravity.x, gravity.y, gravity.z);\r\n    }\r\n\r\n    public setTimeStep(timeStep: number) {\r\n        this.world.timeStep = timeStep;\r\n    }\r\n\r\n    public getTimeStep(): number {\r\n        return this.world.timeStep;\r\n    }\r\n\r\n    private _tmpImpostorsArray: Array<PhysicsImpostor> = [];\r\n\r\n    public executeStep(delta: number, impostors: Array<PhysicsImpostor>) {\r\n        for (const impostor of impostors) {\r\n            impostor.beforeStep();\r\n        }\r\n\r\n        this.world.timeStep = this._useDeltaForWorldStep ? delta : this._fixedTimeStep;\r\n        this.world.step();\r\n\r\n        for (const impostor of impostors) {\r\n            impostor.afterStep();\r\n            //update the ordered impostors array\r\n            this._tmpImpostorsArray[impostor.uniqueId] = impostor;\r\n        }\r\n\r\n        //check for collisions\r\n        let contact = this.world.contacts;\r\n\r\n        while (contact !== null) {\r\n            if (contact.touching && !contact.body1.sleeping && !contact.body2.sleeping) {\r\n                contact = contact.next;\r\n                continue;\r\n            }\r\n            //is this body colliding with any other? get the impostor\r\n            const mainImpostor = this._tmpImpostorsArray[+contact.body1.name];\r\n            const collidingImpostor = this._tmpImpostorsArray[+contact.body2.name];\r\n\r\n            if (!mainImpostor || !collidingImpostor) {\r\n                contact = contact.next;\r\n                continue;\r\n            }\r\n\r\n            mainImpostor.onCollide({ body: collidingImpostor.physicsBody, point: null, distance: 0, impulse: 0, normal: null });\r\n            collidingImpostor.onCollide({ body: mainImpostor.physicsBody, point: null, distance: 0, impulse: 0, normal: null });\r\n            contact = contact.next;\r\n        }\r\n    }\r\n\r\n    public applyImpulse(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        const mass = impostor.physicsBody.mass;\r\n        impostor.physicsBody.applyImpulse(contactPoint.scale(this.world.invScale), force.scale(this.world.invScale * mass));\r\n    }\r\n    public applyForce(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        Logger.Warn(\"Oimo doesn't support applying force. Using impulse instead.\");\r\n        this.applyImpulse(impostor, force, contactPoint);\r\n    }\r\n    public generatePhysicsBody(impostor: PhysicsImpostor) {\r\n        //parent-child relationship. Does this impostor has a parent impostor?\r\n        if (impostor.parent) {\r\n            if (impostor.physicsBody) {\r\n                this.removePhysicsBody(impostor);\r\n                //TODO is that needed?\r\n                impostor.forceUpdate();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (impostor.isBodyInitRequired()) {\r\n            const bodyConfig: any = {\r\n                name: impostor.uniqueId,\r\n                //Oimo must have mass, also for static objects.\r\n                config: [impostor.getParam(\"mass\") || 0.001, impostor.getParam(\"friction\"), impostor.getParam(\"restitution\")],\r\n                size: [],\r\n                type: [],\r\n                pos: [],\r\n                posShape: [],\r\n                rot: [],\r\n                rotShape: [],\r\n                move: impostor.getParam(\"mass\") !== 0,\r\n                density: impostor.getParam(\"mass\"),\r\n                friction: impostor.getParam(\"friction\"),\r\n                restitution: impostor.getParam(\"restitution\"),\r\n                //Supporting older versions of Oimo\r\n                world: this.world,\r\n            };\r\n\r\n            const impostors = [impostor];\r\n            const addToArray = (parent: IPhysicsEnabledObject) => {\r\n                if (!parent.getChildMeshes) {\r\n                    return;\r\n                }\r\n                const meshes = parent.getChildMeshes();\r\n                for (const m of meshes) {\r\n                    if (m.physicsImpostor) {\r\n                        impostors.push(m.physicsImpostor);\r\n                        //m.physicsImpostor._init();\r\n                    }\r\n                }\r\n            };\r\n            addToArray(impostor.object);\r\n\r\n            const checkWithEpsilon = (value: number): number => {\r\n                return Math.max(value, Epsilon);\r\n            };\r\n\r\n            const globalQuaternion: Quaternion = new Quaternion();\r\n\r\n            for (const i of impostors) {\r\n                if (!i.object.rotationQuaternion) {\r\n                    continue;\r\n                }\r\n                //get the correct bounding box\r\n                const oldQuaternion = i.object.rotationQuaternion;\r\n                globalQuaternion.copyFrom(oldQuaternion);\r\n\r\n                i.object.rotationQuaternion.set(0, 0, 0, 1);\r\n                i.object.computeWorldMatrix(true);\r\n\r\n                const rot = globalQuaternion.toEulerAngles();\r\n                const impostorExtents = i.getObjectExtents();\r\n\r\n                // eslint-disable-next-line no-loss-of-precision\r\n                const radToDeg = 57.295779513082320876;\r\n\r\n                if (i === impostor) {\r\n                    const center = impostor.getObjectCenter();\r\n\r\n                    impostor.object.getAbsolutePivotPoint().subtractToRef(center, this._tmpPositionVector);\r\n                    this._tmpPositionVector.divideInPlace(impostor.object.scaling);\r\n\r\n                    //Can also use Array.prototype.push.apply\r\n                    bodyConfig.pos.push(center.x);\r\n                    bodyConfig.pos.push(center.y);\r\n                    bodyConfig.pos.push(center.z);\r\n                    bodyConfig.posShape.push(0, 0, 0);\r\n\r\n                    bodyConfig.rotShape.push(0, 0, 0);\r\n                } else {\r\n                    const localPosition = i.object.position.clone();\r\n                    bodyConfig.posShape.push(localPosition.x);\r\n                    bodyConfig.posShape.push(localPosition.y);\r\n                    bodyConfig.posShape.push(localPosition.z);\r\n\r\n                    // bodyConfig.pos.push(0, 0, 0);\r\n\r\n                    bodyConfig.rotShape.push(rot.x * radToDeg, rot.y * radToDeg, rot.z * radToDeg);\r\n                }\r\n\r\n                i.object.rotationQuaternion.copyFrom(globalQuaternion);\r\n\r\n                // register mesh\r\n                switch (i.type) {\r\n                    case PhysicsImpostor.ParticleImpostor:\r\n                        Logger.Warn(\"No Particle support in OIMO.js. using SphereImpostor instead\");\r\n                    // eslint-disable-next-line no-fallthrough\r\n                    case PhysicsImpostor.SphereImpostor: {\r\n                        const radiusX = impostorExtents.x;\r\n                        const radiusY = impostorExtents.y;\r\n                        const radiusZ = impostorExtents.z;\r\n\r\n                        const size = Math.max(checkWithEpsilon(radiusX), checkWithEpsilon(radiusY), checkWithEpsilon(radiusZ)) / 2;\r\n\r\n                        bodyConfig.type.push(\"sphere\");\r\n                        //due to the way oimo works with compounds, add 3 times\r\n                        bodyConfig.size.push(size);\r\n                        bodyConfig.size.push(size);\r\n                        bodyConfig.size.push(size);\r\n                        break;\r\n                    }\r\n                    case PhysicsImpostor.CylinderImpostor: {\r\n                        const sizeX = checkWithEpsilon(impostorExtents.x) / 2;\r\n                        const sizeY = checkWithEpsilon(impostorExtents.y);\r\n                        bodyConfig.type.push(\"cylinder\");\r\n                        bodyConfig.size.push(sizeX);\r\n                        bodyConfig.size.push(sizeY);\r\n                        //due to the way oimo works with compounds, add one more value.\r\n                        bodyConfig.size.push(sizeY);\r\n                        break;\r\n                    }\r\n                    case PhysicsImpostor.PlaneImpostor:\r\n                    case PhysicsImpostor.BoxImpostor:\r\n                    default: {\r\n                        const sizeX = checkWithEpsilon(impostorExtents.x);\r\n                        const sizeY = checkWithEpsilon(impostorExtents.y);\r\n                        const sizeZ = checkWithEpsilon(impostorExtents.z);\r\n\r\n                        bodyConfig.type.push(\"box\");\r\n                        //if (i === impostor) {\r\n                        bodyConfig.size.push(sizeX);\r\n                        bodyConfig.size.push(sizeY);\r\n                        bodyConfig.size.push(sizeZ);\r\n                        //} else {\r\n                        //    bodyConfig.size.push(0,0,0);\r\n                        //}\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                //actually not needed, but hey...\r\n                i.object.rotationQuaternion = oldQuaternion;\r\n            }\r\n            impostor.physicsBody = this.world.add(bodyConfig);\r\n            // set the quaternion, ignoring the previously defined (euler) rotation\r\n            impostor.physicsBody.resetQuaternion(globalQuaternion);\r\n            // update with delta 0, so the body will receive the new rotation.\r\n            impostor.physicsBody.updatePosition(0);\r\n        } else {\r\n            this._tmpPositionVector.copyFromFloats(0, 0, 0);\r\n        }\r\n\r\n        impostor.setDeltaPosition(this._tmpPositionVector);\r\n\r\n        //this._tmpPositionVector.addInPlace(impostor.mesh.getBoundingInfo().boundingBox.center);\r\n        //this.setPhysicsBodyTransformation(impostor, this._tmpPositionVector, impostor.mesh.rotationQuaternion);\r\n    }\r\n\r\n    private _tmpPositionVector: Vector3 = Vector3.Zero();\r\n\r\n    public removePhysicsBody(impostor: PhysicsImpostor) {\r\n        //impostor.physicsBody.dispose();\r\n        this.world.removeRigidBody(impostor.physicsBody);\r\n    }\r\n\r\n    public generateJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        const mainBody = impostorJoint.mainImpostor.physicsBody;\r\n        const connectedBody = impostorJoint.connectedImpostor.physicsBody;\r\n\r\n        if (!mainBody || !connectedBody) {\r\n            return;\r\n        }\r\n        const jointData = impostorJoint.joint.jointData;\r\n        const options = jointData.nativeParams || {};\r\n        let type;\r\n        const nativeJointData: any = {\r\n            body1: mainBody,\r\n            body2: connectedBody,\r\n\r\n            axe1: options.axe1 || (jointData.mainAxis ? jointData.mainAxis.asArray() : null),\r\n            axe2: options.axe2 || (jointData.connectedAxis ? jointData.connectedAxis.asArray() : null),\r\n            pos1: options.pos1 || (jointData.mainPivot ? jointData.mainPivot.asArray() : null),\r\n            pos2: options.pos2 || (jointData.connectedPivot ? jointData.connectedPivot.asArray() : null),\r\n\r\n            min: options.min,\r\n            max: options.max,\r\n            collision: options.collision || jointData.collision,\r\n            spring: options.spring,\r\n\r\n            //supporting older version of Oimo\r\n            world: this.world,\r\n        };\r\n        switch (impostorJoint.joint.type) {\r\n            case PhysicsJoint.BallAndSocketJoint:\r\n                type = \"jointBall\";\r\n                break;\r\n            case PhysicsJoint.SpringJoint: {\r\n                Logger.Warn(\"OIMO.js doesn't support Spring Constraint. Simulating using DistanceJoint instead\");\r\n                const springData = <SpringJointData>jointData;\r\n                nativeJointData.min = springData.length || nativeJointData.min;\r\n                //Max should also be set, just make sure it is at least min\r\n                nativeJointData.max = Math.max(nativeJointData.min, nativeJointData.max);\r\n            }\r\n            // eslint-disable-next-line no-fallthrough\r\n            case PhysicsJoint.DistanceJoint:\r\n                type = \"jointDistance\";\r\n                nativeJointData.max = (<DistanceJointData>jointData).maxDistance;\r\n                break;\r\n            case PhysicsJoint.PrismaticJoint:\r\n                type = \"jointPrisme\";\r\n                break;\r\n            case PhysicsJoint.SliderJoint:\r\n                type = \"jointSlide\";\r\n                break;\r\n            case PhysicsJoint.WheelJoint:\r\n                type = \"jointWheel\";\r\n                break;\r\n            case PhysicsJoint.HingeJoint:\r\n            default:\r\n                type = \"jointHinge\";\r\n                break;\r\n        }\r\n        nativeJointData.type = type;\r\n        impostorJoint.joint.physicsJoint = this.world.add(nativeJointData);\r\n    }\r\n\r\n    public removeJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        //Bug in Oimo prevents us from disposing a joint in the playground\r\n        //joint.joint.physicsJoint.dispose();\r\n        //So we will bruteforce it!\r\n        try {\r\n            this.world.removeJoint(impostorJoint.joint.physicsJoint);\r\n        } catch (e) {\r\n            Logger.Warn(e);\r\n        }\r\n    }\r\n\r\n    public isSupported(): boolean {\r\n        return this.BJSOIMO !== undefined;\r\n    }\r\n\r\n    public setTransformationFromPhysicsBody(impostor: PhysicsImpostor) {\r\n        if (!impostor.physicsBody.sleeping) {\r\n            if (impostor.physicsBody.shapes.next) {\r\n                let parent = impostor.physicsBody.shapes;\r\n                while (parent.next) {\r\n                    parent = parent.next;\r\n                }\r\n                impostor.object.position.set(parent.position.x, parent.position.y, parent.position.z);\r\n            } else {\r\n                const pos = impostor.physicsBody.getPosition();\r\n                impostor.object.position.set(pos.x, pos.y, pos.z);\r\n            }\r\n\r\n            if (impostor.object.rotationQuaternion) {\r\n                const quat = impostor.physicsBody.getQuaternion();\r\n                impostor.object.rotationQuaternion.set(quat.x, quat.y, quat.z, quat.w);\r\n            }\r\n        }\r\n    }\r\n\r\n    public setPhysicsBodyTransformation(impostor: PhysicsImpostor, newPosition: Vector3, newRotation: Quaternion) {\r\n        const body = impostor.physicsBody;\r\n        // disable bidirectional for compound meshes\r\n        if (impostor.physicsBody.shapes.next) {\r\n            return;\r\n        }\r\n        body.position.set(newPosition.x, newPosition.y, newPosition.z);\r\n        body.orientation.set(newRotation.x, newRotation.y, newRotation.z, newRotation.w);\r\n        body.syncShapes();\r\n        body.awake();\r\n    }\r\n\r\n    /*private _getLastShape(body: any): any {\r\n        var lastShape = body.shapes;\r\n        while (lastShape.next) {\r\n            lastShape = lastShape.next;\r\n        }\r\n        return lastShape;\r\n    }*/\r\n\r\n    public setLinearVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        impostor.physicsBody.linearVelocity.set(velocity.x, velocity.y, velocity.z);\r\n    }\r\n\r\n    public setAngularVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        impostor.physicsBody.angularVelocity.set(velocity.x, velocity.y, velocity.z);\r\n    }\r\n\r\n    public getLinearVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        const v = impostor.physicsBody.linearVelocity;\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        return new Vector3(v.x, v.y, v.z);\r\n    }\r\n    public getAngularVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        const v = impostor.physicsBody.angularVelocity;\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        return new Vector3(v.x, v.y, v.z);\r\n    }\r\n\r\n    public setBodyMass(impostor: PhysicsImpostor, mass: number) {\r\n        const staticBody: boolean = mass === 0;\r\n        //this will actually set the body's density and not its mass.\r\n        //But this is how oimo treats the mass variable.\r\n        impostor.physicsBody.shapes.density = staticBody ? 1 : mass;\r\n        impostor.physicsBody.setupMass(staticBody ? 0x2 : 0x1);\r\n    }\r\n\r\n    public getBodyMass(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.shapes.density;\r\n    }\r\n\r\n    public getBodyFriction(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.shapes.friction;\r\n    }\r\n\r\n    public setBodyFriction(impostor: PhysicsImpostor, friction: number) {\r\n        impostor.physicsBody.shapes.friction = friction;\r\n    }\r\n\r\n    public getBodyRestitution(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.shapes.restitution;\r\n    }\r\n\r\n    public setBodyRestitution(impostor: PhysicsImpostor, restitution: number) {\r\n        impostor.physicsBody.shapes.restitution = restitution;\r\n    }\r\n\r\n    public sleepBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.sleep();\r\n    }\r\n\r\n    public wakeUpBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.awake();\r\n    }\r\n\r\n    public updateDistanceJoint(joint: PhysicsJoint, maxDistance: number, minDistance?: number) {\r\n        joint.physicsJoint.limitMotor.upperLimit = maxDistance;\r\n        if (minDistance !== void 0) {\r\n            joint.physicsJoint.limitMotor.lowerLimit = minDistance;\r\n        }\r\n    }\r\n\r\n    public setMotor(joint: IMotorEnabledJoint, speed: number, force?: number, motorIndex?: number) {\r\n        if (force !== undefined) {\r\n            Logger.Warn(\"OimoJS plugin currently has unexpected behavior when using setMotor with force parameter\");\r\n        } else {\r\n            force = 1e6;\r\n        }\r\n        speed *= -1;\r\n\r\n        //TODO separate rotational and transational motors.\r\n        const motor = motorIndex\r\n            ? joint.physicsJoint.rotationalLimitMotor2\r\n            : joint.physicsJoint.rotationalLimitMotor1 || joint.physicsJoint.rotationalLimitMotor || joint.physicsJoint.limitMotor;\r\n        if (motor) {\r\n            motor.setMotor(speed, force);\r\n        }\r\n    }\r\n\r\n    public setLimit(joint: IMotorEnabledJoint, upperLimit: number, lowerLimit?: number, motorIndex?: number) {\r\n        //TODO separate rotational and transational motors.\r\n        const motor = motorIndex\r\n            ? joint.physicsJoint.rotationalLimitMotor2\r\n            : joint.physicsJoint.rotationalLimitMotor1 || joint.physicsJoint.rotationalLimitMotor || joint.physicsJoint.limitMotor;\r\n        if (motor) {\r\n            motor.setLimit(upperLimit, lowerLimit === void 0 ? -upperLimit : lowerLimit);\r\n        }\r\n    }\r\n\r\n    public syncMeshWithImpostor(mesh: AbstractMesh, impostor: PhysicsImpostor) {\r\n        const body = impostor.physicsBody;\r\n\r\n        mesh.position.x = body.position.x;\r\n        mesh.position.y = body.position.y;\r\n        mesh.position.z = body.position.z;\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            mesh.rotationQuaternion.x = body.orientation.x;\r\n            mesh.rotationQuaternion.y = body.orientation.y;\r\n            mesh.rotationQuaternion.z = body.orientation.z;\r\n            mesh.rotationQuaternion.w = body.orientation.w;\r\n        }\r\n    }\r\n\r\n    public getRadius(impostor: PhysicsImpostor): number {\r\n        return impostor.physicsBody.shapes.radius;\r\n    }\r\n\r\n    public getBoxSizeToRef(impostor: PhysicsImpostor, result: Vector3): void {\r\n        const shape = impostor.physicsBody.shapes;\r\n        result.x = shape.halfWidth * 2;\r\n        result.y = shape.halfHeight * 2;\r\n        result.z = shape.halfDepth * 2;\r\n    }\r\n\r\n    public dispose() {\r\n        this.world.clear();\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @returns PhysicsRaycastResult\r\n     */\r\n    public raycast(from: Vector3, to: Vector3): PhysicsRaycastResult {\r\n        Logger.Warn(\"raycast is not currently supported by the Oimo physics plugin\");\r\n\r\n        this._raycastResult.reset(from, to);\r\n\r\n        return this._raycastResult;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param result resulting PhysicsRaycastResult\r\n     */\r\n    public raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult): void {\r\n        Logger.Warn(\"raycast is not currently supported by the Oimo physics plugin\");\r\n\r\n        result.reset(from, to);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2618, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/Plugins/ammoJSPlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/Plugins/ammoJSPlugin.ts"],"sourcesContent":["import { Quaternion, Vector3, Matrix } from \"../../../Maths/math.vector\";\r\nimport type { IPhysicsEnginePlugin, PhysicsImpostorJoint } from \"../IPhysicsEnginePlugin\";\r\nimport { Logger } from \"../../../Misc/logger\";\r\nimport type { IPhysicsEnabledObject } from \"../physicsImpostor\";\r\nimport { PhysicsImpostor } from \"../physicsImpostor\";\r\nimport type { IMotorEnabledJoint, DistanceJointData } from \"../physicsJoint\";\r\nimport { PhysicsJoint } from \"../physicsJoint\";\r\nimport { VertexBuffer } from \"../../../Buffers/buffer\";\r\nimport { VertexData } from \"../../../Meshes/mesh.vertexData\";\r\nimport type { Nullable } from \"../../../types\";\r\nimport type { AbstractMesh } from \"../../../Meshes/abstractMesh\";\r\nimport type { Mesh } from \"../../../Meshes/mesh\";\r\nimport { ExtrudeShape } from \"../../../Meshes/Builders/shapeBuilder\";\r\nimport { CreateLines } from \"../../../Meshes/Builders/linesBuilder\";\r\nimport type { LinesMesh } from \"../../../Meshes/linesMesh\";\r\nimport { PhysicsRaycastResult } from \"../../physicsRaycastResult\";\r\nimport { WithinEpsilon } from \"../../../Maths/math.scalar.functions\";\r\nimport { Epsilon } from \"../../../Maths/math.constants\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\ndeclare let Ammo: any;\r\n\r\n/**\r\n * AmmoJS Physics plugin\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n * @see https://github.com/kripken/ammo.js/\r\n */\r\nexport class AmmoJSPlugin implements IPhysicsEnginePlugin {\r\n    /**\r\n     * Reference to the Ammo library\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public bjsAMMO: any = {};\r\n    /**\r\n     * Created ammoJS world which physics bodies are added to\r\n     */\r\n    public world: any;\r\n    /**\r\n     * Name of the plugin\r\n     */\r\n    public name: string = \"AmmoJSPlugin\";\r\n\r\n    private _timeStep: number = 1 / 60;\r\n    private _fixedTimeStep: number = 1 / 60;\r\n    private _maxSteps = 5;\r\n    private _tmpQuaternion = new Quaternion();\r\n    private _tmpAmmoTransform: any;\r\n    private _tmpAmmoQuaternion: any;\r\n    private _tmpAmmoConcreteContactResultCallback: any;\r\n    private _collisionConfiguration: any;\r\n    private _dispatcher: any;\r\n    private _overlappingPairCache: any;\r\n    private _solver: any;\r\n    private _softBodySolver: any;\r\n    private _tmpAmmoVectorA: any;\r\n    private _tmpAmmoVectorB: any;\r\n    private _tmpAmmoVectorC: any;\r\n    private _tmpAmmoVectorD: any;\r\n    private _tmpContactCallbackResult = false;\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    private _tmpAmmoVectorRCA: any;\r\n    private _tmpAmmoVectorRCB: any;\r\n    private _raycastResult: PhysicsRaycastResult;\r\n    private _tmpContactPoint = new Vector3();\r\n    private _tmpContactNormal = new Vector3();\r\n    private _tmpContactDistance: number;\r\n    private _tmpContactImpulse: number;\r\n    private _tmpVec3 = new Vector3();\r\n\r\n    private static readonly _DISABLE_COLLISION_FLAG = 4;\r\n    private static readonly _KINEMATIC_FLAG = 2;\r\n    private static readonly _DISABLE_DEACTIVATION_FLAG = 4;\r\n\r\n    /**\r\n     * Initializes the ammoJS plugin\r\n     * @param _useDeltaForWorldStep if the time between frames should be used when calculating physics steps (Default: true)\r\n     * @param ammoInjection can be used to inject your own ammo reference\r\n     * @param overlappingPairCache can be used to specify your own overlapping pair cache\r\n     */\r\n    public constructor(\r\n        private _useDeltaForWorldStep: boolean = true,\r\n        ammoInjection: any = Ammo,\r\n        overlappingPairCache: any = null\r\n    ) {\r\n        if (typeof ammoInjection === \"function\") {\r\n            Logger.Error(\"AmmoJS is not ready. Please make sure you await Ammo() before using the plugin.\");\r\n            return;\r\n        } else {\r\n            this.bjsAMMO = ammoInjection;\r\n        }\r\n\r\n        if (!this.isSupported()) {\r\n            Logger.Error(\"AmmoJS is not available. Please make sure you included the js file.\");\r\n            return;\r\n        }\r\n\r\n        // Initialize the physics world\r\n        this._collisionConfiguration = new this.bjsAMMO.btSoftBodyRigidBodyCollisionConfiguration();\r\n        this._dispatcher = new this.bjsAMMO.btCollisionDispatcher(this._collisionConfiguration);\r\n        this._overlappingPairCache = overlappingPairCache || new this.bjsAMMO.btDbvtBroadphase();\r\n        this._solver = new this.bjsAMMO.btSequentialImpulseConstraintSolver();\r\n        this._softBodySolver = new this.bjsAMMO.btDefaultSoftBodySolver();\r\n        this.world = new this.bjsAMMO.btSoftRigidDynamicsWorld(this._dispatcher, this._overlappingPairCache, this._solver, this._collisionConfiguration, this._softBodySolver);\r\n\r\n        this._tmpAmmoConcreteContactResultCallback = new this.bjsAMMO.ConcreteContactResultCallback();\r\n        this._tmpAmmoConcreteContactResultCallback.addSingleResult = (contactPoint: any) => {\r\n            contactPoint = this.bjsAMMO.wrapPointer(contactPoint, this.bjsAMMO.btManifoldPoint);\r\n            const worldPoint = contactPoint.getPositionWorldOnA();\r\n            const worldNormal = contactPoint.m_normalWorldOnB;\r\n            this._tmpContactPoint.x = worldPoint.x();\r\n            this._tmpContactPoint.y = worldPoint.y();\r\n            this._tmpContactPoint.z = worldPoint.z();\r\n            this._tmpContactNormal.x = worldNormal.x();\r\n            this._tmpContactNormal.y = worldNormal.y();\r\n            this._tmpContactNormal.z = worldNormal.z();\r\n            this._tmpContactImpulse = contactPoint.getAppliedImpulse();\r\n            this._tmpContactDistance = contactPoint.getDistance();\r\n            this._tmpContactCallbackResult = true;\r\n        };\r\n\r\n        this._raycastResult = new PhysicsRaycastResult();\r\n\r\n        // Create temp ammo variables\r\n        this._tmpAmmoTransform = new this.bjsAMMO.btTransform();\r\n        this._tmpAmmoTransform.setIdentity();\r\n        this._tmpAmmoQuaternion = new this.bjsAMMO.btQuaternion(0, 0, 0, 1);\r\n        this._tmpAmmoVectorA = new this.bjsAMMO.btVector3(0, 0, 0);\r\n        this._tmpAmmoVectorB = new this.bjsAMMO.btVector3(0, 0, 0);\r\n        this._tmpAmmoVectorC = new this.bjsAMMO.btVector3(0, 0, 0);\r\n        this._tmpAmmoVectorD = new this.bjsAMMO.btVector3(0, 0, 0);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns plugin version\r\n     */\r\n    public getPluginVersion(): number {\r\n        return 1;\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity of the physics world (m/(s^2))\r\n     * @param gravity Gravity to set\r\n     */\r\n    public setGravity(gravity: Vector3): void {\r\n        this._tmpAmmoVectorA.setValue(gravity.x, gravity.y, gravity.z);\r\n        this.world.setGravity(this._tmpAmmoVectorA);\r\n        this.world.getWorldInfo().set_m_gravity(this._tmpAmmoVectorA);\r\n    }\r\n\r\n    /**\r\n     * Amount of time to step forward on each frame (only used if useDeltaForWorldStep is false in the constructor)\r\n     * @param timeStep timestep to use in seconds\r\n     */\r\n    public setTimeStep(timeStep: number) {\r\n        this._timeStep = timeStep;\r\n    }\r\n\r\n    /**\r\n     * Increment to step forward in the physics engine (If timeStep is set to 1/60 and fixedTimeStep is set to 1/120 the physics engine should run 2 steps per frame) (Default: 1/60)\r\n     * @param fixedTimeStep fixedTimeStep to use in seconds\r\n     */\r\n    public setFixedTimeStep(fixedTimeStep: number) {\r\n        this._fixedTimeStep = fixedTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum number of steps by the physics engine per frame (Default: 5)\r\n     * @param maxSteps the maximum number of steps by the physics engine per frame\r\n     */\r\n    public setMaxSteps(maxSteps: number) {\r\n        this._maxSteps = maxSteps;\r\n    }\r\n\r\n    /**\r\n     * Gets the current timestep (only used if useDeltaForWorldStep is false in the constructor)\r\n     * @returns the current timestep in seconds\r\n     */\r\n    public getTimeStep(): number {\r\n        return this._timeStep;\r\n    }\r\n\r\n    /**\r\n     * The create custom shape handler function to be called when using BABYLON.PhysicsImposter.CustomImpostor\r\n     */\r\n    public onCreateCustomShape: (impostor: PhysicsImpostor) => any;\r\n\r\n    /**\r\n     * The create custom mesh impostor handler function to support building custom mesh impostor vertex data\r\n     */\r\n    public onCreateCustomMeshImpostor: (impostor: PhysicsImpostor) => any;\r\n\r\n    /**\r\n     * The create custom convex hull impostor handler function to support building custom convex hull impostor vertex data\r\n     */\r\n    public onCreateCustomConvexHullImpostor: (impostor: PhysicsImpostor) => any;\r\n\r\n    // Ammo's contactTest and contactPairTest take a callback that runs synchronously, wrap them so that they are easier to consume\r\n    private _isImpostorInContact(impostor: PhysicsImpostor) {\r\n        this._tmpContactCallbackResult = false;\r\n        this.world.contactTest(impostor.physicsBody, this._tmpAmmoConcreteContactResultCallback);\r\n        return this._tmpContactCallbackResult;\r\n    }\r\n    // Ammo's collision events have some weird quirks\r\n    // contactPairTest fires too many events as it fires events even when objects are close together but contactTest does not\r\n    // so only fire event if both contactTest and contactPairTest have a hit\r\n    private _isImpostorPairInContact(impostorA: PhysicsImpostor, impostorB: PhysicsImpostor) {\r\n        this._tmpContactCallbackResult = false;\r\n        this.world.contactPairTest(impostorA.physicsBody, impostorB.physicsBody, this._tmpAmmoConcreteContactResultCallback);\r\n        return this._tmpContactCallbackResult;\r\n    }\r\n\r\n    // Ammo's behavior when maxSteps > 0 does not behave as described in docs\r\n    // @see http://www.bulletphysics.org/mediawiki-1.5.8/index.php/Stepping_The_World\r\n    //\r\n    // When maxSteps is 0 do the entire simulation in one step\r\n    // When maxSteps is > 0, run up to maxStep times, if on the last step the (remaining step - fixedTimeStep) is < fixedTimeStep, the remainder will be used for the step. (eg. if remainder is 1.001 and fixedTimeStep is 1 the last step will be 1.001, if instead it did 2 steps (1, 0.001) issues occuered when having a tiny step in ammo)\r\n    // Note: To get deterministic physics, timeStep would always need to be divisible by fixedTimeStep\r\n    private _stepSimulation(timeStep: number = 1 / 60, maxSteps: number = 10, fixedTimeStep: number = 1 / 60) {\r\n        if (maxSteps == 0) {\r\n            this.world.stepSimulation(timeStep, 0);\r\n        } else {\r\n            while (maxSteps > 0 && timeStep > 0) {\r\n                if (timeStep - fixedTimeStep < fixedTimeStep) {\r\n                    this.world.stepSimulation(timeStep, 0);\r\n                    timeStep = 0;\r\n                } else {\r\n                    timeStep -= fixedTimeStep;\r\n                    this.world.stepSimulation(fixedTimeStep, 0);\r\n                }\r\n                maxSteps--;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Moves the physics simulation forward delta seconds and updates the given physics imposters\r\n     * Prior to the step the imposters physics location is set to the position of the babylon meshes\r\n     * After the step the babylon meshes are set to the position of the physics imposters\r\n     * @param delta amount of time to step forward\r\n     * @param impostors array of imposters to update before/after the step\r\n     */\r\n    public executeStep(delta: number, impostors: Array<PhysicsImpostor>): void {\r\n        for (const impostor of impostors) {\r\n            // Update physics world objects to match babylon world\r\n            if (!impostor.soft) {\r\n                impostor.beforeStep();\r\n            }\r\n        }\r\n\r\n        this._stepSimulation(this._useDeltaForWorldStep ? delta : this._timeStep, this._maxSteps, this._fixedTimeStep);\r\n\r\n        for (const mainImpostor of impostors) {\r\n            // After physics update make babylon world objects match physics world objects\r\n            if (mainImpostor.soft) {\r\n                this._afterSoftStep(mainImpostor);\r\n            } else {\r\n                mainImpostor.afterStep();\r\n            }\r\n\r\n            // Handle collision event\r\n            if (mainImpostor._onPhysicsCollideCallbacks.length > 0) {\r\n                if (this._isImpostorInContact(mainImpostor)) {\r\n                    for (const collideCallback of mainImpostor._onPhysicsCollideCallbacks) {\r\n                        for (const otherImpostor of collideCallback.otherImpostors) {\r\n                            if (mainImpostor.physicsBody.isActive() || otherImpostor.physicsBody.isActive()) {\r\n                                if (this._isImpostorPairInContact(mainImpostor, otherImpostor)) {\r\n                                    mainImpostor.onCollide({\r\n                                        body: otherImpostor.physicsBody,\r\n                                        point: this._tmpContactPoint,\r\n                                        distance: this._tmpContactDistance,\r\n                                        impulse: this._tmpContactImpulse,\r\n                                        normal: this._tmpContactNormal,\r\n                                    });\r\n                                    otherImpostor.onCollide({\r\n                                        body: mainImpostor.physicsBody,\r\n                                        point: this._tmpContactPoint,\r\n                                        distance: this._tmpContactDistance,\r\n                                        impulse: this._tmpContactImpulse,\r\n                                        normal: this._tmpContactNormal,\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update babylon mesh to match physics world object\r\n     * @param impostor imposter to match\r\n     */\r\n    private _afterSoftStep(impostor: PhysicsImpostor): void {\r\n        if (impostor.type === PhysicsImpostor.RopeImpostor) {\r\n            this._ropeStep(impostor);\r\n        } else {\r\n            this._softbodyOrClothStep(impostor);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update babylon mesh vertices vertices to match physics world softbody or cloth\r\n     * @param impostor imposter to match\r\n     */\r\n    private _ropeStep(impostor: PhysicsImpostor): void {\r\n        const bodyVertices = impostor.physicsBody.get_m_nodes();\r\n        const nbVertices = bodyVertices.size();\r\n        let node: any;\r\n        let nodePositions: any;\r\n        let x, y, z: number;\r\n        const path: Array<Vector3> = [];\r\n        for (let n = 0; n < nbVertices; n++) {\r\n            node = bodyVertices.at(n);\r\n            nodePositions = node.get_m_x();\r\n            x = nodePositions.x();\r\n            y = nodePositions.y();\r\n            z = nodePositions.z();\r\n            path.push(new Vector3(x, y, z));\r\n        }\r\n        const object = impostor.object;\r\n        const shape = impostor.getParam(\"shape\");\r\n        if (impostor._isFromLine) {\r\n            impostor.object = CreateLines(\"lines\", { points: path, instance: <LinesMesh>object });\r\n        } else {\r\n            impostor.object = ExtrudeShape(\"ext\", { shape: shape, path: path, instance: <Mesh>object });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update babylon mesh vertices vertices to match physics world softbody or cloth\r\n     * @param impostor imposter to match\r\n     */\r\n    private _softbodyOrClothStep(impostor: PhysicsImpostor): void {\r\n        const normalDirection = impostor.type === PhysicsImpostor.ClothImpostor ? 1 : -1;\r\n        const object = impostor.object;\r\n        let vertexPositions = object.getVerticesData(VertexBuffer.PositionKind);\r\n        if (!vertexPositions) {\r\n            vertexPositions = [];\r\n        }\r\n        let vertexNormals = object.getVerticesData(VertexBuffer.NormalKind);\r\n        if (!vertexNormals) {\r\n            vertexNormals = [];\r\n        }\r\n\r\n        const nbVertices = vertexPositions.length / 3;\r\n        const bodyVertices = impostor.physicsBody.get_m_nodes();\r\n        let node: any;\r\n        let nodePositions: any;\r\n        let x, y, z: number;\r\n        let nx, ny, nz: number;\r\n        for (let n = 0; n < nbVertices; n++) {\r\n            node = bodyVertices.at(n);\r\n            nodePositions = node.get_m_x();\r\n            x = nodePositions.x();\r\n            y = nodePositions.y();\r\n            z = nodePositions.z() * normalDirection;\r\n            const nodeNormals = node.get_m_n();\r\n            nx = nodeNormals.x();\r\n            ny = nodeNormals.y();\r\n            nz = nodeNormals.z() * normalDirection;\r\n\r\n            vertexPositions[3 * n] = x;\r\n            vertexPositions[3 * n + 1] = y;\r\n            vertexPositions[3 * n + 2] = z;\r\n            vertexNormals[3 * n] = nx;\r\n            vertexNormals[3 * n + 1] = ny;\r\n            vertexNormals[3 * n + 2] = nz;\r\n        }\r\n\r\n        const vertexData = new VertexData();\r\n\r\n        vertexData.positions = vertexPositions;\r\n        vertexData.normals = vertexNormals;\r\n        vertexData.uvs = object.getVerticesData(VertexBuffer.UVKind);\r\n        vertexData.colors = object.getVerticesData(VertexBuffer.ColorKind);\r\n        if (object && object.getIndices) {\r\n            vertexData.indices = object.getIndices();\r\n        }\r\n\r\n        vertexData.applyToMesh(<Mesh>object);\r\n    }\r\n\r\n    private _tmpMatrix = new Matrix();\r\n    /**\r\n     * Applies an impulse on the imposter\r\n     * @param impostor imposter to apply impulse to\r\n     * @param force amount of force to be applied to the imposter\r\n     * @param contactPoint the location to apply the impulse on the imposter\r\n     */\r\n    public applyImpulse(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        if (!impostor.soft) {\r\n            impostor.physicsBody.activate();\r\n            const worldPoint = this._tmpAmmoVectorA;\r\n            const impulse = this._tmpAmmoVectorB;\r\n\r\n            // Convert contactPoint relative to center of mass\r\n            if (impostor.object && impostor.object.getWorldMatrix) {\r\n                contactPoint.subtractInPlace(impostor.object.getWorldMatrix().getTranslation());\r\n            }\r\n\r\n            worldPoint.setValue(contactPoint.x, contactPoint.y, contactPoint.z);\r\n            impulse.setValue(force.x, force.y, force.z);\r\n\r\n            impostor.physicsBody.applyImpulse(impulse, worldPoint);\r\n        } else {\r\n            Logger.Warn(\"Cannot be applied to a soft body\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Applies a force on the imposter\r\n     * @param impostor imposter to apply force\r\n     * @param force amount of force to be applied to the imposter\r\n     * @param contactPoint the location to apply the force on the imposter\r\n     */\r\n    public applyForce(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3) {\r\n        if (!impostor.soft) {\r\n            impostor.physicsBody.activate();\r\n            const worldPoint = this._tmpAmmoVectorA;\r\n            const impulse = this._tmpAmmoVectorB;\r\n\r\n            // Convert contactPoint relative to center of mass\r\n            if (impostor.object && impostor.object.getWorldMatrix) {\r\n                const localTranslation = impostor.object.getWorldMatrix().getTranslation();\r\n                worldPoint.setValue(contactPoint.x - localTranslation.x, contactPoint.y - localTranslation.y, contactPoint.z - localTranslation.z);\r\n            } else {\r\n                worldPoint.setValue(contactPoint.x, contactPoint.y, contactPoint.z);\r\n            }\r\n\r\n            impulse.setValue(force.x, force.y, force.z);\r\n\r\n            impostor.physicsBody.applyForce(impulse, worldPoint);\r\n        } else {\r\n            Logger.Warn(\"Cannot be applied to a soft body\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a physics body using the plugin\r\n     * @param impostor the imposter to create the physics body on\r\n     */\r\n    public generatePhysicsBody(impostor: PhysicsImpostor) {\r\n        // Note: this method will not be called on child imposotrs for compound impostors\r\n\r\n        impostor._pluginData.toDispose = [];\r\n\r\n        //parent-child relationship\r\n        if (impostor.parent) {\r\n            if (impostor.physicsBody) {\r\n                this.removePhysicsBody(impostor);\r\n                impostor.forceUpdate();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (impostor.isBodyInitRequired()) {\r\n            const colShape = this._createShape(impostor);\r\n            const mass = impostor.getParam(\"mass\");\r\n            impostor._pluginData.mass = mass;\r\n            if (impostor.soft) {\r\n                colShape.get_m_cfg().set_collisions(0x11);\r\n                colShape.get_m_cfg().set_kDP(impostor.getParam(\"damping\"));\r\n                this.bjsAMMO.castObject(colShape, this.bjsAMMO.btCollisionObject).getCollisionShape().setMargin(impostor.getParam(\"margin\"));\r\n                colShape.setActivationState(AmmoJSPlugin._DISABLE_DEACTIVATION_FLAG);\r\n                this.world.addSoftBody(colShape, 1, -1);\r\n                impostor.physicsBody = colShape;\r\n                impostor._pluginData.toDispose.push(colShape);\r\n                this.setBodyPressure(impostor, 0);\r\n                if (impostor.type === PhysicsImpostor.SoftbodyImpostor) {\r\n                    this.setBodyPressure(impostor, impostor.getParam(\"pressure\"));\r\n                }\r\n                this.setBodyStiffness(impostor, impostor.getParam(\"stiffness\"));\r\n                this.setBodyVelocityIterations(impostor, impostor.getParam(\"velocityIterations\"));\r\n                this.setBodyPositionIterations(impostor, impostor.getParam(\"positionIterations\"));\r\n            } else {\r\n                const localInertia = new this.bjsAMMO.btVector3(0, 0, 0);\r\n                const startTransform = new this.bjsAMMO.btTransform();\r\n                impostor.object.computeWorldMatrix(true);\r\n                startTransform.setIdentity();\r\n                if (mass !== 0) {\r\n                    colShape.calculateLocalInertia(mass, localInertia);\r\n                }\r\n                this._tmpAmmoVectorA.setValue(impostor.object.position.x, impostor.object.position.y, impostor.object.position.z);\r\n                this._tmpAmmoQuaternion.setValue(\r\n                    impostor.object.rotationQuaternion!.x,\r\n                    impostor.object.rotationQuaternion!.y,\r\n                    impostor.object.rotationQuaternion!.z,\r\n                    impostor.object.rotationQuaternion!.w\r\n                );\r\n                startTransform.setOrigin(this._tmpAmmoVectorA);\r\n                startTransform.setRotation(this._tmpAmmoQuaternion);\r\n                const myMotionState = new this.bjsAMMO.btDefaultMotionState(startTransform);\r\n                const rbInfo = new this.bjsAMMO.btRigidBodyConstructionInfo(mass, myMotionState, colShape, localInertia);\r\n                const body = new this.bjsAMMO.btRigidBody(rbInfo);\r\n\r\n                // Make objects kinematic if it's mass is 0\r\n                if (mass === 0) {\r\n                    body.setCollisionFlags(body.getCollisionFlags() | AmmoJSPlugin._KINEMATIC_FLAG);\r\n                    body.setActivationState(AmmoJSPlugin._DISABLE_DEACTIVATION_FLAG);\r\n                }\r\n\r\n                // Disable collision if NoImpostor, but keep collision if shape is btCompoundShape\r\n                if (impostor.type == PhysicsImpostor.NoImpostor && !colShape.getChildShape) {\r\n                    body.setCollisionFlags(body.getCollisionFlags() | AmmoJSPlugin._DISABLE_COLLISION_FLAG);\r\n                }\r\n\r\n                // compute delta position: compensate the difference between shape center and mesh origin\r\n                if (impostor.type !== PhysicsImpostor.MeshImpostor && impostor.type !== PhysicsImpostor.NoImpostor) {\r\n                    const boundingInfo = impostor.object.getBoundingInfo();\r\n                    this._tmpVec3.copyFrom(impostor.object.getAbsolutePosition());\r\n                    this._tmpVec3.subtractInPlace(boundingInfo.boundingBox.centerWorld);\r\n                    this._tmpVec3.x /= impostor.object.scaling.x;\r\n                    this._tmpVec3.y /= impostor.object.scaling.y;\r\n                    this._tmpVec3.z /= impostor.object.scaling.z;\r\n                    impostor.setDeltaPosition(this._tmpVec3);\r\n                }\r\n\r\n                const group = impostor.getParam(\"group\");\r\n                const mask = impostor.getParam(\"mask\");\r\n                if (group && mask) {\r\n                    this.world.addRigidBody(body, group, mask);\r\n                } else {\r\n                    this.world.addRigidBody(body);\r\n                }\r\n                impostor.physicsBody = body;\r\n                impostor._pluginData.toDispose = impostor._pluginData.toDispose.concat([body, rbInfo, myMotionState, startTransform, localInertia, colShape]);\r\n            }\r\n            this.setBodyRestitution(impostor, impostor.getParam(\"restitution\"));\r\n            this.setBodyFriction(impostor, impostor.getParam(\"friction\"));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes the physics body from the imposter and disposes of the body's memory\r\n     * @param impostor imposter to remove the physics body from\r\n     */\r\n    public removePhysicsBody(impostor: PhysicsImpostor) {\r\n        if (this.world) {\r\n            if (impostor.soft) {\r\n                this.world.removeSoftBody(impostor.physicsBody);\r\n            } else {\r\n                this.world.removeRigidBody(impostor.physicsBody);\r\n            }\r\n\r\n            if (impostor._pluginData) {\r\n                for (const d of impostor._pluginData.toDispose) {\r\n                    this.bjsAMMO.destroy(d);\r\n                }\r\n                impostor._pluginData.toDispose = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generates a joint\r\n     * @param impostorJoint the imposter joint to create the joint with\r\n     */\r\n    public generateJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        const mainBody = impostorJoint.mainImpostor.physicsBody;\r\n        const connectedBody = impostorJoint.connectedImpostor.physicsBody;\r\n        if (!mainBody || !connectedBody) {\r\n            return;\r\n        }\r\n\r\n        // if the joint is already created, don't create it again for preventing memory leaks\r\n        if (impostorJoint.joint.physicsJoint) {\r\n            return;\r\n        }\r\n\r\n        const jointData = impostorJoint.joint.jointData;\r\n        if (!jointData.mainPivot) {\r\n            jointData.mainPivot = new Vector3(0, 0, 0);\r\n        }\r\n        if (!jointData.connectedPivot) {\r\n            jointData.connectedPivot = new Vector3(0, 0, 0);\r\n        }\r\n\r\n        let joint: any;\r\n        switch (impostorJoint.joint.type) {\r\n            case PhysicsJoint.DistanceJoint: {\r\n                const distance = (<DistanceJointData>jointData).maxDistance;\r\n                if (distance) {\r\n                    jointData.mainPivot = new Vector3(0, -distance / 2, 0);\r\n                    jointData.connectedPivot = new Vector3(0, distance / 2, 0);\r\n                }\r\n\r\n                const mainPivot = this._tmpAmmoVectorA;\r\n                mainPivot.setValue(jointData.mainPivot.x, jointData.mainPivot.y, jointData.mainPivot.z);\r\n\r\n                const connectedPivot = this._tmpAmmoVectorB;\r\n                connectedPivot.setValue(jointData.connectedPivot.x, jointData.connectedPivot.y, jointData.connectedPivot.z);\r\n\r\n                joint = new this.bjsAMMO.btPoint2PointConstraint(mainBody, connectedBody, mainPivot, connectedPivot);\r\n                break;\r\n            }\r\n            case PhysicsJoint.HingeJoint: {\r\n                if (!jointData.mainAxis) {\r\n                    jointData.mainAxis = new Vector3(0, 0, 0);\r\n                }\r\n                if (!jointData.connectedAxis) {\r\n                    jointData.connectedAxis = new Vector3(0, 0, 0);\r\n                }\r\n\r\n                const mainPivot = this._tmpAmmoVectorA;\r\n                mainPivot.setValue(jointData.mainPivot.x, jointData.mainPivot.y, jointData.mainPivot.z);\r\n\r\n                const connectedPivot = this._tmpAmmoVectorB;\r\n                connectedPivot.setValue(jointData.connectedPivot.x, jointData.connectedPivot.y, jointData.connectedPivot.z);\r\n\r\n                const mainAxis = this._tmpAmmoVectorC;\r\n                mainAxis.setValue(jointData.mainAxis.x, jointData.mainAxis.y, jointData.mainAxis.z);\r\n\r\n                const connectedAxis = this._tmpAmmoVectorD;\r\n                connectedAxis.setValue(jointData.connectedAxis.x, jointData.connectedAxis.y, jointData.connectedAxis.z);\r\n\r\n                joint = new this.bjsAMMO.btHingeConstraint(mainBody, connectedBody, mainPivot, connectedPivot, mainAxis, connectedAxis);\r\n                break;\r\n            }\r\n            case PhysicsJoint.BallAndSocketJoint: {\r\n                const mainPivot = this._tmpAmmoVectorA;\r\n                mainPivot.setValue(jointData.mainPivot.x, jointData.mainPivot.y, jointData.mainPivot.z);\r\n\r\n                const connectedPivot = this._tmpAmmoVectorB;\r\n                connectedPivot.setValue(jointData.connectedPivot.x, jointData.connectedPivot.y, jointData.connectedPivot.z);\r\n\r\n                joint = new this.bjsAMMO.btPoint2PointConstraint(mainBody, connectedBody, mainPivot, connectedPivot);\r\n                break;\r\n            }\r\n            default: {\r\n                Logger.Warn(\"JointType not currently supported by the Ammo plugin, falling back to PhysicsJoint.BallAndSocketJoint\");\r\n\r\n                const mainPivot = this._tmpAmmoVectorA;\r\n                mainPivot.setValue(jointData.mainPivot.x, jointData.mainPivot.y, jointData.mainPivot.z);\r\n\r\n                const connectedPivot = this._tmpAmmoVectorB;\r\n                connectedPivot.setValue(jointData.connectedPivot.x, jointData.connectedPivot.y, jointData.connectedPivot.z);\r\n\r\n                joint = new this.bjsAMMO.btPoint2PointConstraint(mainBody, connectedBody, mainPivot, connectedPivot);\r\n                break;\r\n            }\r\n        }\r\n        this.world.addConstraint(joint, !impostorJoint.joint.jointData.collision);\r\n        impostorJoint.joint.physicsJoint = joint;\r\n    }\r\n\r\n    /**\r\n     * Removes a joint\r\n     * @param impostorJoint the imposter joint to remove the joint from\r\n     */\r\n    public removeJoint(impostorJoint: PhysicsImpostorJoint) {\r\n        if (this.world) {\r\n            this.world.removeConstraint(impostorJoint.joint.physicsJoint);\r\n        }\r\n        this.bjsAMMO.destroy(impostorJoint.joint.physicsJoint);\r\n    }\r\n\r\n    // adds all verticies (including child verticies) to the triangle mesh\r\n    private _addMeshVerts(btTriangleMesh: any, topLevelObject: IPhysicsEnabledObject, object: IPhysicsEnabledObject) {\r\n        let triangleCount = 0;\r\n        if (object && object.getIndices && object.getWorldMatrix && object.getChildMeshes) {\r\n            let indices = object.getIndices();\r\n            if (!indices) {\r\n                indices = [];\r\n            }\r\n            let vertexPositions = object.getVerticesData(VertexBuffer.PositionKind);\r\n            if (!vertexPositions) {\r\n                vertexPositions = [];\r\n            }\r\n\r\n            let localMatrix;\r\n\r\n            if (topLevelObject && topLevelObject !== object) {\r\n                // top level matrix used for shape transform doesn't take scale into account.\r\n                // Moreover, every children vertex position must be in that space.\r\n                // So, each vertex position here is transform by (mesh world matrix * toplevelMatrix -1)\r\n                let topLevelQuaternion;\r\n                if (topLevelObject.rotationQuaternion) {\r\n                    topLevelQuaternion = topLevelObject.rotationQuaternion;\r\n                } else if (topLevelObject.rotation) {\r\n                    topLevelQuaternion = Quaternion.FromEulerAngles(topLevelObject.rotation.x, topLevelObject.rotation.y, topLevelObject.rotation.z);\r\n                } else {\r\n                    topLevelQuaternion = Quaternion.Identity();\r\n                }\r\n                const topLevelMatrix = Matrix.Compose(Vector3.One(), topLevelQuaternion, topLevelObject.position);\r\n                topLevelMatrix.invertToRef(this._tmpMatrix);\r\n                const wm = object.computeWorldMatrix(false);\r\n                localMatrix = wm.multiply(this._tmpMatrix);\r\n            } else {\r\n                // current top level is same as object level -> only use local scaling\r\n                Matrix.ScalingToRef(object.scaling.x, object.scaling.y, object.scaling.z, this._tmpMatrix);\r\n                localMatrix = this._tmpMatrix;\r\n            }\r\n            const faceCount = indices.length / 3;\r\n            for (let i = 0; i < faceCount; i++) {\r\n                const triPoints = [];\r\n                for (let point = 0; point < 3; point++) {\r\n                    let v = new Vector3(\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 0],\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 1],\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 2]\r\n                    );\r\n\r\n                    v = Vector3.TransformCoordinates(v, localMatrix);\r\n\r\n                    let vec: any;\r\n                    if (point == 0) {\r\n                        vec = this._tmpAmmoVectorA;\r\n                    } else if (point == 1) {\r\n                        vec = this._tmpAmmoVectorB;\r\n                    } else {\r\n                        vec = this._tmpAmmoVectorC;\r\n                    }\r\n                    vec.setValue(v.x, v.y, v.z);\r\n\r\n                    triPoints.push(vec);\r\n                }\r\n                btTriangleMesh.addTriangle(triPoints[0], triPoints[1], triPoints[2]);\r\n                triangleCount++;\r\n            }\r\n\r\n            const childMeshes = object.getChildMeshes();\r\n            for (const m of childMeshes) {\r\n                triangleCount += this._addMeshVerts(btTriangleMesh, topLevelObject, m);\r\n            }\r\n        }\r\n        return triangleCount;\r\n    }\r\n\r\n    /**\r\n     * Initialise the soft body vertices to match its object's (mesh) vertices\r\n     * Softbody vertices (nodes) are in world space and to match this\r\n     * The object's position and rotation is set to zero and so its vertices are also then set in world space\r\n     * @param impostor to create the softbody for\r\n     * @returns the number of vertices added to the softbody\r\n     */\r\n    private _softVertexData(impostor: PhysicsImpostor): VertexData {\r\n        const object = impostor.object;\r\n        if (object && object.getIndices && object.getWorldMatrix && object.getChildMeshes) {\r\n            let indices = object.getIndices();\r\n            if (!indices) {\r\n                indices = [];\r\n            }\r\n            let vertexPositions = object.getVerticesData(VertexBuffer.PositionKind);\r\n            if (!vertexPositions) {\r\n                vertexPositions = [];\r\n            }\r\n            let vertexNormals = object.getVerticesData(VertexBuffer.NormalKind);\r\n            if (!vertexNormals) {\r\n                vertexNormals = [];\r\n            }\r\n            object.computeWorldMatrix(false);\r\n            const newPoints = [];\r\n            const newNorms = [];\r\n            for (let i = 0; i < vertexPositions.length; i += 3) {\r\n                let v = new Vector3(vertexPositions[i], vertexPositions[i + 1], vertexPositions[i + 2]);\r\n                let n = new Vector3(vertexNormals[i], vertexNormals[i + 1], vertexNormals[i + 2]);\r\n                v = Vector3.TransformCoordinates(v, object.getWorldMatrix());\r\n                n = Vector3.TransformNormal(n, object.getWorldMatrix());\r\n                newPoints.push(v.x, v.y, v.z);\r\n                newNorms.push(n.x, n.y, n.z);\r\n            }\r\n\r\n            const vertexData = new VertexData();\r\n\r\n            vertexData.positions = newPoints;\r\n            vertexData.normals = newNorms;\r\n            vertexData.uvs = object.getVerticesData(VertexBuffer.UVKind);\r\n            vertexData.colors = object.getVerticesData(VertexBuffer.ColorKind);\r\n            if (object && object.getIndices) {\r\n                vertexData.indices = object.getIndices();\r\n            }\r\n\r\n            vertexData.applyToMesh(<Mesh>object);\r\n\r\n            object.position = Vector3.Zero();\r\n            object.rotationQuaternion = null;\r\n            object.rotation = Vector3.Zero();\r\n            object.computeWorldMatrix(true);\r\n\r\n            return vertexData;\r\n        }\r\n        return VertexData.ExtractFromMesh(<Mesh>object);\r\n    }\r\n\r\n    /**\r\n     * Create an impostor's soft body\r\n     * @param impostor to create the softbody for\r\n     * @returns the softbody\r\n     */\r\n    private _createSoftbody(impostor: PhysicsImpostor) {\r\n        const object = impostor.object;\r\n        if (object && object.getIndices) {\r\n            let indices = object.getIndices();\r\n            if (!indices) {\r\n                indices = [];\r\n            }\r\n\r\n            const vertexData = this._softVertexData(impostor);\r\n            const vertexPositions = vertexData.positions;\r\n            const vertexNormals = vertexData.normals;\r\n\r\n            if (vertexPositions === null || vertexNormals === null) {\r\n                return new this.bjsAMMO.btCompoundShape();\r\n            } else {\r\n                const triPoints = [];\r\n                const triNorms = [];\r\n                for (let i = 0; i < vertexPositions.length; i += 3) {\r\n                    const v = new Vector3(vertexPositions[i], vertexPositions[i + 1], vertexPositions[i + 2]);\r\n                    const n = new Vector3(vertexNormals[i], vertexNormals[i + 1], vertexNormals[i + 2]);\r\n                    triPoints.push(v.x, v.y, -v.z);\r\n                    triNorms.push(n.x, n.y, -n.z);\r\n                }\r\n                const softBody = new this.bjsAMMO.btSoftBodyHelpers().CreateFromTriMesh(this.world.getWorldInfo(), triPoints, object.getIndices(), indices.length / 3, true);\r\n\r\n                const nbVertices = vertexPositions.length / 3;\r\n                const bodyVertices = softBody.get_m_nodes();\r\n                let node: any;\r\n                let nodeNormals: any;\r\n                for (let i = 0; i < nbVertices; i++) {\r\n                    node = bodyVertices.at(i);\r\n                    nodeNormals = node.get_m_n();\r\n                    nodeNormals.setX(triNorms[3 * i]);\r\n                    nodeNormals.setY(triNorms[3 * i + 1]);\r\n                    nodeNormals.setZ(triNorms[3 * i + 2]);\r\n                }\r\n                return softBody;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create cloth for an impostor\r\n     * @param impostor to create the softbody for\r\n     * @returns the cloth\r\n     */\r\n    private _createCloth(impostor: PhysicsImpostor) {\r\n        const object = impostor.object;\r\n        if (object && object.getIndices) {\r\n            let indices = object.getIndices();\r\n            if (!indices) {\r\n                indices = [];\r\n            }\r\n\r\n            const vertexData = this._softVertexData(impostor);\r\n            const vertexPositions = vertexData.positions;\r\n            const vertexNormals = vertexData.normals;\r\n\r\n            if (vertexPositions === null || vertexNormals === null) {\r\n                return new this.bjsAMMO.btCompoundShape();\r\n            } else {\r\n                const len = vertexPositions.length;\r\n                const segments = Math.sqrt(len / 3);\r\n                impostor.segments = segments;\r\n                const segs = segments - 1;\r\n                this._tmpAmmoVectorA.setValue(vertexPositions[0], vertexPositions[1], vertexPositions[2]);\r\n                this._tmpAmmoVectorB.setValue(vertexPositions[3 * segs], vertexPositions[3 * segs + 1], vertexPositions[3 * segs + 2]);\r\n                this._tmpAmmoVectorD.setValue(vertexPositions[len - 3], vertexPositions[len - 2], vertexPositions[len - 1]);\r\n                this._tmpAmmoVectorC.setValue(vertexPositions[len - 3 - 3 * segs], vertexPositions[len - 2 - 3 * segs], vertexPositions[len - 1 - 3 * segs]);\r\n\r\n                const clothBody = new this.bjsAMMO.btSoftBodyHelpers().CreatePatch(\r\n                    this.world.getWorldInfo(),\r\n                    this._tmpAmmoVectorA,\r\n                    this._tmpAmmoVectorB,\r\n                    this._tmpAmmoVectorC,\r\n                    this._tmpAmmoVectorD,\r\n                    segments,\r\n                    segments,\r\n                    impostor.getParam(\"fixedPoints\"),\r\n                    true\r\n                );\r\n                return clothBody;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create rope for an impostor\r\n     * @param impostor to create the softbody for\r\n     * @returns the rope\r\n     */\r\n    private _createRope(impostor: PhysicsImpostor) {\r\n        let len: number;\r\n        let segments: number;\r\n        const vertexData = this._softVertexData(impostor);\r\n        const vertexPositions = vertexData.positions;\r\n        const vertexNormals = vertexData.normals;\r\n\r\n        if (vertexPositions === null || vertexNormals === null) {\r\n            return new this.bjsAMMO.btCompoundShape();\r\n        }\r\n\r\n        //force the mesh to be updatable\r\n        vertexData.applyToMesh(<Mesh>impostor.object, true);\r\n\r\n        impostor._isFromLine = true;\r\n\r\n        // If in lines mesh all normals will be zero\r\n        const vertexSquared: Array<number> = <Array<number>>vertexNormals.map((x: number) => x * x);\r\n        const reducer = (accumulator: number, currentValue: number): number => accumulator + currentValue;\r\n        const reduced: number = vertexSquared.reduce(reducer);\r\n\r\n        if (reduced === 0) {\r\n            // line mesh\r\n            len = vertexPositions.length;\r\n            segments = len / 3 - 1;\r\n            this._tmpAmmoVectorA.setValue(vertexPositions[0], vertexPositions[1], vertexPositions[2]);\r\n            this._tmpAmmoVectorB.setValue(vertexPositions[len - 3], vertexPositions[len - 2], vertexPositions[len - 1]);\r\n        } else {\r\n            //extruded mesh\r\n            impostor._isFromLine = false;\r\n            const pathVectors = impostor.getParam(\"path\");\r\n            const shape = impostor.getParam(\"shape\");\r\n            if (shape === null) {\r\n                Logger.Warn(\"No shape available for extruded mesh\");\r\n                return new this.bjsAMMO.btCompoundShape();\r\n            }\r\n            len = pathVectors.length;\r\n            segments = len - 1;\r\n            this._tmpAmmoVectorA.setValue(pathVectors[0].x, pathVectors[0].y, pathVectors[0].z);\r\n            this._tmpAmmoVectorB.setValue(pathVectors[len - 1].x, pathVectors[len - 1].y, pathVectors[len - 1].z);\r\n        }\r\n\r\n        impostor.segments = segments;\r\n\r\n        let fixedPoints = impostor.getParam(\"fixedPoints\");\r\n        fixedPoints = fixedPoints > 3 ? 3 : fixedPoints;\r\n\r\n        const ropeBody = new this.bjsAMMO.btSoftBodyHelpers().CreateRope(this.world.getWorldInfo(), this._tmpAmmoVectorA, this._tmpAmmoVectorB, segments - 1, fixedPoints);\r\n        ropeBody.get_m_cfg().set_collisions(0x11);\r\n        return ropeBody;\r\n    }\r\n\r\n    /**\r\n     * Create a custom physics impostor shape using the plugin's onCreateCustomShape handler\r\n     * @param impostor to create the custom physics shape for\r\n     * @returns the custom physics shape\r\n     */\r\n    private _createCustom(impostor: PhysicsImpostor): any {\r\n        let returnValue: any = null;\r\n        if (this.onCreateCustomShape) {\r\n            returnValue = this.onCreateCustomShape(impostor);\r\n        }\r\n        if (returnValue == null) {\r\n            returnValue = new this.bjsAMMO.btCompoundShape();\r\n        }\r\n        return returnValue;\r\n    }\r\n\r\n    // adds all verticies (including child verticies) to the convex hull shape\r\n    private _addHullVerts(btConvexHullShape: any, topLevelObject: IPhysicsEnabledObject, object: IPhysicsEnabledObject) {\r\n        let triangleCount = 0;\r\n        if (object && object.getIndices && object.getWorldMatrix && object.getChildMeshes) {\r\n            let indices = object.getIndices();\r\n            if (!indices) {\r\n                indices = [];\r\n            }\r\n            let vertexPositions = object.getVerticesData(VertexBuffer.PositionKind);\r\n            if (!vertexPositions) {\r\n                vertexPositions = [];\r\n            }\r\n            object.computeWorldMatrix(false);\r\n            const faceCount = indices.length / 3;\r\n            for (let i = 0; i < faceCount; i++) {\r\n                const triPoints = [];\r\n                for (let point = 0; point < 3; point++) {\r\n                    let v = new Vector3(\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 0],\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 1],\r\n                        vertexPositions[indices[i * 3 + point] * 3 + 2]\r\n                    );\r\n\r\n                    // Adjust for initial scaling\r\n                    Matrix.ScalingToRef(object.scaling.x, object.scaling.y, object.scaling.z, this._tmpMatrix);\r\n                    v = Vector3.TransformCoordinates(v, this._tmpMatrix);\r\n\r\n                    let vec: any;\r\n                    if (point == 0) {\r\n                        vec = this._tmpAmmoVectorA;\r\n                    } else if (point == 1) {\r\n                        vec = this._tmpAmmoVectorB;\r\n                    } else {\r\n                        vec = this._tmpAmmoVectorC;\r\n                    }\r\n                    vec.setValue(v.x, v.y, v.z);\r\n\r\n                    triPoints.push(vec);\r\n                }\r\n                btConvexHullShape.addPoint(triPoints[0], true);\r\n                btConvexHullShape.addPoint(triPoints[1], true);\r\n                btConvexHullShape.addPoint(triPoints[2], true);\r\n                triangleCount++;\r\n            }\r\n\r\n            const childMeshes = object.getChildMeshes();\r\n            for (const m of childMeshes) {\r\n                triangleCount += this._addHullVerts(btConvexHullShape, topLevelObject, m);\r\n            }\r\n        }\r\n        return triangleCount;\r\n    }\r\n\r\n    private _createShape(impostor: PhysicsImpostor, ignoreChildren = false) {\r\n        const object = impostor.object;\r\n\r\n        let returnValue: any;\r\n        const impostorExtents = impostor.getObjectExtents();\r\n\r\n        if (!ignoreChildren) {\r\n            const meshChildren = impostor.object.getChildMeshes ? impostor.object.getChildMeshes(true) : [];\r\n            returnValue = new this.bjsAMMO.btCompoundShape();\r\n\r\n            // Add shape of all children to the compound shape\r\n            let childrenAdded = 0;\r\n            for (const childMesh of meshChildren) {\r\n                const childImpostor = childMesh.getPhysicsImpostor();\r\n                if (childImpostor) {\r\n                    if (childImpostor.type == PhysicsImpostor.MeshImpostor) {\r\n                        // eslint-disable-next-line no-throw-literal\r\n                        throw \"A child MeshImpostor is not supported. Only primitive impostors are supported as children (eg. box or sphere)\";\r\n                    }\r\n                    const shape = this._createShape(childImpostor);\r\n\r\n                    // Position needs to be scaled based on parent's scaling\r\n                    const parentMat = childMesh.parent!.getWorldMatrix().clone();\r\n                    const s = new Vector3();\r\n                    parentMat.decompose(s);\r\n                    this._tmpAmmoTransform.getOrigin().setValue(childMesh.position.x * s.x, childMesh.position.y * s.y, childMesh.position.z * s.z);\r\n\r\n                    this._tmpAmmoQuaternion.setValue(\r\n                        childMesh.rotationQuaternion!.x,\r\n                        childMesh.rotationQuaternion!.y,\r\n                        childMesh.rotationQuaternion!.z,\r\n                        childMesh.rotationQuaternion!.w\r\n                    );\r\n                    this._tmpAmmoTransform.setRotation(this._tmpAmmoQuaternion);\r\n                    returnValue.addChildShape(this._tmpAmmoTransform, shape);\r\n                    childImpostor.dispose();\r\n                    childrenAdded++;\r\n                }\r\n            }\r\n\r\n            if (childrenAdded > 0) {\r\n                // Add parents shape as a child if present\r\n                if (impostor.type != PhysicsImpostor.NoImpostor) {\r\n                    const shape = this._createShape(impostor, true);\r\n                    if (shape) {\r\n                        this._tmpAmmoTransform.getOrigin().setValue(0, 0, 0);\r\n                        this._tmpAmmoQuaternion.setValue(0, 0, 0, 1);\r\n                        this._tmpAmmoTransform.setRotation(this._tmpAmmoQuaternion);\r\n\r\n                        returnValue.addChildShape(this._tmpAmmoTransform, shape);\r\n                    }\r\n                }\r\n                return returnValue;\r\n            } else {\r\n                // If no children with impostors create the actual shape below instead\r\n                this.bjsAMMO.destroy(returnValue);\r\n                returnValue = null;\r\n            }\r\n        }\r\n\r\n        switch (impostor.type) {\r\n            case PhysicsImpostor.SphereImpostor:\r\n                // Is there a better way to compare floats number? With an epsilon or with a Math function\r\n                if (WithinEpsilon(impostorExtents.x, impostorExtents.y, 0.0001) && WithinEpsilon(impostorExtents.x, impostorExtents.z, 0.0001)) {\r\n                    returnValue = new this.bjsAMMO.btSphereShape(impostorExtents.x / 2);\r\n                } else {\r\n                    // create a btMultiSphereShape because it's not possible to set a local scaling on a btSphereShape\r\n                    this._tmpAmmoVectorA.setValue(0, 0, 0);\r\n                    const positions = [this._tmpAmmoVectorA];\r\n                    const radii = [1];\r\n                    returnValue = new this.bjsAMMO.btMultiSphereShape(positions, radii, 1);\r\n\r\n                    this._tmpAmmoVectorA.setValue(impostorExtents.x / 2, impostorExtents.y / 2, impostorExtents.z / 2);\r\n                    returnValue.setLocalScaling(this._tmpAmmoVectorA);\r\n                }\r\n                break;\r\n            case PhysicsImpostor.CapsuleImpostor:\r\n                {\r\n                    // https://pybullet.org/Bullet/BulletFull/classbtCapsuleShape.html#details\r\n                    // Height is just the height between the center of each 'sphere' of the capsule caps\r\n                    const capRadius = impostorExtents.x / 2;\r\n                    returnValue = new this.bjsAMMO.btCapsuleShape(capRadius, impostorExtents.y - capRadius * 2);\r\n                }\r\n                break;\r\n            case PhysicsImpostor.CylinderImpostor:\r\n                this._tmpAmmoVectorA.setValue(impostorExtents.x / 2, impostorExtents.y / 2, impostorExtents.z / 2);\r\n                returnValue = new this.bjsAMMO.btCylinderShape(this._tmpAmmoVectorA);\r\n                break;\r\n            case PhysicsImpostor.PlaneImpostor:\r\n            case PhysicsImpostor.BoxImpostor:\r\n                this._tmpAmmoVectorA.setValue(impostorExtents.x / 2, impostorExtents.y / 2, impostorExtents.z / 2);\r\n                returnValue = new this.bjsAMMO.btBoxShape(this._tmpAmmoVectorA);\r\n                break;\r\n            case PhysicsImpostor.MeshImpostor: {\r\n                if (impostor.getParam(\"mass\") == 0) {\r\n                    // Only create btBvhTriangleMeshShape if the impostor is static\r\n                    // See https://pybullet.org/Bullet/phpBB3/viewtopic.php?t=7283\r\n                    if (this.onCreateCustomMeshImpostor) {\r\n                        returnValue = this.onCreateCustomMeshImpostor(impostor);\r\n                    } else {\r\n                        const triMesh = new this.bjsAMMO.btTriangleMesh();\r\n                        impostor._pluginData.toDispose.push(triMesh);\r\n                        const triangleCount = this._addMeshVerts(triMesh, object, object);\r\n                        if (triangleCount == 0) {\r\n                            returnValue = new this.bjsAMMO.btCompoundShape();\r\n                        } else {\r\n                            returnValue = new this.bjsAMMO.btBvhTriangleMeshShape(triMesh);\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            // Otherwise create convexHullImpostor\r\n            // eslint-disable-next-line no-fallthrough\r\n            case PhysicsImpostor.ConvexHullImpostor: {\r\n                if (this.onCreateCustomConvexHullImpostor) {\r\n                    returnValue = this.onCreateCustomConvexHullImpostor(impostor);\r\n                } else {\r\n                    const convexHull = new this.bjsAMMO.btConvexHullShape();\r\n                    const triangleCount = this._addHullVerts(convexHull, object, object);\r\n                    if (triangleCount == 0) {\r\n                        // Cleanup Unused Convex Hull Shape\r\n                        impostor._pluginData.toDispose.push(convexHull);\r\n                        returnValue = new this.bjsAMMO.btCompoundShape();\r\n                    } else {\r\n                        returnValue = convexHull;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case PhysicsImpostor.NoImpostor:\r\n                // Fill with sphere but collision is disabled on the rigid body in generatePhysicsBody, using an empty shape caused unexpected movement with joints\r\n                returnValue = new this.bjsAMMO.btSphereShape(impostorExtents.x / 2);\r\n                break;\r\n            case PhysicsImpostor.CustomImpostor:\r\n                // Only usable when the plugin's onCreateCustomShape is set\r\n                returnValue = this._createCustom(impostor);\r\n                break;\r\n            case PhysicsImpostor.SoftbodyImpostor:\r\n                // Only usable with a mesh that has sufficient and shared vertices\r\n                returnValue = this._createSoftbody(impostor);\r\n                break;\r\n            case PhysicsImpostor.ClothImpostor:\r\n                // Only usable with a ground mesh that has sufficient and shared vertices\r\n                returnValue = this._createCloth(impostor);\r\n                break;\r\n            case PhysicsImpostor.RopeImpostor:\r\n                // Only usable with a line mesh or an extruded mesh that is updatable\r\n                returnValue = this._createRope(impostor);\r\n                break;\r\n            default:\r\n                Logger.Warn(\"The impostor type is not currently supported by the ammo plugin.\");\r\n                break;\r\n        }\r\n\r\n        return returnValue;\r\n    }\r\n\r\n    /**\r\n     * Sets the mesh body position/rotation from the babylon impostor\r\n     * @param impostor imposter containing the physics body and babylon object\r\n     */\r\n    public setTransformationFromPhysicsBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.getMotionState().getWorldTransform(this._tmpAmmoTransform);\r\n        impostor.object.position.set(this._tmpAmmoTransform.getOrigin().x(), this._tmpAmmoTransform.getOrigin().y(), this._tmpAmmoTransform.getOrigin().z());\r\n\r\n        if (!impostor.object.rotationQuaternion) {\r\n            if (impostor.object.rotation) {\r\n                this._tmpQuaternion.set(\r\n                    this._tmpAmmoTransform.getRotation().x(),\r\n                    this._tmpAmmoTransform.getRotation().y(),\r\n                    this._tmpAmmoTransform.getRotation().z(),\r\n                    this._tmpAmmoTransform.getRotation().w()\r\n                );\r\n                this._tmpQuaternion.toEulerAnglesToRef(impostor.object.rotation);\r\n            }\r\n        } else {\r\n            impostor.object.rotationQuaternion.set(\r\n                this._tmpAmmoTransform.getRotation().x(),\r\n                this._tmpAmmoTransform.getRotation().y(),\r\n                this._tmpAmmoTransform.getRotation().z(),\r\n                this._tmpAmmoTransform.getRotation().w()\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the babylon object's position/rotation from the physics body's position/rotation\r\n     * @param impostor imposter containing the physics body and babylon object\r\n     * @param newPosition new position\r\n     * @param newRotation new rotation\r\n     */\r\n    public setPhysicsBodyTransformation(impostor: PhysicsImpostor, newPosition: Vector3, newRotation: Quaternion) {\r\n        const trans = impostor.physicsBody.getWorldTransform();\r\n\r\n        // If rotation/position has changed update and activate rigged body\r\n        if (\r\n            Math.abs(trans.getOrigin().x() - newPosition.x) > Epsilon ||\r\n            Math.abs(trans.getOrigin().y() - newPosition.y) > Epsilon ||\r\n            Math.abs(trans.getOrigin().z() - newPosition.z) > Epsilon ||\r\n            Math.abs(trans.getRotation().x() - newRotation.x) > Epsilon ||\r\n            Math.abs(trans.getRotation().y() - newRotation.y) > Epsilon ||\r\n            Math.abs(trans.getRotation().z() - newRotation.z) > Epsilon ||\r\n            Math.abs(trans.getRotation().w() - newRotation.w) > Epsilon\r\n        ) {\r\n            this._tmpAmmoVectorA.setValue(newPosition.x, newPosition.y, newPosition.z);\r\n            trans.setOrigin(this._tmpAmmoVectorA);\r\n\r\n            this._tmpAmmoQuaternion.setValue(newRotation.x, newRotation.y, newRotation.z, newRotation.w);\r\n            trans.setRotation(this._tmpAmmoQuaternion);\r\n            impostor.physicsBody.setWorldTransform(trans);\r\n\r\n            if (impostor.mass == 0) {\r\n                // Kinematic objects must be updated using motion state\r\n                const motionState = impostor.physicsBody.getMotionState();\r\n                if (motionState) {\r\n                    motionState.setWorldTransform(trans);\r\n                }\r\n            } else {\r\n                impostor.physicsBody.activate();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * If this plugin is supported\r\n     * @returns true if its supported\r\n     */\r\n    public isSupported(): boolean {\r\n        return this.bjsAMMO !== undefined;\r\n    }\r\n\r\n    /**\r\n     * Sets the linear velocity of the physics body\r\n     * @param impostor imposter to set the velocity on\r\n     * @param velocity velocity to set\r\n     */\r\n    public setLinearVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        this._tmpAmmoVectorA.setValue(velocity.x, velocity.y, velocity.z);\r\n        if (impostor.soft) {\r\n            impostor.physicsBody.linearVelocity(this._tmpAmmoVectorA);\r\n        } else {\r\n            impostor.physicsBody.setLinearVelocity(this._tmpAmmoVectorA);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the angular velocity of the physics body\r\n     * @param impostor imposter to set the velocity on\r\n     * @param velocity velocity to set\r\n     */\r\n    public setAngularVelocity(impostor: PhysicsImpostor, velocity: Vector3) {\r\n        this._tmpAmmoVectorA.setValue(velocity.x, velocity.y, velocity.z);\r\n        if (impostor.soft) {\r\n            impostor.physicsBody.angularVelocity(this._tmpAmmoVectorA);\r\n        } else {\r\n            impostor.physicsBody.setAngularVelocity(this._tmpAmmoVectorA);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * gets the linear velocity\r\n     * @param impostor imposter to get linear velocity from\r\n     * @returns linear velocity\r\n     */\r\n    public getLinearVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        let v: any;\r\n        if (impostor.soft) {\r\n            v = impostor.physicsBody.linearVelocity();\r\n        } else {\r\n            v = impostor.physicsBody.getLinearVelocity();\r\n        }\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        const result = new Vector3(v.x(), v.y(), v.z());\r\n        this.bjsAMMO.destroy(v);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * gets the angular velocity\r\n     * @param impostor imposter to get angular velocity from\r\n     * @returns angular velocity\r\n     */\r\n    public getAngularVelocity(impostor: PhysicsImpostor): Nullable<Vector3> {\r\n        let v: any;\r\n        if (impostor.soft) {\r\n            v = impostor.physicsBody.angularVelocity();\r\n        } else {\r\n            v = impostor.physicsBody.getAngularVelocity();\r\n        }\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        const result = new Vector3(v.x(), v.y(), v.z());\r\n        this.bjsAMMO.destroy(v);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Sets the mass of physics body\r\n     * @param impostor imposter to set the mass on\r\n     * @param mass mass to set\r\n     */\r\n    public setBodyMass(impostor: PhysicsImpostor, mass: number) {\r\n        if (impostor.soft) {\r\n            impostor.physicsBody.setTotalMass(mass, false);\r\n        } else {\r\n            impostor.physicsBody.setMassProps(mass);\r\n        }\r\n        impostor._pluginData.mass = mass;\r\n    }\r\n\r\n    /**\r\n     * Gets the mass of the physics body\r\n     * @param impostor imposter to get the mass from\r\n     * @returns mass\r\n     */\r\n    public getBodyMass(impostor: PhysicsImpostor): number {\r\n        return impostor._pluginData.mass || 0;\r\n    }\r\n\r\n    /**\r\n     * Gets friction of the impostor\r\n     * @param impostor impostor to get friction from\r\n     * @returns friction value\r\n     */\r\n    public getBodyFriction(impostor: PhysicsImpostor): number {\r\n        return impostor._pluginData.friction || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets friction of the impostor\r\n     * @param impostor impostor to set friction on\r\n     * @param friction friction value\r\n     */\r\n    public setBodyFriction(impostor: PhysicsImpostor, friction: number) {\r\n        if (impostor.soft) {\r\n            impostor.physicsBody.get_m_cfg().set_kDF(friction);\r\n        } else {\r\n            impostor.physicsBody.setFriction(friction);\r\n        }\r\n        impostor._pluginData.friction = friction;\r\n    }\r\n\r\n    /**\r\n     * Gets restitution of the impostor\r\n     * @param impostor impostor to get restitution from\r\n     * @returns restitution value\r\n     */\r\n    public getBodyRestitution(impostor: PhysicsImpostor): number {\r\n        return impostor._pluginData.restitution || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets restitution of the impostor\r\n     * @param impostor impostor to set resitution on\r\n     * @param restitution resitution value\r\n     */\r\n    public setBodyRestitution(impostor: PhysicsImpostor, restitution: number) {\r\n        impostor.physicsBody.setRestitution(restitution);\r\n        impostor._pluginData.restitution = restitution;\r\n    }\r\n\r\n    /**\r\n     * Gets pressure inside the impostor\r\n     * @param impostor impostor to get pressure from\r\n     * @returns pressure value\r\n     */\r\n    public getBodyPressure(impostor: PhysicsImpostor): number {\r\n        if (!impostor.soft) {\r\n            Logger.Warn(\"Pressure is not a property of a rigid body\");\r\n            return 0;\r\n        }\r\n        return impostor._pluginData.pressure || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets pressure inside a soft body impostor\r\n     * Cloth and rope must remain 0 pressure\r\n     * @param impostor impostor to set pressure on\r\n     * @param pressure pressure value\r\n     */\r\n    public setBodyPressure(impostor: PhysicsImpostor, pressure: number) {\r\n        if (impostor.soft) {\r\n            if (impostor.type === PhysicsImpostor.SoftbodyImpostor) {\r\n                impostor.physicsBody.get_m_cfg().set_kPR(pressure);\r\n                impostor._pluginData.pressure = pressure;\r\n            } else {\r\n                impostor.physicsBody.get_m_cfg().set_kPR(0);\r\n                impostor._pluginData.pressure = 0;\r\n            }\r\n        } else {\r\n            Logger.Warn(\"Pressure can only be applied to a softbody\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets stiffness of the impostor\r\n     * @param impostor impostor to get stiffness from\r\n     * @returns pressure value\r\n     */\r\n    public getBodyStiffness(impostor: PhysicsImpostor): number {\r\n        if (!impostor.soft) {\r\n            Logger.Warn(\"Stiffness is not a property of a rigid body\");\r\n            return 0;\r\n        }\r\n        return impostor._pluginData.stiffness || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets stiffness of the impostor\r\n     * @param impostor impostor to set stiffness on\r\n     * @param stiffness stiffness value from 0 to 1\r\n     */\r\n    public setBodyStiffness(impostor: PhysicsImpostor, stiffness: number) {\r\n        if (impostor.soft) {\r\n            stiffness = stiffness < 0 ? 0 : stiffness;\r\n            stiffness = stiffness > 1 ? 1 : stiffness;\r\n            impostor.physicsBody.get_m_materials().at(0).set_m_kLST(stiffness);\r\n            impostor._pluginData.stiffness = stiffness;\r\n        } else {\r\n            Logger.Warn(\"Stiffness cannot be applied to a rigid body\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets velocityIterations of the impostor\r\n     * @param impostor impostor to get velocity iterations from\r\n     * @returns velocityIterations value\r\n     */\r\n    public getBodyVelocityIterations(impostor: PhysicsImpostor): number {\r\n        if (!impostor.soft) {\r\n            Logger.Warn(\"Velocity iterations is not a property of a rigid body\");\r\n            return 0;\r\n        }\r\n        return impostor._pluginData.velocityIterations || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets velocityIterations of the impostor\r\n     * @param impostor impostor to set velocity iterations on\r\n     * @param velocityIterations velocityIterations value\r\n     */\r\n    public setBodyVelocityIterations(impostor: PhysicsImpostor, velocityIterations: number) {\r\n        if (impostor.soft) {\r\n            velocityIterations = velocityIterations < 0 ? 0 : velocityIterations;\r\n            impostor.physicsBody.get_m_cfg().set_viterations(velocityIterations);\r\n            impostor._pluginData.velocityIterations = velocityIterations;\r\n        } else {\r\n            Logger.Warn(\"Velocity iterations cannot be applied to a rigid body\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets positionIterations of the impostor\r\n     * @param impostor impostor to get position iterations from\r\n     * @returns positionIterations value\r\n     */\r\n    public getBodyPositionIterations(impostor: PhysicsImpostor): number {\r\n        if (!impostor.soft) {\r\n            Logger.Warn(\"Position iterations is not a property of a rigid body\");\r\n            return 0;\r\n        }\r\n        return impostor._pluginData.positionIterations || 0;\r\n    }\r\n\r\n    /**\r\n     * Sets positionIterations of the impostor\r\n     * @param impostor impostor to set position on\r\n     * @param positionIterations positionIterations value\r\n     */\r\n    public setBodyPositionIterations(impostor: PhysicsImpostor, positionIterations: number) {\r\n        if (impostor.soft) {\r\n            positionIterations = positionIterations < 0 ? 0 : positionIterations;\r\n            impostor.physicsBody.get_m_cfg().set_piterations(positionIterations);\r\n            impostor._pluginData.positionIterations = positionIterations;\r\n        } else {\r\n            Logger.Warn(\"Position iterations cannot be applied to a rigid body\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Append an anchor to a cloth object\r\n     * @param impostor is the cloth impostor to add anchor to\r\n     * @param otherImpostor is the rigid impostor to anchor to\r\n     * @param width ratio across width from 0 to 1\r\n     * @param height ratio up height from 0 to 1\r\n     * @param influence the elasticity between cloth impostor and anchor from 0, very stretchy to 1, little stretch\r\n     * @param noCollisionBetweenLinkedBodies when true collisions between soft impostor and anchor are ignored; default false\r\n     */\r\n    public appendAnchor(\r\n        impostor: PhysicsImpostor,\r\n        otherImpostor: PhysicsImpostor,\r\n        width: number,\r\n        height: number,\r\n        influence: number = 1,\r\n        noCollisionBetweenLinkedBodies: boolean = false\r\n    ) {\r\n        const segs = impostor.segments;\r\n        const nbAcross = Math.round((segs - 1) * width);\r\n        const nbUp = Math.round((segs - 1) * height);\r\n        const nbDown = segs - 1 - nbUp;\r\n        const node = nbAcross + segs * nbDown;\r\n        impostor.physicsBody.appendAnchor(node, otherImpostor.physicsBody, noCollisionBetweenLinkedBodies, influence);\r\n    }\r\n\r\n    /**\r\n     * Append an hook to a rope object\r\n     * @param impostor is the rope impostor to add hook to\r\n     * @param otherImpostor is the rigid impostor to hook to\r\n     * @param length ratio along the rope from 0 to 1\r\n     * @param influence the elasticity between soft impostor and anchor from 0, very stretchy to 1, little stretch\r\n     * @param noCollisionBetweenLinkedBodies when true collisions between soft impostor and anchor are ignored; default false\r\n     */\r\n    public appendHook(impostor: PhysicsImpostor, otherImpostor: PhysicsImpostor, length: number, influence: number = 1, noCollisionBetweenLinkedBodies: boolean = false) {\r\n        const node = Math.round(impostor.segments * length);\r\n        impostor.physicsBody.appendAnchor(node, otherImpostor.physicsBody, noCollisionBetweenLinkedBodies, influence);\r\n    }\r\n\r\n    /**\r\n     * Sleeps the physics body and stops it from being active\r\n     * @param impostor impostor to sleep\r\n     */\r\n    public sleepBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.forceActivationState(0);\r\n    }\r\n\r\n    /**\r\n     * Activates the physics body\r\n     * @param impostor impostor to activate\r\n     */\r\n    public wakeUpBody(impostor: PhysicsImpostor) {\r\n        impostor.physicsBody.activate();\r\n    }\r\n\r\n    /**\r\n     * Updates the distance parameters of the joint\r\n     */\r\n    public updateDistanceJoint() {\r\n        Logger.Warn(\"updateDistanceJoint is not currently supported by the Ammo physics plugin\");\r\n    }\r\n\r\n    /**\r\n     * Sets a motor on the joint\r\n     * @param joint joint to set motor on\r\n     * @param speed speed of the motor\r\n     * @param maxForce maximum force of the motor\r\n     */\r\n    public setMotor(joint: IMotorEnabledJoint, speed?: number, maxForce?: number) {\r\n        joint.physicsJoint.enableAngularMotor(true, speed, maxForce);\r\n    }\r\n\r\n    /**\r\n     * Sets the motors limit\r\n     */\r\n    public setLimit() {\r\n        Logger.Warn(\"setLimit is not currently supported by the Ammo physics plugin\");\r\n    }\r\n\r\n    /**\r\n     * Syncs the position and rotation of a mesh with the impostor\r\n     * @param mesh mesh to sync\r\n     * @param impostor impostor to update the mesh with\r\n     */\r\n    public syncMeshWithImpostor(mesh: AbstractMesh, impostor: PhysicsImpostor) {\r\n        const body = impostor.physicsBody;\r\n\r\n        body.getMotionState().getWorldTransform(this._tmpAmmoTransform);\r\n\r\n        mesh.position.x = this._tmpAmmoTransform.getOrigin().x();\r\n        mesh.position.y = this._tmpAmmoTransform.getOrigin().y();\r\n        mesh.position.z = this._tmpAmmoTransform.getOrigin().z();\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            mesh.rotationQuaternion.x = this._tmpAmmoTransform.getRotation().x();\r\n            mesh.rotationQuaternion.y = this._tmpAmmoTransform.getRotation().y();\r\n            mesh.rotationQuaternion.z = this._tmpAmmoTransform.getRotation().z();\r\n            mesh.rotationQuaternion.w = this._tmpAmmoTransform.getRotation().w();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the radius of the impostor\r\n     * @param impostor impostor to get radius from\r\n     * @returns the radius\r\n     */\r\n    public getRadius(impostor: PhysicsImpostor): number {\r\n        const extents = impostor.getObjectExtents();\r\n        return extents.x / 2;\r\n    }\r\n\r\n    /**\r\n     * Gets the box size of the impostor\r\n     * @param impostor impostor to get box size from\r\n     * @param result the resulting box size\r\n     */\r\n    public getBoxSizeToRef(impostor: PhysicsImpostor, result: Vector3): void {\r\n        const extents = impostor.getObjectExtents();\r\n        result.x = extents.x;\r\n        result.y = extents.y;\r\n        result.z = extents.z;\r\n    }\r\n\r\n    /**\r\n     * Disposes of the impostor\r\n     */\r\n    public dispose() {\r\n        // Dispose of world\r\n        this.bjsAMMO.destroy(this.world);\r\n        this.bjsAMMO.destroy(this._softBodySolver);\r\n        this.bjsAMMO.destroy(this._solver);\r\n        this.bjsAMMO.destroy(this._overlappingPairCache);\r\n        this.bjsAMMO.destroy(this._dispatcher);\r\n        this.bjsAMMO.destroy(this._collisionConfiguration);\r\n\r\n        // Dispose of temp variables\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorA);\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorB);\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorC);\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorD);\r\n        this.bjsAMMO.destroy(this._tmpAmmoTransform);\r\n        this.bjsAMMO.destroy(this._tmpAmmoQuaternion);\r\n        this.bjsAMMO.destroy(this._tmpAmmoConcreteContactResultCallback);\r\n\r\n        this.world = null;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from where should the ray start?\r\n     * @param to where should the ray end?\r\n     * @returns PhysicsRaycastResult\r\n     */\r\n    public raycast(from: Vector3, to: Vector3): PhysicsRaycastResult {\r\n        this.raycastToRef(from, to, this._raycastResult);\r\n        return this._raycastResult;\r\n    }\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param result resulting PhysicsRaycastResult\r\n     */\r\n    public raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult): void {\r\n        this._tmpAmmoVectorRCA = new this.bjsAMMO.btVector3(from.x, from.y, from.z);\r\n        this._tmpAmmoVectorRCB = new this.bjsAMMO.btVector3(to.x, to.y, to.z);\r\n\r\n        const rayCallback = new this.bjsAMMO.ClosestRayResultCallback(this._tmpAmmoVectorRCA, this._tmpAmmoVectorRCB);\r\n        this.world.rayTest(this._tmpAmmoVectorRCA, this._tmpAmmoVectorRCB, rayCallback);\r\n\r\n        result.reset(from, to);\r\n        if (rayCallback.hasHit()) {\r\n            // TODO: do we want/need the body? If so, set all the data\r\n            /*\r\n            var rigidBody = this.bjsAMMO.btRigidBody.prototype.upcast(\r\n                rayCallback.get_m_collisionObject()\r\n            );\r\n            var body = {};\r\n            */\r\n            result.setHitData(\r\n                {\r\n                    x: rayCallback.get_m_hitNormalWorld().x(),\r\n                    y: rayCallback.get_m_hitNormalWorld().y(),\r\n                    z: rayCallback.get_m_hitNormalWorld().z(),\r\n                },\r\n                {\r\n                    x: rayCallback.get_m_hitPointWorld().x(),\r\n                    y: rayCallback.get_m_hitPointWorld().y(),\r\n                    z: rayCallback.get_m_hitPointWorld().z(),\r\n                }\r\n            );\r\n            result.calculateHitDistance();\r\n        }\r\n        this.bjsAMMO.destroy(rayCallback);\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorRCA);\r\n        this.bjsAMMO.destroy(this._tmpAmmoVectorRCB);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,4BAA4B,CAAC;AAEzE,OAAO,EAAE,MAAM,EAAE,MAAM,sBAAsB,CAAC;AAE9C,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAErD,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;AAC/C,OAAO,EAAE,YAAY,EAAE,MAAM,yBAAyB,CAAC;AACvD,OAAO,EAAE,UAAU,EAAE,MAAM,iCAAiC,CAAC;AAI7D,OAAO,EAAE,YAAY,EAAE,MAAM,uCAAuC,CAAC;AACrE,OAAO,EAAE,WAAW,EAAE,MAAM,uCAAuC,CAAC;AAEpE,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,MAAM,sCAAsC,CAAC;AACrE,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;;;;;;;;;;;;AAUlD,MAAO,YAAY;IA8CrB;;;;;OAKG,CACH,YACY,wBAAiC,IAAI,EAC7C,gBAAqB,IAAI,EACzB,uBAA4B,IAAI,CAAA;QAFxB,IAAA,CAAA,qBAAqB,GAArB,qBAAqB,CAAgB;QApDjD;;WAEG,CACH,gEAAgE;QACzD,IAAA,CAAA,OAAO,GAAQ,CAAA,CAAE,CAAC;QAKzB;;WAEG,CACI,IAAA,CAAA,IAAI,GAAW,cAAc,CAAC;QAE7B,IAAA,CAAA,SAAS,GAAW,CAAC,GAAG,EAAE,CAAC;QAC3B,IAAA,CAAA,cAAc,GAAW,CAAC,GAAG,EAAE,CAAC;QAChC,IAAA,CAAA,SAAS,GAAG,CAAC,CAAC;QACd,IAAA,CAAA,cAAc,GAAG,IAAI,gPAAU,EAAE,CAAC;QAalC,IAAA,CAAA,yBAAyB,GAAG,KAAK,CAAC;QAKlC,IAAA,CAAA,gBAAgB,GAAG,IAAI,6OAAO,EAAE,CAAC;QACjC,IAAA,CAAA,iBAAiB,GAAG,IAAI,6OAAO,EAAE,CAAC;QAGlC,IAAA,CAAA,QAAQ,GAAG,IAAI,6OAAO,EAAE,CAAC;QA6TzB,IAAA,CAAA,UAAU,GAAG,IAAI,4OAAM,EAAE,CAAC;QA5S9B,IAAI,OAAO,aAAa,KAAK,UAAU,EAAE,CAAC;YACtC,mOAAM,CAAC,KAAK,CAAC,iFAAiF,CAAC,CAAC;YAChG,OAAO;QACX,CAAC,MAAM,CAAC;YACJ,IAAI,CAAC,OAAO,GAAG,aAAa,CAAC;QACjC,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;YACtB,mOAAM,CAAC,KAAK,CAAC,qEAAqE,CAAC,CAAC;YACpF,OAAO;QACX,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,uBAAuB,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,yCAAyC,EAAE,CAAC;QAC5F,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACxF,IAAI,CAAC,qBAAqB,GAAG,oBAAoB,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC;QACzF,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,mCAAmC,EAAE,CAAC;QACtE,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAAC;QAClE,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAEvK,IAAI,CAAC,qCAAqC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,6BAA6B,EAAE,CAAC;QAC9F,IAAI,CAAC,qCAAqC,CAAC,eAAe,GAAG,CAAC,YAAiB,EAAE,EAAE;YAC/E,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;YACpF,MAAM,UAAU,GAAG,YAAY,CAAC,mBAAmB,EAAE,CAAC;YACtD,MAAM,WAAW,GAAG,YAAY,CAAC,gBAAgB,CAAC;YAClD,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,CAAC;YACzC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,CAAC;YACzC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,CAAC;YACzC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;YAC3C,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;YAC3C,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;YAC3C,IAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC,iBAAiB,EAAE,CAAC;YAC3D,IAAI,CAAC,mBAAmB,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;YACtD,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;QAC1C,CAAC,CAAC;QAEF,IAAI,CAAC,cAAc,GAAG,IAAI,kQAAoB,EAAE,CAAC;QAEjD,6BAA6B;QAC7B,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QACxD,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;QACrC,IAAI,CAAC,kBAAkB,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED;;;OAGG,CACI,gBAAgB,GAAA;QACnB,OAAO,CAAC,CAAC;IACb,CAAC;IAED;;;OAGG,CACI,UAAU,CAAC,OAAgB,EAAA;QAC9B,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC5C,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAClE,CAAC;IAED;;;OAGG,CACI,WAAW,CAAC,QAAgB,EAAA;QAC/B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACI,gBAAgB,CAAC,aAAqB,EAAA;QACzC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;IACxC,CAAC;IAED;;;OAGG,CACI,WAAW,CAAC,QAAgB,EAAA;QAC/B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,CAAC;IAED;;;OAGG,CACI,WAAW,GAAA;QACd,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAiBD,+HAA+H;IACvH,oBAAoB,CAAC,QAAyB,EAAA;QAClD,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;QACvC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,qCAAqC,CAAC,CAAC;QACzF,OAAO,IAAI,CAAC,yBAAyB,CAAC;IAC1C,CAAC;IACD,iDAAiD;IACjD,yHAAyH;IACzH,wEAAwE;IAChE,wBAAwB,CAAC,SAA0B,EAAE,SAA0B,EAAA;QACnF,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;QACvC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,qCAAqC,CAAC,CAAC;QACrH,OAAO,IAAI,CAAC,yBAAyB,CAAC;IAC1C,CAAC;IAED,yEAAyE;IACzE,iFAAiF;IACjF,EAAE;IACF,0DAA0D;IAC1D,4UAA4U;IAC5U,kGAAkG;IAC1F,eAAe,CAAC,WAAmB,CAAC,GAAG,EAAE,EAAE,WAAmB,EAAE,EAAE,gBAAwB,CAAC,GAAG,EAAE,EAAA;QACpG,IAAI,QAAQ,IAAI,CAAC,EAAE,CAAC;YAChB,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3C,CAAC,MAAM,CAAC;YACJ,MAAO,QAAQ,GAAG,CAAC,IAAI,QAAQ,GAAG,CAAC,CAAE,CAAC;gBAClC,IAAI,QAAQ,GAAG,aAAa,GAAG,aAAa,EAAE,CAAC;oBAC3C,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;oBACvC,QAAQ,GAAG,CAAC,CAAC;gBACjB,CAAC,MAAM,CAAC;oBACJ,QAAQ,IAAI,aAAa,CAAC;oBAC1B,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;gBAChD,CAAC;gBACD,QAAQ,EAAE,CAAC;YACf,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;;;OAMG,CACI,WAAW,CAAC,KAAa,EAAE,SAAiC,EAAA;QAC/D,KAAK,MAAM,QAAQ,IAAI,SAAS,CAAE,CAAC;YAC/B,sDAAsD;YACtD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;gBACjB,QAAQ,CAAC,UAAU,EAAE,CAAC;YAC1B,CAAC;QACL,CAAC;QAED,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QAE/G,KAAK,MAAM,YAAY,IAAI,SAAS,CAAE,CAAC;YACnC,8EAA8E;YAC9E,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC;gBACpB,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YACtC,CAAC,MAAM,CAAC;gBACJ,YAAY,CAAC,SAAS,EAAE,CAAC;YAC7B,CAAC;YAED,yBAAyB;YACzB,IAAI,YAAY,CAAC,0BAA0B,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACrD,IAAI,IAAI,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE,CAAC;oBAC1C,KAAK,MAAM,eAAe,IAAI,YAAY,CAAC,0BAA0B,CAAE,CAAC;wBACpE,KAAK,MAAM,aAAa,IAAI,eAAe,CAAC,cAAc,CAAE,CAAC;4BACzD,IAAI,YAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,aAAa,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,CAAC;gCAC9E,IAAI,IAAI,CAAC,wBAAwB,CAAC,YAAY,EAAE,aAAa,CAAC,EAAE,CAAC;oCAC7D,YAAY,CAAC,SAAS,CAAC;wCACnB,IAAI,EAAE,aAAa,CAAC,WAAW;wCAC/B,KAAK,EAAE,IAAI,CAAC,gBAAgB;wCAC5B,QAAQ,EAAE,IAAI,CAAC,mBAAmB;wCAClC,OAAO,EAAE,IAAI,CAAC,kBAAkB;wCAChC,MAAM,EAAE,IAAI,CAAC,iBAAiB;qCACjC,CAAC,CAAC;oCACH,aAAa,CAAC,SAAS,CAAC;wCACpB,IAAI,EAAE,YAAY,CAAC,WAAW;wCAC9B,KAAK,EAAE,IAAI,CAAC,gBAAgB;wCAC5B,QAAQ,EAAE,IAAI,CAAC,mBAAmB;wCAClC,OAAO,EAAE,IAAI,CAAC,kBAAkB;wCAChC,MAAM,EAAE,IAAI,CAAC,iBAAiB;qCACjC,CAAC,CAAC;gCACP,CAAC;4BACL,CAAC;wBACL,CAAC;oBACL,CAAC;gBACL,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;OAGG,CACK,cAAc,CAAC,QAAyB,EAAA;QAC5C,IAAI,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,YAAY,EAAE,CAAC;YACjD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAC7B,CAAC,MAAM,CAAC;YACJ,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QACxC,CAAC;IACL,CAAC;IAED;;;OAGG,CACK,SAAS,CAAC,QAAyB,EAAA;QACvC,MAAM,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QACxD,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,EAAE,CAAC;QACvC,IAAI,IAAS,CAAC;QACd,IAAI,aAAkB,CAAC;QACvB,IAAI,CAAC,EAAE,CAAC,EAAE,CAAS,CAAC;QACpB,MAAM,IAAI,GAAmB,EAAE,CAAC;QAChC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;YAClC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC1B,aAAa,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC/B,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;YACtB,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;YACtB,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC;QACD,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC/B,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;YACvB,QAAQ,CAAC,MAAM,OAAG,4PAAW,EAAC,OAAO,EAAE;gBAAE,MAAM,EAAE,IAAI;gBAAE,QAAQ,EAAa,MAAM;YAAA,CAAE,CAAC,CAAC;QAC1F,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,MAAM,OAAG,6PAAY,EAAC,KAAK,EAAE;gBAAE,KAAK,EAAE,KAAK;gBAAE,IAAI,EAAE,IAAI;gBAAE,QAAQ,EAAQ,MAAM;YAAA,CAAE,CAAC,CAAC;QAChG,CAAC;IACL,CAAC;IAED;;;OAGG,CACK,oBAAoB,CAAC,QAAyB,EAAA;QAClD,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjF,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC/B,IAAI,eAAe,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,YAAY,CAAC,CAAC;QACxE,IAAI,CAAC,eAAe,EAAE,CAAC;YACnB,eAAe,GAAG,EAAE,CAAC;QACzB,CAAC;QACD,IAAI,aAAa,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,UAAU,CAAC,CAAC;QACpE,IAAI,CAAC,aAAa,EAAE,CAAC;YACjB,aAAa,GAAG,EAAE,CAAC;QACvB,CAAC;QAED,MAAM,UAAU,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;QAC9C,MAAM,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QACxD,IAAI,IAAS,CAAC;QACd,IAAI,aAAkB,CAAC;QACvB,IAAI,CAAC,EAAE,CAAC,EAAE,CAAS,CAAC;QACpB,IAAI,EAAE,EAAE,EAAE,EAAE,EAAU,CAAC;QACvB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;YAClC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC1B,aAAa,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC/B,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;YACtB,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;YACtB,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,GAAG,eAAe,CAAC;YACxC,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YACnC,EAAE,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;YACrB,EAAE,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;YACrB,EAAE,GAAG,WAAW,CAAC,CAAC,EAAE,GAAG,eAAe,CAAC;YAEvC,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC3B,eAAe,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC/B,eAAe,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC/B,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;YAC1B,aAAa,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;YAC9B,aAAa,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;QAClC,CAAC;QAED,MAAM,UAAU,GAAG,IAAI,qPAAU,EAAE,CAAC;QAEpC,UAAU,CAAC,SAAS,GAAG,eAAe,CAAC;QACvC,UAAU,CAAC,OAAO,GAAG,aAAa,CAAC;QACnC,UAAU,CAAC,GAAG,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,MAAM,CAAC,CAAC;QAC7D,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,SAAS,CAAC,CAAC;QACnE,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;YAC9B,UAAU,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;QAC7C,CAAC;QAED,UAAU,CAAC,WAAW,CAAO,MAAM,CAAC,CAAC;IACzC,CAAC;IAGD;;;;;OAKG,CACI,YAAY,CAAC,QAAyB,EAAE,KAAc,EAAE,YAAqB,EAAA;QAChF,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;YAChC,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC;YACxC,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC;YAErC,kDAAkD;YAClD,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;gBACpD,YAAY,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC;YACpF,CAAC;YAED,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;YACpE,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YAE5C,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QAC3D,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;QACpD,CAAC;IACL,CAAC;IAED;;;;;OAKG,CACI,UAAU,CAAC,QAAyB,EAAE,KAAc,EAAE,YAAqB,EAAA;QAC9E,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;YAChC,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC;YACxC,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC;YAErC,kDAAkD;YAClD,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;gBACpD,MAAM,gBAAgB,GAAG,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;gBAC3E,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACvI,CAAC,MAAM,CAAC;gBACJ,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;YACxE,CAAC;YAED,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YAE5C,QAAQ,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QACzD,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;QACpD,CAAC;IACL,CAAC;IAED;;;OAGG,CACI,mBAAmB,CAAC,QAAyB,EAAA;QAChD,iFAAiF;QAEjF,QAAQ,CAAC,WAAW,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpC,2BAA2B;QAC3B,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;YAClB,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;gBACvB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;gBACjC,QAAQ,CAAC,WAAW,EAAE,CAAC;YAC3B,CAAC;YACD,OAAO;QACX,CAAC;QAED,IAAI,QAAQ,CAAC,kBAAkB,EAAE,EAAE,CAAC;YAChC,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC7C,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACvC,QAAQ,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;YACjC,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAChB,QAAQ,CAAC,SAAS,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC1C,QAAQ,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC3D,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7H,QAAQ,CAAC,kBAAkB,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAC;gBACrE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACxC,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC;gBAChC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC9C,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAClC,IAAI,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,gBAAgB,EAAE,CAAC;oBACrD,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClE,CAAC;gBACD,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;gBAChE,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAClF,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACtF,CAAC,MAAM,CAAC;gBACJ,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACzD,MAAM,cAAc,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;gBACtD,QAAQ,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBACzC,cAAc,CAAC,WAAW,EAAE,CAAC;gBAC7B,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;oBACb,QAAQ,CAAC,qBAAqB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;gBACvD,CAAC;gBACD,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAClH,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAC5B,QAAQ,CAAC,MAAM,CAAC,kBAAmB,CAAC,CAAC,EACrC,QAAQ,CAAC,MAAM,CAAC,kBAAmB,CAAC,CAAC,EACrC,QAAQ,CAAC,MAAM,CAAC,kBAAmB,CAAC,CAAC,EACrC,QAAQ,CAAC,MAAM,CAAC,kBAAmB,CAAC,CAAC,CACxC,CAAC;gBACF,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBAC/C,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACpD,MAAM,aAAa,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;gBAC5E,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC;gBACzG,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBAElD,2CAA2C;gBAC3C,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;oBACb,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC,eAAe,CAAC,CAAC;oBAChF,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAC;gBACrE,CAAC;gBAED,kFAAkF;gBAClF,IAAI,QAAQ,CAAC,IAAI,IAAI,8PAAe,CAAC,UAAU,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;oBACzE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC,uBAAuB,CAAC,CAAC;gBAC5F,CAAC;gBAED,yFAAyF;gBACzF,IAAI,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,YAAY,IAAI,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,UAAU,EAAE,CAAC;oBACjG,MAAM,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;oBACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC,CAAC;oBAC9D,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;oBACpE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC7C,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7C,CAAC;gBAED,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBACzC,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACvC,IAAI,KAAK,IAAI,IAAI,EAAE,CAAC;oBAChB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC/C,CAAC,MAAM,CAAC;oBACJ,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;gBAClC,CAAC;gBACD,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC5B,QAAQ,CAAC,WAAW,CAAC,SAAS,GAAG,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC;oBAAC,IAAI;oBAAE,MAAM;oBAAE,aAAa;oBAAE,cAAc;oBAAE,YAAY;oBAAE,QAAQ;iBAAC,CAAC,CAAC;YAClJ,CAAC;YACD,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;QAClE,CAAC;IACL,CAAC;IAED;;;OAGG,CACI,iBAAiB,CAAC,QAAyB,EAAA;QAC9C,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAChB,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACpD,CAAC,MAAM,CAAC;gBACJ,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACrD,CAAC;YAED,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;gBACvB,KAAK,MAAM,CAAC,IAAI,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAE,CAAC;oBAC7C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC5B,CAAC;gBACD,QAAQ,CAAC,WAAW,CAAC,SAAS,GAAG,EAAE,CAAC;YACxC,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;OAGG,CACI,aAAa,CAAC,aAAmC,EAAA;QACpD,MAAM,QAAQ,GAAG,aAAa,CAAC,YAAY,CAAC,WAAW,CAAC;QACxD,MAAM,aAAa,GAAG,aAAa,CAAC,iBAAiB,CAAC,WAAW,CAAC;QAClE,IAAI,CAAC,QAAQ,IAAI,CAAC,aAAa,EAAE,CAAC;YAC9B,OAAO;QACX,CAAC;QAED,qFAAqF;QACrF,IAAI,aAAa,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;YACnC,OAAO;QACX,CAAC;QAED,MAAM,SAAS,GAAG,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC;QAChD,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;YACvB,SAAS,CAAC,SAAS,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/C,CAAC;QACD,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;YAC5B,SAAS,CAAC,cAAc,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpD,CAAC;QAED,IAAI,KAAU,CAAC;QACf,OAAQ,aAAa,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAC/B,KAAK,wPAAY,CAAC,aAAa,CAAC;gBAAC,CAAC;oBAC9B,MAAM,QAAQ,GAAuB,SAAU,CAAC,WAAW,CAAC;oBAC5D,IAAI,QAAQ,EAAE,CAAC;wBACX,SAAS,CAAC,SAAS,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;wBACvD,SAAS,CAAC,cAAc,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC/D,CAAC;oBAED,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;oBACvC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAExF,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC5C,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;oBAE5G,KAAK,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC;oBACrG,MAAM;gBACV,CAAC;YACD,KAAK,wPAAY,CAAC,UAAU,CAAC;gBAAC,CAAC;oBAC3B,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;wBACtB,SAAS,CAAC,QAAQ,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC9C,CAAC;oBACD,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;wBAC3B,SAAS,CAAC,aAAa,GAAG,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACnD,CAAC;oBAED,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;oBACvC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAExF,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC5C,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;oBAE5G,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;oBACtC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAEpF,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC3C,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,EAAE,SAAS,CAAC,aAAa,CAAC,CAAC,EAAE,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;oBAExG,KAAK,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,cAAc,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;oBACxH,MAAM;gBACV,CAAC;YACD,KAAK,wPAAY,CAAC,kBAAkB,CAAC;gBAAC,CAAC;oBACnC,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;oBACvC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAExF,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC5C,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;oBAE5G,KAAK,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC;oBACrG,MAAM;gBACV,CAAC;YACD,OAAO,CAAC;gBAAC,CAAC;oBACN,mOAAM,CAAC,IAAI,CAAC,uGAAuG,CAAC,CAAC;oBAErH,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;oBACvC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAExF,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC5C,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,EAAE,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;oBAE5G,KAAK,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC;oBACrG,MAAM;gBACV,CAAC;QACL,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC1E,aAAa,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;IAC7C,CAAC;IAED;;;OAGG,CACI,WAAW,CAAC,aAAmC,EAAA;QAClD,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,aAAa,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAClE,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IAC3D,CAAC;IAED,sEAAsE;IAC9D,aAAa,CAAC,cAAmB,EAAE,cAAqC,EAAE,MAA6B,EAAA;QAC3G,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC;YAChF,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,OAAO,GAAG,EAAE,CAAC;YACjB,CAAC;YACD,IAAI,eAAe,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,YAAY,CAAC,CAAC;YACxE,IAAI,CAAC,eAAe,EAAE,CAAC;gBACnB,eAAe,GAAG,EAAE,CAAC;YACzB,CAAC;YAED,IAAI,WAAW,CAAC;YAEhB,IAAI,cAAc,IAAI,cAAc,KAAK,MAAM,EAAE,CAAC;gBAC9C,6EAA6E;gBAC7E,kEAAkE;gBAClE,wFAAwF;gBACxF,IAAI,kBAAkB,CAAC;gBACvB,IAAI,cAAc,CAAC,kBAAkB,EAAE,CAAC;oBACpC,kBAAkB,GAAG,cAAc,CAAC,kBAAkB,CAAC;gBAC3D,CAAC,MAAM,IAAI,cAAc,CAAC,QAAQ,EAAE,CAAC;oBACjC,kBAAkB,GAAG,gPAAU,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACrI,CAAC,MAAM,CAAC;oBACJ,kBAAkB,GAAG,gPAAU,CAAC,QAAQ,EAAE,CAAC;gBAC/C,CAAC;gBACD,MAAM,cAAc,GAAG,4OAAM,CAAC,OAAO,CAAC,6OAAO,CAAC,GAAG,EAAE,EAAE,kBAAkB,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAClG,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC5C,MAAM,EAAE,GAAG,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBAC5C,WAAW,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC/C,CAAC,MAAM,CAAC;gBACJ,sEAAsE;gBACtE,4OAAM,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC3F,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;YAClC,CAAC;YACD,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YACrC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,CAAE,CAAC;gBACjC,MAAM,SAAS,GAAG,EAAE,CAAC;gBACrB,IAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,CAAE,CAAC;oBACrC,IAAI,CAAC,GAAG,IAAI,6OAAO,CACf,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC/C,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC/C,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAClD,CAAC;oBAEF,CAAC,GAAG,6OAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;oBAEjD,IAAI,GAAQ,CAAC;oBACb,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;wBACb,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;wBACpB,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC,MAAM,CAAC;wBACJ,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC;oBACD,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;oBAE5B,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxB,CAAC;gBACD,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,aAAa,EAAE,CAAC;YACpB,CAAC;YAED,MAAM,WAAW,GAAG,MAAM,CAAC,cAAc,EAAE,CAAC;YAC5C,KAAK,MAAM,CAAC,IAAI,WAAW,CAAE,CAAC;gBAC1B,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC;QACL,CAAC;QACD,OAAO,aAAa,CAAC;IACzB,CAAC;IAED;;;;;;OAMG,CACK,eAAe,CAAC,QAAyB,EAAA;QAC7C,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC/B,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC;YAChF,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,OAAO,GAAG,EAAE,CAAC;YACjB,CAAC;YACD,IAAI,eAAe,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,YAAY,CAAC,CAAC;YACxE,IAAI,CAAC,eAAe,EAAE,CAAC;gBACnB,eAAe,GAAG,EAAE,CAAC;YACzB,CAAC;YACD,IAAI,aAAa,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,UAAU,CAAC,CAAC;YACpE,IAAI,CAAC,aAAa,EAAE,CAAC;gBACjB,aAAa,GAAG,EAAE,CAAC;YACvB,CAAC;YACD,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,SAAS,GAAG,EAAE,CAAC;YACrB,MAAM,QAAQ,GAAG,EAAE,CAAC;YACpB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAE,CAAC;gBACjD,IAAI,CAAC,GAAG,IAAI,6OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxF,IAAI,CAAC,GAAG,IAAI,6OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAClF,CAAC,GAAG,6OAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;gBAC7D,CAAC,GAAG,6OAAO,CAAC,eAAe,CAAC,CAAC,EAAE,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;gBACxD,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACjC,CAAC;YAED,MAAM,UAAU,GAAG,IAAI,qPAAU,EAAE,CAAC;YAEpC,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;YACjC,UAAU,CAAC,OAAO,GAAG,QAAQ,CAAC;YAC9B,UAAU,CAAC,GAAG,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,MAAM,CAAC,CAAC;YAC7D,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,SAAS,CAAC,CAAC;YACnE,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;gBAC9B,UAAU,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAC7C,CAAC;YAED,UAAU,CAAC,WAAW,CAAO,MAAM,CAAC,CAAC;YAErC,MAAM,CAAC,QAAQ,GAAG,6OAAO,CAAC,IAAI,EAAE,CAAC;YACjC,MAAM,CAAC,kBAAkB,GAAG,IAAI,CAAC;YACjC,MAAM,CAAC,QAAQ,GAAG,6OAAO,CAAC,IAAI,EAAE,CAAC;YACjC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAEhC,OAAO,UAAU,CAAC;QACtB,CAAC;QACD,OAAO,qPAAU,CAAC,eAAe,CAAO,MAAM,CAAC,CAAC;IACpD,CAAC;IAED;;;;OAIG,CACK,eAAe,CAAC,QAAyB,EAAA;QAC7C,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC/B,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;YAC9B,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,OAAO,GAAG,EAAE,CAAC;YACjB,CAAC;YAED,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YAClD,MAAM,eAAe,GAAG,UAAU,CAAC,SAAS,CAAC;YAC7C,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,CAAC;YAEzC,IAAI,eAAe,KAAK,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE,CAAC;gBACrD,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;YAC9C,CAAC,MAAM,CAAC;gBACJ,MAAM,SAAS,GAAG,EAAE,CAAC;gBACrB,MAAM,QAAQ,GAAG,EAAE,CAAC;gBACpB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAE,CAAC;oBACjD,MAAM,CAAC,GAAG,IAAI,6OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1F,MAAM,CAAC,GAAG,IAAI,6OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACpF,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/B,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClC,CAAC;gBACD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,UAAU,EAAE,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;gBAE7J,MAAM,UAAU,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC9C,MAAM,YAAY,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;gBAC5C,IAAI,IAAS,CAAC;gBACd,IAAI,WAAgB,CAAC;gBACrB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,CAAE,CAAC;oBAClC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;oBAC1B,WAAW,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC7B,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAClC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1C,CAAC;gBACD,OAAO,QAAQ,CAAC;YACpB,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;OAIG,CACK,YAAY,CAAC,QAAyB,EAAA;QAC1C,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC/B,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;YAC9B,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,OAAO,GAAG,EAAE,CAAC;YACjB,CAAC;YAED,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YAClD,MAAM,eAAe,GAAG,UAAU,CAAC,SAAS,CAAC;YAC7C,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,CAAC;YAEzC,IAAI,eAAe,KAAK,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE,CAAC;gBACrD,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;YAC9C,CAAC,MAAM,CAAC;gBACJ,MAAM,GAAG,GAAG,eAAe,CAAC,MAAM,CAAC;gBACnC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;gBACpC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBAC7B,MAAM,IAAI,GAAG,QAAQ,GAAG,CAAC,CAAC;gBAC1B,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1F,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvH,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC5G,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;gBAE7I,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,WAAW,CAC9D,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,EACzB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,eAAe,EACpB,QAAQ,EACR,QAAQ,EACR,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,EAChC,IAAI,CACP,CAAC;gBACF,OAAO,SAAS,CAAC;YACrB,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;OAIG,CACK,WAAW,CAAC,QAAyB,EAAA;QACzC,IAAI,GAAW,CAAC;QAChB,IAAI,QAAgB,CAAC;QACrB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QAClD,MAAM,eAAe,GAAG,UAAU,CAAC,SAAS,CAAC;QAC7C,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,CAAC;QAEzC,IAAI,eAAe,KAAK,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE,CAAC;YACrD,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QAC9C,CAAC;QAED,gCAAgC;QAChC,UAAU,CAAC,WAAW,CAAO,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAEpD,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;QAE5B,4CAA4C;QAC5C,MAAM,aAAa,GAAiC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAS,EAAE,CAAG,CAAC,AAAF,GAAK,CAAC,CAAC,CAAC;QAC5F,MAAM,OAAO,GAAG,CAAC,WAAmB,EAAE,YAAoB,EAAU,CAAG,CAAD,UAAY,GAAG,YAAY,CAAC;QAClG,MAAM,OAAO,GAAW,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEtD,IAAI,OAAO,KAAK,CAAC,EAAE,CAAC;YAChB,YAAY;YACZ,GAAG,GAAG,eAAe,CAAC,MAAM,CAAC;YAC7B,QAAQ,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1F,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAChH,CAAC,MAAM,CAAC;YACJ,eAAe;YACf,QAAQ,CAAC,WAAW,GAAG,KAAK,CAAC;YAC7B,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAC9C,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACzC,IAAI,KAAK,KAAK,IAAI,EAAE,CAAC;gBACjB,mOAAM,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;gBACpD,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;YAC9C,CAAC;YACD,GAAG,GAAG,WAAW,CAAC,MAAM,CAAC;YACzB,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpF,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1G,CAAC;QAED,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAE7B,IAAI,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QACnD,WAAW,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;QAEhD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,QAAQ,GAAG,CAAC,EAAE,WAAW,CAAC,CAAC;QACnK,QAAQ,CAAC,SAAS,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC1C,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED;;;;OAIG,CACK,aAAa,CAAC,QAAyB,EAAA;QAC3C,IAAI,WAAW,GAAQ,IAAI,CAAC;QAC5B,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QACrD,CAAC;QACD,IAAI,WAAW,IAAI,IAAI,EAAE,CAAC;YACtB,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QACrD,CAAC;QACD,OAAO,WAAW,CAAC;IACvB,CAAC;IAED,0EAA0E;IAClE,aAAa,CAAC,iBAAsB,EAAE,cAAqC,EAAE,MAA6B,EAAA;QAC9G,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC;YAChF,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,OAAO,GAAG,EAAE,CAAC;YACjB,CAAC;YACD,IAAI,eAAe,GAAG,MAAM,CAAC,eAAe,CAAC,4OAAY,CAAC,YAAY,CAAC,CAAC;YACxE,IAAI,CAAC,eAAe,EAAE,CAAC;gBACnB,eAAe,GAAG,EAAE,CAAC;YACzB,CAAC;YACD,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YACrC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,CAAE,CAAC;gBACjC,MAAM,SAAS,GAAG,EAAE,CAAC;gBACrB,IAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,CAAE,CAAC;oBACrC,IAAI,CAAC,GAAG,IAAI,6OAAO,CACf,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC/C,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC/C,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAClD,CAAC;oBAEF,6BAA6B;oBAC7B,4OAAM,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;oBAC3F,CAAC,GAAG,6OAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;oBAErD,IAAI,GAAQ,CAAC;oBACb,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;wBACb,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;wBACpB,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC,MAAM,CAAC;wBACJ,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC/B,CAAC;oBACD,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;oBAE5B,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxB,CAAC;gBACD,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC/C,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC/C,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC/C,aAAa,EAAE,CAAC;YACpB,CAAC;YAED,MAAM,WAAW,GAAG,MAAM,CAAC,cAAc,EAAE,CAAC;YAC5C,KAAK,MAAM,CAAC,IAAI,WAAW,CAAE,CAAC;gBAC1B,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;YAC9E,CAAC;QACL,CAAC;QACD,OAAO,aAAa,CAAC;IACzB,CAAC;IAEO,YAAY,CAAC,QAAyB,EAAE,cAAc,GAAG,KAAK,EAAA;QAClE,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAE/B,IAAI,WAAgB,CAAC;QACrB,MAAM,eAAe,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC;QAEpD,IAAI,CAAC,cAAc,EAAE,CAAC;YAClB,MAAM,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChG,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;YAEjD,kDAAkD;YAClD,IAAI,aAAa,GAAG,CAAC,CAAC;YACtB,KAAK,MAAM,SAAS,IAAI,YAAY,CAAE,CAAC;gBACnC,MAAM,aAAa,GAAG,SAAS,CAAC,kBAAkB,EAAE,CAAC;gBACrD,IAAI,aAAa,EAAE,CAAC;oBAChB,IAAI,aAAa,CAAC,IAAI,IAAI,8PAAe,CAAC,YAAY,EAAE,CAAC;wBACrD,4CAA4C;wBAC5C,MAAM,+GAA+G,CAAC;oBAC1H,CAAC;oBACD,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;oBAE/C,wDAAwD;oBACxD,MAAM,SAAS,GAAG,SAAS,CAAC,MAAO,CAAC,cAAc,EAAE,CAAC,KAAK,EAAE,CAAC;oBAC7D,MAAM,CAAC,GAAG,IAAI,6OAAO,EAAE,CAAC;oBACxB,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACvB,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAEhI,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAC5B,SAAS,CAAC,kBAAmB,CAAC,CAAC,EAC/B,SAAS,CAAC,kBAAmB,CAAC,CAAC,EAC/B,SAAS,CAAC,kBAAmB,CAAC,CAAC,EAC/B,SAAS,CAAC,kBAAmB,CAAC,CAAC,CAClC,CAAC;oBACF,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;oBAC5D,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;oBACzD,aAAa,CAAC,OAAO,EAAE,CAAC;oBACxB,aAAa,EAAE,CAAC;gBACpB,CAAC;YACL,CAAC;YAED,IAAI,aAAa,GAAG,CAAC,EAAE,CAAC;gBACpB,0CAA0C;gBAC1C,IAAI,QAAQ,CAAC,IAAI,IAAI,8PAAe,CAAC,UAAU,EAAE,CAAC;oBAC9C,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;oBAChD,IAAI,KAAK,EAAE,CAAC;wBACR,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;wBACrD,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC7C,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;wBAE5D,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;oBAC7D,CAAC;gBACL,CAAC;gBACD,OAAO,WAAW,CAAC;YACvB,CAAC,MAAM,CAAC;gBACJ,sEAAsE;gBACtE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBAClC,WAAW,GAAG,IAAI,CAAC;YACvB,CAAC;QACL,CAAC;QAED,OAAQ,QAAQ,CAAC,IAAI,EAAE,CAAC;YACpB,KAAK,8PAAe,CAAC,cAAc;gBAC/B,0FAA0F;gBAC1F,QAAI,gQAAa,EAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,MAAM,CAAC,QAAI,gQAAa,EAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC;oBAC7H,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACxE,CAAC,MAAM,CAAC;oBACJ,kGAAkG;oBAClG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACvC,MAAM,SAAS,GAAG;wBAAC,IAAI,CAAC,eAAe;qBAAC,CAAC;oBACzC,MAAM,KAAK,GAAG;wBAAC,CAAC;qBAAC,CAAC;oBAClB,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;oBAEvE,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACnG,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACtD,CAAC;gBACD,MAAM;YACV,KAAK,8PAAe,CAAC,eAAe;gBAChC,CAAC;oBACG,0EAA0E;oBAC1E,oFAAoF;oBACpF,MAAM,SAAS,GAAG,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC;oBACxC,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC,CAAC;gBAChG,CAAC;gBACD,MAAM;YACV,KAAK,8PAAe,CAAC,gBAAgB;gBACjC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACnG,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACrE,MAAM;YACV,KAAK,8PAAe,CAAC,aAAa,CAAC;YACnC,KAAK,8PAAe,CAAC,WAAW;gBAC5B,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACnG,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBAChE,MAAM;YACV,KAAK,8PAAe,CAAC,YAAY,CAAC;gBAAC,CAAC;oBAChC,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;wBACjC,+DAA+D;wBAC/D,8DAA8D;wBAC9D,IAAI,IAAI,CAAC,0BAA0B,EAAE,CAAC;4BAClC,WAAW,GAAG,IAAI,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC;wBAC5D,CAAC,MAAM,CAAC;4BACJ,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;4BAClD,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;4BAC7C,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;4BAClE,IAAI,aAAa,IAAI,CAAC,EAAE,CAAC;gCACrB,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;4BACrD,CAAC,MAAM,CAAC;gCACJ,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;4BACnE,CAAC;wBACL,CAAC;wBACD,MAAM;oBACV,CAAC;gBACL,CAAC;YACD,sCAAsC;YACtC,0CAA0C;YAC1C,KAAK,8PAAe,CAAC,kBAAkB,CAAC;gBAAC,CAAC;oBACtC,IAAI,IAAI,CAAC,gCAAgC,EAAE,CAAC;wBACxC,WAAW,GAAG,IAAI,CAAC,gCAAgC,CAAC,QAAQ,CAAC,CAAC;oBAClE,CAAC,MAAM,CAAC;wBACJ,MAAM,UAAU,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;wBACxD,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;wBACrE,IAAI,aAAa,IAAI,CAAC,EAAE,CAAC;4BACrB,mCAAmC;4BACnC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;4BAChD,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;wBACrD,CAAC,MAAM,CAAC;4BACJ,WAAW,GAAG,UAAU,CAAC;wBAC7B,CAAC;oBACL,CAAC;oBACD,MAAM;gBACV,CAAC;YACD,KAAK,8PAAe,CAAC,UAAU;gBAC3B,mJAAmJ;gBACnJ,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACpE,MAAM;YACV,KAAK,8PAAe,CAAC,cAAc;gBAC/B,2DAA2D;gBAC3D,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC3C,MAAM;YACV,KAAK,8PAAe,CAAC,gBAAgB;gBACjC,kEAAkE;gBAClE,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;gBAC7C,MAAM;YACV,KAAK,8PAAe,CAAC,aAAa;gBAC9B,yEAAyE;gBACzE,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC1C,MAAM;YACV,KAAK,8PAAe,CAAC,YAAY;gBAC7B,qEAAqE;gBACrE,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBACzC,MAAM;YACV;gBACI,mOAAM,CAAC,IAAI,CAAC,kEAAkE,CAAC,CAAC;gBAChF,MAAM;QACd,CAAC;QAED,OAAO,WAAW,CAAC;IACvB,CAAC;IAED;;;OAGG,CACI,gCAAgC,CAAC,QAAyB,EAAA;QAC7D,QAAQ,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAChF,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAErJ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,EAAE,CAAC;YACtC,IAAI,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBAC3B,IAAI,CAAC,cAAc,CAAC,GAAG,CACnB,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAC3C,CAAC;gBACF,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACrE,CAAC;QACL,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,MAAM,CAAC,kBAAkB,CAAC,GAAG,CAClC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EACxC,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAC3C,CAAC;QACN,CAAC;IACL,CAAC;IAED;;;;;OAKG,CACI,4BAA4B,CAAC,QAAyB,EAAE,WAAoB,EAAE,WAAuB,EAAA;QACxG,MAAM,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC;QAEvD,mEAAmE;QACnE,IACI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IACzD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IACzD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IACzD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IAC3D,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IAC3D,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,IAC3D,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,gPAAO,EAC7D,CAAC;YACC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;YAC3E,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAEtC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;YAC7F,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAC3C,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAE9C,IAAI,QAAQ,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC;gBACrB,uDAAuD;gBACvD,MAAM,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;gBAC1D,IAAI,WAAW,EAAE,CAAC;oBACd,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;gBACzC,CAAC;YACL,CAAC,MAAM,CAAC;gBACJ,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;YACpC,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;OAGG,CACI,WAAW,GAAA;QACd,OAAO,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC;IACtC,CAAC;IAED;;;;OAIG,CACI,iBAAiB,CAAC,QAAyB,EAAE,QAAiB,EAAA;QACjE,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC9D,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACjE,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,kBAAkB,CAAC,QAAyB,EAAE,QAAiB,EAAA;QAClE,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,QAAQ,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC/D,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAClE,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,iBAAiB,CAAC,QAAyB,EAAA;QAC9C,IAAI,CAAM,CAAC;QACX,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;QAC9C,CAAC,MAAM,CAAC;YACJ,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC;QACjD,CAAC;QACD,IAAI,CAAC,CAAC,EAAE,CAAC;YACL,OAAO,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,6OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACxB,OAAO,MAAM,CAAC;IAClB,CAAC;IAED;;;;OAIG,CACI,kBAAkB,CAAC,QAAyB,EAAA;QAC/C,IAAI,CAAM,CAAC;QACX,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QAC/C,CAAC,MAAM,CAAC;YACJ,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;QAClD,CAAC;QACD,IAAI,CAAC,CAAC,EAAE,CAAC;YACL,OAAO,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,6OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACxB,OAAO,MAAM,CAAC;IAClB,CAAC;IAED;;;;OAIG,CACI,WAAW,CAAC,QAAyB,EAAE,IAAY,EAAA;QACtD,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACnD,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC5C,CAAC;QACD,QAAQ,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;IACrC,CAAC;IAED;;;;OAIG,CACI,WAAW,CAAC,QAAyB,EAAA;QACxC,OAAO,QAAQ,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,CAAC;IAC1C,CAAC;IAED;;;;OAIG,CACI,eAAe,CAAC,QAAyB,EAAA;QAC5C,OAAO,QAAQ,CAAC,WAAW,CAAC,QAAQ,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED;;;;OAIG,CACI,eAAe,CAAC,QAAyB,EAAE,QAAgB,EAAA;QAC9D,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACvD,CAAC,MAAM,CAAC;YACJ,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC/C,CAAC;QACD,QAAQ,CAAC,WAAW,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7C,CAAC;IAED;;;;OAIG,CACI,kBAAkB,CAAC,QAAyB,EAAA;QAC/C,OAAO,QAAQ,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,CAAC;IACjD,CAAC;IAED;;;;OAIG,CACI,kBAAkB,CAAC,QAAyB,EAAE,WAAmB,EAAA;QACpE,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QACjD,QAAQ,CAAC,WAAW,CAAC,WAAW,GAAG,WAAW,CAAC;IACnD,CAAC;IAED;;;;OAIG,CACI,eAAe,CAAC,QAAyB,EAAA;QAC5C,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,mOAAM,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;YAC1D,OAAO,CAAC,CAAC;QACb,CAAC;QACD,OAAO,QAAQ,CAAC,WAAW,CAAC,QAAQ,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED;;;;;OAKG,CACI,eAAe,CAAC,QAAyB,EAAE,QAAgB,EAAA;QAC9D,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,IAAI,QAAQ,CAAC,IAAI,KAAK,8PAAe,CAAC,gBAAgB,EAAE,CAAC;gBACrD,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACnD,QAAQ,CAAC,WAAW,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAC7C,CAAC,MAAM,CAAC;gBACJ,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC5C,QAAQ,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC;YACtC,CAAC;QACL,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;QAC9D,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,gBAAgB,CAAC,QAAyB,EAAA;QAC7C,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,mOAAM,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC;YAC3D,OAAO,CAAC,CAAC;QACb,CAAC;QACD,OAAO,QAAQ,CAAC,WAAW,CAAC,SAAS,IAAI,CAAC,CAAC;IAC/C,CAAC;IAED;;;;OAIG,CACI,gBAAgB,CAAC,QAAyB,EAAE,SAAiB,EAAA;QAChE,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,SAAS,GAAG,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC1C,SAAS,GAAG,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC1C,QAAQ,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YACnE,QAAQ,CAAC,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/C,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC;QAC/D,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,yBAAyB,CAAC,QAAyB,EAAA;QACtD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,mOAAM,CAAC,IAAI,CAAC,uDAAuD,CAAC,CAAC;YACrE,OAAO,CAAC,CAAC;QACb,CAAC;QACD,OAAO,QAAQ,CAAC,WAAW,CAAC,kBAAkB,IAAI,CAAC,CAAC;IACxD,CAAC;IAED;;;;OAIG,CACI,yBAAyB,CAAC,QAAyB,EAAE,kBAA0B,EAAA;QAClF,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,kBAAkB,GAAG,kBAAkB,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC;YACrE,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,eAAe,CAAC,kBAAkB,CAAC,CAAC;YACrE,QAAQ,CAAC,WAAW,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QACjE,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,uDAAuD,CAAC,CAAC;QACzE,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,yBAAyB,CAAC,QAAyB,EAAA;QACtD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjB,mOAAM,CAAC,IAAI,CAAC,uDAAuD,CAAC,CAAC;YACrE,OAAO,CAAC,CAAC;QACb,CAAC;QACD,OAAO,QAAQ,CAAC,WAAW,CAAC,kBAAkB,IAAI,CAAC,CAAC;IACxD,CAAC;IAED;;;;OAIG,CACI,yBAAyB,CAAC,QAAyB,EAAE,kBAA0B,EAAA;QAClF,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,kBAAkB,GAAG,kBAAkB,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC;YACrE,QAAQ,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,eAAe,CAAC,kBAAkB,CAAC,CAAC;YACrE,QAAQ,CAAC,WAAW,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QACjE,CAAC,MAAM,CAAC;YACJ,mOAAM,CAAC,IAAI,CAAC,uDAAuD,CAAC,CAAC;QACzE,CAAC;IACL,CAAC;IAED;;;;;;;;OAQG,CACI,YAAY,CACf,QAAyB,EACzB,aAA8B,EAC9B,KAAa,EACb,MAAc,EACd,YAAoB,CAAC,EACrB,iCAA0C,KAAK,EAAA;QAE/C,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC;QAC/B,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QAChD,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;QAC7C,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC;QAC/B,MAAM,IAAI,GAAG,QAAQ,GAAG,IAAI,GAAG,MAAM,CAAC;QACtC,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,aAAa,CAAC,WAAW,EAAE,8BAA8B,EAAE,SAAS,CAAC,CAAC;IAClH,CAAC;IAED;;;;;;;OAOG,CACI,UAAU,CAAC,QAAyB,EAAE,aAA8B,EAAE,MAAc,EAAE,YAAoB,CAAC,EAAE,iCAA0C,KAAK,EAAA;QAC/J,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC;QACpD,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,aAAa,CAAC,WAAW,EAAE,8BAA8B,EAAE,SAAS,CAAC,CAAC;IAClH,CAAC;IAED;;;OAGG,CACI,SAAS,CAAC,QAAyB,EAAA;QACtC,QAAQ,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;IACjD,CAAC;IAED;;;OAGG,CACI,UAAU,CAAC,QAAyB,EAAA;QACvC,QAAQ,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IACpC,CAAC;IAED;;OAEG,CACI,mBAAmB,GAAA;QACtB,mOAAM,CAAC,IAAI,CAAC,2EAA2E,CAAC,CAAC;IAC7F,CAAC;IAED;;;;;OAKG,CACI,QAAQ,CAAC,KAAyB,EAAE,KAAc,EAAE,QAAiB,EAAA;QACxE,KAAK,CAAC,YAAY,CAAC,kBAAkB,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;IACjE,CAAC;IAED;;OAEG,CACI,QAAQ,GAAA;QACX,mOAAM,CAAC,IAAI,CAAC,gEAAgE,CAAC,CAAC;IAClF,CAAC;IAED;;;;OAIG,CACI,oBAAoB,CAAC,IAAkB,EAAE,QAAyB,EAAA;QACrE,MAAM,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC;QAElC,IAAI,CAAC,cAAc,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEhE,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC;QAEzD,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACrE,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACrE,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;YACrE,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;QACzE,CAAC;IACL,CAAC;IAED;;;;OAIG,CACI,SAAS,CAAC,QAAyB,EAAA;QACtC,MAAM,OAAO,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC;QAC5C,OAAO,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IAED;;;;OAIG,CACI,eAAe,CAAC,QAAyB,EAAE,MAAe,EAAA;QAC7D,MAAM,OAAO,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC;QAC5C,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QACrB,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QACrB,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;IACzB,CAAC;IAED;;OAEG,CACI,OAAO,GAAA;QACV,mBAAmB;QACnB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACjD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAEnD,4BAA4B;QAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;QAEjE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;IAED;;;;;OAKG,CACI,OAAO,CAAC,IAAa,EAAE,EAAW,EAAA;QACrC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QACjD,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IACD;;;;;OAKG,CACI,YAAY,CAAC,IAAa,EAAE,EAAW,EAAE,MAA4B,EAAA;QACxE,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtE,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC9G,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,CAAC;QAEhF,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACvB,IAAI,WAAW,CAAC,MAAM,EAAE,EAAE,CAAC;YACvB,0DAA0D;YAC1D;;;;;cAKE,CACF,MAAM,CAAC,UAAU,CACb;gBACI,CAAC,EAAE,WAAW,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE;gBACzC,CAAC,EAAE,WAAW,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE;gBACzC,CAAC,EAAE,WAAW,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE;aAC5C,EACD;gBACI,CAAC,EAAE,WAAW,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE;gBACxC,CAAC,EAAE,WAAW,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE;gBACxC,CAAC,EAAE,WAAW,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE;aAC3C,CACJ,CAAC;YACF,MAAM,CAAC,oBAAoB,EAAE,CAAC;QAClC,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACjD,CAAC;;AA5kDuB,aAAA,uBAAuB,GAAG,CAAC,AAAJ,CAAK;AAC5B,aAAA,eAAe,GAAG,CAAC,AAAJ,CAAK;AACpB,aAAA,0BAA0B,GAAG,CAAC,AAAJ,CAAK"}},
    {"offset": {"line": 4018, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/IPhysicsEnginePlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/IPhysicsEnginePlugin.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport type { Vector3, Quaternion } from \"../../Maths/math.vector\";\r\nimport type { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport type { PhysicsImpostor } from \"./physicsImpostor\";\r\nimport type { PhysicsJoint, IMotorEnabledJoint } from \"./physicsJoint\";\r\nimport type { PhysicsRaycastResult } from \"../physicsRaycastResult\";\r\n\r\n/**\r\n * Interface used to describe a physics joint\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsImpostorJoint {\r\n    /** Defines the main impostor to which the joint is linked */\r\n    mainImpostor: PhysicsImpostor;\r\n    /** Defines the impostor that is connected to the main impostor using this joint */\r\n    connectedImpostor: PhysicsImpostor;\r\n    /** Defines the joint itself */\r\n    joint: PhysicsJoint;\r\n}\r\n\r\n/** @internal */\r\nexport interface IPhysicsEnginePlugin {\r\n    world: any;\r\n\r\n    name: string;\r\n    setGravity(gravity: Vector3): void;\r\n    setTimeStep(timeStep: number): void;\r\n    getTimeStep(): number;\r\n    executeStep(delta: number, impostors: Array<PhysicsImpostor>): void; //not forgetting pre and post events\r\n    getPluginVersion(): number;\r\n    applyImpulse(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3): void;\r\n    applyForce(impostor: PhysicsImpostor, force: Vector3, contactPoint: Vector3): void;\r\n    generatePhysicsBody(impostor: PhysicsImpostor): void;\r\n    removePhysicsBody(impostor: PhysicsImpostor): void;\r\n    generateJoint(joint: PhysicsImpostorJoint): void;\r\n    removeJoint(joint: PhysicsImpostorJoint): void;\r\n    isSupported(): boolean;\r\n    setTransformationFromPhysicsBody(impostor: PhysicsImpostor): void;\r\n    setPhysicsBodyTransformation(impostor: PhysicsImpostor, newPosition: Vector3, newRotation: Quaternion): void;\r\n    setLinearVelocity(impostor: PhysicsImpostor, velocity: Nullable<Vector3>): void;\r\n    setAngularVelocity(impostor: PhysicsImpostor, velocity: Nullable<Vector3>): void;\r\n    getLinearVelocity(impostor: PhysicsImpostor): Nullable<Vector3>;\r\n    getAngularVelocity(impostor: PhysicsImpostor): Nullable<Vector3>;\r\n    setBodyMass(impostor: PhysicsImpostor, mass: number): void;\r\n    getBodyMass(impostor: PhysicsImpostor): number;\r\n    getBodyFriction(impostor: PhysicsImpostor): number;\r\n    setBodyFriction(impostor: PhysicsImpostor, friction: number): void;\r\n    getBodyRestitution(impostor: PhysicsImpostor): number;\r\n    setBodyRestitution(impostor: PhysicsImpostor, restitution: number): void;\r\n    getBodyPressure?(impostor: PhysicsImpostor): number;\r\n    setBodyPressure?(impostor: PhysicsImpostor, pressure: number): void;\r\n    getBodyStiffness?(impostor: PhysicsImpostor): number;\r\n    setBodyStiffness?(impostor: PhysicsImpostor, stiffness: number): void;\r\n    getBodyVelocityIterations?(impostor: PhysicsImpostor): number;\r\n    setBodyVelocityIterations?(impostor: PhysicsImpostor, velocityIterations: number): void;\r\n    getBodyPositionIterations?(impostor: PhysicsImpostor): number;\r\n    setBodyPositionIterations?(impostor: PhysicsImpostor, positionIterations: number): void;\r\n    appendAnchor?(impostor: PhysicsImpostor, otherImpostor: PhysicsImpostor, width: number, height: number, influence: number, noCollisionBetweenLinkedBodies: boolean): void;\r\n    appendHook?(impostor: PhysicsImpostor, otherImpostor: PhysicsImpostor, length: number, influence: number, noCollisionBetweenLinkedBodies: boolean): void;\r\n    sleepBody(impostor: PhysicsImpostor): void;\r\n    wakeUpBody(impostor: PhysicsImpostor): void;\r\n    raycast(from: Vector3, to: Vector3): PhysicsRaycastResult;\r\n    raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult): void;\r\n\r\n    //Joint Update\r\n    updateDistanceJoint(joint: PhysicsJoint, maxDistance: number, minDistance?: number): void;\r\n    setMotor(joint: IMotorEnabledJoint, speed: number, maxForce?: number, motorIndex?: number): void;\r\n    setLimit(joint: IMotorEnabledJoint, upperLimit: number, lowerLimit?: number, motorIndex?: number): void;\r\n    getRadius(impostor: PhysicsImpostor): number;\r\n    getBoxSizeToRef(impostor: PhysicsImpostor, result: Vector3): void;\r\n    syncMeshWithImpostor(mesh: AbstractMesh, impostor: PhysicsImpostor): void;\r\n    dispose(): void;\r\n}\r\n"],"names":[],"mappings":""}},
    {"offset": {"line": 4025, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/physicsEngineComponent.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/physicsEngineComponent.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport type { Observer } from \"../../Misc/observable\";\r\nimport type { Vector3 } from \"../../Maths/math.vector\";\r\nimport type { Mesh } from \"../../Meshes/mesh\";\r\nimport { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport type { Node } from \"../../node\";\r\nimport type { PhysicsImpostor } from \"./physicsImpostor\";\r\nimport { PhysicsJoint } from \"./physicsJoint\";\r\n\r\ndeclare module \"../../Meshes/abstractMesh\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    export interface AbstractMesh {\r\n        /** @internal */\r\n        _physicsImpostor: Nullable<PhysicsImpostor>;\r\n\r\n        /**\r\n         * Gets or sets impostor used for physic simulation\r\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/physics\r\n         */\r\n        physicsImpostor: Nullable<PhysicsImpostor>;\r\n\r\n        /**\r\n         * Gets the current physics impostor\r\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/physics\r\n         * @returns a physics impostor or null\r\n         */\r\n        getPhysicsImpostor(): Nullable<PhysicsImpostor>;\r\n\r\n        /** Apply a physic impulse to the mesh\r\n         * @param force defines the force to apply\r\n         * @param contactPoint defines where to apply the force\r\n         * @returns the current mesh\r\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n         */\r\n        applyImpulse(force: Vector3, contactPoint: Vector3): AbstractMesh;\r\n\r\n        /**\r\n         * Creates a physic joint between two meshes\r\n         * @param otherMesh defines the other mesh to use\r\n         * @param pivot1 defines the pivot to use on this mesh\r\n         * @param pivot2 defines the pivot to use on the other mesh\r\n         * @param options defines additional options (can be plugin dependent)\r\n         * @returns the current mesh\r\n         * @see https://www.babylonjs-playground.com/#0BS5U0#0\r\n         */\r\n        setPhysicsLinkWith(otherMesh: Mesh, pivot1: Vector3, pivot2: Vector3, options?: any): AbstractMesh;\r\n\r\n        /** @internal */\r\n        _disposePhysicsObserver: Nullable<Observer<Node>>;\r\n    }\r\n}\r\n\r\nObject.defineProperty(AbstractMesh.prototype, \"physicsImpostor\", {\r\n    get: function (this: AbstractMesh) {\r\n        return this._physicsImpostor;\r\n    },\r\n    set: function (this: AbstractMesh, value: Nullable<PhysicsImpostor>) {\r\n        if (this._physicsImpostor === value) {\r\n            return;\r\n        }\r\n        if (this._disposePhysicsObserver) {\r\n            this.onDisposeObservable.remove(this._disposePhysicsObserver);\r\n        }\r\n\r\n        this._physicsImpostor = value;\r\n\r\n        if (value) {\r\n            this._disposePhysicsObserver = this.onDisposeObservable.add(() => {\r\n                // Physics\r\n                if (this.physicsImpostor) {\r\n                    this.physicsImpostor.dispose(/*!doNotRecurse*/);\r\n                    this.physicsImpostor = null;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    enumerable: true,\r\n    configurable: true,\r\n});\r\n\r\n/**\r\n * Gets the current physics impostor\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics\r\n * @returns a physics impostor or null\r\n */\r\nAbstractMesh.prototype.getPhysicsImpostor = function (): Nullable<PhysicsImpostor> {\r\n    return this.physicsImpostor;\r\n};\r\n\r\n/**\r\n * Apply a physic impulse to the mesh\r\n * @param force defines the force to apply\r\n * @param contactPoint defines where to apply the force\r\n * @returns the current mesh\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nAbstractMesh.prototype.applyImpulse = function (force: Vector3, contactPoint: Vector3): AbstractMesh {\r\n    if (!this.physicsImpostor) {\r\n        return this;\r\n    }\r\n    this.physicsImpostor.applyImpulse(force, contactPoint);\r\n    return this;\r\n};\r\n\r\n/**\r\n * Creates a physic joint between two meshes\r\n * @param otherMesh defines the other mesh to use\r\n * @param pivot1 defines the pivot to use on this mesh\r\n * @param pivot2 defines the pivot to use on the other mesh\r\n * @param options defines additional options (can be plugin dependent)\r\n * @returns the current mesh\r\n * @see https://www.babylonjs-playground.com/#0BS5U0#0\r\n */\r\nAbstractMesh.prototype.setPhysicsLinkWith = function (otherMesh: Mesh, pivot1: Vector3, pivot2: Vector3, options?: any): AbstractMesh {\r\n    if (!this.physicsImpostor || !otherMesh.physicsImpostor) {\r\n        return this;\r\n    }\r\n    this.physicsImpostor.createJoint(otherMesh.physicsImpostor, PhysicsJoint.HingeJoint, {\r\n        mainPivot: pivot1,\r\n        connectedPivot: pivot2,\r\n        nativeParams: options,\r\n    });\r\n    return this;\r\n};\r\n"],"names":[],"mappings":";AAIA,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAGzD,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;;;AA6C9C,MAAM,CAAC,cAAc,CAAC,iPAAY,CAAC,SAAS,EAAE,iBAAiB,EAAE;IAC7D,GAAG,EAAE;QACD,OAAO,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IACD,GAAG,EAAE,SAA8B,KAAgC;QAC/D,IAAI,IAAI,CAAC,gBAAgB,KAAK,KAAK,EAAE,CAAC;YAClC,OAAO;QACX,CAAC;QACD,IAAI,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAClE,CAAC;QAED,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAE9B,IAAI,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,GAAG,EAAE;gBAC7D,UAAU;gBACV,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;oBACvB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAC,iBAAiB,CAAC,CAAC;oBAChD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAChC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IACD,UAAU,EAAE,IAAI;IAChB,YAAY,EAAE,IAAI;CACrB,CAAC,CAAC;AAEH;;;;GAIG,CACH,iPAAY,CAAC,SAAS,CAAC,kBAAkB,GAAG;IACxC,OAAO,IAAI,CAAC,eAAe,CAAC;AAChC,CAAC,CAAC;AAEF;;;;;;GAMG,CACH,iPAAY,CAAC,SAAS,CAAC,YAAY,GAAG,SAAU,KAAc,EAAE,YAAqB;IACjF,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;QACxB,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;IACvD,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF;;;;;;;;GAQG,CACH,iPAAY,CAAC,SAAS,CAAC,kBAAkB,GAAG,SAAU,SAAe,EAAE,MAAe,EAAE,MAAe,EAAE,OAAa;IAClH,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;QACtD,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,EAAE,wPAAY,CAAC,UAAU,EAAE;QACjF,SAAS,EAAE,MAAM;QACjB,cAAc,EAAE,MAAM;QACtB,YAAY,EAAE,OAAO;KACxB,CAAC,CAAC;IACH,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC"}},
    {"offset": {"line": 4098, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/Plugins/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/Plugins/index.ts"],"sourcesContent":["export * from \"./cannonJSPlugin\";\r\nexport * from \"./ammoJSPlugin\";\r\nexport * from \"./oimoJSPlugin\";\r\n"],"names":[],"mappings":";AAAA,cAAc,kBAAkB,CAAC;AACjC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,gBAAgB,CAAC"}},
    {"offset": {"line": 4109, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v1/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v1/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./IPhysicsEnginePlugin\";\r\nexport * from \"./physicsEngine\";\r\nexport * from \"./physicsEngineComponent\";\r\nexport * from \"./physicsImpostor\";\r\nexport * from \"./physicsJoint\";\r\nexport * from \"./Plugins/index\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,cAAc,wBAAwB,CAAC;AACvC,cAAc,iBAAiB,CAAC;AAChC,cAAc,0BAA0B,CAAC;AACzC,cAAc,mBAAmB,CAAC;AAClC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,iBAAiB,CAAC"}},
    {"offset": {"line": 4126, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsEngine.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsEngine.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport { Vector3 } from \"../../Maths/math.vector\";\r\nimport type { IPhysicsEngine } from \"../IPhysicsEngine\";\r\nimport type { IPhysicsEnginePluginV2 } from \"./IPhysicsEnginePlugin\";\r\nimport type { IRaycastQuery } from \"../physicsRaycastResult\";\r\nimport { PhysicsRaycastResult } from \"../physicsRaycastResult\";\r\nimport { _WarnImport } from \"../../Misc/devTools\";\r\nimport type { PhysicsBody } from \"./physicsBody\";\r\n\r\n/**\r\n * Class used to control physics engine\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsEngine implements IPhysicsEngine {\r\n    /** @internal */\r\n    private _physicsBodies: Array<PhysicsBody> = [];\r\n    private _subTimeStep: number = 0;\r\n\r\n    /**\r\n     * Gets the gravity vector used by the simulation\r\n     */\r\n    public gravity: Vector3;\r\n\r\n    /**\r\n     *\r\n     * @returns physics plugin version\r\n     */\r\n    public getPluginVersion(): number {\r\n        return this._physicsPlugin.getPluginVersion();\r\n    }\r\n    // eslint-disable-next-line jsdoc/require-returns-check\r\n    /**\r\n     * Factory used to create the default physics plugin.\r\n     * @returns The default physics plugin\r\n     */\r\n    public static DefaultPluginFactory(): IPhysicsEnginePluginV2 {\r\n        throw _WarnImport(\"\");\r\n    }\r\n\r\n    /**\r\n     * Creates a new Physics Engine\r\n     * @param gravity defines the gravity vector used by the simulation\r\n     * @param _physicsPlugin defines the plugin to use (CannonJS by default)\r\n     */\r\n    constructor(\r\n        gravity: Nullable<Vector3>,\r\n        private _physicsPlugin: IPhysicsEnginePluginV2 = PhysicsEngine.DefaultPluginFactory()\r\n    ) {\r\n        gravity = gravity || new Vector3(0, -9.807, 0);\r\n        this.setGravity(gravity);\r\n        this.setTimeStep();\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity vector used by the simulation\r\n     * @param gravity defines the gravity vector to use\r\n     */\r\n    public setGravity(gravity: Vector3): void {\r\n        this.gravity = gravity;\r\n        this._physicsPlugin.setGravity(this.gravity);\r\n    }\r\n\r\n    /**\r\n     * Set the time step of the physics engine.\r\n     * Default is 1/60.\r\n     * To slow it down, enter 1/600 for example.\r\n     * To speed it up, 1/30\r\n     * Unit is seconds.\r\n     * @param newTimeStep defines the new timestep to apply to this world.\r\n     */\r\n    public setTimeStep(newTimeStep: number = 1 / 60) {\r\n        this._physicsPlugin.setTimeStep(newTimeStep);\r\n    }\r\n\r\n    /**\r\n     * Get the time step of the physics engine.\r\n     * @returns the current time step\r\n     */\r\n    public getTimeStep(): number {\r\n        return this._physicsPlugin.getTimeStep();\r\n    }\r\n\r\n    /**\r\n     * Set the sub time step of the physics engine.\r\n     * Default is 0 meaning there is no sub steps\r\n     * To increase physics resolution precision, set a small value (like 1 ms)\r\n     * @param subTimeStep defines the new sub timestep used for physics resolution.\r\n     */\r\n    public setSubTimeStep(subTimeStep: number = 0) {\r\n        this._subTimeStep = subTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Get the sub time step of the physics engine.\r\n     * @returns the current sub time step\r\n     */\r\n    public getSubTimeStep() {\r\n        return this._subTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        this._physicsPlugin.dispose();\r\n    }\r\n\r\n    /**\r\n     * Gets the name of the current physics plugin\r\n     * @returns the name of the plugin\r\n     */\r\n    public getPhysicsPluginName(): string {\r\n        return this._physicsPlugin.name;\r\n    }\r\n\r\n    /**\r\n     * Set the maximum allowed linear and angular velocities\r\n     * @param maxLinearVelocity maximum allowed linear velocity\r\n     * @param maxAngularVelocity maximum allowed angular velocity\r\n     */\r\n    setVelocityLimits(maxLinearVelocity: number, maxAngularVelocity: number): void {\r\n        this._physicsPlugin.setVelocityLimits(maxLinearVelocity, maxAngularVelocity);\r\n    }\r\n\r\n    /**\r\n     * @returns maximum allowed linear velocity\r\n     */\r\n    getMaxLinearVelocity(): number {\r\n        return this._physicsPlugin.getMaxLinearVelocity();\r\n    }\r\n\r\n    /**\r\n     * @returns maximum allowed angular velocity\r\n     */\r\n    getMaxAngularVelocity(): number {\r\n        return this._physicsPlugin.getMaxAngularVelocity();\r\n    }\r\n\r\n    /**\r\n     * Adding a new impostor for the impostor tracking.\r\n     * This will be done by the impostor itself.\r\n     * @param impostor the impostor to add\r\n     */\r\n\r\n    /**\r\n     * Called by the scene. No need to call it.\r\n     * @param delta defines the timespan between frames\r\n     */\r\n    public _step(delta: number) {\r\n        if (delta > 0.1) {\r\n            delta = 0.1;\r\n        } else if (delta <= 0) {\r\n            delta = 1.0 / 60.0;\r\n        }\r\n\r\n        this._physicsPlugin.executeStep(delta, this._physicsBodies);\r\n    }\r\n\r\n    /**\r\n     * Add a body as an active component of this engine\r\n     * @param physicsBody The body to add\r\n     */\r\n    public addBody(physicsBody: PhysicsBody): void {\r\n        this._physicsBodies.push(physicsBody);\r\n    }\r\n    /**\r\n     * Removes a particular body from this engine\r\n     * @param physicsBody The body to remove from the simulation\r\n     */\r\n    public removeBody(physicsBody: PhysicsBody): void {\r\n        const index = this._physicsBodies.indexOf(physicsBody);\r\n        if (index > -1) {\r\n            /*const removed =*/ this._physicsBodies.splice(index, 1);\r\n        }\r\n    }\r\n    /**\r\n     * @returns an array of bodies added to this engine\r\n     */\r\n    public getBodies(): Array<PhysicsBody> {\r\n        return this._physicsBodies;\r\n    }\r\n\r\n    /**\r\n     * Gets the current plugin used to run the simulation\r\n     * @returns current plugin\r\n     */\r\n    public getPhysicsPlugin(): IPhysicsEnginePluginV2 {\r\n        return this._physicsPlugin;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param result resulting PhysicsRaycastResult or array of PhysicsRaycastResults\r\n     * @param query raycast query object\r\n     * If result is an empty array, it will be populated with every detected raycast hit.\r\n     * If result is a populated array, it will only fill the PhysicsRaycastResults present in the array.\r\n     */\r\n    public raycastToRef(from: Vector3, to: Vector3, result: PhysicsRaycastResult | Array<PhysicsRaycastResult>, query?: IRaycastQuery): void {\r\n        this._physicsPlugin.raycast(from, to, result, query);\r\n    }\r\n\r\n    /**\r\n     * Does a raycast in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param query raycast query object\r\n     * @returns PhysicsRaycastResult\r\n     */\r\n    public raycast(from: Vector3, to: Vector3, query?: IRaycastQuery): PhysicsRaycastResult {\r\n        const result = new PhysicsRaycastResult();\r\n        this._physicsPlugin.raycast(from, to, result, query);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Does a raycast through multiple objects in the physics world\r\n     * @param from when should the ray start?\r\n     * @param to when should the ray end?\r\n     * @param query raycast query object\r\n     * @returns array of PhysicsRaycastResult\r\n     */\r\n    public raycastMulti(from: Vector3, to: Vector3, query?: IRaycastQuery): Array<PhysicsRaycastResult> {\r\n        const result: Array<PhysicsRaycastResult> = [];\r\n        this._physicsPlugin.raycast(from, to, result, query);\r\n        return result;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4306, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/IPhysicsEnginePlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/IPhysicsEnginePlugin.ts"],"sourcesContent":["import type { Vector3, Quaternion } from \"../../Maths/math.vector\";\r\nimport type { IRaycastQuery, PhysicsRaycastResult } from \"../physicsRaycastResult\";\r\nimport type { PhysicsBody } from \"./physicsBody\";\r\nimport type { PhysicsShape } from \"./physicsShape\";\r\nimport type { PhysicsConstraint } from \"./physicsConstraint\";\r\nimport type { BoundingBox } from \"../../Culling/boundingBox\";\r\nimport type { TransformNode } from \"../../Meshes/transformNode\";\r\nimport type { PhysicsMaterial } from \"./physicsMaterial\";\r\nimport type { Mesh } from \"../../Meshes/mesh\";\r\nimport type { Nullable } from \"../../types\";\r\nimport type { Observable } from \"../../Misc/observable\";\r\nimport type { GroundMesh } from \"../../Meshes/groundMesh\";\r\n\r\n/** How a specific axis can be constrained */\r\nexport const enum PhysicsConstraintAxisLimitMode {\r\n    /*\r\n     * The axis is not restricted at all\r\n     */\r\n    FREE,\r\n    /*\r\n     * The axis has a minimum/maximum limit\r\n     */\r\n    LIMITED,\r\n    /*\r\n     * The axis allows no relative movement of the pivots\r\n     */\r\n    LOCKED,\r\n}\r\n\r\n/** The constraint specific axis to use when setting Friction, `ConstraintAxisLimitMode`, max force, ... */\r\nexport const enum PhysicsConstraintAxis {\r\n    /*\r\n     * Translation along the primary axis of the constraint (i.e. the\r\n     * direction specified by PhysicsConstraintParameters.axisA/axisB)\r\n     */\r\n    LINEAR_X,\r\n    /*\r\n     * Translation along the second axis of the constraint (i.e. the\r\n     * direction specified by PhysicsConstraintParameters.perpAxisA/perpAxisB)\r\n     */\r\n    LINEAR_Y,\r\n    /*\r\n     * Translation along the third axis of the constraint. This axis is\r\n     * computed from the cross product of axisA/axisB and perpAxisA/perpAxisB)\r\n     */\r\n    LINEAR_Z,\r\n    /*\r\n     * Rotation around the primary axis of the constraint (i.e. the\r\n     * axis specified by PhysicsConstraintParameters.axisA/axisB)\r\n     */\r\n    ANGULAR_X,\r\n    /*\r\n     * Rotation around the second axis of the constraint (i.e. the\r\n     * axis specified by PhysicsConstraintParameters.perpAxisA/perpAxisB)\r\n     */\r\n    ANGULAR_Y,\r\n    /*\r\n     * Rotation around the third axis of the constraint. This axis is\r\n     * computed from the cross product of axisA/axisB and perpAxisA/perpAxisB)\r\n     */\r\n    ANGULAR_Z,\r\n    /*\r\n     * A 3D distance limit; similar to specifying the LINEAR_X/Y/Z axes\r\n     * individually, but the distance calculation uses all three axes\r\n     * simultaneously, instead of individually.\r\n     */\r\n    LINEAR_DISTANCE,\r\n}\r\n\r\n/** Type of Constraint */\r\nexport const enum PhysicsConstraintType {\r\n    /**\r\n     * A ball and socket constraint will attempt to line up the pivot\r\n     * positions in each body, and have no restrictions on rotation\r\n     */\r\n    BALL_AND_SOCKET = 1,\r\n    /**\r\n     * A distance constraint will attempt to keep the pivot locations\r\n     * within a specified distance.\r\n     */\r\n    DISTANCE = 2,\r\n    /**\r\n     * A hinge constraint will keep the pivot positions aligned as well\r\n     * as two angular axes. The remaining angular axis will be free to rotate.\r\n     */\r\n    HINGE = 3,\r\n    /**\r\n     * A slider constraint allows bodies to translate along one axis and\r\n     * rotate about the same axis. The remaining two axes are locked in\r\n     * place\r\n     */\r\n    SLIDER = 4,\r\n    /**\r\n     * A lock constraint will attempt to keep the pivots completely lined\r\n     * up between both bodies, allowing no relative movement.\r\n     */\r\n    LOCK = 5,\r\n    /*\r\n     * A prismatic will lock the rotations of the bodies, and allow translation\r\n     * only along one axis\r\n     */\r\n    PRISMATIC = 6,\r\n    /*\r\n     * A generic constraint; this starts with no limits on how the bodies can\r\n     * move relative to each other, but limits can be added via the PhysicsConstraint\r\n     * interfaces. This can be used to specify a large variety of constraints\r\n     */\r\n    SIX_DOF = 7,\r\n}\r\n\r\n/** Type of Shape */\r\nexport const enum PhysicsShapeType {\r\n    SPHERE,\r\n    CAPSULE,\r\n    CYLINDER,\r\n    BOX,\r\n    CONVEX_HULL,\r\n    CONTAINER,\r\n    MESH,\r\n    HEIGHTFIELD,\r\n}\r\n\r\n/** Optional motor which attempts to move a body at a specific velocity, or at a specific position */\r\nexport const enum PhysicsConstraintMotorType {\r\n    NONE,\r\n    VELOCITY,\r\n    POSITION,\r\n}\r\n\r\nexport const enum PhysicsEventType {\r\n    COLLISION_STARTED = \"COLLISION_STARTED\",\r\n    COLLISION_CONTINUED = \"COLLISION_CONTINUED\",\r\n    COLLISION_FINISHED = \"COLLISION_FINISHED\",\r\n    TRIGGER_ENTERED = \"TRIGGER_ENTERED\",\r\n    TRIGGER_EXITED = \"TRIGGER_EXITED\",\r\n}\r\n\r\n/**\r\n * Base collision object\r\n */\r\nexport interface IBasePhysicsCollisionEvent {\r\n    /**\r\n     * 1st physics body that collided\r\n     */\r\n    collider: PhysicsBody;\r\n    /**\r\n     * 2nd physics body that collided\r\n     */\r\n    collidedAgainst: PhysicsBody;\r\n    /**\r\n     * index in instances array for the collider\r\n     */\r\n    colliderIndex: number;\r\n    /**\r\n     * index in instances array for the collidedAgainst\r\n     */\r\n    collidedAgainstIndex: number;\r\n    /**\r\n     * Event type\r\n     */\r\n    type: PhysicsEventType;\r\n}\r\n\r\n/**\r\n * Collision object that is the parameter when notification for collision fires.\r\n */\r\nexport interface IPhysicsCollisionEvent extends IBasePhysicsCollisionEvent {\r\n    /**\r\n     * World position where the collision occured\r\n     */\r\n    point: Nullable<Vector3>;\r\n    /**\r\n     * Penetration distance\r\n     */\r\n    distance: number;\r\n    /**\r\n     * Impulse value computed by the solver response\r\n     */\r\n    impulse: number;\r\n    /**\r\n     * Collision world normal direction\r\n     */\r\n    normal: Nullable<Vector3>;\r\n}\r\n\r\n/**\r\n * Parameters used to describe the Shape\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsShapeParameters {\r\n    /**\r\n     * Shape center position\r\n     */\r\n    center?: Vector3;\r\n    /**\r\n     * Radius for cylinder, shape and capsule\r\n     */\r\n    radius?: number;\r\n    /**\r\n     * First point position that defines the cylinder or capsule\r\n     */\r\n    pointA?: Vector3;\r\n    /**\r\n     * Second point position that defines the cylinder or capsule\r\n     */\r\n    pointB?: Vector3;\r\n    /**\r\n     * Shape orientation\r\n     */\r\n    rotation?: Quaternion;\r\n    /**\r\n     * Dimesion extention for the box\r\n     */\r\n    extents?: Vector3;\r\n    /**\r\n     * Mesh used for Mesh shape or convex hull. It can be different than the mesh the body is attached to.\r\n     */\r\n    mesh?: Mesh;\r\n    /**\r\n     * Use children hierarchy\r\n     */\r\n    includeChildMeshes?: boolean;\r\n    /**\r\n     * The size of the heightfield in the X axis\r\n     */\r\n    heightFieldSizeX?: number;\r\n    /**\r\n     * The size of the heightfield in the Z axis\r\n     */\r\n    heightFieldSizeZ?: number;\r\n    /**\r\n     * The number of samples along the X axis\r\n     */\r\n    numHeightFieldSamplesX?: number;\r\n    /**\r\n     * The number of samples along the Z axis\r\n     */\r\n    numHeightFieldSamplesZ?: number;\r\n    /**\r\n     * The data for the heightfield\r\n     */\r\n    heightFieldData?: Float32Array;\r\n    /**\r\n     * Ground mesh used for display\r\n     */\r\n    groundMesh?: GroundMesh;\r\n}\r\n\r\n/**\r\n * Parameters used to describe a Constraint\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsConstraintParameters {\r\n    /**\r\n     * Location of the constraint pivot in the space of first body\r\n     */\r\n    pivotA?: Vector3;\r\n    /**\r\n     * Location of the constraint pivot in the space of the second body\r\n     */\r\n    pivotB?: Vector3;\r\n    /**\r\n     * An axis in the space of the first body which determines how\r\n     * distances/angles are measured for LINEAR_X/ANGULAR_X limits.\r\n     */\r\n    axisA?: Vector3;\r\n    /**\r\n     * An axis in the space of the second body which determines how\r\n     * distances/angles are measured for LINEAR_X/ANGULAR_X limits.\r\n     */\r\n    axisB?: Vector3;\r\n\r\n    /**\r\n     * An axis in the space of the first body which determines how\r\n     * distances/angles are measured for LINEAR_Y/ANGULAR_Y limits.\r\n     */\r\n    perpAxisA?: Vector3;\r\n\r\n    /**\r\n     * An axis in the space of the second body which determines how\r\n     * distances/angles are measured for LINEAR_Y/ANGULAR_Y limits.\r\n     */\r\n    perpAxisB?: Vector3;\r\n\r\n    /**\r\n     * The maximum distance that can seperate the two pivots.\r\n     * Only used for DISTANCE constraints\r\n     */\r\n    maxDistance?: number;\r\n\r\n    /**\r\n     * Determines if the connected bodies should collide. Generally,\r\n     * it is preferable to set this to false, especially if the constraint\r\n     * positions the bodies so that they overlap. Otherwise, the constraint\r\n     * will \"fight\" the collision detection and may cause jitter.\r\n     */\r\n    collision?: boolean;\r\n}\r\n\r\n/**\r\n * Parameters used to describe mass and inertia of the Physics Body\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsMassProperties {\r\n    /**\r\n     * The center of mass, in local space. This is The\r\n     * point the body will rotate around when applying\r\n     * an angular velocity.\r\n     *\r\n     * If not provided, the physics engine will compute\r\n     * an appropriate value.\r\n     */\r\n    centerOfMass?: Vector3;\r\n    /**\r\n     * The total mass of this object, in kilograms. This\r\n     * affects how easy it is to move the body. A value\r\n     * of zero will be used as an infinite mass.\r\n     *\r\n     * If not provided, the physics engine will compute\r\n     * an appropriate value.\r\n     */\r\n    mass?: number;\r\n    /**\r\n     * The principal moments of inertia of this object\r\n     * for a unit mass. This determines how easy it is\r\n     * for the body to rotate. A value of zero on any\r\n     * axis will be used as infinite interia about that\r\n     * axis.\r\n     *\r\n     * If not provided, the physics engine will compute\r\n     * an appropriate value.\r\n     */\r\n    inertia?: Vector3;\r\n    /**\r\n     * The rotation rotating from inertia major axis space\r\n     * to parent space (i.e., the rotation which, when\r\n     * applied to the 3x3 inertia tensor causes the inertia\r\n     * tensor to become a diagonal matrix). This determines\r\n     * how the values of inertia are aligned with the parent\r\n     * object.\r\n     *\r\n     * If not provided, the physics engine will compute\r\n     * an appropriate value.\r\n     */\r\n    inertiaOrientation?: Quaternion;\r\n}\r\n\r\n/**\r\n * Indicates how the body will behave.\r\n */\r\nexport const enum PhysicsMotionType {\r\n    STATIC,\r\n    ANIMATED,\r\n    DYNAMIC,\r\n}\r\n\r\n/**\r\n * Indicates how to handle position/rotation change of transform node attached to a physics body\r\n */\r\nexport enum PhysicsPrestepType {\r\n    DISABLED,\r\n    TELEPORT,\r\n    ACTION,\r\n}\r\n\r\n/**\r\n * Controls the body sleep mode.\r\n */\r\nexport const enum PhysicsActivationControl {\r\n    SIMULATION_CONTROLLED,\r\n    ALWAYS_ACTIVE,\r\n    ALWAYS_INACTIVE,\r\n}\r\n\r\n/**\r\n * Represents a pair of bodies connected by a constraint.\r\n */\r\nexport type ConstrainedBodyPair = { parentBody: PhysicsBody; parentBodyIndex: number; childBody: PhysicsBody; childBodyIndex: number };\r\n\r\n/** @internal */\r\nexport interface IPhysicsEnginePluginV2 {\r\n    /**\r\n     * Physics plugin world instance\r\n     */\r\n    world: any;\r\n    /**\r\n     * Physics plugin name\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * Collision observable\r\n     */\r\n    onCollisionObservable: Observable<IPhysicsCollisionEvent>;\r\n    /**\r\n     * Collision ended observable\r\n     */\r\n    onCollisionEndedObservable: Observable<IBasePhysicsCollisionEvent>;\r\n    /**\r\n     * Trigger observable\r\n     */\r\n    onTriggerCollisionObservable: Observable<IBasePhysicsCollisionEvent>;\r\n\r\n    setGravity(gravity: Vector3): void;\r\n    setTimeStep(timeStep: number): void;\r\n    getTimeStep(): number;\r\n    executeStep(delta: number, bodies: Array<PhysicsBody>): void; //not forgetting pre and post events\r\n    getPluginVersion(): number;\r\n    setVelocityLimits(maxLinearVelocity: number, maxAngularVelocity: number): void;\r\n    getMaxLinearVelocity(): number;\r\n    getMaxAngularVelocity(): number;\r\n\r\n    // body\r\n    initBody(body: PhysicsBody, motionType: PhysicsMotionType, position: Vector3, orientation: Quaternion): void;\r\n    initBodyInstances(body: PhysicsBody, motionType: PhysicsMotionType, mesh: Mesh): void;\r\n    updateBodyInstances(body: PhysicsBody, mesh: Mesh): void;\r\n    removeBody(body: PhysicsBody): void;\r\n    sync(body: PhysicsBody): void;\r\n    syncTransform(body: PhysicsBody, transformNode: TransformNode): void;\r\n    setShape(body: PhysicsBody, shape: Nullable<PhysicsShape>): void;\r\n    getShape(body: PhysicsBody): Nullable<PhysicsShape>;\r\n    getShapeType(shape: PhysicsShape): PhysicsShapeType;\r\n    setEventMask(body: PhysicsBody, eventMask: number, instanceIndex?: number): void;\r\n    getEventMask(body: PhysicsBody, instanceIndex?: number): number;\r\n    setMotionType(body: PhysicsBody, motionType: PhysicsMotionType, instanceIndex?: number): void;\r\n    getMotionType(body: PhysicsBody, instanceIndex?: number): PhysicsMotionType;\r\n    computeMassProperties(body: PhysicsBody, instanceIndex?: number): PhysicsMassProperties;\r\n    setMassProperties(body: PhysicsBody, massProps: PhysicsMassProperties, instanceIndex?: number): void;\r\n    getMassProperties(body: PhysicsBody, instanceIndex?: number): PhysicsMassProperties;\r\n    setLinearDamping(body: PhysicsBody, damping: number, instanceIndex?: number): void;\r\n    getLinearDamping(body: PhysicsBody, instanceIndex?: number): number;\r\n    setAngularDamping(body: PhysicsBody, damping: number, instanceIndex?: number): void;\r\n    getAngularDamping(body: PhysicsBody, instanceIndex?: number): number;\r\n    setLinearVelocity(body: PhysicsBody, linVel: Vector3, instanceIndex?: number): void;\r\n    getLinearVelocityToRef(body: PhysicsBody, linVel: Vector3, instanceIndex?: number): void;\r\n    applyImpulse(body: PhysicsBody, impulse: Vector3, location: Vector3, instanceIndex?: number): void;\r\n    applyAngularImpulse(body: PhysicsBody, angularImpulse: Vector3, instanceIndex?: number): void;\r\n    applyForce(body: PhysicsBody, force: Vector3, location: Vector3, instanceIndex?: number): void;\r\n    setAngularVelocity(body: PhysicsBody, angVel: Vector3, instanceIndex?: number): void;\r\n    getAngularVelocityToRef(body: PhysicsBody, angVel: Vector3, instanceIndex?: number): void;\r\n    getBodyGeometry(body: PhysicsBody): object;\r\n    disposeBody(body: PhysicsBody): void;\r\n    setCollisionCallbackEnabled(body: PhysicsBody, enabled: boolean, instanceIndex?: number): void;\r\n    setCollisionEndedCallbackEnabled(body: PhysicsBody, enabled: boolean, instanceIndex?: number): void;\r\n    addConstraint(body: PhysicsBody, childBody: PhysicsBody, constraint: PhysicsConstraint, instanceIndex?: number, childInstanceIndex?: number): void;\r\n    getCollisionObservable(body: PhysicsBody, instanceIndex?: number): Observable<IPhysicsCollisionEvent>;\r\n    getCollisionEndedObservable(body: PhysicsBody, instanceIndex?: number): Observable<IBasePhysicsCollisionEvent>;\r\n    setGravityFactor(body: PhysicsBody, factor: number, instanceIndex?: number): void;\r\n    getGravityFactor(body: PhysicsBody, instanceIndex?: number): number;\r\n    setTargetTransform(body: PhysicsBody, position: Vector3, rotation: Quaternion, instanceIndex?: number): void;\r\n\r\n    // shape\r\n    initShape(shape: PhysicsShape, type: PhysicsShapeType, options: PhysicsShapeParameters): void;\r\n    setShapeFilterMembershipMask(shape: PhysicsShape, membershipMask: number): void;\r\n    getShapeFilterMembershipMask(shape: PhysicsShape): number;\r\n    setShapeFilterCollideMask(shape: PhysicsShape, collideMask: number): void;\r\n    getShapeFilterCollideMask(shape: PhysicsShape): number;\r\n    setMaterial(shape: PhysicsShape, material: PhysicsMaterial): void;\r\n    getMaterial(shape: PhysicsShape): PhysicsMaterial;\r\n    setDensity(shape: PhysicsShape, density: number): void;\r\n    getDensity(shape: PhysicsShape): number;\r\n    addChild(shape: PhysicsShape, newChild: PhysicsShape, translation?: Vector3, rotation?: Quaternion, scale?: Vector3): void;\r\n    removeChild(shape: PhysicsShape, childIndex: number): void;\r\n    getNumChildren(shape: PhysicsShape): number;\r\n    getBoundingBox(shape: PhysicsShape): BoundingBox;\r\n    getBodyBoundingBox(body: PhysicsBody): BoundingBox;\r\n    disposeShape(shape: PhysicsShape): void;\r\n    setTrigger(shape: PhysicsShape, isTrigger: boolean): void;\r\n\r\n    // constraint\r\n    initConstraint(constraint: PhysicsConstraint, body: PhysicsBody, childBody: PhysicsBody): void;\r\n    setEnabled(constraint: PhysicsConstraint, isEnabled: boolean): void;\r\n    getEnabled(constraint: PhysicsConstraint): boolean;\r\n    setCollisionsEnabled(constraint: PhysicsConstraint, isEnabled: boolean): void;\r\n    getCollisionsEnabled(constraint: PhysicsConstraint): boolean;\r\n    setAxisFriction(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, friction: number): void;\r\n    getAxisFriction(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number>;\r\n    setAxisMode(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, limitMode: PhysicsConstraintAxisLimitMode): void;\r\n    getAxisMode(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintAxisLimitMode>;\r\n    setAxisMinLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, minLimit: number): void;\r\n    getAxisMinLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number>;\r\n    setAxisMaxLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, limit: number): void;\r\n    getAxisMaxLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number>;\r\n    setAxisMotorType(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, motorType: PhysicsConstraintMotorType): void;\r\n    getAxisMotorType(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintMotorType>;\r\n    setAxisMotorTarget(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, target: number): void;\r\n    getAxisMotorTarget(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number>;\r\n    setAxisMotorMaxForce(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, maxForce: number): void;\r\n    getAxisMotorMaxForce(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number>;\r\n    disposeConstraint(constraint: PhysicsConstraint): void;\r\n    getBodiesUsingConstraint(constraint: PhysicsConstraint): ConstrainedBodyPair[];\r\n\r\n    // raycast\r\n    raycast(from: Vector3, to: Vector3, result: PhysicsRaycastResult | Array<PhysicsRaycastResult>, query?: IRaycastQuery): void;\r\n\r\n    dispose(): void;\r\n}\r\n"],"names":[],"mappings":"AAaA,2CAAA,EAA6C;;;;;;;;;;;;;;;;;;;;AAC7C,IAAkB,8BAajB;AAbD,CAAA,SAAkB,8BAA8B;IAC5C;;OAEG,CACH,8BAAA,CAAA,8BAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAI,CAAA;IACJ;;OAEG,CACH,8BAAA,CAAA,8BAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAO,CAAA;IACP;;OAEG,CACH,8BAAA,CAAA,8BAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAM,CAAA;AACV,CAAC,EAbiB,8BAA8B,IAAA,CAA9B,8BAA8B,GAAA,CAAA,CAAA,GAa/C;AAGD,IAAkB,qBAqCjB;AArCD,CAAA,SAAkB,qBAAqB;IACnC;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAS,CAAA;IACT;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAS,CAAA;IACT;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAS,CAAA;IACT;;;;OAIG,CACH,qBAAA,CAAA,qBAAA,CAAA,kBAAA,GAAA,EAAA,GAAA,iBAAe,CAAA;AACnB,CAAC,EArCiB,qBAAqB,IAAA,CAArB,qBAAqB,GAAA,CAAA,CAAA,GAqCtC;AAGD,IAAkB,qBAsCjB;AAtCD,CAAA,SAAkB,qBAAqB;IACnC;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,kBAAA,GAAA,EAAA,GAAA,iBAAmB,CAAA;IACnB;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAY,CAAA;IACZ;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAS,CAAA;IACT;;;;OAIG,CACH,qBAAA,CAAA,qBAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAU,CAAA;IACV;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAQ,CAAA;IACR;;;OAGG,CACH,qBAAA,CAAA,qBAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAa,CAAA;IACb;;;;OAIG,CACH,qBAAA,CAAA,qBAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAW,CAAA;AACf,CAAC,EAtCiB,qBAAqB,IAAA,CAArB,qBAAqB,GAAA,CAAA,CAAA,GAsCtC;AAGD,IAAkB,gBASjB;AATD,CAAA,SAAkB,gBAAgB;IAC9B,gBAAA,CAAA,gBAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAM,CAAA;IACN,gBAAA,CAAA,gBAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAO,CAAA;IACP,gBAAA,CAAA,gBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR,gBAAA,CAAA,gBAAA,CAAA,MAAA,GAAA,EAAA,GAAA,KAAG,CAAA;IACH,gBAAA,CAAA,gBAAA,CAAA,cAAA,GAAA,EAAA,GAAA,aAAW,CAAA;IACX,gBAAA,CAAA,gBAAA,CAAA,YAAA,GAAA,EAAA,GAAA,WAAS,CAAA;IACT,gBAAA,CAAA,gBAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAI,CAAA;IACJ,gBAAA,CAAA,gBAAA,CAAA,cAAA,GAAA,EAAA,GAAA,aAAW,CAAA;AACf,CAAC,EATiB,gBAAgB,IAAA,CAAhB,gBAAgB,GAAA,CAAA,CAAA,GASjC;AAGD,IAAkB,0BAIjB;AAJD,CAAA,SAAkB,0BAA0B;IACxC,0BAAA,CAAA,0BAAA,CAAA,OAAA,GAAA,EAAA,GAAA,MAAI,CAAA;IACJ,0BAAA,CAAA,0BAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR,0BAAA,CAAA,0BAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;AACZ,CAAC,EAJiB,0BAA0B,IAAA,CAA1B,0BAA0B,GAAA,CAAA,CAAA,GAI3C;AAED,IAAkB,gBAMjB;AAND,CAAA,SAAkB,gBAAgB;IAC9B,gBAAA,CAAA,oBAAA,GAAA,mBAAuC,CAAA;IACvC,gBAAA,CAAA,sBAAA,GAAA,qBAA2C,CAAA;IAC3C,gBAAA,CAAA,qBAAA,GAAA,oBAAyC,CAAA;IACzC,gBAAA,CAAA,kBAAA,GAAA,iBAAmC,CAAA;IACnC,gBAAA,CAAA,iBAAA,GAAA,gBAAiC,CAAA;AACrC,CAAC,EANiB,gBAAgB,IAAA,CAAhB,gBAAgB,GAAA,CAAA,CAAA,GAMjC;AAuND,IAAkB,iBAIjB;AAJD,CAAA,SAAkB,iBAAiB;IAC/B,iBAAA,CAAA,iBAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAM,CAAA;IACN,iBAAA,CAAA,iBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR,iBAAA,CAAA,iBAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAO,CAAA;AACX,CAAC,EAJiB,iBAAiB,IAAA,CAAjB,iBAAiB,GAAA,CAAA,CAAA,GAIlC;AAKD,IAAY,kBAIX;AAJD,CAAA,SAAY,kBAAkB;IAC1B,kBAAA,CAAA,kBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR,kBAAA,CAAA,kBAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;IACR,kBAAA,CAAA,kBAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAM,CAAA;AACV,CAAC,EAJW,kBAAkB,IAAA,CAAlB,kBAAkB,GAAA,CAAA,CAAA,GAI7B;AAKD,IAAkB,wBAIjB;AAJD,CAAA,SAAkB,wBAAwB;IACtC,wBAAA,CAAA,wBAAA,CAAA,wBAAA,GAAA,EAAA,GAAA,uBAAqB,CAAA;IACrB,wBAAA,CAAA,wBAAA,CAAA,gBAAA,GAAA,EAAA,GAAA,eAAa,CAAA;IACb,wBAAA,CAAA,wBAAA,CAAA,kBAAA,GAAA,EAAA,GAAA,iBAAe,CAAA;AACnB,CAAC,EAJiB,wBAAwB,IAAA,CAAxB,wBAAwB,GAAA,CAAA,CAAA,GAIzC"}},
    {"offset": {"line": 4450, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsBody.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsBody.ts"],"sourcesContent":["import type { IBasePhysicsCollisionEvent, IPhysicsCollisionEvent, IPhysicsEnginePluginV2, PhysicsMassProperties } from \"./IPhysicsEnginePlugin\";\r\nimport { PhysicsMotionType, PhysicsPrestepType } from \"./IPhysicsEnginePlugin\";\r\nimport type { PhysicsShape } from \"./physicsShape\";\r\nimport { Vector3, Quaternion, TmpVectors } from \"../../Maths/math.vector\";\r\nimport type { Scene } from \"../../scene\";\r\nimport type { PhysicsEngine } from \"./physicsEngine\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { PhysicsConstraint } from \"./physicsConstraint\";\r\nimport type { Bone } from \"core/Bones/bone\";\r\nimport { Space } from \"core/Maths/math.axis\";\r\nimport type { Observable, Observer } from \"../../Misc/observable\";\r\nimport type { Node } from \"../../node\";\r\nimport type { Mesh } from \"core/Meshes/mesh\";\r\nimport type { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport type { TransformNode } from \"../../Meshes/transformNode\";\r\nimport type { BoundingBox } from \"core/Culling/boundingBox\";\r\n\r\n/**\r\n * PhysicsBody is useful for creating a physics body that can be used in a physics engine. It allows\r\n * the user to set the mass and velocity of the body, which can then be used to calculate the\r\n * motion of the body in the physics engine.\r\n */\r\nexport class PhysicsBody {\r\n    /**\r\n     * V2 Physics plugin private data for single Transform\r\n     */\r\n    public _pluginData: any = undefined;\r\n    /**\r\n     * V2 Physics plugin private data for instances\r\n     */\r\n    public _pluginDataInstances: Array<any> = [];\r\n    /**\r\n     * The V2 plugin used to create and manage this Physics Body\r\n     */\r\n    private _physicsPlugin: IPhysicsEnginePluginV2;\r\n    /**\r\n     * The engine used to create and manage this Physics Body\r\n     */\r\n    private _physicsEngine: PhysicsEngine;\r\n    /**\r\n     * If the collision callback is enabled\r\n     */\r\n    private _collisionCBEnabled: boolean = false;\r\n    /**\r\n     * If the collision ended callback is enabled\r\n     */\r\n    private _collisionEndedCBEnabled: boolean = false;\r\n    /**\r\n     * The transform node associated with this Physics Body\r\n     */\r\n    transformNode: TransformNode;\r\n\r\n    /**\r\n     * Disable pre-step that consists in updating Physics Body from Transform Node Translation/Orientation.\r\n     * True by default for maximum performance.\r\n     */\r\n    public get disablePreStep(): boolean {\r\n        return this._prestepType == PhysicsPrestepType.DISABLED;\r\n    }\r\n\r\n    public set disablePreStep(value: boolean) {\r\n        this._prestepType = value ? PhysicsPrestepType.DISABLED : PhysicsPrestepType.TELEPORT;\r\n    }\r\n\r\n    /**\r\n     * Disable sync from physics to transformNode. This value is set to true at body creation or at motionType setting when the body is not dynamic.\r\n     */\r\n    disableSync: boolean = false;\r\n\r\n    /**\r\n     * Physics engine will try to make this body sleeping and not active\r\n     */\r\n    public startAsleep: boolean;\r\n\r\n    private _nodeDisposeObserver: Nullable<Observer<Node>>;\r\n\r\n    private _isDisposed = false;\r\n\r\n    private _shape: Nullable<PhysicsShape> = null;\r\n\r\n    private _prestepType: PhysicsPrestepType = PhysicsPrestepType.DISABLED;\r\n    /**\r\n     * Constructs a new physics body for the given node.\r\n     * @param transformNode - The Transform Node to construct the physics body for. For better performance, it is advised that this node does not have a parent.\r\n     * @param motionType - The motion type of the physics body. The options are:\r\n     *  - PhysicsMotionType.STATIC - Static bodies are not moving and unaffected by forces or collisions. They are good for level boundaries or terrain.\r\n     *  - PhysicsMotionType.DYNAMIC - Dynamic bodies are fully simulated. They can move and collide with other objects.\r\n     *  - PhysicsMotionType.ANIMATED - They behave like dynamic bodies, but they won't be affected by other bodies, but still push other bodies out of the way.\r\n     * @param startsAsleep - Whether the physics body should start in a sleeping state (not a guarantee). Defaults to false.\r\n     * @param scene - The scene containing the physics engine.\r\n     *\r\n     * This code is useful for creating a physics body for a given Transform Node in a scene.\r\n     * It checks the version of the physics engine and the physics plugin, and initializes the body accordingly.\r\n     * It also sets the node's rotation quaternion if it is not already set. Finally, it adds the body to the physics engine.\r\n     */\r\n    constructor(transformNode: TransformNode, motionType: PhysicsMotionType, startsAsleep: boolean, scene: Scene) {\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        const physicsEngine = scene.getPhysicsEngine() as PhysicsEngine;\r\n        if (!physicsEngine) {\r\n            throw new Error(\"No Physics Engine available.\");\r\n        }\r\n        this._physicsEngine = physicsEngine;\r\n        if (physicsEngine.getPluginVersion() != 2) {\r\n            throw new Error(\"Plugin version is incorrect. Expected version 2.\");\r\n        }\r\n        const physicsPlugin = physicsEngine.getPhysicsPlugin();\r\n        if (!physicsPlugin) {\r\n            throw new Error(\"No Physics Plugin available.\");\r\n        }\r\n\r\n        this._physicsPlugin = physicsPlugin;\r\n        if (!transformNode.rotationQuaternion) {\r\n            transformNode.rotationQuaternion = Quaternion.FromEulerAngles(transformNode.rotation.x, transformNode.rotation.y, transformNode.rotation.z);\r\n        }\r\n\r\n        this.startAsleep = startsAsleep;\r\n\r\n        // only dynamic and animated body needs sync from physics to transformNode\r\n        this.disableSync = motionType == PhysicsMotionType.STATIC;\r\n\r\n        // instances?\r\n        const m = transformNode as Mesh;\r\n        if (m.hasThinInstances) {\r\n            this._physicsPlugin.initBodyInstances(this, motionType, m);\r\n        } else {\r\n            // single instance\r\n            if (transformNode.parent) {\r\n                // Force computation of world matrix so that the parent transforms are correctly reflected in absolutePosition/absoluteRotationQuaternion.\r\n                transformNode.computeWorldMatrix(true);\r\n            }\r\n            this._physicsPlugin.initBody(this, motionType, transformNode.absolutePosition, transformNode.absoluteRotationQuaternion);\r\n        }\r\n        this.transformNode = transformNode;\r\n        transformNode.physicsBody = this;\r\n        physicsEngine.addBody(this);\r\n\r\n        this._nodeDisposeObserver = transformNode.onDisposeObservable.add(() => {\r\n            this.dispose();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns the string \"PhysicsBody\".\r\n     * @returns \"PhysicsBody\"\r\n     */\r\n    public getClassName() {\r\n        return \"PhysicsBody\";\r\n    }\r\n\r\n    /**\r\n     * Clone the PhysicsBody to a new body and assign it to the transformNode parameter\r\n     * @param transformNode transformNode that will be used for the cloned PhysicsBody\r\n     * @returns the newly cloned PhysicsBody\r\n     */\r\n    public clone(transformNode: TransformNode): PhysicsBody {\r\n        const clonedBody = new PhysicsBody(transformNode, this.getMotionType(), this.startAsleep, this.transformNode.getScene());\r\n        clonedBody.shape = this.shape;\r\n        clonedBody.setMassProperties(this.getMassProperties());\r\n        clonedBody.setLinearDamping(this.getLinearDamping());\r\n        clonedBody.setAngularDamping(this.getAngularDamping());\r\n        return clonedBody;\r\n    }\r\n\r\n    /**\r\n     * If a physics body is connected to an instanced node, update the number physic instances to match the number of node instances.\r\n     */\r\n    public updateBodyInstances() {\r\n        const m = this.transformNode as Mesh;\r\n        if (m.hasThinInstances) {\r\n            this._physicsPlugin.updateBodyInstances(this, m);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This returns the number of internal instances of the physics body\r\n     */\r\n    public get numInstances(): number {\r\n        return this._pluginDataInstances.length;\r\n    }\r\n\r\n    /**\r\n     * Get the motion type of the physics body. Can be STATIC, DYNAMIC, or ANIMATED.\r\n     */\r\n    public get motionType(): PhysicsMotionType {\r\n        return this._physicsPlugin.getMotionType(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the shape of the physics body.\r\n     * @param shape - The shape of the physics body.\r\n     *\r\n     * This method is useful for setting the shape of the physics body, which is necessary for the physics engine to accurately simulate the body's behavior.\r\n     * The shape is used to calculate the body's mass, inertia, and other properties.\r\n     */\r\n    public set shape(shape: Nullable<PhysicsShape>) {\r\n        this._shape = shape;\r\n        if (shape) {\r\n            this._physicsPlugin.setShape(this, shape);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Retrieves the physics shape associated with this object.\r\n     *\r\n     * @returns The physics shape associated with this object, or `undefined` if no\r\n     * shape is associated.\r\n     *\r\n     * This method is useful for retrieving the physics shape associated with this object,\r\n     * which can be used to apply physical forces to the object or to detect collisions.\r\n     */\r\n    public get shape(): Nullable<PhysicsShape> {\r\n        return this._shape;\r\n    }\r\n\r\n    /**\r\n     * Returns the bounding box of the physics body.\r\n     * @returns The bounding box of the physics body.\r\n     */\r\n    public getBoundingBox(): BoundingBox {\r\n        return this._physicsPlugin.getBodyBoundingBox(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the event mask for the physics engine.\r\n     *\r\n     * @param eventMask - A bitmask that determines which events will be sent to the physics engine.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the event mask for.\r\n     *\r\n     * This method is useful for setting the event mask for the physics engine, which determines which events\r\n     * will be sent to the physics engine. This allows the user to control which events the physics engine will respond to.\r\n     */\r\n    public setEventMask(eventMask: number, instanceIndex?: number) {\r\n        this._physicsPlugin.setEventMask(this, eventMask, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the event mask of the physics engine.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the event mask for.\r\n     * @returns The event mask of the physics engine.\r\n     *\r\n     * This method is useful for getting the event mask of the physics engine,\r\n     * which is used to determine which events the engine will respond to.\r\n     * This is important for ensuring that the engine is responding to the correct events and not\r\n     * wasting resources on unnecessary events.\r\n     */\r\n    public getEventMask(instanceIndex?: number): number {\r\n        return this._physicsPlugin.getEventMask(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the motion type of the physics body. Can be STATIC, DYNAMIC, or ANIMATED.\r\n     * @param motionType - The motion type to set.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the motion type for. If body is instanced but instanceIndex is undefined, the motion type will be set for all instances.\r\n     */\r\n    public setMotionType(motionType: PhysicsMotionType, instanceIndex?: number) {\r\n        this.disableSync = instanceIndex === undefined && motionType == PhysicsMotionType.STATIC;\r\n        this._physicsPlugin.setMotionType(this, motionType, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the motion type of the physics body. Can be STATIC, DYNAMIC, or ANIMATED.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the motion type for.\r\n     * @returns The motion type of the physics body.\r\n     */\r\n    public getMotionType(instanceIndex?: number): PhysicsMotionType {\r\n        return this._physicsPlugin.getMotionType(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Set the prestep type of the body\r\n     * @param prestepType prestep type provided by PhysicsPrestepType\r\n     */\r\n    public setPrestepType(prestepType: PhysicsPrestepType): void {\r\n        this._prestepType = prestepType;\r\n    }\r\n\r\n    /**\r\n     * Get the current prestep type of the body\r\n     * @returns the type of prestep associated with the body and its instance index\r\n     */\r\n    public getPrestepType(): PhysicsPrestepType {\r\n        return this._prestepType;\r\n    }\r\n\r\n    /**\r\n     * Computes the mass properties of the physics object, based on the set of physics shapes this body uses.\r\n     * This method is useful for computing the initial mass properties of a physics object, such as its mass,\r\n     * inertia, and center of mass; these values are important for accurately simulating the physics of the\r\n     * object in the physics engine, and computing values based on the shape will provide you with reasonable\r\n     * initial values, which you can then customize.\r\n     * @param instanceIndex - The index of the instance to compute the mass properties for.\r\n     * @returns The mass properties of the object.\r\n     */\r\n    public computeMassProperties(instanceIndex?: number): PhysicsMassProperties {\r\n        return this._physicsPlugin.computeMassProperties(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the mass properties of the physics object.\r\n     *\r\n     * @param massProps - The mass properties to set.\r\n     * @param instanceIndex - The index of the instance to set the mass properties for. If not defined, the mass properties will be set for all instances.\r\n     *\r\n     * This method is useful for setting the mass properties of a physics object, such as its mass,\r\n     * inertia, and center of mass. This is important for accurately simulating the physics of the object in the physics engine.\r\n     */\r\n    public setMassProperties(massProps: PhysicsMassProperties, instanceIndex?: number): void {\r\n        this._physicsPlugin.setMassProperties(this, massProps, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Retrieves the mass properties of the object.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the mass properties for.\r\n     * @returns The mass properties of the object.\r\n     *\r\n     * This method is useful for physics simulations, as it allows the user to\r\n     * retrieve the mass properties of the object, such as its mass, center of mass,\r\n     * and moment of inertia. This information is necessary for accurate physics\r\n     * simulations.\r\n     */\r\n    public getMassProperties(instanceIndex?: number): PhysicsMassProperties {\r\n        return this._physicsPlugin.getMassProperties(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the linear damping of the physics body.\r\n     *\r\n     * @param damping - The linear damping value.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the linear damping for.\r\n     *\r\n     * This method is useful for controlling the linear damping of the physics body,\r\n     * which is the rate at which the body's velocity decreases over time. This is useful for simulating\r\n     * the effects of air resistance or other forms of friction.\r\n     */\r\n    public setLinearDamping(damping: number, instanceIndex?: number) {\r\n        this._physicsPlugin.setLinearDamping(this, damping, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the linear damping of the physics body.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the linear damping for.\r\n     * @returns The linear damping of the physics body.\r\n     *\r\n     * This method is useful for retrieving the linear damping of the physics body, which is the amount of\r\n     * resistance the body has to linear motion. This is useful for simulating realistic physics behavior\r\n     * in a game.\r\n     */\r\n    public getLinearDamping(instanceIndex?: number): number {\r\n        return this._physicsPlugin.getLinearDamping(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the angular damping of the physics body.\r\n     * @param damping The angular damping of the body.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the angular damping for.\r\n     *\r\n     * This method is useful for controlling the angular velocity of a physics body.\r\n     * By setting the damping, the body's angular velocity will be reduced over time, simulating the effect of friction.\r\n     * This can be used to create realistic physical behavior in a physics engine.\r\n     */\r\n    public setAngularDamping(damping: number, instanceIndex?: number) {\r\n        this._physicsPlugin.setAngularDamping(this, damping, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the angular damping of the physics body.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the angular damping for.\r\n     *\r\n     * @returns The angular damping of the physics body.\r\n     *\r\n     * This method is useful for getting the angular damping of the physics body,\r\n     * which is the rate of reduction of the angular velocity over time.\r\n     * This is important for simulating realistic physics behavior in a game.\r\n     */\r\n    public getAngularDamping(instanceIndex?: number): number {\r\n        return this._physicsPlugin.getAngularDamping(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the linear velocity of the physics object.\r\n     * @param linVel - The linear velocity to set.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the linear velocity for.\r\n     *\r\n     * This method is useful for setting the linear velocity of a physics object,\r\n     * which is necessary for simulating realistic physics in a game engine.\r\n     * By setting the linear velocity, the physics object will move in the direction and speed specified by the vector.\r\n     * This allows for realistic physics simulations, such as simulating the motion of a ball rolling down a hill.\r\n     */\r\n    public setLinearVelocity(linVel: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.setLinearVelocity(this, linVel, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the linear velocity of the physics body and stores it in the given vector3.\r\n     * @param linVel - The vector3 to store the linear velocity in.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the linear velocity for.\r\n     *\r\n     * This method is useful for getting the linear velocity of a physics body in a physics engine.\r\n     * This can be used to determine the speed and direction of the body, which can be used to calculate the motion of the body.\r\n     */\r\n    public getLinearVelocityToRef(linVel: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.getLinearVelocityToRef(this, linVel, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the linear velocity of the physics body as a new vector3.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the linear velocity for.\r\n     * @returns The linear velocity of the physics body.\r\n     *\r\n     * This method is useful for getting the linear velocity of a physics body in a physics engine.\r\n     * This can be used to determine the speed and direction of the body, which can be used to calculate the motion of the body.\r\n     */\r\n    public getLinearVelocity(instanceIndex?: number): Vector3 {\r\n        const ref = new Vector3();\r\n        this.getLinearVelocityToRef(ref, instanceIndex);\r\n        return ref;\r\n    }\r\n\r\n    /**\r\n     * Sets the angular velocity of the physics object.\r\n     * @param angVel - The angular velocity to set.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to set the angular velocity for.\r\n     *\r\n     * This method is useful for setting the angular velocity of a physics object, which is necessary for\r\n     * simulating realistic physics behavior. The angular velocity is used to determine the rate of rotation of the object,\r\n     * which is important for simulating realistic motion.\r\n     */\r\n    public setAngularVelocity(angVel: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.setAngularVelocity(this, angVel, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the angular velocity of the physics body and stores it in the given vector3.\r\n     * @param angVel - The vector3 to store the angular velocity in.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the angular velocity for.\r\n     *\r\n     * This method is useful for getting the angular velocity of a physics body, which can be used to determine the body's\r\n     * rotational speed. This information can be used to create realistic physics simulations.\r\n     */\r\n    public getAngularVelocityToRef(angVel: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.getAngularVelocityToRef(this, angVel, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the angular velocity of the physics body as a new vector3.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the angular velocity for.\r\n     * @returns The angular velocity of the physics body.\r\n     *\r\n     * This method is useful for getting the angular velocity of a physics body, which can be used to determine the body's\r\n     * rotational speed. This information can be used to create realistic physics simulations.\r\n     */\r\n    public getAngularVelocity(instanceIndex?: number): Vector3 {\r\n        const ref = new Vector3();\r\n        this.getAngularVelocityToRef(ref, instanceIndex);\r\n        return ref;\r\n    }\r\n\r\n    /**\r\n     * Applies an impulse to the physics object.\r\n     *\r\n     * @param impulse The impulse vector.\r\n     * @param location The location of the impulse.\r\n     * @param instanceIndex For a instanced body, the instance to where the impulse should be applied. If not specified, the impulse is applied to all instances.\r\n     *\r\n     * This method is useful for applying an impulse to a physics object, which can be used to simulate physical forces such as gravity,\r\n     * collisions, and explosions. This can be used to create realistic physics simulations in a game or other application.\r\n     */\r\n    public applyImpulse(impulse: Vector3, location: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.applyImpulse(this, impulse, location, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Add torque to a physics body\r\n     * @param angularImpulse The angular impulse vector.\r\n     * @param instanceIndex For a instanced body, the instance to where the impulse should be applied. If not specified, the impulse is applied to all instances.\r\n     */\r\n    public applyAngularImpulse(angularImpulse: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.applyAngularImpulse(this, angularImpulse, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Applies a force to the physics object.\r\n     *\r\n     * @param force The force vector.\r\n     * @param location The location of the force.\r\n     * @param instanceIndex For a instanced body, the instance to where the force should be applied. If not specified, the force is applied to all instances.\r\n     *\r\n     * This method is useful for applying a force to a physics object, which can be used to simulate physical forces such as gravity,\r\n     * collisions, and explosions. This can be used to create realistic physics simulations in a game or other application.\r\n     */\r\n    public applyForce(force: Vector3, location: Vector3, instanceIndex?: number): void {\r\n        this._physicsPlugin.applyForce(this, force, location, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Retrieves the geometry of the body from the physics plugin.\r\n     *\r\n     * @returns The geometry of the body.\r\n     *\r\n     * This method is useful for retrieving the geometry of the body from the physics plugin, which can be used for various physics calculations.\r\n     */\r\n    public getGeometry(): object {\r\n        return this._physicsPlugin.getBodyGeometry(this);\r\n    }\r\n\r\n    /**\r\n     * Returns an observable that will be notified for when a collision starts or continues for this PhysicsBody\r\n     * @returns Observable\r\n     */\r\n    public getCollisionObservable(): Observable<IPhysicsCollisionEvent> {\r\n        return this._physicsPlugin.getCollisionObservable(this);\r\n    }\r\n\r\n    /**\r\n     * Returns an observable that will be notified when the body has finished colliding with another body\r\n     * @returns\r\n     */\r\n    public getCollisionEndedObservable(): Observable<IBasePhysicsCollisionEvent> {\r\n        return this._physicsPlugin.getCollisionEndedObservable(this);\r\n    }\r\n\r\n    /**\r\n     * Enable or disable collision callback for this PhysicsBody.\r\n     * @param enabled true if PhysicsBody's collision will rise a collision event and notifies the observable\r\n     */\r\n    public setCollisionCallbackEnabled(enabled: boolean): void {\r\n        this._collisionCBEnabled = enabled;\r\n        this._physicsPlugin.setCollisionCallbackEnabled(this, enabled);\r\n    }\r\n\r\n    /**\r\n     * Enable or disable collision ended callback for this PhysicsBody.\r\n     * @param enabled true if PhysicsBody's collision ended will rise a collision event and notifies the observable\r\n     */\r\n    public setCollisionEndedCallbackEnabled(enabled: boolean): void {\r\n        this._collisionEndedCBEnabled = enabled;\r\n        this._physicsPlugin.setCollisionEndedCallbackEnabled(this, enabled);\r\n    }\r\n\r\n    /**\r\n     * Get the center of the object in world space.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the center for.\r\n     * @returns geometric center of the associated mesh\r\n     */\r\n    public getObjectCenterWorld(instanceIndex?: number): Vector3 {\r\n        const ref = new Vector3();\r\n        return this.getObjectCenterWorldToRef(ref, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Get the center of the object in world space.\r\n     * @param ref - The vector3 to store the result in.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to get the center for.\r\n     * @returns geometric center of the associated mesh\r\n     */\r\n    public getObjectCenterWorldToRef(ref: Vector3, instanceIndex?: number): Vector3 {\r\n        if (this._pluginDataInstances?.length > 0) {\r\n            const index = instanceIndex || 0;\r\n            const matrixData = (this.transformNode as Mesh)._thinInstanceDataStorage.matrixData;\r\n            if (matrixData) {\r\n                ref.set(matrixData[index * 16 + 12], matrixData[index * 16 + 13], matrixData[index * 16 + 14]);\r\n            }\r\n        } else {\r\n            ref.copyFrom(this.transformNode.position);\r\n        }\r\n        return ref;\r\n    }\r\n\r\n    /**\r\n     * Adds a constraint to the physics engine.\r\n     *\r\n     * @param childBody - The body to which the constraint will be applied.\r\n     * @param constraint - The constraint to be applied.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     * @param childInstanceIndex - If the child body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     *\r\n     */\r\n    public addConstraint(childBody: PhysicsBody, constraint: PhysicsConstraint, instanceIndex?: number, childInstanceIndex?: number): void {\r\n        this._physicsPlugin.addConstraint(this, childBody, constraint, instanceIndex, childInstanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sync with a bone\r\n     * @param bone The bone that the impostor will be synced to.\r\n     * @param boneMesh The mesh that the bone is influencing.\r\n     * @param jointPivot The pivot of the joint / bone in local space.\r\n     * @param distToJoint Optional distance from the impostor to the joint.\r\n     * @param adjustRotation Optional quaternion for adjusting the local rotation of the bone.\r\n     * @param boneAxis Optional vector3 axis the bone is aligned with\r\n     */\r\n    public syncWithBone(bone: Bone, boneMesh: AbstractMesh, jointPivot: Vector3, distToJoint?: number, adjustRotation?: Quaternion, boneAxis?: Vector3) {\r\n        const mesh = this.transformNode;\r\n\r\n        if (mesh.rotationQuaternion) {\r\n            if (adjustRotation) {\r\n                const tempQuat = TmpVectors.Quaternion[0];\r\n                bone.getRotationQuaternionToRef(Space.WORLD, boneMesh, tempQuat);\r\n                tempQuat.multiplyToRef(adjustRotation, mesh.rotationQuaternion);\r\n            } else {\r\n                bone.getRotationQuaternionToRef(Space.WORLD, boneMesh, mesh.rotationQuaternion);\r\n            }\r\n        }\r\n\r\n        const pos = TmpVectors.Vector3[0];\r\n        const boneDir = TmpVectors.Vector3[1];\r\n\r\n        if (!boneAxis) {\r\n            boneAxis = TmpVectors.Vector3[2];\r\n            boneAxis.x = 0;\r\n            boneAxis.y = 1;\r\n            boneAxis.z = 0;\r\n        }\r\n\r\n        bone.getDirectionToRef(boneAxis, boneMesh, boneDir);\r\n        bone.getAbsolutePositionToRef(boneMesh, pos);\r\n\r\n        if ((distToJoint === undefined || distToJoint === null) && jointPivot) {\r\n            distToJoint = jointPivot.length();\r\n        }\r\n\r\n        if (distToJoint !== undefined && distToJoint !== null) {\r\n            pos.x += boneDir.x * distToJoint;\r\n            pos.y += boneDir.y * distToJoint;\r\n            pos.z += boneDir.z * distToJoint;\r\n        }\r\n\r\n        mesh.setAbsolutePosition(pos);\r\n    }\r\n\r\n    /**\r\n     * Executes a callback on the body or all of the instances of a body\r\n     * @param callback the callback to execute\r\n     */\r\n    public iterateOverAllInstances(callback: (body: PhysicsBody, instanceIndex?: number) => void) {\r\n        if (this._pluginDataInstances?.length > 0) {\r\n            for (let i = 0; i < this._pluginDataInstances.length; i++) {\r\n                callback(this, i);\r\n            }\r\n        } else {\r\n            callback(this, undefined);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity factor of the physics body\r\n     * @param factor the gravity factor to set\r\n     * @param instanceIndex the instance of the body to set, if undefined all instances will be set\r\n     */\r\n    public setGravityFactor(factor: number, instanceIndex?: number) {\r\n        this._physicsPlugin.setGravityFactor(this, factor, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the gravity factor of the physics body\r\n     * @param instanceIndex the instance of the body to get, if undefined the value of first instance will be returned\r\n     * @returns the gravity factor\r\n     */\r\n    public getGravityFactor(instanceIndex?: number): number {\r\n        return this._physicsPlugin.getGravityFactor(this, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Set the target transformation (position and rotation) of the body, such that the body will set its velocity to reach that target\r\n     * @param position The target position\r\n     * @param rotation The target rotation\r\n     * @param instanceIndex The index of the instance in an instanced body\r\n     */\r\n    public setTargetTransform(position: Vector3, rotation: Quaternion, instanceIndex?: number) {\r\n        this._physicsPlugin.setTargetTransform(this, position, rotation, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Returns if the body has been disposed.\r\n     * @returns true if disposed, false otherwise.\r\n     */\r\n    public get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n\r\n    /**\r\n     * Disposes the body from the physics engine.\r\n     *\r\n     * This method is useful for cleaning up the physics engine when a body is no longer needed. Disposing the body will free up resources and prevent memory leaks.\r\n     */\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        // Disable collisions CB so it doesn't fire when the body is disposed\r\n        if (this._collisionCBEnabled) {\r\n            this.setCollisionCallbackEnabled(false);\r\n        }\r\n        if (this._collisionEndedCBEnabled) {\r\n            this.setCollisionEndedCallbackEnabled(false);\r\n        }\r\n        if (this._nodeDisposeObserver) {\r\n            this.transformNode.onDisposeObservable.remove(this._nodeDisposeObserver);\r\n            this._nodeDisposeObserver = null;\r\n        }\r\n        this._physicsEngine.removeBody(this);\r\n        this._physicsPlugin.removeBody(this);\r\n        this._physicsPlugin.disposeBody(this);\r\n        this.transformNode.physicsBody = null;\r\n        this._pluginData = null;\r\n        this._pluginDataInstances.length = 0;\r\n        this._isDisposed = true;\r\n        this.shape = null;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5017, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsShape.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsShape.ts"],"sourcesContent":["import type { TransformNode } from \"../../Meshes/transformNode\";\r\nimport type { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport type { BoundingBox } from \"../../Culling/boundingBox\";\r\nimport { PhysicsShapeType } from \"./IPhysicsEnginePlugin\";\r\nimport type { IPhysicsEnginePluginV2, PhysicsShapeParameters } from \"./IPhysicsEnginePlugin\";\r\nimport type { PhysicsMaterial } from \"./physicsMaterial\";\r\nimport { Matrix, Vector3, Quaternion, TmpVectors } from \"../../Maths/math.vector\";\r\nimport type { GroundMesh } from \"../../Meshes/groundMesh\";\r\nimport type { Mesh } from \"../../Meshes/mesh\";\r\nimport type { Scene } from \"../../scene\";\r\n\r\n/**\r\n * Options for creating a physics shape\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicShapeOptions {\r\n    /**\r\n     * The type of the shape. This can be one of the following: SPHERE, BOX, CAPSULE, CYLINDER, CONVEX_HULL, MESH, HEIGHTFIELD, CONTAINER\r\n     */\r\n    type?: PhysicsShapeType;\r\n    /**\r\n     * The parameters of the shape. Varies depending of the shape type.\r\n     */\r\n    parameters?: PhysicsShapeParameters;\r\n    /**\r\n     * Reference to an already existing physics shape in the plugin.\r\n     */\r\n    pluginData?: any;\r\n}\r\n\r\n/**\r\n * PhysicsShape class.\r\n * This class is useful for creating a physics shape that can be used in a physics engine.\r\n * A Physic Shape determine how collision are computed. It must be attached to a body.\r\n */\r\nexport class PhysicsShape {\r\n    /**\r\n     * V2 Physics plugin private data for single shape\r\n     */\r\n    public _pluginData: any = undefined;\r\n    /**\r\n     * The V2 plugin used to create and manage this Physics Body\r\n     */\r\n    private _physicsPlugin: IPhysicsEnginePluginV2;\r\n\r\n    private _type: PhysicsShapeType;\r\n\r\n    private _material: PhysicsMaterial;\r\n\r\n    private _isTrigger: boolean = false;\r\n\r\n    private _isDisposed = false;\r\n\r\n    /**\r\n     * Constructs a new physics shape.\r\n     * @param options The options for the physics shape. These are:\r\n     *  * type: The type of the shape. This can be one of the following: SPHERE, BOX, CAPSULE, CYLINDER, CONVEX_HULL, MESH, HEIGHTFIELD, CONTAINER\r\n     *  * parameters: The parameters of the shape.\r\n     *  * pluginData: The plugin data of the shape. This is used if you already have a reference to the object on the plugin side.\r\n     * You need to specify either type or pluginData.\r\n     * @param scene The scene the shape belongs to.\r\n     *\r\n     * This code is useful for creating a new physics shape with the given type, options, and scene.\r\n     * It also checks that the physics engine and plugin version are correct.\r\n     * If not, it throws an error. This ensures that the shape is created with the correct parameters and is compatible with the physics engine.\r\n     */\r\n    constructor(options: PhysicShapeOptions, scene: Scene) {\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        const physicsEngine = scene.getPhysicsEngine();\r\n        if (!physicsEngine) {\r\n            throw new Error(\"No Physics Engine available.\");\r\n        }\r\n        if (physicsEngine.getPluginVersion() != 2) {\r\n            throw new Error(\"Plugin version is incorrect. Expected version 2.\");\r\n        }\r\n        const physicsPlugin = physicsEngine.getPhysicsPlugin();\r\n        if (!physicsPlugin) {\r\n            throw new Error(\"No Physics Plugin available.\");\r\n        }\r\n        this._physicsPlugin = physicsPlugin as IPhysicsEnginePluginV2;\r\n\r\n        if (options.pluginData !== undefined && options.pluginData !== null) {\r\n            this._pluginData = options.pluginData;\r\n            this._type = this._physicsPlugin.getShapeType(this);\r\n        } else if (options.type !== undefined && options.type !== null) {\r\n            this._type = options.type;\r\n            const parameters = options.parameters ?? {};\r\n            this._physicsPlugin.initShape(this, options.type, parameters);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the string \"PhysicsShape\".\r\n     * @returns \"PhysicsShape\"\r\n     */\r\n    public getClassName() {\r\n        return \"PhysicsShape\";\r\n    }\r\n\r\n    /**\r\n     * Returns the type of the physics shape.\r\n     * @returns The type of the physics shape.\r\n     */\r\n    public get type(): PhysicsShapeType {\r\n        return this._type;\r\n    }\r\n\r\n    /**\r\n     * Set the membership mask of a shape. This is a bitfield of arbitrary\r\n     * \"categories\" to which the shape is a member. This is used in combination\r\n     * with the collide mask to determine if this shape should collide with\r\n     * another.\r\n     *\r\n     * @param membershipMask Bitfield of categories of this shape.\r\n     */\r\n    public set filterMembershipMask(membershipMask: number) {\r\n        this._physicsPlugin.setShapeFilterMembershipMask(this, membershipMask);\r\n    }\r\n\r\n    /**\r\n     * Get the membership mask of a shape.\r\n     * @returns Bitmask of categories which this shape is a member of.\r\n     */\r\n    public get filterMembershipMask(): number {\r\n        return this._physicsPlugin.getShapeFilterMembershipMask(this);\r\n    }\r\n\r\n    /**\r\n     * Sets the collide mask of a shape. This is a bitfield of arbitrary\r\n     * \"categories\" to which this shape collides with. Given two shapes,\r\n     * the engine will check if the collide mask and membership overlap:\r\n     * shapeA.filterMembershipMask & shapeB.filterCollideMask\r\n     *\r\n     * If this value is zero (i.e. shapeB only collides with categories\r\n     * which shapeA is _not_ a member of) then the shapes will not collide.\r\n     *\r\n     * Note, the engine will also perform the same test with shapeA and\r\n     * shapeB swapped; the shapes will not collide if either shape has\r\n     * a collideMask which prevents collision with the other shape.\r\n     *\r\n     * @param collideMask Bitmask of categories this shape should collide with\r\n     */\r\n    public set filterCollideMask(collideMask: number) {\r\n        this._physicsPlugin.setShapeFilterCollideMask(this, collideMask);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns Bitmask of categories that this shape should collide with\r\n     */\r\n    public get filterCollideMask(): number {\r\n        return this._physicsPlugin.getShapeFilterCollideMask(this);\r\n    }\r\n    /**\r\n     *\r\n     * @param material\r\n     */\r\n    public set material(material: PhysicsMaterial) {\r\n        this._physicsPlugin.setMaterial(this, material);\r\n        this._material = material;\r\n    }\r\n\r\n    /**\r\n     * Returns the material of the physics shape.\r\n     * @returns The material of the physics shape.\r\n     */\r\n    public get material(): PhysicsMaterial {\r\n        if (!this._material) {\r\n            this._material = this._physicsPlugin.getMaterial(this);\r\n        }\r\n        return this._material;\r\n    }\r\n\r\n    /**\r\n     * Sets the density of the physics shape.\r\n     * @param density The density of the physics shape.\r\n     */\r\n    public set density(density: number) {\r\n        this._physicsPlugin.setDensity(this, density);\r\n    }\r\n\r\n    /**\r\n     * Returns the density of the physics shape.\r\n     * @returns The density of the physics shape.\r\n     */\r\n    public get density(): number {\r\n        return this._physicsPlugin.getDensity(this);\r\n    }\r\n\r\n    /**\r\n     * Utility to add a child shape to this container,\r\n     * automatically computing the relative transform between\r\n     * the container shape and the child instance.\r\n     *\r\n     * @param parentTransform The transform node associated with this shape\r\n     * @param newChild The new PhysicsShape to add\r\n     * @param childTransform The transform node associated with the child shape\r\n     */\r\n    public addChildFromParent(parentTransform: TransformNode, newChild: PhysicsShape, childTransform: TransformNode): void {\r\n        const childToWorld = childTransform.computeWorldMatrix(true);\r\n        const parentToWorld = parentTransform.computeWorldMatrix(true);\r\n        const childToParent = TmpVectors.Matrix[0];\r\n        childToWorld.multiplyToRef(Matrix.Invert(parentToWorld), childToParent);\r\n        const translation = TmpVectors.Vector3[0];\r\n        const rotation = TmpVectors.Quaternion[0];\r\n        const scale = TmpVectors.Vector3[1];\r\n        childToParent.decompose(scale, rotation, translation);\r\n        this._physicsPlugin.addChild(this, newChild, translation, rotation, scale);\r\n    }\r\n\r\n    /**\r\n     * Adds a child shape to a container with an optional transform\r\n     * @param newChild The new PhysicsShape to add\r\n     * @param translation Optional position of the child shape relative to this shape\r\n     * @param rotation Optional rotation of the child shape relative to this shape\r\n     * @param scale Optional scale of the child shape relative to this shape\r\n     */\r\n    public addChild(newChild: PhysicsShape, translation?: Vector3, rotation?: Quaternion, scale?: Vector3): void {\r\n        this._physicsPlugin.addChild(this, newChild, translation, rotation, scale);\r\n    }\r\n\r\n    /**\r\n     * Removes a child shape from this shape.\r\n     * @param childIndex The index of the child shape to remove\r\n     */\r\n    public removeChild(childIndex: number): void {\r\n        this._physicsPlugin.removeChild(this, childIndex);\r\n    }\r\n\r\n    /**\r\n     * Returns the number of children of a physics shape.\r\n     * @returns The number of children of a physics shape.\r\n     */\r\n    public getNumChildren(): number {\r\n        return this._physicsPlugin.getNumChildren(this);\r\n    }\r\n\r\n    /**\r\n     * Returns the bounding box of the physics shape.\r\n     * @returns The bounding box of the physics shape.\r\n     */\r\n    public getBoundingBox(): BoundingBox {\r\n        return this._physicsPlugin.getBoundingBox(this);\r\n    }\r\n\r\n    public set isTrigger(isTrigger: boolean) {\r\n        if (this._isTrigger === isTrigger) {\r\n            return;\r\n        }\r\n        this._isTrigger = isTrigger;\r\n        this._physicsPlugin.setTrigger(this, isTrigger);\r\n    }\r\n\r\n    public get isTrigger(): boolean {\r\n        return this._isTrigger;\r\n    }\r\n\r\n    /**\r\n     * Dispose the shape and release its associated resources.\r\n     */\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        this._physicsPlugin.disposeShape(this);\r\n        this._isDisposed = true;\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a sphere shape\r\n */\r\nexport class PhysicsShapeSphere extends PhysicsShape {\r\n    /**\r\n     * Constructor for the Sphere Shape\r\n     * @param center local center of the sphere\r\n     * @param radius radius\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(center: Vector3, radius: number, scene: Scene) {\r\n        super({ type: PhysicsShapeType.SPHERE, parameters: { center: center, radius: radius } }, scene);\r\n    }\r\n\r\n    /**\r\n     * Derive an approximate sphere from the mesh.\r\n     * @param mesh node from which to derive the sphere shape\r\n     * @returns PhysicsShapeSphere\r\n     */\r\n    static FromMesh(mesh: AbstractMesh) {\r\n        const bounds = mesh.getBoundingInfo();\r\n        const centerLocal = bounds.boundingSphere.center;\r\n        const he = bounds.boundingBox.extendSize;\r\n        const radius = Math.max(he.x, he.y, he.z);\r\n        return new PhysicsShapeSphere(centerLocal, radius, mesh.getScene());\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a capsule shape\r\n */\r\nexport class PhysicsShapeCapsule extends PhysicsShape {\r\n    /**\r\n     *\r\n     * @param pointA Starting point that defines the capsule segment\r\n     * @param pointB ending point of that same segment\r\n     * @param radius radius\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(pointA: Vector3, pointB: Vector3, radius: number, scene: Scene) {\r\n        super({ type: PhysicsShapeType.CAPSULE, parameters: { pointA: pointA, pointB: pointB, radius: radius } }, scene);\r\n    }\r\n\r\n    /**\r\n     * Derive an approximate capsule from the mesh. Note, this is\r\n     * not the optimal bounding capsule.\r\n     * @param mesh Node from which to derive a cylinder shape\r\n     * @returns Physics Shape Capsule\r\n     */\r\n    static FromMesh(mesh: AbstractMesh): PhysicsShapeCapsule {\r\n        const boundsLocal = mesh.getBoundingInfo();\r\n        const radius = boundsLocal.boundingBox.extendSize.x;\r\n        const pointFromCenter = new Vector3(0, boundsLocal.boundingBox.extendSize.y - radius, 0);\r\n        const pointA = boundsLocal.boundingBox.center.add(pointFromCenter);\r\n        const pointB = boundsLocal.boundingBox.center.subtract(pointFromCenter);\r\n        return new PhysicsShapeCapsule(pointA, pointB, radius, mesh.getScene());\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a cylinder shape\r\n */\r\nexport class PhysicsShapeCylinder extends PhysicsShape {\r\n    /**\r\n     *\r\n     * @param pointA Starting point that defines the cylinder segment\r\n     * @param pointB ending point of that same segment\r\n     * @param radius radius\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(pointA: Vector3, pointB: Vector3, radius: number, scene: Scene) {\r\n        super({ type: PhysicsShapeType.CYLINDER, parameters: { pointA: pointA, pointB: pointB, radius: radius } }, scene);\r\n    }\r\n\r\n    /**\r\n     * Derive an approximate cylinder from the mesh. Note, this is\r\n     * not the optimal bounding cylinder.\r\n     * @param mesh Node from which to derive a cylinder shape\r\n     * @returns Physics Shape Cylinder\r\n     */\r\n    static FromMesh(mesh: AbstractMesh): PhysicsShapeCylinder {\r\n        const boundsLocal = mesh.getBoundingInfo();\r\n        const radius = boundsLocal.boundingBox.extendSize.x;\r\n        const pointFromCenter = new Vector3(0, boundsLocal.boundingBox.extendSize.y, 0);\r\n        const pointA = boundsLocal.boundingBox.center.add(pointFromCenter);\r\n        const pointB = boundsLocal.boundingBox.center.subtract(pointFromCenter);\r\n        return new PhysicsShapeCylinder(pointA, pointB, radius, mesh.getScene());\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a box shape\r\n */\r\nexport class PhysicsShapeBox extends PhysicsShape {\r\n    /**\r\n     *\r\n     * @param center local center of the box\r\n     * @param rotation local orientation\r\n     * @param extents size of the box in each direction\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(center: Vector3, rotation: Quaternion, extents: Vector3, scene: Scene) {\r\n        super({ type: PhysicsShapeType.BOX, parameters: { center: center, rotation: rotation, extents: extents } }, scene);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param mesh\r\n     * @returns PhysicsShapeBox\r\n     */\r\n    static FromMesh(mesh: AbstractMesh): PhysicsShapeBox {\r\n        const bounds = mesh.getBoundingInfo();\r\n        const centerLocal = bounds.boundingBox.center;\r\n        const extents = bounds.boundingBox.extendSize.scale(2.0); //<todo.eoin extendSize seems to really be half-extents?\r\n        return new PhysicsShapeBox(centerLocal, Quaternion.Identity(), extents, mesh.getScene());\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a convex hull shape\r\n */\r\nexport class PhysicsShapeConvexHull extends PhysicsShape {\r\n    /**\r\n     *\r\n     * @param mesh the mesh to be used as topology infos for the convex hull\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(mesh: Mesh, scene: Scene) {\r\n        super({ type: PhysicsShapeType.CONVEX_HULL, parameters: { mesh: mesh } }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a mesh shape\r\n */\r\nexport class PhysicsShapeMesh extends PhysicsShape {\r\n    /**\r\n     *\r\n     * @param mesh the mesh topology that will be used to create the shape\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(mesh: Mesh, scene: Scene) {\r\n        super({ type: PhysicsShapeType.MESH, parameters: { mesh: mesh } }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * A shape container holds a variable number of shapes. Use AddChild to append to newly created parent container.\r\n */\r\nexport class PhysicsShapeContainer extends PhysicsShape {\r\n    /**\r\n     * Constructor of the Shape container\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(scene: Scene) {\r\n        super({ type: PhysicsShapeType.CONTAINER, parameters: {} }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a heightfield Shape\r\n */\r\nexport class PhysicsShapeHeightField extends PhysicsShape {\r\n    /**\r\n     * Constructor of the Shape heightfield\r\n     * @param heightFieldSizeX The size of the heightfield in the X axis\r\n     * @param heightFieldSizeZ The size of the heightfield in the Z axis\r\n     * @param numHeightFieldSamplesX The number of samples along the X axis\r\n     * @param numHeightFieldSamplesZ The number of samples along the Z axis\r\n     * @param heightFieldData The data for the heightfield\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(heightFieldSizeX: number, heightFieldSizeZ: number, numHeightFieldSamplesX: number, numHeightFieldSamplesZ: number, heightFieldData: Float32Array, scene: Scene) {\r\n        super(\r\n            {\r\n                type: PhysicsShapeType.HEIGHTFIELD,\r\n                parameters: {\r\n                    heightFieldSizeX: heightFieldSizeX,\r\n                    heightFieldSizeZ: heightFieldSizeZ,\r\n                    numHeightFieldSamplesX: numHeightFieldSamplesX,\r\n                    numHeightFieldSamplesZ: numHeightFieldSamplesZ,\r\n                    heightFieldData: heightFieldData,\r\n                },\r\n            },\r\n            scene\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Helper object to create a ground mesh Shape\r\n */\r\nexport class PhysicsShapeGroundMesh extends PhysicsShape {\r\n    /**\r\n     * Constructor of the Shape heightfield\r\n     * @param groundMesh ground mesh used for display\r\n     * @param scene scene to attach to\r\n     */\r\n    constructor(groundMesh: GroundMesh, scene: Scene) {\r\n        super({ type: PhysicsShapeType.HEIGHTFIELD, parameters: { groundMesh: groundMesh } }, scene);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5425, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsConstraint.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsConstraint.ts"],"sourcesContent":["import type { Scene } from \"../../scene\";\r\nimport type { Vector3 } from \"../../Maths/math.vector\";\r\nimport type { Nullable } from \"../../types\";\r\nimport type { IPhysicsEnginePluginV2, PhysicsConstraintParameters, PhysicsConstraintAxisLimitMode, PhysicsConstraintMotorType, ConstrainedBodyPair } from \"./IPhysicsEnginePlugin\";\r\nimport { PhysicsConstraintAxis, PhysicsConstraintType } from \"./IPhysicsEnginePlugin\";\r\n\r\n/**\r\n * This is a holder class for the physics constraint created by the physics plugin\r\n * It holds a set of functions to control the underlying constraint\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nexport class PhysicsConstraint {\r\n    /**\r\n     * V2 Physics plugin private data for a physics material\r\n     */\r\n    public _pluginData: any = undefined;\r\n    /**\r\n     * The V2 plugin used to create and manage this Physics Body\r\n     */\r\n    protected _physicsPlugin: IPhysicsEnginePluginV2;\r\n    protected _options: PhysicsConstraintParameters;\r\n    protected _type: PhysicsConstraintType;\r\n    /**\r\n     * @internal\r\n     * The internal options that were used to init the constraint\r\n     */\r\n    public _initOptions?: PhysicsConstraintParameters;\r\n\r\n    /**\r\n     * Constructs a new constraint for the physics constraint.\r\n     * @param type The type of constraint to create.\r\n     * @param options The options for the constraint.\r\n     * @param scene The scene the constraint belongs to.\r\n     *\r\n     * This code is useful for creating a new constraint for the physics engine. It checks if the scene has a physics engine, and if the plugin version is correct.\r\n     * If all checks pass, it initializes the constraint with the given type and options.\r\n     */\r\n    constructor(type: PhysicsConstraintType, options: PhysicsConstraintParameters, scene: Scene) {\r\n        if (!scene) {\r\n            throw new Error(\"Missing scene parameter for constraint constructor.\");\r\n        }\r\n        const physicsEngine = scene.getPhysicsEngine();\r\n        if (!physicsEngine) {\r\n            throw new Error(\"No Physics Engine available.\");\r\n        }\r\n        if (physicsEngine.getPluginVersion() != 2) {\r\n            throw new Error(\"Plugin version is incorrect. Expected version 2.\");\r\n        }\r\n        const physicsPlugin = physicsEngine.getPhysicsPlugin();\r\n        if (!physicsPlugin) {\r\n            throw new Error(\"No Physics Plugin available.\");\r\n        }\r\n\r\n        this._physicsPlugin = physicsPlugin as IPhysicsEnginePluginV2;\r\n        this._options = options;\r\n        this._type = type;\r\n    }\r\n\r\n    /**\r\n     * Gets the type of the constraint.\r\n     *\r\n     * @returns The type of the constraint.\r\n     *\r\n     */\r\n    public get type(): PhysicsConstraintType {\r\n        return this._type;\r\n    }\r\n\r\n    /**\r\n     * Retrieves the options of the physics constraint.\r\n     *\r\n     * @returns The physics constraint parameters.\r\n     *\r\n     */\r\n    public get options(): PhysicsConstraintParameters {\r\n        return this._options;\r\n    }\r\n\r\n    /**\r\n     * Enable/disable the constraint\r\n     * @param isEnabled value for the constraint\r\n     */\r\n    public set isEnabled(isEnabled: boolean) {\r\n        this._physicsPlugin.setEnabled(this, isEnabled);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns true if constraint is enabled\r\n     */\r\n    public get isEnabled(): boolean {\r\n        return this._physicsPlugin.getEnabled(this);\r\n    }\r\n\r\n    /**\r\n     * Enables or disables collisions for the physics engine.\r\n     *\r\n     * @param isEnabled - A boolean value indicating whether collisions should be enabled or disabled.\r\n     *\r\n     */\r\n    public set isCollisionsEnabled(isEnabled: boolean) {\r\n        this._physicsPlugin.setCollisionsEnabled(this, isEnabled);\r\n    }\r\n\r\n    /**\r\n     * Gets whether collisions are enabled for this physics object.\r\n     *\r\n     * @returns `true` if collisions are enabled, `false` otherwise.\r\n     *\r\n     */\r\n    public get isCollisionsEnabled(): boolean {\r\n        return this._physicsPlugin.getCollisionsEnabled(this);\r\n    }\r\n\r\n    /**\r\n     * Gets all bodies that are using this constraint\r\n     * @returns\r\n     */\r\n    public getBodiesUsingConstraint(): ConstrainedBodyPair[] {\r\n        return this._physicsPlugin.getBodiesUsingConstraint(this);\r\n    }\r\n\r\n    /**\r\n     * Disposes the constraint from the physics engine.\r\n     *\r\n     * This method is useful for cleaning up the physics engine when a body is no longer needed. Disposing the body will free up resources and prevent memory leaks.\r\n     */\r\n    public dispose(): void {\r\n        this._physicsPlugin.disposeConstraint(this);\r\n    }\r\n}\r\n\r\n/**\r\n * This describes a single limit used by Physics6DoFConstraint\r\n */\r\nexport class Physics6DoFLimit {\r\n    /**\r\n     * The axis ID to limit\r\n     */\r\n    axis: PhysicsConstraintAxis;\r\n    /**\r\n     * An optional minimum limit for the axis.\r\n     * Corresponds to a distance in meters for linear axes, an angle in radians for angular axes.\r\n     */\r\n    minLimit?: number;\r\n    /**\r\n     * An optional maximum limit for the axis.\r\n     * Corresponds to a distance in meters for linear axes, an angle in radians for angular axes.\r\n     */\r\n    maxLimit?: number;\r\n    /**\r\n     * The stiffness of the constraint.\r\n     */\r\n    stiffness?: number;\r\n    /**\r\n     * A constraint parameter that specifies damping.\r\n     */\r\n    damping?: number;\r\n}\r\n\r\n/**\r\n * A generic constraint, which can be used to build more complex constraints than those specified\r\n * in PhysicsConstraintType. The axis and pivot options in PhysicsConstraintParameters define the space\r\n * the constraint operates in. This constraint contains a set of limits, which restrict the\r\n * relative movement of the bodies in that coordinate system\r\n */\r\nexport class Physics6DoFConstraint extends PhysicsConstraint {\r\n    /**\r\n     * The collection of limits which this constraint will apply\r\n     */\r\n    public limits: Physics6DoFLimit[];\r\n\r\n    constructor(constraintParams: PhysicsConstraintParameters, limits: Physics6DoFLimit[], scene: Scene) {\r\n        super(PhysicsConstraintType.SIX_DOF, constraintParams, scene);\r\n        this.limits = limits;\r\n    }\r\n\r\n    /**\r\n     * Sets the friction of the given axis of the physics engine.\r\n     * @param axis - The axis of the physics engine to set the friction for.\r\n     * @param friction - The friction to set for the given axis.\r\n     *\r\n     */\r\n    public setAxisFriction(axis: PhysicsConstraintAxis, friction: number): void {\r\n        this._physicsPlugin.setAxisFriction(this, axis, friction);\r\n    }\r\n\r\n    /**\r\n     * Gets the friction of the given axis of the physics engine.\r\n     * @param axis - The axis of the physics engine.\r\n     * @returns The friction of the given axis, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisFriction(axis: PhysicsConstraintAxis): Nullable<number> {\r\n        return this._physicsPlugin.getAxisFriction(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the limit mode for the given axis of the constraint.\r\n     * @param axis The axis to set the limit mode for.\r\n     * @param limitMode The limit mode to set.\r\n     *\r\n     * This method is useful for setting the limit mode for a given axis of the constraint. This is important for\r\n     * controlling the behavior of the physics engine when the constraint is reached. By setting the limit mode,\r\n     * the engine can be configured to either stop the motion of the objects, or to allow them to continue\r\n     * moving beyond the constraint.\r\n     */\r\n    public setAxisMode(axis: PhysicsConstraintAxis, limitMode: PhysicsConstraintAxisLimitMode): void {\r\n        this._physicsPlugin.setAxisMode(this, axis, limitMode);\r\n    }\r\n\r\n    /**\r\n     * Gets the limit mode of the given axis of the constraint.\r\n     *\r\n     * @param axis - The axis of the constraint.\r\n     * @returns The limit mode of the given axis, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMode(axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintAxisLimitMode> {\r\n        return this._physicsPlugin.getAxisMode(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the minimum limit of a given axis of a constraint.\r\n     * @param axis - The axis of the constraint.\r\n     * @param minLimit - The minimum limit of the axis.\r\n     *\r\n     */\r\n    public setAxisMinLimit(axis: PhysicsConstraintAxis, minLimit: number): void {\r\n        this._physicsPlugin.setAxisMinLimit(this, axis, minLimit);\r\n    }\r\n\r\n    /**\r\n     * Gets the minimum limit of the given axis of the physics engine.\r\n     * @param axis - The axis of the physics engine.\r\n     * @returns The minimum limit of the given axis, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMinLimit(axis: PhysicsConstraintAxis): Nullable<number> {\r\n        return this._physicsPlugin.getAxisMinLimit(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum limit of the given axis for the physics engine.\r\n     * @param axis - The axis to set the limit for.\r\n     * @param limit - The maximum limit of the axis.\r\n     *\r\n     * This method is useful for setting the maximum limit of the given axis for the physics engine,\r\n     * which can be used to control the movement of the physics object. This helps to ensure that the\r\n     * physics object does not move beyond the given limit.\r\n     */\r\n    public setAxisMaxLimit(axis: PhysicsConstraintAxis, limit: number): void {\r\n        this._physicsPlugin.setAxisMaxLimit(this, axis, limit);\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum limit of the given axis of the physics engine.\r\n     * @param axis - The axis of the physics engine.\r\n     * @returns The maximum limit of the given axis, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMaxLimit(axis: PhysicsConstraintAxis): Nullable<number> {\r\n        return this._physicsPlugin.getAxisMaxLimit(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the motor type of the given axis of the constraint.\r\n     * @param axis - The axis of the constraint.\r\n     * @param motorType - The type of motor to use.\r\n     */\r\n    public setAxisMotorType(axis: PhysicsConstraintAxis, motorType: PhysicsConstraintMotorType): void {\r\n        this._physicsPlugin.setAxisMotorType(this, axis, motorType);\r\n    }\r\n\r\n    /**\r\n     * Gets the motor type of the specified axis of the constraint.\r\n     *\r\n     * @param axis - The axis of the constraint.\r\n     * @returns The motor type of the specified axis, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMotorType(axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintMotorType> {\r\n        return this._physicsPlugin.getAxisMotorType(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the target velocity of the motor associated with the given axis of the constraint.\r\n     * @param axis - The axis of the constraint.\r\n     * @param target - The target velocity of the motor.\r\n     *\r\n     * This method is useful for setting the target velocity of the motor associated with the given axis of the constraint.\r\n     */\r\n    public setAxisMotorTarget(axis: PhysicsConstraintAxis, target: number): void {\r\n        this._physicsPlugin.setAxisMotorTarget(this, axis, target);\r\n    }\r\n\r\n    /**\r\n     * Gets the target velocity of the motor associated to the given constraint axis.\r\n     * @param axis - The constraint axis associated to the motor.\r\n     * @returns The target velocity of the motor, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMotorTarget(axis: PhysicsConstraintAxis): Nullable<number> {\r\n        return this._physicsPlugin.getAxisMotorTarget(this, axis);\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum force of the motor of the given axis of the constraint.\r\n     * @param axis - The axis of the constraint.\r\n     * @param maxForce - The maximum force of the motor.\r\n     *\r\n     */\r\n    public setAxisMotorMaxForce(axis: PhysicsConstraintAxis, maxForce: number): void {\r\n        this._physicsPlugin.setAxisMotorMaxForce(this, axis, maxForce);\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum force of the motor of the given axis of the constraint.\r\n     * @param axis - The axis of the constraint.\r\n     * @returns The maximum force of the motor, or null if the constraint hasn't been initialized yet.\r\n     *\r\n     */\r\n    public getAxisMotorMaxForce(axis: PhysicsConstraintAxis): Nullable<number> {\r\n        return this._physicsPlugin.getAxisMotorMaxForce(this, axis);\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a Ball and Socket Constraint, used to simulate a joint\r\n * This class is useful for simulating a joint between two bodies in a physics engine.\r\n * It allows for the two bodies to move relative to each other in a way that mimics a ball and socket joint, such as a shoulder or hip joint.\r\n * @param pivotA - The first pivot, defined locally in the first body frame\r\n * @param pivotB - The second pivot, defined locally in the second body frame\r\n * @param axisA - The axis of the first body\r\n * @param axisB - The axis of the second body\r\n * @param scene - The scene the constraint is applied to\r\n * @returns The Ball and Socket Constraint\r\n */\r\nexport class BallAndSocketConstraint extends PhysicsConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, scene: Scene) {\r\n        super(PhysicsConstraintType.BALL_AND_SOCKET, { pivotA: pivotA, pivotB: pivotB, axisA: axisA, axisB: axisB }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a distance constraint.\r\n *\r\n * This code is useful for creating a distance constraint in a physics engine.\r\n * A distance constraint is a type of constraint that keeps two objects at a certain distance from each other.\r\n * The scene is used to add the constraint to the physics engine.\r\n * @param maxDistance distance between bodies\r\n * @param scene The scene the constraint belongs to\r\n * @returns DistanceConstraint\r\n */\r\nexport class DistanceConstraint extends PhysicsConstraint {\r\n    constructor(maxDistance: number, scene: Scene) {\r\n        super(PhysicsConstraintType.DISTANCE, { maxDistance: maxDistance }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a HingeConstraint, which is a type of PhysicsConstraint.\r\n *\r\n * This code is useful for creating a HingeConstraint, which is a type of PhysicsConstraint.\r\n * This constraint is used to simulate a hinge joint between two rigid bodies, allowing them to rotate around a single axis.\r\n * @param pivotA - The first pivot point, in world space.\r\n * @param pivotB - The second pivot point, in world space.\r\n * @param scene - The scene the constraint is used in.\r\n * @returns The new HingeConstraint.\r\n */\r\nexport class HingeConstraint extends PhysicsConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, scene: Scene) {\r\n        super(PhysicsConstraintType.HINGE, { pivotA: pivotA, pivotB: pivotB, axisA: axisA, axisB: axisB }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a SliderConstraint, which is a type of PhysicsConstraint.\r\n *\r\n * This code is useful for creating a SliderConstraint, which is a type of PhysicsConstraint.\r\n * It allows the user to specify the two pivots and two axes of the constraint in world space, as well as the scene the constraint belongs to.\r\n * This is useful for creating a constraint between two rigid bodies that allows them to move along a certain axis.\r\n * @param pivotA - The first pivot of the constraint, in world space.\r\n * @param pivotB - The second pivot of the constraint, in world space.\r\n * @param axisA - The first axis of the constraint, in world space.\r\n * @param axisB - The second axis of the constraint, in world space.\r\n * @param scene - The scene the constraint belongs to.\r\n * @returns The created SliderConstraint.\r\n */\r\nexport class SliderConstraint extends PhysicsConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, scene: Scene) {\r\n        super(PhysicsConstraintType.SLIDER, { pivotA: pivotA, pivotB: pivotB, axisA: axisA, axisB: axisB }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a LockConstraint, which is a type of PhysicsConstraint.\r\n *\r\n * This code is useful for creating a LockConstraint, which is a type of PhysicsConstraint.\r\n * It takes in two pivots and two axes in local space, as well as the scene the constraint belongs to, and creates a LockConstraint.\r\n * @param pivotA - The first pivot of the constraint in local space.\r\n * @param pivotB - The second pivot of the constraint in local space.\r\n * @param axisA - The first axis of the constraint in local space.\r\n * @param axisB - The second axis of the constraint in local space.\r\n * @param scene - The scene the constraint belongs to.\r\n * @returns The created LockConstraint.\r\n */\r\nexport class LockConstraint extends PhysicsConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, scene: Scene) {\r\n        super(PhysicsConstraintType.LOCK, { pivotA: pivotA, pivotB: pivotB, axisA: axisA, axisB: axisB }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a PrismaticConstraint, which is a type of PhysicsConstraint.\r\n *\r\n * This code is useful for creating a PrismaticConstraint, which is a type of PhysicsConstraint.\r\n * It takes in two pivots and two axes in local space, as well as the scene the constraint belongs to, and creates a PrismaticConstraint.\r\n * @param pivotA - The first pivot of the constraint in local space.\r\n * @param pivotB - The second pivot of the constraint in local space.\r\n * @param axisA - The first axis of the constraint in local space.\r\n * @param axisB - The second axis of the constraint in local space.\r\n * @param scene - The scene the constraint belongs to.\r\n * @returns The created LockConstraint.\r\n */\r\nexport class PrismaticConstraint extends PhysicsConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, scene: Scene) {\r\n        super(PhysicsConstraintType.PRISMATIC, { pivotA: pivotA, pivotB: pivotB, axisA: axisA, axisB: axisB }, scene);\r\n    }\r\n}\r\n\r\n/**\r\n * Creates a SpringConstraint, which is a type of Physics6DoFConstraint. This constraint applies a force at the ends which is proportional\r\n * to the distance between ends, and a stiffness and damping factor. The force is calculated as (stiffness * positionError) - (damping * velocity)\r\n *\r\n * @param pivotA - The first pivot of the constraint in local space.\r\n * @param pivotB - The second pivot of the constraint in local space.\r\n * @param axisA - The first axis of the constraint in local space.\r\n * @param axisB - The second axis of the constraint in local space.\r\n * @param minDistance - The minimum distance between the two pivots.\r\n * @param maxDistance - The maximum distance between the two pivots.\r\n * @param stiffness - The stiffness of the spring.\r\n * @param damping - The damping of the spring.\r\n * @param scene - The scene the constraint belongs to.\r\n * @returns The created SpringConstraint.\r\n */\r\nexport class SpringConstraint extends Physics6DoFConstraint {\r\n    constructor(pivotA: Vector3, pivotB: Vector3, axisA: Vector3, axisB: Vector3, minDistance: number, maxDistance: number, stiffness: number, damping: number, scene: Scene) {\r\n        super({ pivotA, pivotB, axisA, axisB }, [{ axis: PhysicsConstraintAxis.LINEAR_DISTANCE, minLimit: minDistance, maxLimit: maxDistance, stiffness, damping }], scene);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5748, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsMaterial.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsMaterial.ts"],"sourcesContent":["/**\r\n * Determines how values from the PhysicsMaterial are combined when\r\n * two objects are in contact. When each PhysicsMaterial specifies\r\n * a different combine mode for some property, the combine mode which\r\n * is used will be selected based on their order in this enum - i.e.\r\n * a value later in this list will be preferentially used.\r\n */\r\nexport const enum PhysicsMaterialCombineMode {\r\n    /**\r\n     * The final value will be the geometric mean of the two values:\r\n     * sqrt( valueA *  valueB )\r\n     */\r\n    GEOMETRIC_MEAN,\r\n    /**\r\n     * The final value will be the smaller of the two:\r\n     * min( valueA , valueB )\r\n     */\r\n    MINIMUM,\r\n    /* The final value will be the larger of the two:\r\n     * max( valueA , valueB )\r\n     */\r\n    MAXIMUM,\r\n    /* The final value will be the arithmetic mean of the two values:\r\n     * (valueA + valueB) / 2\r\n     */\r\n    ARITHMETIC_MEAN,\r\n    /**\r\n     * The final value will be the product of the two values:\r\n     * valueA * valueB\r\n     */\r\n    MULTIPLY,\r\n}\r\n\r\n/**\r\n * Physics material class\r\n * Helps setting friction and restitution that are used to compute responding forces in collision response\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsMaterial {\r\n    /**\r\n     * Sets the friction used by this material\r\n     *\r\n     * The friction determines how much an object will slow down when it is in contact with another object.\r\n     * This is important for simulating realistic physics, such as when an object slides across a surface.\r\n     *\r\n     * If not provided, a default value of 0.5 will be used.\r\n     */\r\n    friction?: number;\r\n\r\n    /**\r\n     * Sets the static friction used by this material.\r\n     *\r\n     * Static friction is the friction that must be overcome before a pair of objects can start sliding\r\n     * relative to each other; for physically-realistic behaviour, it should be at least as high as the\r\n     * normal friction value. If not provided, the friction value will be used\r\n     */\r\n    staticFriction?: number;\r\n\r\n    /**\r\n     * Sets the restitution of the physics material.\r\n     *\r\n     * The restitution is a factor which describes, the amount of energy that is retained after a collision,\r\n     * which should be a number between 0 and 1..\r\n     *\r\n     * A restitution of 0 means that no energy is retained and the objects will not bounce off each other,\r\n     * while a restitution of 1 means that all energy is retained and the objects will bounce.\r\n     *\r\n     * Note, though, due that due to the simulation implementation, an object with a restitution of 1 may\r\n     * still lose energy over time.\r\n     *\r\n     * If not provided, a default value of 0 will be used.\r\n     */\r\n    restitution?: number;\r\n\r\n    /**\r\n     * Describes how two different friction values should be combined. See PhysicsMaterialCombineMode for\r\n     * more details.\r\n     *\r\n     * If not provided, will use PhysicsMaterialCombineMode.MINIMUM\r\n     */\r\n    frictionCombine?: PhysicsMaterialCombineMode;\r\n\r\n    /**\r\n     * Describes how two different restitution values should be combined. See PhysicsMaterialCombineMode for\r\n     * more details.\r\n     *\r\n     * If not provided, will use PhysicsMaterialCombineMode.MAXIMUM\r\n     */\r\n    restitutionCombine?: PhysicsMaterialCombineMode;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;GAMG;;;;AACH,IAAkB,0BAwBjB;AAxBD,CAAA,SAAkB,0BAA0B;IACxC;;;OAGG,CACH,0BAAA,CAAA,0BAAA,CAAA,iBAAA,GAAA,EAAA,GAAA,gBAAc,CAAA;IACd;;;OAGG,CACH,0BAAA,CAAA,0BAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAO,CAAA;IACP;;OAEG,CACH,0BAAA,CAAA,0BAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAO,CAAA;IACP;;OAEG,CACH,0BAAA,CAAA,0BAAA,CAAA,kBAAA,GAAA,EAAA,GAAA,iBAAe,CAAA;IACf;;;OAGG,CACH,0BAAA,CAAA,0BAAA,CAAA,WAAA,GAAA,EAAA,GAAA,UAAQ,CAAA;AACZ,CAAC,EAxBiB,0BAA0B,IAAA,CAA1B,0BAA0B,GAAA,CAAA,CAAA,GAwB3C"}},
    {"offset": {"line": 5783, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsAggregate.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsAggregate.ts"],"sourcesContent":["import { PhysicsBody } from \"./physicsBody\";\r\nimport type { PhysicsMaterial } from \"./physicsMaterial\";\r\nimport { PhysicsShape } from \"./physicsShape\";\r\nimport { Logger } from \"../../Misc/logger\";\r\nimport type { Scene } from \"../../scene\";\r\nimport type { TransformNode } from \"../../Meshes/transformNode\";\r\nimport { Quaternion, TmpVectors, Vector3 } from \"../../Maths/math.vector\";\r\nimport { WithinEpsilon } from \"../../Maths/math.scalar.functions\";\r\nimport { PhysicsMotionType, PhysicsShapeType } from \"./IPhysicsEnginePlugin\";\r\nimport type { Mesh } from \"../../Meshes/mesh\";\r\nimport type { Observer } from \"../../Misc/observable\";\r\nimport type { Nullable } from \"../../types\";\r\nimport type { Node } from \"../../node\";\r\nimport type { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport { BoundingBox } from \"../../Culling/boundingBox\";\r\n\r\n/**\r\n * The interface for the physics aggregate parameters\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsAggregateParameters {\r\n    /**\r\n     * The mass of the physics aggregate\r\n     */\r\n    mass: number;\r\n\r\n    /**\r\n     * The friction of the physics aggregate\r\n     */\r\n    friction?: number;\r\n\r\n    /**\r\n     * The coefficient of restitution of the physics aggregate\r\n     */\r\n    restitution?: number;\r\n\r\n    /**\r\n     * Radius for sphere, cylinder and capsule\r\n     */\r\n    radius?: number;\r\n\r\n    /**\r\n     * Starting point for cylinder/capsule\r\n     */\r\n    pointA?: Vector3;\r\n\r\n    /**\r\n     * Ending point for cylinder/capsule\r\n     */\r\n    pointB?: Vector3;\r\n\r\n    /**\r\n     * Extents for box\r\n     */\r\n    extents?: Vector3;\r\n\r\n    /**\r\n     * Orientation for box\r\n     */\r\n    rotation?: Quaternion;\r\n\r\n    /**\r\n     * mesh local center\r\n     */\r\n    center?: Vector3;\r\n\r\n    /**\r\n     * mesh object. Used for mesh and convex hull aggregates.\r\n     */\r\n    mesh?: Mesh;\r\n\r\n    /**\r\n     * Physics engine will try to make this body sleeping and not active\r\n     */\r\n    startAsleep?: boolean;\r\n\r\n    /**\r\n     * If true, mark the created shape as a trigger shape\r\n     */\r\n    isTriggerShape?: boolean;\r\n}\r\n/**\r\n * Helper class to create and interact with a PhysicsAggregate.\r\n * This is a transition object that works like Physics Plugin V1 Impostors.\r\n * This helper instantiates all mandatory physics objects to get a body/shape and material.\r\n * It's less efficient than handling body and shapes independently but for prototyping or\r\n * a small numbers of physics objects, it's good enough.\r\n */\r\nexport class PhysicsAggregate {\r\n    /**\r\n     * The body that is associated with this aggregate\r\n     */\r\n    public body: PhysicsBody;\r\n\r\n    /**\r\n     * The shape that is associated with this aggregate\r\n     */\r\n    public shape: PhysicsShape;\r\n\r\n    /**\r\n     * The material that is associated with this aggregate\r\n     */\r\n    public material: PhysicsMaterial;\r\n\r\n    private _disposeShapeWhenDisposed = true;\r\n\r\n    private _nodeDisposeObserver: Nullable<Observer<Node>>;\r\n\r\n    constructor(\r\n        /**\r\n         * The physics-enabled object used as the physics aggregate\r\n         */\r\n        public transformNode: TransformNode,\r\n        /**\r\n         * The type of the physics aggregate\r\n         */\r\n        public type: PhysicsShapeType | PhysicsShape,\r\n        private _options: PhysicsAggregateParameters = { mass: 0 },\r\n        private _scene?: Scene\r\n    ) {\r\n        //sanity check!\r\n        if (!this.transformNode) {\r\n            Logger.Error(\"No object was provided. A physics object is obligatory\");\r\n            return;\r\n        }\r\n        const m = transformNode as Mesh;\r\n        if (this.transformNode.parent && this._options.mass !== 0 && m.hasThinInstances) {\r\n            Logger.Warn(\r\n                \"A physics body has been created for an object which has a parent and thin instances. Babylon physics currently works in local space so unexpected issues may occur.\"\r\n            );\r\n        }\r\n\r\n        // Legacy support for old syntax.\r\n        if (!this._scene && transformNode.getScene) {\r\n            this._scene = transformNode.getScene();\r\n        }\r\n\r\n        if (!this._scene) {\r\n            return;\r\n        }\r\n\r\n        //default options params\r\n        this._options.mass = _options.mass === void 0 ? 0 : _options.mass;\r\n        this._options.friction = _options.friction === void 0 ? 0.2 : _options.friction;\r\n        this._options.restitution = _options.restitution === void 0 ? 0.2 : _options.restitution;\r\n\r\n        const motionType = this._options.mass === 0 ? PhysicsMotionType.STATIC : PhysicsMotionType.DYNAMIC;\r\n        const startAsleep = this._options.startAsleep ?? false;\r\n        this.body = new PhysicsBody(transformNode, motionType, startAsleep, this._scene);\r\n        this._addSizeOptions();\r\n        if ((type as any).getClassName && (type as any).getClassName() === \"PhysicsShape\") {\r\n            this.shape = type as PhysicsShape;\r\n            this._disposeShapeWhenDisposed = false;\r\n        } else {\r\n            this.shape = new PhysicsShape({ type: type as PhysicsShapeType, parameters: this._options as any }, this._scene);\r\n        }\r\n\r\n        if (this._options.isTriggerShape) {\r\n            this.shape.isTrigger = true;\r\n        }\r\n\r\n        this.material = { friction: this._options.friction, restitution: this._options.restitution };\r\n        this.body.shape = this.shape;\r\n        this.shape.material = this.material;\r\n\r\n        this.body.setMassProperties({ mass: this._options.mass });\r\n\r\n        this._nodeDisposeObserver = this.transformNode.onDisposeObservable.add(() => {\r\n            this.dispose();\r\n        });\r\n    }\r\n\r\n    private _getObjectBoundingBox() {\r\n        if ((this.transformNode as AbstractMesh).getRawBoundingInfo) {\r\n            return (this.transformNode as AbstractMesh).getRawBoundingInfo().boundingBox;\r\n        } else {\r\n            return new BoundingBox(new Vector3(-0.5, -0.5, -0.5), new Vector3(0.5, 0.5, 0.5));\r\n        }\r\n    }\r\n\r\n    private _hasVertices(node: TransformNode): boolean {\r\n        return (node as any)?.getTotalVertices() > 0;\r\n    }\r\n\r\n    private _addSizeOptions(): void {\r\n        this.transformNode.computeWorldMatrix(true);\r\n        const bb = this._getObjectBoundingBox();\r\n        const extents = TmpVectors.Vector3[0];\r\n        extents.copyFrom(bb.extendSize);\r\n        extents.scaleInPlace(2);\r\n        extents.multiplyInPlace(this.transformNode.absoluteScaling);\r\n        // In case we had any negative scaling, we need to take the absolute value of the extents.\r\n        extents.x = Math.abs(extents.x);\r\n        extents.y = Math.abs(extents.y);\r\n        extents.z = Math.abs(extents.z);\r\n\r\n        const min = TmpVectors.Vector3[1];\r\n        min.copyFrom(bb.minimum);\r\n        min.multiplyInPlace(this.transformNode.absoluteScaling);\r\n\r\n        if (!this._options.center) {\r\n            const center = new Vector3();\r\n            center.copyFrom(bb.center);\r\n            center.multiplyInPlace(this.transformNode.absoluteScaling);\r\n            this._options.center = center;\r\n        }\r\n\r\n        switch (this.type) {\r\n            case PhysicsShapeType.SPHERE:\r\n                if (!this._options.radius && WithinEpsilon(extents.x, extents.y, 0.0001) && WithinEpsilon(extents.x, extents.z, 0.0001)) {\r\n                    this._options.radius = extents.x / 2;\r\n                } else if (!this._options.radius) {\r\n                    Logger.Warn(\"Non uniform scaling is unsupported for sphere shapes. Setting the radius to the biggest bounding box extent.\");\r\n                    this._options.radius = Math.max(extents.x, extents.y, extents.z) / 2;\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CAPSULE:\r\n                {\r\n                    const capRadius = extents.x / 2;\r\n                    this._options.radius = this._options.radius ?? capRadius;\r\n                    this._options.pointA = this._options.pointA ?? new Vector3(0, min.y + capRadius, 0);\r\n                    this._options.pointB = this._options.pointB ?? new Vector3(0, min.y + extents.y - capRadius, 0);\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CYLINDER:\r\n                {\r\n                    const capRadius = extents.x / 2;\r\n                    this._options.radius = this._options.radius ?? capRadius;\r\n                    this._options.pointA = this._options.pointA ?? new Vector3(0, min.y, 0);\r\n                    this._options.pointB = this._options.pointB ?? new Vector3(0, min.y + extents.y, 0);\r\n                }\r\n                break;\r\n            case PhysicsShapeType.MESH:\r\n            case PhysicsShapeType.CONVEX_HULL:\r\n            case PhysicsShapeType.HEIGHTFIELD:\r\n                if (!this._options.mesh && this._hasVertices(this.transformNode)) {\r\n                    this._options.mesh = this.transformNode as Mesh;\r\n                } else if (!this._options.mesh || !this._hasVertices(this._options.mesh)) {\r\n                    throw new Error(\r\n                        \"No valid mesh was provided for mesh or convex hull shape parameter. Please provide a mesh with valid geometry (number of vertices greater than 0).\"\r\n                    );\r\n                }\r\n                break;\r\n            case PhysicsShapeType.BOX:\r\n                this._options.extents = this._options.extents ?? new Vector3(extents.x, extents.y, extents.z);\r\n                this._options.rotation = this._options.rotation ?? Quaternion.Identity();\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases the body, shape and material\r\n     */\r\n    public dispose(): void {\r\n        if (this._nodeDisposeObserver) {\r\n            this.body.transformNode.onDisposeObservable.remove(this._nodeDisposeObserver);\r\n            this._nodeDisposeObserver = null;\r\n        }\r\n        this.body.dispose();\r\n        if (this._disposeShapeWhenDisposed) {\r\n            this.shape.dispose();\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5948, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/ragdoll.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/ragdoll.ts"],"sourcesContent":["import type { Skeleton } from \"../../Bones/skeleton\";\r\nimport { Vector3, Matrix, TmpVectors, Quaternion } from \"../../Maths/math.vector\";\r\nimport type { Scene } from \"../../scene\";\r\nimport { PhysicsAggregate } from \"./physicsAggregate\";\r\nimport { PhysicsConstraint } from \"./physicsConstraint\";\r\nimport type { Mesh } from \"../../Meshes/mesh\";\r\nimport { Axis, Space } from \"core/Maths/math.axis\";\r\nimport { PhysicsShapeType, PhysicsConstraintType, PhysicsMotionType } from \"./IPhysicsEnginePlugin\";\r\nimport type { Nullable } from \"../../types\";\r\nimport type { Bone } from \"../../Bones/bone\";\r\nimport { Logger } from \"../../Misc/logger\";\r\nimport { TransformNode } from \"../../Meshes/transformNode\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\n\r\n/**\r\n * Ragdoll bone properties\r\n * @experimental\r\n */\r\nexport class RagdollBoneProperties {\r\n    /**\r\n     * Width of the box shape\r\n     */\r\n    width?: number;\r\n    /**\r\n     * depth of the box shape\r\n     */\r\n    depth?: number;\r\n    /**\r\n     * height of the box shape\r\n     */\r\n    height?: number;\r\n    /**\r\n     * size that will be used of width, depth and height of the shape box\r\n     */\r\n    size?: number;\r\n    /**\r\n     * Type of Physics Constraint used between bones\r\n     */\r\n    joint?: number | undefined | PhysicsConstraintType;\r\n    /**\r\n     * Main rotation axis used by the constraint, in local space\r\n     */\r\n    rotationAxis?: Vector3;\r\n    /**\r\n     * Minimum rotation angle value\r\n     */\r\n    min?: number;\r\n    /**\r\n     * Maximum rotation angle value\r\n     */\r\n    max?: number;\r\n    /**\r\n     * Offset along local axis\r\n     */\r\n    boxOffset?: number;\r\n    /**\r\n     * Axis that need an offset\r\n     */\r\n    boneOffsetAxis?: Vector3;\r\n}\r\n\r\n/**\r\n * Ragdoll for Physics V2\r\n * @experimental\r\n */\r\nexport class Ragdoll {\r\n    private _skeleton: Skeleton;\r\n    private _scene: Scene;\r\n    private _rootTransformNode: Mesh | TransformNode;\r\n    private _config: any;\r\n    private _boxConfigs: Array<RagdollBoneProperties> = new Array<RagdollBoneProperties>();\r\n    private _constraints: Array<PhysicsConstraint> = new Array<PhysicsConstraint>();\r\n    private _bones: Array<Bone> = new Array<Bone>();\r\n    private _initialRotation: Array<Quaternion> = new Array<Quaternion>();\r\n    // without mesh transform, to figure out later\r\n    private _initialRotation2: Array<Quaternion> = new Array<Quaternion>();\r\n    private _boneNames: string[] = [];\r\n    private _transforms: Array<TransformNode> = new Array<TransformNode>();\r\n    private _aggregates: Array<PhysicsAggregate> = new Array<PhysicsAggregate>();\r\n    private _ragdollMode: boolean = false;\r\n    private _rootBoneName: string = \"\";\r\n    private _rootBoneIndex: number = -1;\r\n    private _mass: number = 10;\r\n    private _restitution: number = 0;\r\n    private _beforeRenderObserver: Nullable<Observer<Scene>> = null;\r\n\r\n    /**\r\n     * Pause synchronization between physics and bone position/orientation\r\n     */\r\n    public pauseSync: boolean = false;\r\n\r\n    private _putBoxesInBoneCenter: boolean;\r\n    private _defaultJoint: number = PhysicsConstraintType.HINGE;\r\n    private _defaultJointMin: number = -90;\r\n    private _defaultJointMax: number = 90;\r\n\r\n    /**\r\n     * Construct a new Ragdoll object. Once ready, it can be made dynamic by calling `Ragdoll` method\r\n     * @param skeleton The skeleton containing bones to be physicalized\r\n     * @param rootTransformNode The mesh or its transform used by the skeleton\r\n     * @param config an array of `RagdollBoneProperties` corresponding to bones and their properties used to instanciate physics bodies\r\n     */\r\n    constructor(skeleton: Skeleton, rootTransformNode: Mesh | TransformNode, config: RagdollBoneProperties[]) {\r\n        this._skeleton = skeleton;\r\n        this._scene = skeleton.getScene();\r\n        this._rootTransformNode = rootTransformNode;\r\n        this._config = config; // initial, user defined box configs. May have several box configs jammed into 1 index.\r\n        this._boxConfigs = []; // final box configs. Every element is a separate box config (this.config may have several configs jammed into 1 index).\r\n        this._putBoxesInBoneCenter = false;\r\n        this._defaultJoint = PhysicsConstraintType.HINGE;\r\n\r\n        this._init();\r\n    }\r\n\r\n    /**\r\n     * returns an array of created constraints\r\n     * @returns array of created constraints\r\n     */\r\n    public getConstraints(): Array<PhysicsConstraint> {\r\n        return this._constraints;\r\n    }\r\n\r\n    /**\r\n     * Returns the aggregate corresponding to the ragdoll bone index\r\n     * @param index ragdoll bone aggregate index\r\n     * @returns the aggregate for the bone index for the root aggregate if index is invalid\r\n     */\r\n    public getAggregate(index: number): PhysicsAggregate {\r\n        if (index < 0 || index >= this._aggregates.length) {\r\n            return this._aggregates[this._rootBoneIndex];\r\n        }\r\n        return this._aggregates[index];\r\n    }\r\n\r\n    private _createColliders(): void {\r\n        this._rootTransformNode.computeWorldMatrix();\r\n        this._skeleton.computeAbsoluteMatrices(true);\r\n        this._skeleton.prepare(true);\r\n\r\n        const config = this._config;\r\n        for (let i = 0; i < config.length; i++) {\r\n            const boneNames = config[i].bone !== undefined ? [config[i].bone] : config[i].bones;\r\n\r\n            for (let ii = 0; ii < boneNames.length; ii++) {\r\n                const currentBone = this._skeleton.bones[this._skeleton.getBoneIndexByName(boneNames[ii])];\r\n                if (currentBone == undefined) {\r\n                    return;\r\n                }\r\n\r\n                // First define the box dimensions, so we can then use them when calling CreateBox().\r\n                const currentRagdollBoneProperties: RagdollBoneProperties = {\r\n                    width: this._config[i].width,\r\n                    depth: this._config[i].depth,\r\n                    height: this._config[i].height,\r\n                    size: this._config[i].size,\r\n                };\r\n\r\n                currentRagdollBoneProperties.width = currentRagdollBoneProperties.width ?? currentRagdollBoneProperties.size;\r\n                currentRagdollBoneProperties.depth = currentRagdollBoneProperties.depth ?? currentRagdollBoneProperties.size;\r\n                currentRagdollBoneProperties.height = currentRagdollBoneProperties.height ?? currentRagdollBoneProperties.size;\r\n                const transform = new TransformNode(boneNames[ii] + \"_transform\", this._scene);\r\n\r\n                // Define the rest of the box properties.\r\n                currentRagdollBoneProperties.joint = config[i].joint !== undefined ? config[i].joint : this._defaultJoint;\r\n                currentRagdollBoneProperties.rotationAxis = config[i].rotationAxis !== undefined ? config[i].rotationAxis : Axis.X;\r\n                currentRagdollBoneProperties.min = config[i].min !== undefined ? config[i].min : this._defaultJointMin;\r\n                currentRagdollBoneProperties.max = config[i].max !== undefined ? config[i].max : this._defaultJointMax;\r\n\r\n                // Offset value.\r\n                let boxOffset = 0;\r\n                if ((config[i].putBoxInBoneCenter !== undefined && config[i].putBoxInBoneCenter) || this._putBoxesInBoneCenter) {\r\n                    if (currentBone.length === undefined) {\r\n                        Logger.Log(\"The length property is not defined for bone \" + currentBone.name);\r\n                    }\r\n                    boxOffset = currentBone.length / 2;\r\n                } else if (config[i].boxOffset !== undefined) {\r\n                    boxOffset = config[i].boxOffset;\r\n                }\r\n                currentRagdollBoneProperties.boxOffset = boxOffset;\r\n\r\n                // Offset axis.\r\n                const boneOffsetAxis = config[i].boneOffsetAxis !== undefined ? config[i].boneOffsetAxis : Axis.Y;\r\n                const boneDir = currentBone.getDirection(boneOffsetAxis, this._rootTransformNode);\r\n                currentRagdollBoneProperties.boneOffsetAxis = boneOffsetAxis;\r\n\r\n                transform.position = currentBone.getAbsolutePosition(this._rootTransformNode).add(boneDir.scale(boxOffset));\r\n\r\n                const mass = config[i].mass !== undefined ? config[i].mass : this._mass;\r\n                const restitution = config[i].restitution !== undefined ? config[i].restitution : this._restitution;\r\n                const aggregate = new PhysicsAggregate(\r\n                    transform,\r\n                    PhysicsShapeType.BOX,\r\n                    {\r\n                        mass: mass,\r\n                        restitution: restitution,\r\n                        friction: 0.6,\r\n                        extents: new Vector3(currentRagdollBoneProperties.width, currentRagdollBoneProperties.height, currentRagdollBoneProperties.depth),\r\n                    },\r\n                    this._scene\r\n                );\r\n                aggregate.body.setCollisionCallbackEnabled(true);\r\n                aggregate.body.disablePreStep = false;\r\n                aggregate.body.setMotionType(PhysicsMotionType.ANIMATED);\r\n                this._aggregates.push(aggregate);\r\n                this._bones.push(currentBone);\r\n                this._boneNames.push(currentBone.name);\r\n                this._transforms.push(transform);\r\n                this._boxConfigs.push(currentRagdollBoneProperties);\r\n                this._initialRotation.push(currentBone.getRotationQuaternion(Space.WORLD, this._rootTransformNode));\r\n                this._initialRotation2.push(currentBone.getRotationQuaternion(Space.WORLD));\r\n            }\r\n        }\r\n    }\r\n\r\n    private _initJoints(): void {\r\n        this._rootTransformNode.computeWorldMatrix();\r\n        for (let i = 0; i < this._bones.length; i++) {\r\n            // The root bone has no joints.\r\n            if (i == this._rootBoneIndex) {\r\n                continue;\r\n            }\r\n\r\n            const nearestParent = this._findNearestParent(i);\r\n\r\n            if (nearestParent == null) {\r\n                Logger.Warn(\"Couldn't find a nearest parent bone in the configs for bone called \" + this._boneNames[i]);\r\n                return;\r\n            }\r\n\r\n            const boneParentIndex = this._boneNames.indexOf(nearestParent.name);\r\n\r\n            let distanceFromParentBoxToBone = this._bones[i].getAbsolutePosition(this._rootTransformNode).subtract(this._transforms[boneParentIndex].position);\r\n\r\n            const wmat = this._transforms[boneParentIndex].computeWorldMatrix();\r\n            const invertedWorldMat = Matrix.Invert(wmat);\r\n            distanceFromParentBoxToBone = Vector3.TransformCoordinates(this._bones[i].getAbsolutePosition(this._rootTransformNode), invertedWorldMat);\r\n\r\n            const boneAbsPos = this._bones[i].getAbsolutePosition(this._rootTransformNode);\r\n            const boxAbsPos = this._transforms[i].position.clone();\r\n            const myConnectedPivot = boneAbsPos.subtract(boxAbsPos);\r\n\r\n            const constraintType = this._boxConfigs[i].joint ?? this._defaultJoint;\r\n            const constraint = new PhysicsConstraint(\r\n                constraintType,\r\n                {\r\n                    pivotA: distanceFromParentBoxToBone,\r\n                    pivotB: myConnectedPivot,\r\n                    axisA: this._boxConfigs[i].rotationAxis!,\r\n                    axisB: this._boxConfigs[i].rotationAxis!,\r\n                    collision: false,\r\n                },\r\n                this._scene\r\n            );\r\n\r\n            this._aggregates[boneParentIndex].body.addConstraint(this._aggregates[i].body, constraint);\r\n            constraint.isEnabled = false;\r\n            this._constraints.push(constraint);\r\n        }\r\n    }\r\n\r\n    // set physics body orientation/position from bones\r\n    private _syncBonesToPhysics(): void {\r\n        const rootMatrix = this._rootTransformNode.getWorldMatrix();\r\n        for (let i = 0; i < this._bones.length; i++) {\r\n            // position\r\n            const transform = this._aggregates[i].transformNode;\r\n            const rootPos = this._bones[i].getAbsolutePosition();\r\n            Vector3.TransformCoordinatesToRef(rootPos, rootMatrix, transform.position);\r\n\r\n            // added offset\r\n            this._bones[i].getDirectionToRef(this._boxConfigs[i].boneOffsetAxis!, this._rootTransformNode, TmpVectors.Vector3[0]);\r\n            TmpVectors.Vector3[0].scaleInPlace(this._boxConfigs[i].boxOffset ?? 0);\r\n            transform.position.addInPlace(TmpVectors.Vector3[0]);\r\n\r\n            this._setBoneOrientationToBody(i);\r\n        }\r\n    }\r\n\r\n    private _setBoneOrientationToBody(boneIndex: number): void {\r\n        const transform = this._aggregates[boneIndex].transformNode;\r\n        const bone = this._bones[boneIndex];\r\n        this._initialRotation[boneIndex].conjugateToRef(TmpVectors.Quaternion[0]);\r\n        bone.getRotationQuaternionToRef(Space.WORLD, this._rootTransformNode, TmpVectors.Quaternion[1]);\r\n        TmpVectors.Quaternion[1].multiplyToRef(TmpVectors.Quaternion[0], transform.rotationQuaternion!);\r\n        transform.rotationQuaternion!.normalize();\r\n    }\r\n\r\n    private _syncBonesAndBoxes(): void {\r\n        if (this.pauseSync) {\r\n            return;\r\n        }\r\n\r\n        if (this._ragdollMode) {\r\n            this._setBodyOrientationToBone(this._rootBoneIndex);\r\n\r\n            const rootPos = this._aggregates[this._rootBoneIndex].body.transformNode.position;\r\n            this._rootTransformNode.getWorldMatrix().invertToRef(TmpVectors.Matrix[0]);\r\n\r\n            Vector3.TransformCoordinatesToRef(rootPos, TmpVectors.Matrix[0], TmpVectors.Vector3[0]);\r\n            this._bones[this._rootBoneIndex].setAbsolutePosition(TmpVectors.Vector3[0]);\r\n\r\n            for (let i = 0; i < this._bones.length; i++) {\r\n                if (i == this._rootBoneIndex) {\r\n                    continue;\r\n                }\r\n                this._setBodyOrientationToBone(i);\r\n            }\r\n        } else {\r\n            this._syncBonesToPhysics();\r\n        }\r\n    }\r\n\r\n    private _setBodyOrientationToBone(boneIndex: number): void {\r\n        const qmesh =\r\n            this._rootTransformNode.rotationQuaternion ??\r\n            Quaternion.FromEulerAngles(this._rootTransformNode.rotation.x, this._rootTransformNode.rotation.y, this._rootTransformNode.rotation.z);\r\n        const qbind = this._initialRotation2[boneIndex];\r\n        const qphys = this._aggregates[boneIndex].body?.transformNode?.rotationQuaternion;\r\n\r\n        qmesh.multiplyToRef(qbind, TmpVectors.Quaternion[1]);\r\n        qphys?.multiplyToRef(TmpVectors.Quaternion[1], TmpVectors.Quaternion[0]);\r\n\r\n        this._bones[boneIndex].setRotationQuaternion(TmpVectors.Quaternion[0], Space.WORLD, this._rootTransformNode);\r\n    }\r\n\r\n    // Return true if root bone is valid/exists in this.bonesNames. false otherwise.\r\n    private _defineRootBone(): boolean {\r\n        const skeletonRoots = this._skeleton.getChildren();\r\n        if (skeletonRoots.length != 1) {\r\n            Logger.Log(\"Ragdoll creation failed: there can only be one root in the skeleton.\");\r\n            return false;\r\n        }\r\n\r\n        this._rootBoneName = skeletonRoots[0].name;\r\n        this._rootBoneIndex = this._boneNames.indexOf(this._rootBoneName);\r\n        if (this._rootBoneIndex == -1) {\r\n            // eslint-disable-next-line @typescript-eslint/restrict-plus-operands, @typescript-eslint/no-base-to-string\r\n            Logger.Log(\"Ragdoll creation failed: the array boneNames doesn't have the root bone. The root bone is \" + this._skeleton.getChildren());\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private _findNearestParent(boneIndex: number): any {\r\n        let nearestParent: Nullable<Bone> | undefined = this._bones[boneIndex].getParent();\r\n        do {\r\n            if (nearestParent != null && this._boneNames.includes(nearestParent.name)) {\r\n                break;\r\n            }\r\n\r\n            nearestParent = nearestParent?.getParent();\r\n        } while (nearestParent != null);\r\n\r\n        return nearestParent;\r\n    }\r\n\r\n    private _init() {\r\n        this._createColliders();\r\n\r\n        // If this.defineRootBone() returns ... there is not root bone.\r\n        if (!this._defineRootBone()) {\r\n            return;\r\n        }\r\n\r\n        this._initJoints();\r\n        this._beforeRenderObserver = this._scene.onBeforeRenderObservable.add(() => {\r\n            this._syncBonesAndBoxes();\r\n        });\r\n        this._syncBonesToPhysics();\r\n    }\r\n\r\n    /**\r\n     * Enable ragdoll mode. Create physics objects and make them dynamic.\r\n     */\r\n    public ragdoll(): void {\r\n        this._ragdollMode = true;\r\n        // detach bones with link transform to let physics have control\r\n        for (const bone of this._skeleton.bones) {\r\n            bone.linkTransformNode(null);\r\n        }\r\n        for (let i = 0; i < this._constraints.length; i++) {\r\n            this._constraints[i].isEnabled = true;\r\n        }\r\n        for (let i = 0; i < this._aggregates.length; i++) {\r\n            this._aggregates[i].body.setMotionType(PhysicsMotionType.DYNAMIC);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Dispose resources and remove physics objects\r\n     */\r\n    dispose(): void {\r\n        for (const aggregate of this._aggregates) {\r\n            aggregate.dispose();\r\n        }\r\n        this._aggregates.length = 0;\r\n        for (const transform of this._transforms) {\r\n            transform.dispose();\r\n        }\r\n        this._transforms.length = 0;\r\n        for (const constraint of this._constraints) {\r\n            constraint.dispose();\r\n        }\r\n        this._constraints.length = 0;\r\n\r\n        if (this._beforeRenderObserver) {\r\n            this._scene.onBeforeRenderObservable.remove(this._beforeRenderObserver);\r\n            this._beforeRenderObserver = null;\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6250, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/characterController.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/characterController.ts"],"sourcesContent":["import { Vector3, Quaternion, Matrix, TmpVectors } from \"../../Maths/math.vector\";\r\nimport type { Scene } from \"../../scene\";\r\nimport type { DeepImmutableObject } from \"../../types\";\r\nimport type { PhysicsBody } from \"./physicsBody\";\r\nimport { PhysicsShapeCapsule, type PhysicsShape } from \"./physicsShape\";\r\nimport { PhysicsMotionType } from \"./IPhysicsEnginePlugin\";\r\nimport type { HavokPlugin } from \"./Plugins/havokPlugin\";\r\nimport { BuildArray } from \"core/Misc/arrayTools\";\r\n\r\n/**\r\n * Shape properties for the character controller\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface CharacterShapeOptions {\r\n    /**\r\n     * optional shape used for collision detection\r\n     */\r\n    shape?: PhysicsShape;\r\n    /**\r\n     * capsule height for the capsule shape if no shape is provided\r\n     */\r\n    capsuleHeight?: number;\r\n    /**\r\n     * capsule radius for the capsule shape if no shape is provided\r\n     */\r\n    capsuleRadius?: number;\r\n}\r\n/**\r\n * State of the character on the surface\r\n */\r\nexport const enum CharacterSupportedState {\r\n    UNSUPPORTED,\r\n    SLIDING,\r\n    SUPPORTED,\r\n}\r\n\r\n/**\r\n * Surface information computed by checkSupport method\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface CharacterSurfaceInfo {\r\n    /**\r\n     * Indicates whether the surface is dynamic.\r\n     * A dynamic surface is one that can change its properties over time,\r\n     * such as moving platforms or surfaces that can be affected by external forces.\r\n     * surfaceInfo.supportedState is always CharacterSupportedState.SUPPORTED when isSurfaceDynamic is true.\r\n     */\r\n    isSurfaceDynamic: boolean;\r\n    /**\r\n     * The supported state of the character on the surface.\r\n     */\r\n    supportedState: CharacterSupportedState;\r\n    /**\r\n     * The average normal vector of the surface.\r\n     * This vector is perpendicular to the surface and points outwards.\r\n     */\r\n    averageSurfaceNormal: Vector3;\r\n    /**\r\n     * The average velocity of the surface.\r\n     * This vector represents the speed and direction in which the surface is moving.\r\n     */\r\n    averageSurfaceVelocity: Vector3;\r\n    /**\r\n     * The average angular velocity of the surface.\r\n     */\r\n    averageAngularSurfaceVelocity: Vector3;\r\n}\r\n\r\ninterface IContact {\r\n    /** @internal */\r\n    position: Vector3;\r\n    /** @internal */\r\n    normal: Vector3;\r\n    /** @internal */\r\n    distance: number;\r\n    /** @internal */\r\n    fraction: number;\r\n    /** @internal */\r\n    bodyB: { body: PhysicsBody; index: number };\r\n    /** @internal */\r\n    allowedPenetration: number;\r\n}\r\n\r\ninterface ISurfaceConstraintInfo {\r\n    /** @internal */\r\n    planeNormal: Vector3;\r\n    /** @internal */\r\n    planeDistance: number;\r\n    /** @internal */\r\n    velocity: Vector3;\r\n    /** @internal */\r\n    angularVelocity: Vector3;\r\n    /** @internal */\r\n    staticFriction: number;\r\n    /** @internal */\r\n    extraUpStaticFriction: number;\r\n    /** @internal */\r\n    extraDownStaticFriction: number;\r\n    /** @internal */\r\n    dynamicFriction: number;\r\n    /** @internal */\r\n    priority: number;\r\n}\r\n\r\nconst enum SurfaceConstraintInteractionStatus {\r\n    OK,\r\n    FAILURE_3D,\r\n    FAILURE_2D,\r\n}\r\ninterface ISurfaceConstraintInteraction {\r\n    /** @internal */\r\n    touched: boolean;\r\n    /** @internal */\r\n    stopped: boolean;\r\n    /** @internal */\r\n    surfaceTime: number;\r\n    /** @internal */\r\n    penaltyDistance: number;\r\n    /** @internal */\r\n    status: SurfaceConstraintInteractionStatus;\r\n}\r\n\r\n/** @internal */\r\nclass SimplexSolverOutput {\r\n    /** @internal */\r\n    public position: Vector3;\r\n    /** @internal */\r\n    public velocity: Vector3;\r\n    /** @internal */\r\n    public deltaTime: number;\r\n    /** @internal */\r\n    public planeInteractions: ISurfaceConstraintInteraction[];\r\n}\r\n\r\n/** @internal */\r\nclass SimplexSolverActivePlanes {\r\n    /** @internal */\r\n    public index: number;\r\n    /** @internal */\r\n    public constraint: ISurfaceConstraintInfo;\r\n    /** @internal */\r\n    public interaction: ISurfaceConstraintInteraction;\r\n\r\n    /** @internal */\r\n    public copyFrom(other: SimplexSolverActivePlanes) {\r\n        this.index = other.index;\r\n        this.constraint = other.constraint;\r\n        this.interaction = other.interaction;\r\n    }\r\n}\r\n\r\n/** @internal */\r\nclass SimplexSolverInfo {\r\n    /** @internal */\r\n    public supportPlanes: Array<SimplexSolverActivePlanes> = new Array<SimplexSolverActivePlanes>(4);\r\n    /** @internal */\r\n    public numSupportPlanes: number = 0;\r\n    /** @internal */\r\n    public currentTime: number = 0;\r\n    /** @internal */\r\n    public inputConstraints: ISurfaceConstraintInfo[];\r\n    /** @internal */\r\n    public outputInteractions: ISurfaceConstraintInteraction[];\r\n    /** @internal */\r\n    public getOutput(constraint: ISurfaceConstraintInfo): ISurfaceConstraintInteraction {\r\n        return this.outputInteractions[this.inputConstraints.indexOf(constraint)]; //<todo.eoin This is O(1) in C++! Equivalent in TS?\r\n    }\r\n}\r\n\r\n/** @internal */\r\nfunction ContactFromCast(hp: HavokPlugin, cp: any /*ContactPoint*/, castPath: Vector3, hitFraction: number, keepDistance: number): IContact {\r\n    const bodyMap = (hp as any)._bodies;\r\n\r\n    const normal = Vector3.FromArray(cp[4]);\r\n    const dist = -hitFraction * castPath.dot(normal);\r\n    return {\r\n        position: Vector3.FromArray(cp[3]),\r\n        normal: normal,\r\n        distance: dist,\r\n        fraction: hitFraction,\r\n        bodyB: bodyMap.get(cp[0][0])!,\r\n        allowedPenetration: Math.min(Math.max(keepDistance - dist, 0.0), keepDistance),\r\n    };\r\n}\r\n\r\n/**\r\n * Character controller using physics\r\n */\r\nexport class PhysicsCharacterController {\r\n    private _position: Vector3;\r\n    private _orientation: Quaternion = Quaternion.Identity();\r\n    private _velocity: Vector3;\r\n    private _lastVelocity: Vector3;\r\n    private _shape: PhysicsShape;\r\n    private _ownShape: boolean;\r\n    private _manifold: IContact[] = [];\r\n    private _lastDisplacement: Vector3;\r\n    private _contactAngleSensitivity = 10.0;\r\n    private _lastInvDeltaTime: number;\r\n    private _scene: Scene;\r\n    private _tmpMatrix = new Matrix();\r\n    private _tmpVecs: Vector3[] = BuildArray(31, Vector3.Zero);\r\n\r\n    /**\r\n     * minimum distance to make contact\r\n     * default 0.05\r\n     */\r\n    public keepDistance: number = 0.05;\r\n    /**\r\n     * maximum distance to keep contact\r\n     * default 0.1\r\n     */\r\n    public keepContactTolerance: number = 0.1;\r\n    /**\r\n     * maximum number of raycast per integration starp\r\n     * default 10\r\n     */\r\n    public maxCastIterations: number = 10;\r\n    /**\r\n     * speed when recovery from penetration\r\n     * default 1.0\r\n     */\r\n    public penetrationRecoverySpeed = 1.0;\r\n    /**\r\n     * friction with static surfaces\r\n     * default 0\r\n     */\r\n    public staticFriction = 0;\r\n    /**\r\n     * friction with dynamic surfaces\r\n     * default 1\r\n     */\r\n    public dynamicFriction = 1;\r\n    /**\r\n     * cosine value of slope angle that can be climbed\r\n     * computed as `Math.cos(Math.PI * (angleInDegree / 180.0));`\r\n     * default 0.5 (value for a 60deg angle)\r\n     */\r\n    public maxSlopeCosine = 0.5;\r\n    /**\r\n     * character maximum speed\r\n     * default 10\r\n     */\r\n    public maxCharacterSpeedForSolver = 10.0;\r\n    /**\r\n     * up vector\r\n     */\r\n    public up = new Vector3(0, 1, 0);\r\n    /**\r\n     * Strength when pushing other bodies\r\n     * default 1e38\r\n     */\r\n    public characterStrength = 1e38;\r\n\r\n    /**\r\n     * Acceleration factor. A value of 1 means reaching max velocity immediately\r\n     */\r\n    public acceleration = 0.05;\r\n\r\n    /**\r\n     * maximum acceleration in world space coordinate\r\n     */\r\n    public maxAcceleration = 50;\r\n\r\n    /**\r\n     * character mass\r\n     * default 0\r\n     */\r\n    public characterMass = 0;\r\n    private _startCollector;\r\n    private _castCollector;\r\n\r\n    /**\r\n     * instanciate a new characterController\r\n     * @param position Initial position\r\n     * @param characterShapeOptions character physics shape options\r\n     * @param scene Scene\r\n     */\r\n    public constructor(position: Vector3, characterShapeOptions: CharacterShapeOptions, scene: Scene) {\r\n        this._position = position.clone();\r\n        this._velocity = Vector3.Zero();\r\n        this._lastVelocity = Vector3.Zero();\r\n        const r = characterShapeOptions.capsuleRadius ?? 0.6;\r\n        const h = characterShapeOptions.capsuleHeight ?? 1.8;\r\n        this._tmpVecs[0].set(0, h * 0.5 - r, 0);\r\n        this._tmpVecs[1].set(0, -h * 0.5 + r, 0);\r\n        this._ownShape = !characterShapeOptions.shape;\r\n        this._shape = characterShapeOptions.shape ?? new PhysicsShapeCapsule(this._tmpVecs[0], this._tmpVecs[1], r, scene);\r\n        this._lastInvDeltaTime = 1.0 / 60.0;\r\n        this._lastDisplacement = Vector3.Zero();\r\n        this._scene = scene;\r\n\r\n        const hk = this._scene.getPhysicsEngine()!.getPhysicsPlugin() as HavokPlugin;\r\n        const hknp = hk._hknp;\r\n\r\n        this._startCollector = hknp.HP_QueryCollector_Create(16)[1];\r\n        this._castCollector = hknp.HP_QueryCollector_Create(16)[1];\r\n    }\r\n\r\n    /**\r\n     * Get shape used for collision\r\n     */\r\n    public get shape() {\r\n        return this._shape;\r\n    }\r\n\r\n    /**\r\n     * Set shape used for collision\r\n     */\r\n    public set shape(value: PhysicsShape) {\r\n        if (this._ownShape) {\r\n            this._shape.dispose();\r\n        }\r\n        this._shape = value;\r\n        this._ownShape = false;\r\n    }\r\n\r\n    /**\r\n     * Character position\r\n     * @returns Character position\r\n     */\r\n    public getPosition(): Vector3 {\r\n        return this._position;\r\n    }\r\n\r\n    /**\r\n     * Teleport character to a new position\r\n     * @param position new position\r\n     */\r\n    public setPosition(position: Vector3) {\r\n        this._position.copyFrom(position);\r\n    }\r\n\r\n    /**\r\n     * Character velocity\r\n     * @returns Character velocity vector\r\n     */\r\n    public getVelocity(): Vector3 {\r\n        return this._velocity;\r\n    }\r\n\r\n    /**\r\n     * Set velocity vector\r\n     * @param velocity vector\r\n     */\r\n    public setVelocity(velocity: Vector3) {\r\n        this._velocity.copyFrom(velocity);\r\n    }\r\n\r\n    protected _validateManifold() {\r\n        const newManifold = [];\r\n        for (let i = 0; i < this._manifold.length; i++) {\r\n            if (!this._manifold[i].bodyB.body.isDisposed) {\r\n                newManifold.push(this._manifold[i]);\r\n            }\r\n        }\r\n        this._manifold = newManifold;\r\n    }\r\n\r\n    private _getPointVelocityToRef(body: { body: PhysicsBody; index: number }, pointWorld: Vector3, result: Vector3) {\r\n        //<todo does this really not exist in body interface?\r\n        const comWorld = this._tmpVecs[10];\r\n        this._getComWorldToRef(body, comWorld);\r\n        const relPos = this._tmpVecs[11];\r\n        pointWorld.subtractToRef(comWorld, relPos);\r\n        const av = this._tmpVecs[12];\r\n        body.body.getAngularVelocityToRef(av, body.index);\r\n        const arm = this._tmpVecs[13];\r\n        Vector3.CrossToRef(av, relPos, arm);\r\n        arm.addToRef(body.body.getLinearVelocity(body.index), result);\r\n    }\r\n\r\n    protected _compareContacts(contactA: IContact, contactB: IContact): number {\r\n        const angSquared = (1.0 - contactA.normal.dot(contactB.normal)) * this._contactAngleSensitivity * this._contactAngleSensitivity;\r\n        const planeDistSquared = (contactA.distance - contactB.distance) * (contactA.distance * contactB.distance);\r\n\r\n        const p1Vel = this._tmpVecs[7];\r\n        this._getPointVelocityToRef(contactA.bodyB, contactA.position, p1Vel);\r\n        const p2Vel = this._tmpVecs[8];\r\n        this._getPointVelocityToRef(contactB.bodyB, contactB.position, p2Vel);\r\n        const velocityDiff = this._tmpVecs[9];\r\n        p1Vel.subtractToRef(p2Vel, velocityDiff);\r\n        const velocityDiffSquared = velocityDiff.lengthSquared();\r\n\r\n        const fitness = angSquared * 10.0 + velocityDiffSquared * 0.1 + planeDistSquared;\r\n        return fitness;\r\n    }\r\n\r\n    protected _findContact(referenceContact: IContact, contactList: IContact[], threshold: number) {\r\n        let bestIdx = -1;\r\n        let bestFitness = threshold;\r\n        for (let i = 0; i < contactList.length; i++) {\r\n            const fitness = this._compareContacts(referenceContact, contactList[i]);\r\n            if (fitness < bestFitness) {\r\n                bestFitness = fitness;\r\n                bestIdx = i;\r\n            }\r\n        }\r\n        return bestIdx;\r\n    }\r\n\r\n    protected _updateManifold(startCollector: any /*HP_CollectorId*/, castCollector: any /*HP_CollectorId*/, castPath: Vector3): number {\r\n        const hk = this._scene.getPhysicsEngine()!.getPhysicsPlugin() as HavokPlugin;\r\n        const hknp = hk._hknp;\r\n\r\n        const numProximityHits = hknp.HP_QueryCollector_GetNumHits(startCollector)[1];\r\n        if (numProximityHits > 0) {\r\n            const newContacts = [];\r\n            let minDistance = 1e38;\r\n            const bodyMap = (<any>hk)._bodies;\r\n            for (let i = 0; i < numProximityHits; i++) {\r\n                const [distance, , contactWorld] = hknp.HP_QueryCollector_GetShapeProximityResult(startCollector, i)[1];\r\n                minDistance = Math.min(minDistance, distance);\r\n                newContacts.push({\r\n                    position: Vector3.FromArray(contactWorld[3]),\r\n                    normal: Vector3.FromArray(contactWorld[4]),\r\n                    distance: distance,\r\n                    fraction: 0,\r\n                    bodyB: bodyMap.get(contactWorld[0][0])!,\r\n                    allowedPenetration: Math.min(Math.max(this.keepDistance - distance, 0.0), this.keepDistance),\r\n                });\r\n            }\r\n\r\n            for (let i = this._manifold.length - 1; i >= 0; i--) {\r\n                const currentContact = this._manifold[i];\r\n                const bestMatch = this._findContact(currentContact, newContacts, 1.1);\r\n                if (bestMatch >= 0) {\r\n                    const newAllowedPenetration = Math.min(Math.max(this.keepDistance - newContacts[bestMatch].distance, 0.0), currentContact.allowedPenetration);\r\n                    this._manifold[i] = newContacts[bestMatch];\r\n                    this._manifold[i].allowedPenetration = newAllowedPenetration;\r\n                    newContacts.splice(bestMatch, 1);\r\n                } else {\r\n                    this._manifold.splice(i, 1);\r\n                }\r\n            }\r\n\r\n            const closestContactIndex = newContacts.findIndex((c) => c.distance == minDistance);\r\n            if (closestContactIndex >= 0) {\r\n                const bestMatch = this._findContact(newContacts[closestContactIndex], this._manifold, 0.1);\r\n                if (bestMatch >= 0) {\r\n                    const newAllowedPenetration = Math.min(\r\n                        Math.max(this.keepDistance - newContacts[closestContactIndex].distance, 0.0),\r\n                        this._manifold[bestMatch].allowedPenetration\r\n                    );\r\n                    this._manifold[bestMatch] = newContacts[closestContactIndex];\r\n                    this._manifold[bestMatch].allowedPenetration = newAllowedPenetration;\r\n                } else {\r\n                    this._manifold.push(newContacts[closestContactIndex]);\r\n                }\r\n            }\r\n        } else {\r\n            // No start hits; clear manifold completely\r\n            this._manifold.length = 0;\r\n        }\r\n\r\n        let numHitBodies = 0; //< == CASTCOLLECTOR_HIT_SINGLE_BODY\r\n        // Process shape cast results if any\r\n        const numCastHits = hknp.HP_QueryCollector_GetNumHits(castCollector)[1];\r\n        if (numCastHits > 0) {\r\n            let closestHitBody = null;\r\n            for (let i = 0; i < numCastHits; i++) {\r\n                const [fraction, , hitWorld] = hknp.HP_QueryCollector_GetShapeCastResult(castCollector, i)[1];\r\n                if (closestHitBody == null) {\r\n                    const contact = ContactFromCast(hk, hitWorld, castPath, fraction, this.keepDistance);\r\n                    closestHitBody = hitWorld[0][0];\r\n                    const bestMatch = this._findContact(contact, this._manifold, 0.1);\r\n                    if (bestMatch == -1) {\r\n                        this._manifold.push(contact);\r\n                    }\r\n\r\n                    if (contact.bodyB.body.getMotionType(contact.bodyB.index) == PhysicsMotionType.STATIC) {\r\n                        // The closest body is static, so it cannot move away from CC and we don't need to look any further.\r\n                        break;\r\n                    }\r\n                } else if (closestHitBody._pluginData && hitWorld[0] != closestHitBody._pluginData.hpBodyId) {\r\n                    numHitBodies++;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Remove from the manifold contacts that are too similar as the simplex does not handle parallel planes\r\n        for (let e1 = this._manifold.length - 1; e1 >= 0; e1--) {\r\n            let e2 = e1 - 1;\r\n            for (; e2 >= 0; e2--) {\r\n                const fitness = this._compareContacts(this._manifold[e1], this._manifold[e2]);\r\n                if (fitness < 0.1) {\r\n                    break;\r\n                }\r\n            }\r\n            if (e2 >= 0) {\r\n                this._manifold.slice(e1, 1);\r\n            }\r\n        }\r\n\r\n        return numHitBodies;\r\n    }\r\n\r\n    protected _createSurfaceConstraint(contact: IContact, timeTravelled: number): ISurfaceConstraintInfo {\r\n        const constraint = {\r\n            //let distance = contact.distance - this.keepDistance;\r\n            planeNormal: contact.normal.clone(),\r\n            planeDistance: contact.distance,\r\n            staticFriction: this.staticFriction,\r\n            dynamicFriction: this.dynamicFriction,\r\n            extraUpStaticFriction: 0,\r\n            extraDownStaticFriction: 0,\r\n            velocity: Vector3.Zero(),\r\n            angularVelocity: Vector3.Zero(),\r\n            priority: 0,\r\n        };\r\n\r\n        const maxSlopeCosEps = 0.1;\r\n        const maxSlopeCosine = Math.max(this.maxSlopeCosine, maxSlopeCosEps);\r\n        const normalDotUp = contact.normal.dot(this.up);\r\n\r\n        const contactPosition = contact.position.clone();\r\n        if (normalDotUp > maxSlopeCosine) {\r\n            const com = this.getPosition();\r\n            const contactArm = this._tmpVecs[20];\r\n            contact.position.subtractToRef(com, contactArm);\r\n            const scale = contact.normal.dot(contactArm);\r\n            contactPosition.x = com.x + this.up.x * scale;\r\n            contactPosition.y = com.y + this.up.y * scale;\r\n            contactPosition.z = com.z + this.up.z * scale;\r\n        }\r\n\r\n        const motionType = contact.bodyB.body.getMotionType(contact.bodyB.index);\r\n        if (motionType != PhysicsMotionType.STATIC) {\r\n            //<todo Need hknpMotionUtil::predictPontVelocity\r\n        }\r\n\r\n        const shift = constraint.velocity.dot(constraint.planeNormal) * timeTravelled;\r\n        constraint.planeDistance -= shift;\r\n\r\n        if (motionType == PhysicsMotionType.STATIC) {\r\n            constraint.priority = 2;\r\n        } else if (motionType == PhysicsMotionType.ANIMATED) {\r\n            constraint.priority = 1;\r\n        }\r\n\r\n        return constraint;\r\n    }\r\n\r\n    protected _addMaxSlopePlane(maxSlopeCos: number, up: Vector3, index: number, constraints: ISurfaceConstraintInfo[], allowedPenetration: number): boolean {\r\n        const verticalComponent = constraints[index].planeNormal.dot(up);\r\n        if (verticalComponent > 0.01 && verticalComponent < maxSlopeCos) {\r\n            const newConstraint = {\r\n                planeNormal: constraints[index].planeNormal.clone(),\r\n                planeDistance: constraints[index].planeDistance,\r\n                velocity: constraints[index].velocity.clone(),\r\n                angularVelocity: constraints[index].angularVelocity.clone(),\r\n                priority: constraints[index].priority,\r\n                dynamicFriction: constraints[index].dynamicFriction,\r\n                staticFriction: constraints[index].staticFriction,\r\n                extraDownStaticFriction: constraints[index].extraDownStaticFriction,\r\n                extraUpStaticFriction: constraints[index].extraUpStaticFriction,\r\n            };\r\n            const distance = newConstraint.planeDistance;\r\n            newConstraint.planeNormal.subtractInPlace(up.scale(verticalComponent));\r\n            newConstraint.planeNormal.normalize();\r\n            if (distance >= 0) {\r\n                newConstraint.planeDistance = distance * newConstraint.planeNormal.dot(constraints[index].planeNormal);\r\n            } else {\r\n                const penetrationToResolve = Math.min(0, distance + allowedPenetration);\r\n                newConstraint.planeDistance = penetrationToResolve / newConstraint.planeNormal.dot(constraints[index].planeNormal);\r\n                constraints[index].planeDistance = 0;\r\n                this._resolveConstraintPenetration(newConstraint, this.penetrationRecoverySpeed);\r\n            }\r\n            constraints.push(newConstraint);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected _resolveConstraintPenetration(constraint: ISurfaceConstraintInfo, penetrationRecoverySpeed: number) {\r\n        // If penetrating we add extra velocity to push the character back out\r\n        const eps = 1e-6;\r\n        if (constraint.planeDistance < -eps) {\r\n            constraint.planeNormal.scaleToRef(constraint.planeDistance * penetrationRecoverySpeed, this._tmpVecs[6]);\r\n            constraint.velocity.subtractInPlace(this._tmpVecs[6]);\r\n        }\r\n    }\r\n\r\n    protected _createConstraintsFromManifold(dt: number, timeTravelled: number): ISurfaceConstraintInfo[] {\r\n        const constraints = [];\r\n        for (let i = 0; i < this._manifold.length; i++) {\r\n            const surfaceConstraint = this._createSurfaceConstraint(this._manifold[i], timeTravelled);\r\n            constraints.push(surfaceConstraint);\r\n            this._addMaxSlopePlane(this.maxSlopeCosine, this.up, i, constraints, this._manifold[i].allowedPenetration);\r\n            this._resolveConstraintPenetration(surfaceConstraint, this.penetrationRecoverySpeed);\r\n        }\r\n        return constraints;\r\n    }\r\n\r\n    protected _simplexSolverSortInfo(info: SimplexSolverInfo) {\r\n        // simple bubble sort by (priority,velocity)\r\n        for (let i = 0; i < info.numSupportPlanes - 1; i++) {\r\n            for (let j = i + 1; j < info.numSupportPlanes; j++) {\r\n                const p0 = info.supportPlanes[i];\r\n                const p1 = info.supportPlanes[j];\r\n                if (p0.constraint.priority < p1.constraint.priority) {\r\n                    continue;\r\n                }\r\n                if (p0.constraint.priority == p1.constraint.priority) {\r\n                    const vel0 = p0.constraint.velocity.lengthSquared();\r\n                    const vel1 = p1.constraint.velocity.lengthSquared();\r\n                    if (vel0 < vel1) {\r\n                        continue;\r\n                    }\r\n                }\r\n                info.supportPlanes[i] = p1;\r\n                info.supportPlanes[j] = p0;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _simplexSolverSolve1d(info: SimplexSolverInfo, sci: ISurfaceConstraintInfo, velocityIn: Vector3, velocityOut: Vector3) {\r\n        const eps = 1e-5;\r\n        const groundVelocity = sci.velocity;\r\n        const relativeVelocity = this._tmpVecs[22];\r\n        velocityIn.subtractToRef(groundVelocity, relativeVelocity);\r\n\r\n        const planeVel = relativeVelocity.dot(sci.planeNormal);\r\n\r\n        const origVelocity2 = relativeVelocity.lengthSquared();\r\n        relativeVelocity.subtractInPlace(sci.planeNormal.scale(planeVel));\r\n        {\r\n            const vp2 = planeVel * planeVel;\r\n            // static friction is active if\r\n            //  velProjPlane * friction > |(velParallel)|\r\n            //      vplane   *     f    >         vpar\r\n            //      vp       *     f    >         vpar\r\n            //      vp2      *     f2   >         vpar2\r\n            const extraStaticFriction = relativeVelocity.dot(this.up) > 0 ? sci.extraUpStaticFriction : sci.extraDownStaticFriction;\r\n            if (extraStaticFriction > 0) {\r\n                const horizontal = this.up.cross(sci.planeNormal);\r\n                const hor2 = horizontal.lengthSquared();\r\n                let horVel = 0.0;\r\n                if (hor2 > eps) {\r\n                    horizontal.scaleInPlace(1 / Math.sqrt(hor2));\r\n\r\n                    horVel = relativeVelocity.dot(horizontal);\r\n\r\n                    // horizontal component\r\n                    {\r\n                        const horVel2 = horVel * horVel;\r\n                        const f2 = sci.staticFriction * sci.staticFriction;\r\n                        if (vp2 * f2 >= horVel2) {\r\n                            relativeVelocity.subtractInPlace(horizontal.scale(horVel));\r\n                            horVel = 0;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // vert component\r\n                {\r\n                    const vertVel2 = origVelocity2 - horVel * horVel - vp2;\r\n                    const f2 = (sci.staticFriction + extraStaticFriction) * (sci.staticFriction + extraStaticFriction);\r\n                    if (vp2 * f2 >= vertVel2) {\r\n                        if (horVel == 0.0) {\r\n                            velocityOut.copyFrom(groundVelocity);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // static friction is active if\r\n                //  velProjPlane * friction > |(vel-velProjPlane)|\r\n                //      vp       *     f    >         rvProj\r\n                //\r\n                //  -> vp * f >= rvProj\r\n                //  -> vp * f >= sqrt( vel^2 - vp^2 )\r\n                //  -> vp^2 ( f^2 + 1 ) >= vel^2\r\n                const f2 = sci.staticFriction * sci.staticFriction;\r\n                if (vp2 * (1 + f2) >= origVelocity2) {\r\n                    velocityOut.copyFrom(groundVelocity);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (sci.dynamicFriction < 1) {\r\n            //  apply dynamic friction 0 = conserve input velocity 1 = clip against normal\r\n            const velOut2 = relativeVelocity.lengthSquared();\r\n            if (velOut2 >= eps) {\r\n                if (velOut2 > 1e-4 * origVelocity2) {\r\n                    let f = Math.sqrt(origVelocity2 / velOut2);\r\n                    f = sci.dynamicFriction + (1 - sci.dynamicFriction) * f;\r\n                    relativeVelocity.scaleInPlace(f);\r\n                    const p = sci.planeNormal.dot(relativeVelocity);\r\n                    relativeVelocity.subtractInPlace(sci.planeNormal.scale(p));\r\n                }\r\n            }\r\n        }\r\n        velocityOut.copyFrom(relativeVelocity);\r\n        velocityOut.addInPlace(groundVelocity);\r\n    }\r\n\r\n    protected _simplexSolverSolveTest1d(sci: ISurfaceConstraintInfo, velocityIn: Vector3): boolean {\r\n        const eps = 1e-3;\r\n        const relativeVelocity = this._tmpVecs[23];\r\n        velocityIn.subtractToRef(sci.velocity, relativeVelocity);\r\n        return relativeVelocity.dot(sci.planeNormal) < -eps;\r\n    }\r\n\r\n    protected _simplexSolverSolve2d(\r\n        info: SimplexSolverInfo,\r\n        maxSurfaceVelocity: Vector3,\r\n        sci0: ISurfaceConstraintInfo,\r\n        sci1: ISurfaceConstraintInfo,\r\n        velocityIn: Vector3,\r\n        velocityOut: Vector3\r\n    ) {\r\n        const eps = 1e-5;\r\n        const axis = sci0.planeNormal.cross(sci1.planeNormal);\r\n        const axisLen2 = axis.lengthSquared();\r\n\r\n        let solveSequentially = false;\r\n        let axisVel = null;\r\n\r\n        // eslint-disable-next-line no-constant-condition\r\n        while (true) {\r\n            // Check for parallel planes\r\n            if (axisLen2 <= eps || solveSequentially) {\r\n                info.getOutput(sci0).status = SurfaceConstraintInteractionStatus.FAILURE_2D;\r\n                info.getOutput(sci1).status = SurfaceConstraintInteractionStatus.FAILURE_2D;\r\n\r\n                if (sci0.priority > sci1.priority) {\r\n                    this._simplexSolverSolve1d(info, sci1, velocityIn, velocityOut);\r\n                    this._simplexSolverSolve1d(info, sci0, velocityIn, velocityOut);\r\n                } else {\r\n                    this._simplexSolverSolve1d(info, sci0, velocityIn, velocityOut);\r\n                    this._simplexSolverSolve1d(info, sci1, velocityIn, velocityOut);\r\n                }\r\n                return;\r\n            }\r\n\r\n            const invAxisLen = 1.0 / Math.sqrt(axisLen2);\r\n            axis.scaleInPlace(invAxisLen);\r\n\r\n            //  Calculate the velocity of the free axis\r\n            {\r\n                const r0 = sci0.planeNormal.cross(sci1.planeNormal);\r\n                const r1 = sci1.planeNormal.cross(axis);\r\n                const r2 = axis.cross(sci0.planeNormal);\r\n\r\n                const sVel = sci0.velocity.add(sci1.velocity);\r\n\r\n                const t = this._tmpVecs[2];\r\n                t.set(0.5 * axis.dot(sVel), sci0.planeNormal.dot(sci0.velocity), sci1.planeNormal.dot(sci1.velocity));\r\n                const m = Matrix.FromValues(r0.x, r1.x, r2.x, 0, r0.y, r1.y, r2.y, 0, r0.z, r1.z, r2.z, 0, 0, 0, 0, 1);\r\n                axisVel = Vector3.TransformNormal(t, m);\r\n                axisVel.scaleInPlace(invAxisLen);\r\n\r\n                if (Math.abs(axisVel.x) > maxSurfaceVelocity.x || Math.abs(axisVel.y) > maxSurfaceVelocity.y || Math.abs(axisVel.z) > maxSurfaceVelocity.z) {\r\n                    solveSequentially = true;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        const groundVelocity = axisVel;\r\n        const relativeVelocity = this._tmpVecs[24];\r\n        velocityIn.subtractToRef(groundVelocity, relativeVelocity);\r\n\r\n        const vel2 = relativeVelocity.lengthSquared();\r\n        const axisVert = this.up.dot(axis);\r\n        let axisProjVelocity = relativeVelocity.dot(axis);\r\n\r\n        let staticFriction = sci0.staticFriction + sci1.staticFriction;\r\n        if (axisVert * axisProjVelocity > 0) {\r\n            staticFriction += (sci0.extraUpStaticFriction + sci1.extraUpStaticFriction) * axisVert;\r\n        } else {\r\n            staticFriction += (sci0.extraDownStaticFriction + sci1.extraDownStaticFriction) * axisVert;\r\n        }\r\n        staticFriction *= 0.5;\r\n\r\n        const dynamicFriction = (sci0.dynamicFriction + sci1.dynamicFriction) * 0.5;\r\n        // static friction is active if\r\n        //  |vel-axisProjVelocity|(rv) * friction(f) > axisProjVelocity(av)\r\n        //  -> sqrt( vel2 - av2 ) * f > av\r\n        //  -> (vel2 - av2) * f2  > av2\r\n        const f2 = staticFriction * staticFriction;\r\n        const av2 = axisProjVelocity * axisProjVelocity;\r\n        if ((vel2 - av2) * f2 >= av2) {\r\n            // static friction kicks in\r\n            velocityOut.copyFrom(groundVelocity);\r\n            return;\r\n        }\r\n\r\n        if (dynamicFriction < 1) {\r\n            //  apply dynamic friction\r\n            if (axisProjVelocity * axisProjVelocity > 1e-4 * vel2) {\r\n                const tmp = 1.0 / axisProjVelocity;\r\n                const f = Math.abs(tmp) * Math.sqrt(vel2) * (1.0 - dynamicFriction) + dynamicFriction;\r\n                axisProjVelocity *= f;\r\n            }\r\n        }\r\n        velocityOut.copyFrom(groundVelocity);\r\n        velocityOut.addInPlace(axis.scale(axisProjVelocity));\r\n    }\r\n\r\n    protected _simplexSolverSolve3d(\r\n        info: SimplexSolverInfo,\r\n        maxSurfaceVelocity: Vector3,\r\n        sci0: ISurfaceConstraintInfo,\r\n        sci1: ISurfaceConstraintInfo,\r\n        sci2: ISurfaceConstraintInfo,\r\n        allowResort: boolean,\r\n        velocityIn: Vector3,\r\n        velocityOut: Vector3\r\n    ) {\r\n        const eps = 1e-5;\r\n        //  Calculate the velocity of the point axis\r\n        let pointVel = null;\r\n        {\r\n            const r0 = sci1.planeNormal.cross(sci2.planeNormal);\r\n            const r1 = sci2.planeNormal.cross(sci0.planeNormal);\r\n            const r2 = sci0.planeNormal.cross(sci1.planeNormal);\r\n\r\n            const det = r0.dot(sci0.planeNormal);\r\n            let solveSequentially = false;\r\n            // eslint-disable-next-line no-constant-condition\r\n            while (true) {\r\n                if (Math.abs(det) < eps || solveSequentially) {\r\n                    if (allowResort) {\r\n                        this._simplexSolverSortInfo(info);\r\n                        sci0 = info.supportPlanes[0].constraint;\r\n                        sci1 = info.supportPlanes[1].constraint;\r\n                        sci2 = info.supportPlanes[2].constraint;\r\n                    }\r\n                    info.getOutput(sci0).status = SurfaceConstraintInteractionStatus.FAILURE_3D;\r\n                    info.getOutput(sci1).status = SurfaceConstraintInteractionStatus.FAILURE_3D;\r\n                    info.getOutput(sci2).status = SurfaceConstraintInteractionStatus.FAILURE_3D;\r\n\r\n                    const oldNum = info.numSupportPlanes;\r\n                    this._simplexSolverSolve2d(info, maxSurfaceVelocity, sci0, sci1, velocityIn, velocityOut);\r\n                    if (oldNum == info.numSupportPlanes) {\r\n                        this._simplexSolverSolve2d(info, maxSurfaceVelocity, sci0, sci2, velocityIn, velocityOut);\r\n                    }\r\n                    if (oldNum == info.numSupportPlanes) {\r\n                        this._simplexSolverSolve2d(info, maxSurfaceVelocity, sci1, sci2, velocityIn, velocityOut);\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                const t = this._tmpVecs[2];\r\n                t.set(sci0.planeNormal.dot(sci0.velocity), sci1.planeNormal.dot(sci1.velocity), sci2.planeNormal.dot(sci2.velocity));\r\n                const m = Matrix.FromValues(r0.x, r0.y, r0.z, 0, r1.x, r1.y, r1.z, 0, r2.x, r2.y, r2.z, 0, 0, 0, 0, 1);\r\n                pointVel = Vector3.TransformNormal(t, m);\r\n                pointVel.scaleInPlace(1 / det);\r\n                if (Math.abs(pointVel.x) > maxSurfaceVelocity.x || Math.abs(pointVel.y) > maxSurfaceVelocity.y || Math.abs(pointVel.z) > maxSurfaceVelocity.z) {\r\n                    solveSequentially = true;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        velocityOut.copyFrom(pointVel);\r\n    }\r\n\r\n    protected _simplexSolverExamineActivePlanes(info: SimplexSolverInfo, maxSurfaceVelocity: Vector3, velocityIn: Vector3, velocityOut: Vector3) {\r\n        // eslint-disable-next-line no-constant-condition\r\n        while (true) {\r\n            switch (info.numSupportPlanes) {\r\n                case 1: {\r\n                    const sci = info.supportPlanes[0].constraint;\r\n                    this._simplexSolverSolve1d(info, sci, velocityIn, velocityOut);\r\n                    return;\r\n                }\r\n                case 2: {\r\n                    const velocity = Vector3.Zero();\r\n                    this._simplexSolverSolve1d(info, info.supportPlanes[1].constraint, velocityIn, velocity);\r\n                    const plane0Used = this._simplexSolverSolveTest1d(info.supportPlanes[0].constraint, velocity);\r\n                    if (!plane0Used) {\r\n                        // Only need plane 1, so remove plane 0\r\n                        info.supportPlanes[0].copyFrom(info.supportPlanes[1]);\r\n                        info.numSupportPlanes = 1;\r\n                        velocityOut.copyFrom(velocity);\r\n                    } else {\r\n                        this._simplexSolverSolve2d(info, maxSurfaceVelocity, info.supportPlanes[0].constraint, info.supportPlanes[1].constraint, velocityIn, velocityOut);\r\n                    }\r\n                    return;\r\n                }\r\n                case 3: {\r\n                    // Try to drop both planes\r\n                    {\r\n                        const velocity = Vector3.Zero();\r\n                        this._simplexSolverSolve1d(info, info.supportPlanes[2].constraint, velocityIn, velocityOut);\r\n\r\n                        const plane0Used = this._simplexSolverSolveTest1d(info.supportPlanes[0].constraint, velocity);\r\n                        if (!plane0Used) {\r\n                            const plane1Used = this._simplexSolverSolveTest1d(info.supportPlanes[1].constraint, velocity);\r\n                            if (!plane1Used) {\r\n                                velocityOut.copyFrom(velocity);\r\n                                info.supportPlanes[0].copyFrom(info.supportPlanes[2]);\r\n                                info.numSupportPlanes = 1;\r\n                                continue;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    //  Try to drop plane 0 or 1\r\n                    {\r\n                        let droppedAPlane = false;\r\n                        for (let testPlane = 0; testPlane < 2; testPlane++) {\r\n                            const velocity = Vector3.Zero();\r\n                            this._simplexSolverSolve2d(\r\n                                info,\r\n                                maxSurfaceVelocity,\r\n                                info.supportPlanes[testPlane].constraint,\r\n                                info.supportPlanes[2].constraint,\r\n                                velocityIn,\r\n                                velocityOut\r\n                            );\r\n                            const planeUsed = this._simplexSolverSolveTest1d(info.supportPlanes[1 - testPlane].constraint, velocity);\r\n                            if (!planeUsed) {\r\n                                info.supportPlanes[0].copyFrom(info.supportPlanes[testPlane]);\r\n                                info.supportPlanes[1].copyFrom(info.supportPlanes[2]);\r\n                                info.numSupportPlanes--;\r\n                                droppedAPlane = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (droppedAPlane) {\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    // Otherwise, try and solve all three planes:\r\n                    this._simplexSolverSolve3d(\r\n                        info,\r\n                        maxSurfaceVelocity,\r\n                        info.supportPlanes[0].constraint,\r\n                        info.supportPlanes[1].constraint,\r\n                        info.supportPlanes[2].constraint,\r\n                        true,\r\n                        velocityIn,\r\n                        velocityOut\r\n                    );\r\n                    return;\r\n                }\r\n                case 4: {\r\n                    this._simplexSolverSortInfo(info);\r\n                    let droppedAPlane = false;\r\n\r\n                    for (let i = 0; i < 3; i++) {\r\n                        const velocity = Vector3.Zero();\r\n                        this._simplexSolverSolve3d(\r\n                            info,\r\n                            maxSurfaceVelocity,\r\n                            info.supportPlanes[(i + 1) % 3].constraint,\r\n                            info.supportPlanes[(i + 2) % 3].constraint,\r\n                            info.supportPlanes[3].constraint,\r\n                            false,\r\n                            velocityIn,\r\n                            velocity\r\n                        );\r\n                        const planeUsed = this._simplexSolverSolveTest1d(info.supportPlanes[i].constraint, velocity);\r\n                        if (!planeUsed) {\r\n                            info.supportPlanes[i].copyFrom(info.supportPlanes[2]);\r\n                            info.supportPlanes[2].copyFrom(info.supportPlanes[3]);\r\n                            info.numSupportPlanes = 3;\r\n                            droppedAPlane = true;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (droppedAPlane) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Nothing can be dropped so we've failed to solve\r\n                    // Now we try all 3d combinations\r\n                    {\r\n                        const velocity = velocityIn.clone();\r\n                        const sci0 = info.supportPlanes[0].constraint;\r\n                        const sci1 = info.supportPlanes[1].constraint;\r\n                        const sci2 = info.supportPlanes[2].constraint;\r\n                        const sci3 = info.supportPlanes[3].constraint;\r\n                        const oldNum = info.numSupportPlanes;\r\n                        if (oldNum == info.numSupportPlanes) {\r\n                            this._simplexSolverSolve3d(info, maxSurfaceVelocity, sci0, sci1, sci2, false, velocity, velocity);\r\n                            // eslint-disable-next-line no-dupe-else-if\r\n                        } else if (oldNum == info.numSupportPlanes) {\r\n                            this._simplexSolverSolve3d(info, maxSurfaceVelocity, sci0, sci1, sci3, false, velocity, velocity);\r\n                            // eslint-disable-next-line no-dupe-else-if\r\n                        } else if (oldNum == info.numSupportPlanes) {\r\n                            this._simplexSolverSolve3d(info, maxSurfaceVelocity, sci0, sci2, sci3, false, velocity, velocity);\r\n                            // eslint-disable-next-line no-dupe-else-if\r\n                        } else if (oldNum == info.numSupportPlanes) {\r\n                            this._simplexSolverSolve3d(info, maxSurfaceVelocity, sci1, sci2, sci3, false, velocity, velocity);\r\n                        }\r\n\r\n                        velocityOut.copyFrom(velocity);\r\n                    }\r\n\r\n                    //  Search a plane to drop\r\n                    {\r\n                        //  Search the highest penalty value\r\n                        let maxStatus = SurfaceConstraintInteractionStatus.OK;\r\n                        for (let i = 0; i < 4; i++) {\r\n                            maxStatus = Math.max(maxStatus, info.supportPlanes[i].interaction.status);\r\n                        }\r\n\r\n                        // Remove the place with the lowest priority and the highest penalty\r\n                        let i = 0;\r\n                        for (; i < 4; i++) {\r\n                            if (maxStatus == info.supportPlanes[i].interaction.status) {\r\n                                info.supportPlanes[i].copyFrom(info.supportPlanes[3]);\r\n                                break;\r\n                            }\r\n                            info.numSupportPlanes--;\r\n                        }\r\n                    }\r\n\r\n                    //  Clear penalty flags for the other planes\r\n                    for (let i = 0; i < 3; i++) {\r\n                        info.supportPlanes[i].interaction.status = SurfaceConstraintInteractionStatus.OK;\r\n                    }\r\n\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _simplexSolverSolve(\r\n        constraints: ISurfaceConstraintInfo[],\r\n        velocity: Vector3,\r\n        deltaTime: number,\r\n        minDeltaTime: number,\r\n        up: Vector3,\r\n        maxSurfaceVelocity: Vector3\r\n    ): SimplexSolverOutput {\r\n        const eps = 1e-6;\r\n        const output = new SimplexSolverOutput();\r\n        output.position = Vector3.Zero();\r\n        output.velocity = velocity.clone();\r\n        output.planeInteractions = [];\r\n        let remainingTime = deltaTime;\r\n\r\n        for (let i = 0; i < constraints.length; i++) {\r\n            output.planeInteractions.push({\r\n                touched: false,\r\n                stopped: false,\r\n                surfaceTime: 0,\r\n                penaltyDistance: 0,\r\n                status: SurfaceConstraintInteractionStatus.OK,\r\n            });\r\n        }\r\n\r\n        const info = new SimplexSolverInfo();\r\n        info.inputConstraints = constraints;\r\n        info.outputInteractions = output.planeInteractions;\r\n        info.supportPlanes[0] = new SimplexSolverActivePlanes();\r\n        info.supportPlanes[1] = new SimplexSolverActivePlanes();\r\n        info.supportPlanes[2] = new SimplexSolverActivePlanes();\r\n        info.supportPlanes[3] = new SimplexSolverActivePlanes();\r\n\r\n        while (remainingTime > 0) {\r\n            // search for a plane which collides our current direction\r\n            let hitIndex = -1;\r\n            let minCollisionTime = remainingTime;\r\n            for (let i = 0; i < constraints.length; i++) {\r\n                //  Do not search existing active planes\r\n                if (info.numSupportPlanes >= 1 && info.supportPlanes[0].index == i) {\r\n                    continue;\r\n                }\r\n                if (info.numSupportPlanes >= 2 && info.supportPlanes[1].index == i) {\r\n                    continue;\r\n                }\r\n                if (info.numSupportPlanes >= 3 && info.supportPlanes[2].index == i) {\r\n                    continue;\r\n                }\r\n                if (output.planeInteractions[i].status != SurfaceConstraintInteractionStatus.OK) {\r\n                    continue;\r\n                }\r\n\r\n                // Try to find the plane with the shortest time to move\r\n                const sci = constraints[i];\r\n                const relativeVel = this._tmpVecs[25];\r\n                output.velocity.subtractToRef(sci.velocity, relativeVel);\r\n                const relativeProjectedVel = -relativeVel.dot(sci.planeNormal);\r\n                // if projected velocity is pointing away skip it\r\n                if (relativeProjectedVel <= 0) {\r\n                    continue;\r\n                }\r\n\r\n                //  Calculate the time of impact\r\n                const relativePos = this._tmpVecs[26];\r\n                sci.velocity.scaleToRef(info.currentTime, this._tmpVecs[27]);\r\n                output.position.subtractToRef(this._tmpVecs[27], relativePos);\r\n                let projectedPos = sci.planeNormal.dot(relativePos);\r\n\r\n                // treat penetrations\r\n                const penaltyDist = output.planeInteractions[i].penaltyDistance;\r\n                if (penaltyDist < eps) {\r\n                    projectedPos = 0;\r\n                }\r\n                projectedPos += penaltyDist;\r\n\r\n                // check for new hit\r\n                if (projectedPos < minCollisionTime * relativeProjectedVel) {\r\n                    minCollisionTime = projectedPos / relativeProjectedVel;\r\n                    hitIndex = i;\r\n                }\r\n            }\r\n\r\n            //  integrate: Walk to our hitPosition we must walk more than 10 microseconds into the future to consider it valid.\r\n            const minAcceptableCollisionTime = 1e-4;\r\n            if (minCollisionTime > minAcceptableCollisionTime) {\r\n                info.currentTime += minCollisionTime;\r\n                remainingTime -= minCollisionTime;\r\n                output.position.addInPlace(output.velocity.scale(minCollisionTime));\r\n                for (let i = 0; i < info.numSupportPlanes; i++) {\r\n                    info.supportPlanes[i].interaction.surfaceTime += minCollisionTime;\r\n                    info.supportPlanes[i].interaction.touched = true;\r\n                }\r\n\r\n                output.deltaTime = info.currentTime;\r\n                if (info.currentTime > minDeltaTime) {\r\n                    return output;\r\n                }\r\n            }\r\n\r\n            //  If we have no hit than we are done\r\n            if (hitIndex < 0) {\r\n                output.deltaTime = deltaTime;\r\n                break;\r\n            }\r\n\r\n            //  Add our hit to our current list of active planes\r\n            const supportPlane = info.supportPlanes[info.numSupportPlanes++];\r\n            supportPlane.constraint = constraints[hitIndex];\r\n            supportPlane.interaction = output.planeInteractions[hitIndex];\r\n            supportPlane.interaction.penaltyDistance = (supportPlane.interaction.penaltyDistance + eps) * 2.0;\r\n            supportPlane.index = hitIndex;\r\n\r\n            // Move our character along the current set of active planes\r\n            this._simplexSolverExamineActivePlanes(info, maxSurfaceVelocity, velocity, output.velocity);\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * Compute a CharacterSurfaceInfo from current state and a direction\r\n     * @param deltaTime frame delta time in seconds. When using scene.deltaTime divide by 1000.0\r\n     * @param direction direction to check, usually gravity direction\r\n     * @returns a CharacterSurfaceInfo object\r\n     */\r\n    public checkSupport(deltaTime: number, direction: Vector3): CharacterSurfaceInfo {\r\n        const surfaceInfo = {\r\n            isSurfaceDynamic: false,\r\n            supportedState: CharacterSupportedState.UNSUPPORTED,\r\n            averageSurfaceNormal: Vector3.Zero(),\r\n            averageSurfaceVelocity: Vector3.Zero(),\r\n            averageAngularSurfaceVelocity: Vector3.Zero(),\r\n        };\r\n        this.checkSupportToRef(deltaTime, direction, surfaceInfo);\r\n        return surfaceInfo;\r\n    }\r\n\r\n    /**\r\n     * Compute a CharacterSurfaceInfo from current state and a direction\r\n     * @param deltaTime frame delta time in seconds. When using scene.deltaTime divide by 1000.0\r\n     * @param direction direction to check, usually gravity direction\r\n     * @param surfaceInfo output for surface info\r\n     */\r\n    public checkSupportToRef(deltaTime: number, direction: Vector3, surfaceInfo: CharacterSurfaceInfo): void {\r\n        const eps = 1e-4;\r\n\r\n        this._validateManifold();\r\n        const constraints = this._createConstraintsFromManifold(deltaTime, 0.0);\r\n        const storedVelocities: Vector3[] = [];\r\n        // Remove velocities and friction to make this a query of the static geometry\r\n        for (let i = 0; i < constraints.length; i++) {\r\n            storedVelocities.push(constraints[i].velocity.clone());\r\n            constraints[i].velocity.setAll(0);\r\n        }\r\n\r\n        const maxSurfaceVelocity = this._tmpVecs[3];\r\n        maxSurfaceVelocity.set(this.maxCharacterSpeedForSolver, this.maxCharacterSpeedForSolver, this.maxCharacterSpeedForSolver);\r\n        const output = this._simplexSolverSolve(constraints, direction, deltaTime, deltaTime, this.up, maxSurfaceVelocity);\r\n\r\n        surfaceInfo.averageSurfaceVelocity.setAll(0);\r\n        surfaceInfo.averageAngularSurfaceVelocity.setAll(0);\r\n        surfaceInfo.averageSurfaceNormal.setAll(0);\r\n        surfaceInfo.isSurfaceDynamic = false;\r\n\r\n        // If the constraints did not affect the character movement then it is unsupported and we can finish\r\n        if (output.velocity.equalsWithEpsilon(direction, eps)) {\r\n            surfaceInfo.supportedState = CharacterSupportedState.UNSUPPORTED;\r\n            return;\r\n        }\r\n\r\n        // Check how was the input velocity modified to determine if the character is supported or sliding\r\n        if (output.velocity.lengthSquared() < eps) {\r\n            surfaceInfo.supportedState = CharacterSupportedState.SUPPORTED;\r\n        } else {\r\n            output.velocity.normalize();\r\n            const angleSin = output.velocity.dot(direction);\r\n            const cosSqr = 1 - angleSin * angleSin;\r\n            if (cosSqr < this.maxSlopeCosine * this.maxSlopeCosine) {\r\n                surfaceInfo.supportedState = CharacterSupportedState.SLIDING;\r\n            } else {\r\n                surfaceInfo.supportedState = CharacterSupportedState.SUPPORTED;\r\n            }\r\n        }\r\n\r\n        // Add all supporting constraints to the ground information\r\n        let numTouching = 0;\r\n        for (let i = -0; i < constraints.length; i++) {\r\n            if (output.planeInteractions[i].touched && constraints[i].planeNormal.dot(direction) < -0.08) {\r\n                surfaceInfo.averageSurfaceNormal.addInPlace(constraints[i].planeNormal);\r\n                surfaceInfo.averageSurfaceVelocity.addInPlace(storedVelocities[i]);\r\n                surfaceInfo.averageAngularSurfaceVelocity.addInPlace(constraints[i].angularVelocity);\r\n                numTouching++;\r\n            }\r\n        }\r\n\r\n        if (numTouching > 0) {\r\n            surfaceInfo.averageSurfaceNormal.normalize();\r\n            surfaceInfo.averageSurfaceVelocity.scaleInPlace(1 / numTouching);\r\n            surfaceInfo.averageAngularSurfaceVelocity.scaleInPlace(1 / numTouching);\r\n        }\r\n\r\n        // isSurfaceDynamic update\r\n        if (surfaceInfo.supportedState == CharacterSupportedState.SUPPORTED) {\r\n            for (let i = 0; i < this._manifold.length; i++) {\r\n                const manifold = this._manifold[i];\r\n                const bodyB = manifold.bodyB;\r\n\r\n                if (this._manifold[i].normal.dot(direction) < -0.08 && bodyB.body.getMotionType(0) == PhysicsMotionType.DYNAMIC) {\r\n                    surfaceInfo.isSurfaceDynamic = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _castWithCollectors(startPos: Vector3, endPos: Vector3, castCollector: any /*HP_CollectorId*/, startCollector?: any /*HP_CollectorId*/) {\r\n        const hk = this._scene.getPhysicsEngine()!.getPhysicsPlugin() as HavokPlugin;\r\n        const hknp = hk._hknp;\r\n\r\n        const startNative = [startPos.x, startPos.y, startPos.z];\r\n        const orientation = [this._orientation.x, this._orientation.y, this._orientation.z, this._orientation.w];\r\n        if (startCollector != null) {\r\n            const query /*: ShapeProximityInput*/ = [\r\n                this._shape._pluginData,\r\n                startNative,\r\n                orientation,\r\n                this.keepDistance + this.keepContactTolerance, // max distance\r\n                false, // should hit triggers\r\n                [BigInt(0)], // body to ignore //<todo allow for a proxy body!\r\n            ];\r\n            hknp.HP_World_ShapeProximityWithCollector(hk.world, startCollector, query);\r\n        }\r\n\r\n        {\r\n            const query /*: ShapeCastInput*/ = [\r\n                this._shape._pluginData,\r\n                orientation,\r\n                startNative,\r\n                [endPos.x, endPos.y, endPos.z],\r\n                false, // should hit triggers\r\n                [BigInt(0)], // body to ignore //<todo allow for proxy body\r\n            ];\r\n            hknp.HP_World_ShapeCastWithCollector(hk.world, castCollector, query);\r\n        }\r\n    }\r\n\r\n    protected _resolveContacts(deltaTime: number, gravity: Vector3) {\r\n        const eps = 1e-12;\r\n        //<todo object interactions out\r\n        for (let i = 0; i < this._manifold.length; i++) {\r\n            const contact = this._manifold[i];\r\n            const bodyB = this._manifold[i].bodyB;\r\n\r\n            //<todo test if bodyB is another character with a proxy body\r\n\r\n            // Skip fixed or keyframed bodies as we won't apply impulses to them\r\n            if (bodyB.body.getMotionType(bodyB.index) != PhysicsMotionType.DYNAMIC) {\r\n                continue;\r\n            }\r\n\r\n            // Calculate and apply impulse on contacted body\r\n            {\r\n                //<todo input/output for callbacks\r\n                let inputObjectMassInv = 0;\r\n                let inputObjectImpulse = 0;\r\n                let outputObjectImpulse = Vector3.Zero();\r\n                const outputImpulsePosition = contact.position;\r\n\r\n                // Calculate relative normal velocity of the contact point in the contacted body\r\n                const pointRelVel = this._tmpVecs[19];\r\n                this._getPointVelocityToRef(bodyB, contact.position, pointRelVel);\r\n                pointRelVel.subtractInPlace(this._velocity);\r\n                const inputProjectedVelocity = pointRelVel.dot(contact.normal);\r\n                const dampFactor = 0.9;\r\n\r\n                // Change velocity\r\n                let deltaVelocity = -inputProjectedVelocity * dampFactor;\r\n\r\n                // Apply an extra impulse if the collision is actually penetrating\r\n                if (contact.distance < 0) {\r\n                    const recoveryTau = 0.4;\r\n                    deltaVelocity += (contact.distance * recoveryTau) / deltaTime;\r\n                }\r\n\r\n                // Apply impulse if required to keep bodies apart\r\n                if (deltaVelocity < 0) {\r\n                    //  Calculate the impulse magnitude\r\n                    const invInertia = this._getInverseInertiaWorld(bodyB);\r\n                    const comWorld = this._tmpVecs[15];\r\n                    this._getComWorldToRef(bodyB, comWorld);\r\n                    const r = this._tmpVecs[16];\r\n                    contact.position.subtractToRef(comWorld, r);\r\n                    const jacAng = this._tmpVecs[17];\r\n                    Vector3.CrossToRef(r, contact.normal, jacAng);\r\n                    const rc = this._tmpVecs[18];\r\n                    Vector3.TransformNormalToRef(jacAng, invInertia, rc);\r\n                    inputObjectMassInv = rc.dot(jacAng) + this._getInvMass(bodyB);\r\n                    inputObjectImpulse = deltaVelocity / inputObjectMassInv;\r\n\r\n                    // Clamp impulse magnitude if required and apply it to the normal direction\r\n                    const maxPushImpulse = -this.characterStrength * deltaTime;\r\n                    if (inputObjectImpulse < maxPushImpulse) {\r\n                        inputObjectImpulse = maxPushImpulse;\r\n                    }\r\n                    outputObjectImpulse = contact.normal.scale(inputObjectImpulse);\r\n                } else {\r\n                    inputObjectImpulse = 0;\r\n                    inputObjectMassInv = this._getInvMass(bodyB);\r\n                }\r\n\r\n                // Add gravity\r\n                {\r\n                    // Calculate effect of gravity on the velocity of the character in the contact normal direction\r\n                    let relVelN = contact.normal.dot(gravity.scale(deltaTime));\r\n                    // If it is a separating contact subtract the separation velocity\r\n                    if (inputProjectedVelocity < 0) {\r\n                        relVelN -= inputProjectedVelocity;\r\n                    }\r\n                    // If the resulting velocity is negative an impulse is applied to stop the character from falling into\r\n                    // the contacted body\r\n                    if (relVelN < -eps) {\r\n                        outputObjectImpulse.addInPlace(contact.normal.scale(this.characterMass * relVelN));\r\n                    }\r\n                }\r\n\r\n                //<todo Fire callback to allow user to change impulse + use the info / play sounds\r\n\r\n                bodyB.body.applyImpulse(outputObjectImpulse, outputImpulsePosition, bodyB.index);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _getInverseInertiaWorld(body: { body: PhysicsBody; index: number }): DeepImmutableObject<Matrix> {\r\n        const mp = body.body.getMassProperties(body.index);\r\n        if (!mp.inertia || !mp.inertiaOrientation) {\r\n            return Matrix.IdentityReadOnly;\r\n        }\r\n        const invOrientation = Matrix.FromQuaternionToRef(mp.inertiaOrientation, TmpVectors.Matrix[0]).invert();\r\n        const it = TmpVectors.Matrix[1];\r\n\r\n        const ir = invOrientation.getRowToRef(0, TmpVectors.Vector4[0]);\r\n        it.setRowFromFloats(0, mp.inertia.x * ir.x, mp.inertia.x * ir.y, mp.inertia.x * ir.z, 0);\r\n        invOrientation.getRowToRef(1, ir);\r\n        it.setRowFromFloats(0, mp.inertia.y * ir.x, mp.inertia.y * ir.y, mp.inertia.y * ir.z, 0);\r\n        invOrientation.getRowToRef(2, ir);\r\n        it.setRowFromFloats(0, mp.inertia.z * ir.x, mp.inertia.z * ir.y, mp.inertia.z * ir.z, 0);\r\n        invOrientation.multiplyToRef(it, this._tmpMatrix);\r\n        return this._tmpMatrix;\r\n    }\r\n\r\n    protected _getComWorldToRef(body: { body: PhysicsBody; index: number }, result: Vector3) {\r\n        const mp = body.body.getMassProperties(body.index);\r\n        Vector3.TransformCoordinatesToRef(mp.centerOfMass!, body.body.transformNode.getWorldMatrix(), result);\r\n    }\r\n\r\n    protected _getInvMass(body: { body: PhysicsBody; index: number }): number {\r\n        return 1 / body.body.getMassProperties(body.index).mass!;\r\n    }\r\n\r\n    /**\r\n     * Update internal state. Must be called once per frame\r\n     * @param deltaTime frame delta time in seconds. When using scene.deltaTime divide by 1000.0\r\n     * @param surfaceInfo surface information returned by checkSupport\r\n     * @param gravity gravity applied to the character. Can be different that world gravity\r\n     */\r\n    public integrate(deltaTime: number, surfaceInfo: CharacterSurfaceInfo, gravity: Vector3) {\r\n        const hk = this._scene.getPhysicsEngine()!.getPhysicsPlugin() as HavokPlugin;\r\n\r\n        const invDeltaTime = 1 / deltaTime;\r\n        let remainingTime = deltaTime;\r\n        let newVelocity = Vector3.Zero();\r\n\r\n        // If the difference between the cast displacement and the simplex solver output position is less than this\r\n        // value (per component), do not do a second cast to check if it's possible to reach the output position.\r\n        const displacementEps = 1e-4;\r\n        const epsSqrd = 1e-8;\r\n\r\n        // Choose the first cast direction.  If velocity hasn't changed from the previous integrate, guess that the\r\n        // displacement will be the same as last integrate, scaled by relative step length.  Otherwise, guess based\r\n        // on current velocity.\r\n        {\r\n            const tolerance = displacementEps * invDeltaTime;\r\n            if (this._velocity.equalsWithEpsilon(this._lastVelocity, tolerance)) {\r\n                this._lastDisplacement.scaleInPlace(remainingTime * this._lastInvDeltaTime);\r\n            } else {\r\n                const displacementVelocity = this._velocity;\r\n                if (surfaceInfo.supportedState == CharacterSupportedState.SUPPORTED) {\r\n                    const relativeVelocity = this._tmpVecs[28];\r\n                    this._velocity.subtractToRef(surfaceInfo.averageSurfaceVelocity, relativeVelocity);\r\n                    const normalDotVelocity = surfaceInfo.averageSurfaceNormal.dot(relativeVelocity);\r\n                    if (normalDotVelocity < 0) {\r\n                        relativeVelocity.subtractInPlace(surfaceInfo.averageSurfaceNormal.scale(normalDotVelocity));\r\n                        displacementVelocity.copyFrom(relativeVelocity);\r\n                        displacementVelocity.addInPlace(surfaceInfo.averageSurfaceVelocity);\r\n                    }\r\n                }\r\n                this._lastDisplacement.copyFrom(displacementVelocity);\r\n                this._lastDisplacement.scaleInPlace(remainingTime);\r\n            }\r\n            this._lastVelocity.copyFrom(this._velocity);\r\n            this._lastInvDeltaTime = invDeltaTime;\r\n        }\r\n\r\n        // Make sure that contact with bodies that have been removed since the call to checkSupport() are removed from the\r\n        // manifold\r\n        this._validateManifold();\r\n\r\n        for (let iter = 0; iter < this.maxCastIterations && remainingTime > 1e-5; iter++) {\r\n            this._castWithCollectors(this._position, this._position.add(this._lastDisplacement), this._castCollector, this._startCollector);\r\n            const updateResult = this._updateManifold(this._startCollector, this._castCollector, this._lastDisplacement);\r\n\r\n            // Create surface constraints from the manifold contacts.\r\n            const constraints = this._createConstraintsFromManifold(deltaTime, deltaTime - remainingTime);\r\n            const maxSurfaceVelocity = this._tmpVecs[3];\r\n            maxSurfaceVelocity.set(this.maxCharacterSpeedForSolver, this.maxCharacterSpeedForSolver, this.maxCharacterSpeedForSolver);\r\n            const minDeltaTime = this._velocity.lengthSquared() == 0 ? 0.0 : (0.5 * this.keepDistance) / this._velocity.length();\r\n            const solveResults = this._simplexSolverSolve(constraints, this._velocity, remainingTime, minDeltaTime, this.up, maxSurfaceVelocity);\r\n            const newDisplacement = solveResults.position;\r\n            const solverDeltaTime = solveResults.deltaTime;\r\n            newVelocity = solveResults.velocity;\r\n\r\n            this._resolveContacts(deltaTime, gravity);\r\n\r\n            let newContactIndex = -1;\r\n            // todo if (updateResult == hit multiple bodies) ... cast again\r\n\r\n            // If castCollector had hits on different bodies (so we're not sure if some non-closest body could be in our way) OR\r\n            // the simplex has given an output direction different from the cast guess\r\n            // we re-cast to check we can move there. There is no need to get the start points again.\r\n            if (updateResult != 0 || (newDisplacement.lengthSquared() > epsSqrd && !this._lastDisplacement.equalsWithEpsilon(newDisplacement, displacementEps))) {\r\n                this._castWithCollectors(this._position, this._position.add(newDisplacement), this._castCollector, this._startCollector);\r\n                const hknp = hk._hknp;\r\n                const numCastHits = hknp.HP_QueryCollector_GetNumHits(this._castCollector)[1];\r\n                // Find the first contact that isn't already in the manifold\r\n                if (numCastHits > 0) {\r\n                    //<todo sortHits()\r\n                    for (let i = 0; i < numCastHits; i++) {\r\n                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n                        const [fraction, _hitLocal, hitWorld] = hknp.HP_QueryCollector_GetShapeCastResult(this._castCollector, i)[1];\r\n                        const newContact = ContactFromCast(hk, hitWorld, newDisplacement, fraction, this.keepDistance);\r\n                        if (this._findContact(newContact, this._manifold, 0.1) == -1) {\r\n                            //<todo fireContactAdded\r\n                            newContactIndex = this._manifold.length;\r\n                            this._manifold.push(newContact);\r\n                            //<todo updateTriggersSeen()\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (newContactIndex >= 0) {\r\n                const newContact = this._manifold[newContactIndex];\r\n                const displacementLengthInv = 1.0 / newDisplacement.length();\r\n                const angleBetweenMovementAndSurface = newDisplacement.dot(newContact.normal) * displacementLengthInv;\r\n                const keepDistanceAlongMovement = this.keepDistance / -angleBetweenMovementAndSurface;\r\n                const distance = newContact.fraction;\r\n                let fraction = distance - keepDistanceAlongMovement * displacementLengthInv;\r\n                fraction = Math.min(Math.max(fraction, 0.0), 1.0);\r\n\r\n                const displacement = newDisplacement.scale(fraction);\r\n                this._position.addInPlace(displacement);\r\n                remainingTime -= solverDeltaTime * fraction;\r\n            } else {\r\n                this._position.addInPlace(newDisplacement);\r\n                remainingTime -= solverDeltaTime;\r\n            }\r\n            this._lastDisplacement.copyFrom(newDisplacement);\r\n        }\r\n\r\n        this._velocity.copyFrom(newVelocity);\r\n    }\r\n\r\n    /**\r\n     * Helper function to calculate velocity based on surface informations and current velocity state and target\r\n     * @param deltaTime frame delta time in seconds. When using scene.deltaTime divide by 1000.0\r\n     * @param forwardWorld character forward in world coordinates\r\n     * @param surfaceNormal surface normal direction\r\n     * @param currentVelocity current velocity\r\n     * @param surfaceVelocity velocity induced by the surface\r\n     * @param desiredVelocity desired character velocity\r\n     * @param upWorld up vector in world space\r\n     * @param result resulting velocity vector\r\n     * @returns boolean true if result has been computed\r\n     */\r\n    public calculateMovementToRef(\r\n        deltaTime: number,\r\n        forwardWorld: Vector3,\r\n        surfaceNormal: Vector3,\r\n        currentVelocity: Vector3,\r\n        surfaceVelocity: Vector3,\r\n        desiredVelocity: Vector3,\r\n        upWorld: Vector3,\r\n        result: Vector3\r\n    ): boolean {\r\n        const eps = 1e-5;\r\n        let binorm = forwardWorld.cross(upWorld);\r\n        if (binorm.lengthSquared() < eps) {\r\n            return false;\r\n        }\r\n        binorm.normalize();\r\n        const tangent = binorm.cross(surfaceNormal);\r\n        tangent.normalize();\r\n        binorm = tangent.cross(surfaceNormal);\r\n        binorm.normalize();\r\n\r\n        const surfaceFrame = Matrix.FromValues(\r\n            tangent.x,\r\n            tangent.y,\r\n            tangent.z,\r\n            0,\r\n            binorm.x,\r\n            binorm.y,\r\n            binorm.z,\r\n            0,\r\n            surfaceNormal.x,\r\n            surfaceNormal.y,\r\n            surfaceNormal.z,\r\n            0,\r\n            0,\r\n            0,\r\n            0,\r\n            1\r\n        );\r\n        const invSurfaceFrame = surfaceFrame.clone().invert();\r\n\r\n        currentVelocity.subtractToRef(surfaceVelocity, this._tmpVecs[29]);\r\n        const relative = this._tmpVecs[30];\r\n        Vector3.TransformNormalToRef(this._tmpVecs[29], invSurfaceFrame, relative);\r\n\r\n        const sideVec = upWorld.cross(forwardWorld);\r\n        const fwd = desiredVelocity.dot(forwardWorld);\r\n        const side = desiredVelocity.dot(sideVec);\r\n        const len = desiredVelocity.length();\r\n\r\n        const desiredVelocitySF = this._tmpVecs[4];\r\n        desiredVelocitySF.set(-fwd, side, 0);\r\n        desiredVelocitySF.normalize();\r\n        desiredVelocitySF.scaleInPlace(len);\r\n        const diff = this._tmpVecs[5];\r\n        desiredVelocitySF.subtractToRef(relative, diff);\r\n\r\n        // Clamp it by maxAcceleration and limit it by gain.\r\n        {\r\n            const lenSq = diff.lengthSquared();\r\n            const maxVelocityDelta = this.maxAcceleration * deltaTime;\r\n            let tmp: number;\r\n            if (lenSq * this.acceleration * this.acceleration > maxVelocityDelta * maxVelocityDelta) {\r\n                tmp = maxVelocityDelta / Math.sqrt(lenSq);\r\n            } else {\r\n                tmp = this.acceleration;\r\n            }\r\n            diff.scaleInPlace(tmp);\r\n        }\r\n\r\n        relative.addInPlace(diff);\r\n\r\n        // Transform back to world space and apply\r\n        Vector3.TransformNormalToRef(relative, surfaceFrame, result);\r\n\r\n        // Add back in the surface velocity\r\n        result.addInPlace(surfaceVelocity);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Helper function to calculate velocity based on surface informations and current velocity state and target\r\n     * @param deltaTime frame delta time in seconds. When using scene.deltaTime divide by 1000.0\r\n     * @param forwardWorld character forward in world coordinates\r\n     * @param surfaceNormal surface normal direction\r\n     * @param currentVelocity current velocity\r\n     * @param surfaceVelocity velocity induced by the surface\r\n     * @param desiredVelocity desired character velocity\r\n     * @param upWorld up vector in world space\r\n     * @returns a new velocity vector\r\n     */\r\n    public calculateMovement(\r\n        deltaTime: number,\r\n        forwardWorld: Vector3,\r\n        surfaceNormal: Vector3,\r\n        currentVelocity: Vector3,\r\n        surfaceVelocity: Vector3,\r\n        desiredVelocity: Vector3,\r\n        upWorld: Vector3\r\n    ): Vector3 {\r\n        const result = new Vector3(0, 0, 0);\r\n        this.calculateMovementToRef(deltaTime, forwardWorld, surfaceNormal, currentVelocity, surfaceVelocity, desiredVelocity, upWorld, result);\r\n        return result;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7497, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/Plugins/havokPlugin.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/Plugins/havokPlugin.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-return */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\nimport { Matrix, Quaternion, TmpVectors, Vector3 } from \"../../../Maths/math.vector\";\r\nimport {\r\n    PhysicsShapeType,\r\n    PhysicsConstraintType,\r\n    PhysicsMotionType,\r\n    PhysicsConstraintMotorType,\r\n    PhysicsConstraintAxis,\r\n    PhysicsConstraintAxisLimitMode,\r\n    PhysicsEventType,\r\n    PhysicsPrestepType,\r\n    PhysicsActivationControl,\r\n} from \"../IPhysicsEnginePlugin\";\r\nimport type {\r\n    PhysicsShapeParameters,\r\n    IPhysicsEnginePluginV2,\r\n    PhysicsMassProperties,\r\n    IPhysicsCollisionEvent,\r\n    IBasePhysicsCollisionEvent,\r\n    ConstrainedBodyPair,\r\n} from \"../IPhysicsEnginePlugin\";\r\nimport type { IRaycastQuery } from \"../../physicsRaycastResult\";\r\nimport { PhysicsRaycastResult } from \"../../physicsRaycastResult\";\r\nimport { Logger } from \"../../../Misc/logger\";\r\nimport type { PhysicsBody } from \"../physicsBody\";\r\nimport type { PhysicsConstraint, Physics6DoFConstraint } from \"../physicsConstraint\";\r\nimport type { PhysicsMaterial } from \"../physicsMaterial\";\r\nimport { PhysicsMaterialCombineMode } from \"../physicsMaterial\";\r\nimport { PhysicsShape } from \"../physicsShape\";\r\nimport { BoundingBox } from \"../../../Culling/boundingBox\";\r\nimport type { TransformNode } from \"../../../Meshes/transformNode\";\r\nimport { Mesh } from \"../../../Meshes/mesh\";\r\nimport { InstancedMesh } from \"../../../Meshes/instancedMesh\";\r\nimport type { Scene } from \"../../../scene\";\r\nimport { VertexBuffer } from \"../../../Buffers/buffer\";\r\nimport { BuildArray } from \"../../../Misc/arrayTools\";\r\nimport { Observable } from \"../../../Misc/observable\";\r\nimport type { Nullable, FloatArray } from \"../../../types\";\r\nimport type { IPhysicsPointProximityQuery } from \"../../physicsPointProximityQuery\";\r\nimport type { ProximityCastResult } from \"../../proximityCastResult\";\r\nimport type { IPhysicsShapeProximityCastQuery } from \"../../physicsShapeProximityCastQuery\";\r\nimport type { IPhysicsShapeCastQuery } from \"../../physicsShapeCastQuery\";\r\nimport type { ShapeCastResult } from \"../../shapeCastResult\";\r\ndeclare let HK: any;\r\n\r\n/**\r\n * Helper to keep a reference to plugin memory.\r\n * Used to avoid https://github.com/emscripten-core/emscripten/issues/7294\r\n * @internal\r\n */\r\ninterface PluginMemoryRef {\r\n    /** The offset from the beginning of the plugin's heap */\r\n    offset: number;\r\n    /** The number of identically-sized objects the buffer contains */\r\n    numObjects: number;\r\n}\r\n\r\nclass MeshAccumulator {\r\n    /**\r\n     * Constructor of the mesh accumulator\r\n     * @param mesh - The mesh used to compute the world matrix.\r\n     * @param collectIndices - use mesh indices\r\n     * @param scene - The scene used to determine the right handed system.\r\n     *\r\n     * Merge mesh and its children so whole hierarchy can be used as a mesh shape or convex hull\r\n     */\r\n    public constructor(mesh: Mesh, collectIndices: boolean, scene: Scene) {\r\n        this._isRightHanded = scene.useRightHandedSystem;\r\n        this._collectIndices = collectIndices;\r\n    }\r\n\r\n    /**\r\n     * Adds a mesh to the physics engine.\r\n     * @param mesh The mesh to add.\r\n     * @param includeChildren Whether to include the children of the mesh.\r\n     *\r\n     * This method adds a mesh to the physics engine by computing the world matrix,\r\n     * multiplying it with the body from world matrix, and then transforming the\r\n     * coordinates of the mesh's vertices. It also adds the indices of the mesh\r\n     * to the physics engine. If includeChildren is true, it will also add the\r\n     * children of the mesh to the physics engine, ignoring any children which\r\n     * have a physics impostor. This is useful for creating a physics engine\r\n     * that accurately reflects the mesh and its children.\r\n     */\r\n    public addNodeMeshes(mesh: TransformNode, includeChildren: boolean): void {\r\n        // Force absoluteScaling to be computed; we're going to use that to bake\r\n        // the scale of any parent nodes into this shape, as physics engines\r\n        // usually use rigid transforms, so can't handle arbitrary scale.\r\n        mesh.computeWorldMatrix(true);\r\n        const rootScaled = TmpVectors.Matrix[0];\r\n        Matrix.ScalingToRef(mesh.absoluteScaling.x, mesh.absoluteScaling.y, mesh.absoluteScaling.z, rootScaled);\r\n\r\n        if (mesh instanceof Mesh) {\r\n            this._addMesh(mesh, rootScaled);\r\n        } else if (mesh instanceof InstancedMesh) {\r\n            this._addMesh(mesh.sourceMesh, rootScaled);\r\n        }\r\n\r\n        if (includeChildren) {\r\n            const worldToRoot = TmpVectors.Matrix[1];\r\n            mesh.computeWorldMatrix().invertToRef(worldToRoot);\r\n            const worldToRootScaled = TmpVectors.Matrix[2];\r\n            worldToRoot.multiplyToRef(rootScaled, worldToRootScaled);\r\n\r\n            const children = mesh.getChildMeshes(false);\r\n            //  Ignore any children which have a physics body.\r\n            //  Other plugin implementations do not have this check, which appears to be\r\n            //  a bug, as otherwise, the mesh will have a duplicate collider\r\n            const transformNodes = children.filter((m: any) => !m.physicsBody);\r\n\r\n            for (const m of transformNodes) {\r\n                const childToWorld = m.computeWorldMatrix();\r\n                const childToRootScaled = TmpVectors.Matrix[3];\r\n                childToWorld.multiplyToRef(worldToRootScaled, childToRootScaled);\r\n\r\n                if (m instanceof Mesh) {\r\n                    this._addMesh(m, childToRootScaled);\r\n                } else if (m instanceof InstancedMesh) {\r\n                    this._addMesh(m.sourceMesh, childToRootScaled);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _addMesh(mesh: Mesh, meshToRoot: Matrix): void {\r\n        const vertexData = mesh.getVerticesData(VertexBuffer.PositionKind) || [];\r\n        const numVerts = vertexData.length / 3;\r\n        const indexOffset = this._vertices.length;\r\n        for (let v = 0; v < numVerts; v++) {\r\n            const pos = new Vector3(vertexData[v * 3 + 0], vertexData[v * 3 + 1], vertexData[v * 3 + 2]);\r\n            this._vertices.push(Vector3.TransformCoordinates(pos, meshToRoot));\r\n        }\r\n\r\n        if (this._collectIndices) {\r\n            const meshIndices = mesh.getIndices();\r\n            if (meshIndices) {\r\n                for (let i = 0; i < meshIndices.length; i += 3) {\r\n                    // Havok wants the correct triangle winding to enable the interior triangle optimization\r\n                    if (this._isRightHanded) {\r\n                        this._indices.push(meshIndices[i + 0] + indexOffset);\r\n                        this._indices.push(meshIndices[i + 1] + indexOffset);\r\n                        this._indices.push(meshIndices[i + 2] + indexOffset);\r\n                    } else {\r\n                        this._indices.push(meshIndices[i + 2] + indexOffset);\r\n                        this._indices.push(meshIndices[i + 1] + indexOffset);\r\n                        this._indices.push(meshIndices[i + 0] + indexOffset);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Allocate and populate the vertex positions inside the physics plugin.\r\n     *\r\n     * @param plugin - The plugin to allocate the memory in.\r\n     * @returns An array of floats, whose backing memory is inside the plugin. The array contains the\r\n     * positions of the mesh vertices, where a position is defined by three floats. You must call\r\n     * freeBuffer() on the returned array once you have finished with it, in order to free the\r\n     * memory inside the plugin..\r\n     */\r\n    public getVertices(plugin: any): PluginMemoryRef {\r\n        const nFloats = this._vertices.length * 3;\r\n        const bytesPerFloat = 4;\r\n        const nBytes = nFloats * bytesPerFloat;\r\n        const bufferBegin = plugin._malloc(nBytes);\r\n\r\n        const ret = new Float32Array(plugin.HEAPU8.buffer, bufferBegin, nFloats);\r\n        for (let i = 0; i < this._vertices.length; i++) {\r\n            ret[i * 3 + 0] = this._vertices[i].x;\r\n            ret[i * 3 + 1] = this._vertices[i].y;\r\n            ret[i * 3 + 2] = this._vertices[i].z;\r\n        }\r\n\r\n        return { offset: bufferBegin, numObjects: nFloats };\r\n    }\r\n\r\n    public freeBuffer(plugin: any, arr: PluginMemoryRef) {\r\n        plugin._free(arr.offset);\r\n    }\r\n\r\n    /**\r\n     * Allocate and populate the triangle indices inside the physics plugin\r\n     *\r\n     * @param plugin - The plugin to allocate the memory in.\r\n     * @returns A new Int32Array, whose backing memory is inside the plugin. The array contains the indices\r\n     * of the triangle positions, where a single triangle is defined by three indices. You must call\r\n     * freeBuffer() on this array once you have finished with it, to free the memory inside the plugin..\r\n     */\r\n    public getTriangles(plugin: any): PluginMemoryRef {\r\n        const bytesPerInt = 4;\r\n        const nBytes = this._indices.length * bytesPerInt;\r\n        const bufferBegin = plugin._malloc(nBytes);\r\n        const ret = new Int32Array(plugin.HEAPU8.buffer, bufferBegin, this._indices.length);\r\n        for (let i = 0; i < this._indices.length; i++) {\r\n            ret[i] = this._indices[i];\r\n        }\r\n\r\n        return { offset: bufferBegin, numObjects: this._indices.length };\r\n    }\r\n\r\n    private _isRightHanded: boolean;\r\n    private _collectIndices: boolean;\r\n    private _vertices: Vector3[] = []; /// Vertices in body space\r\n    private _indices: number[] = [];\r\n}\r\n\r\nclass BodyPluginData {\r\n    public constructor(bodyId: any) {\r\n        this.hpBodyId = bodyId;\r\n        this.userMassProps = { centerOfMass: undefined, mass: undefined, inertia: undefined, inertiaOrientation: undefined };\r\n    }\r\n\r\n    public hpBodyId: any;\r\n\r\n    public worldTransformOffset: number;\r\n\r\n    public userMassProps: PhysicsMassProperties;\r\n}\r\n\r\n/*\r\nclass ShapePath\r\n{\r\n    public colliderId: number;\r\n    public pathData: number;\r\n}\r\n*/\r\n\r\nclass CollisionContactPoint {\r\n    public bodyId: bigint = BigInt(0); //0,2\r\n    //public colliderId: number = 0; //2,4\r\n    //public shapePath: ShapePath = new ShapePath(); //4,8\r\n    public position: Vector3 = new Vector3(); //8,11\r\n    public normal: Vector3 = new Vector3(); //11,14\r\n    //public triIdx: number = 0; //14,15\r\n}\r\n\r\nclass CollisionEvent {\r\n    public contactOnA: CollisionContactPoint = new CollisionContactPoint(); //1\r\n    public contactOnB: CollisionContactPoint = new CollisionContactPoint();\r\n    public impulseApplied: number = 0;\r\n    public type: number = 0;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    static readToRef(buffer: any, offset: number, eventOut: CollisionEvent) {\r\n        const intBuf = new Int32Array(buffer, offset);\r\n        const floatBuf = new Float32Array(buffer, offset);\r\n        const offA = 2;\r\n        eventOut.contactOnA.bodyId = BigInt(intBuf[offA]); //<todo Need to get the high+low words!\r\n        eventOut.contactOnA.position.set(floatBuf[offA + 8], floatBuf[offA + 9], floatBuf[offA + 10]);\r\n        eventOut.contactOnA.normal.set(floatBuf[offA + 11], floatBuf[offA + 12], floatBuf[offA + 13]);\r\n        const offB = 18;\r\n        eventOut.contactOnB.bodyId = BigInt(intBuf[offB]);\r\n        eventOut.contactOnB.position.set(floatBuf[offB + 8], floatBuf[offB + 9], floatBuf[offB + 10]);\r\n        eventOut.contactOnB.normal.set(floatBuf[offB + 11], floatBuf[offB + 12], floatBuf[offB + 13]);\r\n        eventOut.impulseApplied = floatBuf[offB + 13 + 3];\r\n        eventOut.type = intBuf[0];\r\n    }\r\n}\r\n\r\nclass TriggerEvent {\r\n    public bodyIdA: bigint = BigInt(0);\r\n    public bodyIdB: bigint = BigInt(0);\r\n    public type: number = 0;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    static readToRef(buffer: any, offset: number, eventOut: TriggerEvent) {\r\n        const intBuf = new Int32Array(buffer, offset);\r\n        eventOut.type = intBuf[0];\r\n        eventOut.bodyIdA = BigInt(intBuf[2]);\r\n        eventOut.bodyIdB = BigInt(intBuf[6]);\r\n    }\r\n}\r\n\r\nexport interface HavokPluginParameters {\r\n    /**\r\n     * Maximum number of raycast hits to process\r\n     */\r\n    maxQueryCollectorHits?: number;\r\n}\r\n\r\n/**\r\n * The Havok Physics plugin\r\n */\r\nexport class HavokPlugin implements IPhysicsEnginePluginV2 {\r\n    /**\r\n     * Reference to the WASM library\r\n     */\r\n    public _hknp: any = {};\r\n    /**\r\n     * Created Havok world which physics bodies are added to\r\n     */\r\n    public world: any;\r\n    /**\r\n     * Name of the plugin\r\n     */\r\n    public name: string = \"HavokPlugin\";\r\n    /**\r\n     * We only have a single raycast in-flight right now\r\n     */\r\n    private _queryCollector;\r\n    private _multiQueryCollector: any = undefined;\r\n    private _fixedTimeStep: number = 1 / 60;\r\n    private _maxQueryCollectorHits: number = 1;\r\n    private _tmpVec3 = BuildArray(3, Vector3.Zero);\r\n    private _bodies = new Map<bigint, { body: PhysicsBody; index: number }>();\r\n    private _shapes = new Map<bigint, PhysicsShape>();\r\n    private _bodyBuffer: number;\r\n    private _bodyCollisionObservable = new Map<bigint, Observable<IPhysicsCollisionEvent>>();\r\n    // Map from constraint id to the pair of bodies, where the first is the parent and the second is the child\r\n    private _constraintToBodyIdPair = new Map<bigint, [bigint, bigint]>();\r\n    private _bodyCollisionEndedObservable = new Map<bigint, Observable<IBasePhysicsCollisionEvent>>();\r\n    /**\r\n     * Observable for collision started and collision continued events\r\n     */\r\n    public onCollisionObservable = new Observable<IPhysicsCollisionEvent>();\r\n    /**\r\n     * Observable for collision ended events\r\n     */\r\n    public onCollisionEndedObservable = new Observable<IBasePhysicsCollisionEvent>();\r\n    /**\r\n     * Observable for trigger entered and trigger exited events\r\n     */\r\n    public onTriggerCollisionObservable = new Observable<IBasePhysicsCollisionEvent>();\r\n\r\n    public constructor(\r\n        private _useDeltaForWorldStep: boolean = true,\r\n        hpInjection: any = HK,\r\n        parameters: HavokPluginParameters = {}\r\n    ) {\r\n        if (typeof hpInjection === \"function\") {\r\n            Logger.Error(\"Havok is not ready. Please make sure you await HK() before using the plugin.\");\r\n            return;\r\n        } else {\r\n            this._hknp = hpInjection;\r\n        }\r\n\r\n        if (!this.isSupported()) {\r\n            Logger.Error(\"Havok is not available. Please make sure you included the js file.\");\r\n            return;\r\n        }\r\n        this.world = this._hknp.HP_World_Create()[1];\r\n\r\n        this._queryCollector = this._hknp.HP_QueryCollector_Create(1)[1];\r\n        this.setMaxQueryCollectorHits(parameters.maxQueryCollectorHits ?? 1);\r\n    }\r\n    /**\r\n     * If this plugin is supported\r\n     * @returns true if its supported\r\n     */\r\n    public isSupported(): boolean {\r\n        return this._hknp !== undefined;\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity of the physics world.\r\n     *\r\n     * @param gravity - The gravity vector to set.\r\n     *\r\n     */\r\n    public setGravity(gravity: Vector3): void {\r\n        this._hknp.HP_World_SetGravity(this.world, this._bVecToV3(gravity));\r\n    }\r\n\r\n    /**\r\n     * Sets the fixed time step for the physics engine.\r\n     *\r\n     * @param timeStep - The fixed time step to use for the physics engine.\r\n     *\r\n     */\r\n    public setTimeStep(timeStep: number): void {\r\n        this._fixedTimeStep = timeStep;\r\n    }\r\n\r\n    /**\r\n     * Gets the fixed time step used by the physics engine.\r\n     *\r\n     * @returns The fixed time step used by the physics engine.\r\n     *\r\n     */\r\n    public getTimeStep(): number {\r\n        return this._fixedTimeStep;\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum number of raycast hits to process.\r\n     *\r\n     * @param maxQueryCollectorHits - The maximum number of raycast hits to process.\r\n     */\r\n    public setMaxQueryCollectorHits(maxQueryCollectorHits: number): void {\r\n        if (maxQueryCollectorHits === this._maxQueryCollectorHits) {\r\n            return;\r\n        }\r\n\r\n        if (this._multiQueryCollector) {\r\n            this._hknp.HP_QueryCollector_Release(this._multiQueryCollector);\r\n            this._multiQueryCollector = undefined;\r\n        }\r\n\r\n        if (maxQueryCollectorHits > 1) {\r\n            this._multiQueryCollector = this._hknp.HP_QueryCollector_Create(maxQueryCollectorHits)[1];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum number of raycast hits to process.\r\n     *\r\n     * @returns The maximum number of raycast hits to process.\r\n     */\r\n    public getMaxQueryCollectorHits(): number {\r\n        return this._maxQueryCollectorHits;\r\n    }\r\n\r\n    /**\r\n     * Executes a single step of the physics engine.\r\n     *\r\n     * @param delta The time delta in seconds since the last step.\r\n     * @param physicsBodies An array of physics bodies to be simulated.\r\n     *\r\n     * This method is useful for simulating the physics engine. It sets the physics body transformation,\r\n     * steps the world, syncs the physics body, and notifies collisions. This allows for the physics engine\r\n     * to accurately simulate the physics bodies in the world.\r\n     */\r\n    public executeStep(delta: number, physicsBodies: Array<PhysicsBody>): void {\r\n        for (const physicsBody of physicsBodies) {\r\n            if (physicsBody.disablePreStep) {\r\n                continue;\r\n            }\r\n            this.setPhysicsBodyTransformation(physicsBody, physicsBody.transformNode);\r\n        }\r\n\r\n        const deltaTime = this._useDeltaForWorldStep ? delta : this._fixedTimeStep;\r\n        this._hknp.HP_World_SetIdealStepTime(this.world, deltaTime);\r\n        this._hknp.HP_World_Step(this.world, deltaTime);\r\n\r\n        this._bodyBuffer = this._hknp.HP_World_GetBodyBuffer(this.world)[1];\r\n        for (const physicsBody of physicsBodies) {\r\n            if (!physicsBody.disableSync) {\r\n                this.sync(physicsBody);\r\n            }\r\n        }\r\n\r\n        this._notifyCollisions();\r\n        this._notifyTriggers();\r\n    }\r\n\r\n    /**\r\n     * Returns the version of the physics engine plugin.\r\n     *\r\n     * @returns The version of the physics engine plugin.\r\n     *\r\n     * This method is useful for determining the version of the physics engine plugin that is currently running.\r\n     */\r\n    public getPluginVersion(): number {\r\n        return 2;\r\n    }\r\n\r\n    /**\r\n     * Set the maximum allowed linear and angular velocities\r\n     * @param maxLinearVelocity maximum allowed linear velocity\r\n     * @param maxAngularVelocity maximum allowed angular velocity\r\n     */\r\n    setVelocityLimits(maxLinearVelocity: number, maxAngularVelocity: number): void {\r\n        this._hknp.HP_World_SetSpeedLimit(this.world, maxLinearVelocity, maxAngularVelocity);\r\n    }\r\n\r\n    /**\r\n     * @returns maximum allowed linear velocity\r\n     */\r\n    getMaxLinearVelocity(): number {\r\n        const limits = this._hknp.HP_World_GetSpeedLimit(this.world);\r\n        return limits[1];\r\n    }\r\n\r\n    /**\r\n     * @returns maximum allowed angular velocity\r\n     */\r\n    getMaxAngularVelocity(): number {\r\n        const limits = this._hknp.HP_World_GetSpeedLimit(this.world);\r\n        return limits[2];\r\n    }\r\n\r\n    /**\r\n     * Initializes a physics body with the given position and orientation.\r\n     *\r\n     * @param body - The physics body to initialize.\r\n     * @param motionType - The motion type of the body.\r\n     * @param position - The position of the body.\r\n     * @param orientation - The orientation of the body.\r\n     * This code is useful for initializing a physics body with the given position and orientation.\r\n     * It creates a plugin data for the body and adds it to the world. It then converts the position\r\n     * and orientation to a transform and sets the body's transform to the given values.\r\n     */\r\n    public initBody(body: PhysicsBody, motionType: PhysicsMotionType, position: Vector3, orientation: Quaternion): void {\r\n        body._pluginData = new BodyPluginData(this._hknp.HP_Body_Create()[1]);\r\n\r\n        this._internalSetMotionType(body._pluginData, motionType);\r\n        const transform = [this._bVecToV3(position), this._bQuatToV4(orientation)]; //<todo temp transform?\r\n        this._hknp.HP_Body_SetQTransform(body._pluginData.hpBodyId, transform);\r\n\r\n        this._hknp.HP_World_AddBody(this.world, body._pluginData.hpBodyId, body.startAsleep);\r\n        this._bodies.set(body._pluginData.hpBodyId[0], { body: body, index: 0 });\r\n    }\r\n\r\n    /**\r\n     * Removes a body from the world. To dispose of a body, it is necessary to remove it from the world first.\r\n     *\r\n     * @param body - The body to remove.\r\n     */\r\n    public removeBody(body: PhysicsBody): void {\r\n        if (body._pluginDataInstances && body._pluginDataInstances.length > 0) {\r\n            for (const instance of body._pluginDataInstances) {\r\n                this._bodyCollisionObservable.delete(instance.hpBodyId[0]);\r\n                this._hknp.HP_World_RemoveBody(this.world, instance.hpBodyId);\r\n                this._bodies.delete(instance.hpBodyId[0]);\r\n            }\r\n        }\r\n        if (body._pluginData) {\r\n            this._bodyCollisionObservable.delete(body._pluginData.hpBodyId[0]);\r\n            this._hknp.HP_World_RemoveBody(this.world, body._pluginData.hpBodyId);\r\n            this._bodies.delete(body._pluginData.hpBodyId[0]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initializes the body instances for a given physics body and mesh.\r\n     *\r\n     * @param body - The physics body to initialize.\r\n     * @param motionType - How the body will be handled by the engine\r\n     * @param mesh - The mesh to initialize.\r\n     *\r\n     * This code is useful for creating a physics body from a mesh. It creates a\r\n     * body instance for each instance of the mesh and adds it to the world. It also\r\n     * sets the position of the body instance to the position of the mesh instance.\r\n     * This allows for the physics engine to accurately simulate the mesh in the\r\n     * world.\r\n     */\r\n    public initBodyInstances(body: PhysicsBody, motionType: PhysicsMotionType, mesh: Mesh): void {\r\n        const instancesCount = mesh._thinInstanceDataStorage?.instancesCount ?? 0;\r\n        const matrixData = mesh._thinInstanceDataStorage.matrixData;\r\n        if (!matrixData) {\r\n            return; // TODO: error handling\r\n        }\r\n        this._createOrUpdateBodyInstances(body, motionType, matrixData, 0, instancesCount, false);\r\n        for (let index = 0; index < body._pluginDataInstances.length; index++) {\r\n            const bodyId = body._pluginDataInstances[index];\r\n            this._bodies.set(bodyId.hpBodyId[0], { body: body, index: index });\r\n        }\r\n    }\r\n\r\n    private _createOrUpdateBodyInstances(body: PhysicsBody, motionType: PhysicsMotionType, matrixData: Float32Array, startIndex: number, endIndex: number, update: boolean): void {\r\n        const rotation = TmpVectors.Quaternion[0];\r\n        const rotationMatrix = Matrix.Identity();\r\n        for (let i = startIndex; i < endIndex; i++) {\r\n            const position = [matrixData[i * 16 + 12], matrixData[i * 16 + 13], matrixData[i * 16 + 14]];\r\n            let hkbody;\r\n            if (!update) {\r\n                hkbody = this._hknp.HP_Body_Create()[1];\r\n            } else {\r\n                hkbody = body._pluginDataInstances[i].hpBodyId;\r\n            }\r\n            rotationMatrix.setRowFromFloats(0, matrixData[i * 16 + 0], matrixData[i * 16 + 1], matrixData[i * 16 + 2], 0);\r\n            rotationMatrix.setRowFromFloats(1, matrixData[i * 16 + 4], matrixData[i * 16 + 5], matrixData[i * 16 + 6], 0);\r\n            rotationMatrix.setRowFromFloats(2, matrixData[i * 16 + 8], matrixData[i * 16 + 9], matrixData[i * 16 + 10], 0);\r\n            Quaternion.FromRotationMatrixToRef(rotationMatrix, rotation);\r\n            const transform = [position, [rotation.x, rotation.y, rotation.z, rotation.w]];\r\n            this._hknp.HP_Body_SetQTransform(hkbody, transform);\r\n            if (!update) {\r\n                const pluginData = new BodyPluginData(hkbody);\r\n                if (body._pluginDataInstances.length) {\r\n                    // If an instance already exists, copy any user-provided mass properties\r\n                    pluginData.userMassProps = body._pluginDataInstances[0].userMassProps;\r\n                }\r\n                this._internalSetMotionType(pluginData, motionType);\r\n                this._internalUpdateMassProperties(pluginData);\r\n                body._pluginDataInstances.push(pluginData);\r\n                this._hknp.HP_World_AddBody(this.world, hkbody, body.startAsleep);\r\n                pluginData.worldTransformOffset = this._hknp.HP_Body_GetWorldTransformOffset(hkbody)[1];\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update the internal body instances for a given physics body to match the instances in a mesh.\r\n     * @param body the body that will be updated\r\n     * @param mesh the mesh with reference instances\r\n     */\r\n    public updateBodyInstances(body: PhysicsBody, mesh: Mesh): void {\r\n        const instancesCount = mesh._thinInstanceDataStorage?.instancesCount ?? 0;\r\n        const matrixData = mesh._thinInstanceDataStorage.matrixData;\r\n        if (!matrixData) {\r\n            return; // TODO: error handling\r\n        }\r\n        const pluginInstancesCount = body._pluginDataInstances.length;\r\n        const motionType = this.getMotionType(body);\r\n\r\n        if (instancesCount > pluginInstancesCount) {\r\n            this._createOrUpdateBodyInstances(body, motionType, matrixData, pluginInstancesCount, instancesCount, false);\r\n            const firstBodyShape = this._hknp.HP_Body_GetShape(body._pluginDataInstances[0].hpBodyId)[1];\r\n            // firstBodyShape[0] might be 0 in the case where thin instances data is set (with thinInstancesSetBuffer call) after body creation\r\n            // in that case, use the shape provided at body creation.\r\n            if (!firstBodyShape[0]) {\r\n                firstBodyShape[0] = body.shape?._pluginData[0];\r\n            }\r\n            for (let i = pluginInstancesCount; i < instancesCount; i++) {\r\n                this._hknp.HP_Body_SetShape(body._pluginDataInstances[i].hpBodyId, firstBodyShape);\r\n                this._internalUpdateMassProperties(body._pluginDataInstances[i]);\r\n                this._bodies.set(body._pluginDataInstances[i].hpBodyId[0], { body: body, index: i });\r\n            }\r\n        } else if (instancesCount < pluginInstancesCount) {\r\n            const instancesToRemove = pluginInstancesCount - instancesCount;\r\n            for (let i = 0; i < instancesToRemove; i++) {\r\n                const hkbody = body._pluginDataInstances.pop();\r\n                this._bodies.delete(hkbody.hpBodyId[0]);\r\n                this._hknp.HP_World_RemoveBody(this.world, hkbody.hpBodyId);\r\n                this._hknp.HP_Body_Release(hkbody.hpBodyId);\r\n            }\r\n            this._createOrUpdateBodyInstances(body, motionType, matrixData, 0, instancesCount, true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Synchronizes the transform of a physics body with its transform node.\r\n     * @param body - The physics body to synchronize.\r\n     *\r\n     * This function is useful for keeping the physics body's transform in sync with its transform node.\r\n     * This is important for ensuring that the physics body is accurately represented in the physics engine.\r\n     */\r\n    sync(body: PhysicsBody): void {\r\n        this.syncTransform(body, body.transformNode);\r\n    }\r\n\r\n    /**\r\n     * Synchronizes the transform of a physics body with the transform of its\r\n     * corresponding transform node.\r\n     *\r\n     * @param body - The physics body to synchronize.\r\n     * @param transformNode - The destination Transform Node.\r\n     *\r\n     * This code is useful for synchronizing the position and orientation of a\r\n     * physics body with the position and orientation of its corresponding\r\n     * transform node. This is important for ensuring that the physics body and\r\n     * the transform node are in the same position and orientation in the scene.\r\n     * This is necessary for the physics engine to accurately simulate the\r\n     * physical behavior of the body.\r\n     */\r\n    syncTransform(body: PhysicsBody, transformNode: TransformNode): void {\r\n        if (body._pluginDataInstances.length) {\r\n            // instances\r\n            const m = transformNode as Mesh;\r\n            const matrixData = m._thinInstanceDataStorage.matrixData;\r\n            if (!matrixData) {\r\n                return; // TODO: error handling\r\n            }\r\n            const instancesCount = body._pluginDataInstances.length;\r\n            for (let i = 0; i < instancesCount; i++) {\r\n                const bufOffset = body._pluginDataInstances[i].worldTransformOffset;\r\n                const transformBuffer = new Float32Array(this._hknp.HEAPU8.buffer, this._bodyBuffer + bufOffset, 16);\r\n                const index = i * 16;\r\n\r\n                for (let mi = 0; mi < 15; mi++) {\r\n                    if ((mi & 3) != 3) {\r\n                        matrixData[index + mi] = transformBuffer[mi];\r\n                    }\r\n                }\r\n                matrixData[index + 15] = 1;\r\n            }\r\n            m.thinInstanceBufferUpdated(\"matrix\");\r\n        } else {\r\n            try {\r\n                // regular\r\n                const bodyTransform = this._hknp.HP_Body_GetQTransform(body._pluginData.hpBodyId)[1];\r\n                const bodyTranslation = bodyTransform[0];\r\n                const bodyOrientation = bodyTransform[1];\r\n                const quat = TmpVectors.Quaternion[0];\r\n\r\n                quat.set(bodyOrientation[0], bodyOrientation[1], bodyOrientation[2], bodyOrientation[3]);\r\n\r\n                const parent = transformNode.parent as TransformNode;\r\n                // transform position/orientation in parent space\r\n                if (parent && !parent.getWorldMatrix().isIdentity()) {\r\n                    parent.computeWorldMatrix(true);\r\n                    // Save scaling for future use\r\n                    TmpVectors.Vector3[1].copyFrom(transformNode.scaling);\r\n\r\n                    quat.normalize();\r\n                    const finalTransform = TmpVectors.Matrix[0];\r\n                    const finalTranslation = TmpVectors.Vector3[0];\r\n                    finalTranslation.copyFromFloats(bodyTranslation[0], bodyTranslation[1], bodyTranslation[2]);\r\n                    Matrix.ComposeToRef(transformNode.absoluteScaling, quat, finalTranslation, finalTransform);\r\n\r\n                    const parentInverseTransform = TmpVectors.Matrix[1];\r\n                    parent.getWorldMatrix().invertToRef(parentInverseTransform);\r\n\r\n                    const localTransform = TmpVectors.Matrix[2];\r\n                    finalTransform.multiplyToRef(parentInverseTransform, localTransform);\r\n                    localTransform.decomposeToTransformNode(transformNode);\r\n                    transformNode.rotationQuaternion?.normalize();\r\n                    // Keep original scaling. Re-injecting scaling can introduce discontinuity between frames. Basically, it grows or shrinks.\r\n                    transformNode.scaling.copyFrom(TmpVectors.Vector3[1]);\r\n                } else {\r\n                    transformNode.position.set(bodyTranslation[0], bodyTranslation[1], bodyTranslation[2]);\r\n                    if (transformNode.rotationQuaternion) {\r\n                        transformNode.rotationQuaternion.copyFrom(quat);\r\n                    } else {\r\n                        quat.toEulerAnglesToRef(transformNode.rotation);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                Logger.Error(`Syncing transform failed for node ${transformNode.name}: ${e.message}...`);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the shape of a physics body.\r\n     * @param body - The physics body to set the shape for.\r\n     * @param shape - The physics shape to set.\r\n     *\r\n     * This function is used to set the shape of a physics body. It is useful for\r\n     * creating a physics body with a specific shape, such as a box or a sphere,\r\n     * which can then be used to simulate physical interactions in a physics engine.\r\n     * This function is especially useful for meshes with multiple instances, as it\r\n     * will set the shape for each instance of the mesh.\r\n     */\r\n    public setShape(body: PhysicsBody, shape: Nullable<PhysicsShape>): void {\r\n        const shapeHandle = shape && shape._pluginData ? shape._pluginData : BigInt(0);\r\n        if (!(body.transformNode instanceof Mesh) || !body.transformNode._thinInstanceDataStorage?.matrixData) {\r\n            this._hknp.HP_Body_SetShape(body._pluginData.hpBodyId, shapeHandle);\r\n            this._internalUpdateMassProperties(body._pluginData);\r\n            return;\r\n        }\r\n        const m = body.transformNode;\r\n        const instancesCount = m._thinInstanceDataStorage?.instancesCount ?? 0;\r\n        for (let i = 0; i < instancesCount; i++) {\r\n            this._hknp.HP_Body_SetShape(body._pluginDataInstances[i].hpBodyId, shapeHandle);\r\n            this._internalUpdateMassProperties(body._pluginDataInstances[i]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns a reference to the first instance of the plugin data for a physics body.\r\n     * @param body\r\n     * @param instanceIndex\r\n     * @returns a reference to the first instance\r\n     */\r\n    private _getPluginReference(body: PhysicsBody, instanceIndex?: number): BodyPluginData {\r\n        return body._pluginDataInstances?.length ? body._pluginDataInstances[instanceIndex ?? 0] : body._pluginData;\r\n    }\r\n\r\n    /**\r\n     * Gets the shape of a physics body. This will create a new shape object\r\n     *\r\n     * @param body - The physics body.\r\n     * @returns The shape of the physics body.\r\n     *\r\n     */\r\n    public getShape(body: PhysicsBody): Nullable<PhysicsShape> {\r\n        const pluginRef = this._getPluginReference(body);\r\n        const shapePluginData = this._hknp.HP_Body_GetShape(pluginRef.hpBodyId)[1];\r\n        if (shapePluginData != 0) {\r\n            const scene = body.transformNode.getScene();\r\n            return new PhysicsShape({ pluginData: shapePluginData }, scene);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the type of a physics shape.\r\n     * @param shape - The physics shape to get the type for.\r\n     * @returns The type of the physics shape.\r\n     *\r\n     */\r\n    public getShapeType(shape: PhysicsShape): PhysicsShapeType {\r\n        if (shape.type) {\r\n            return shape.type;\r\n        } else {\r\n            //<todo This returns a native type!\r\n            return this._hknp.HP_Shape_GetType(shape._pluginData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the event mask of a physics body.\r\n     * @param body - The physics body to set the event mask for.\r\n     * @param eventMask - The event mask to set.\r\n     * @param instanceIndex - The index of the instance to set the event mask for\r\n     *\r\n     * This function is useful for setting the event mask of a physics body, which is used to determine which events the body will respond to. This is important for ensuring that the physics engine is able to accurately simulate the behavior of the body in the game world.\r\n     */\r\n    public setEventMask(body: PhysicsBody, eventMask: number, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (bodyPluginData) => {\r\n                this._hknp.HP_Body_SetEventMask(bodyPluginData.hpBodyId, eventMask);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Retrieves the event mask of a physics body.\r\n     *\r\n     * @param body - The physics body to retrieve the event mask from.\r\n     * @param instanceIndex - The index of the instance to retrieve the event mask from.\r\n     * @returns The event mask of the physics body.\r\n     *\r\n     */\r\n    public getEventMask(body: PhysicsBody, instanceIndex?: number): number {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        return this._hknp.HP_Body_GetEventMask(pluginRef.hpBodyId)[1];\r\n    }\r\n\r\n    private _fromMassPropertiesTuple(massPropsTuple: any[]): PhysicsMassProperties {\r\n        return {\r\n            centerOfMass: Vector3.FromArray(massPropsTuple[0]),\r\n            mass: massPropsTuple[1],\r\n            inertia: Vector3.FromArray(massPropsTuple[2]),\r\n            inertiaOrientation: Quaternion.FromArray(massPropsTuple[3]),\r\n        };\r\n    }\r\n\r\n    private _internalUpdateMassProperties(pluginData: BodyPluginData) {\r\n        // Recompute the mass based on the shape\r\n        const newProps = this._internalComputeMassProperties(pluginData);\r\n        const massProps = pluginData.userMassProps;\r\n\r\n        // Override the computed values with any the user has set\r\n        if (massProps.centerOfMass) {\r\n            newProps[0] = massProps.centerOfMass.asArray();\r\n        }\r\n        if (massProps.mass != undefined) {\r\n            newProps[1] = massProps.mass;\r\n        }\r\n        if (massProps.inertia) {\r\n            newProps[2] = massProps.inertia.asArray();\r\n        }\r\n        if (massProps.inertiaOrientation) {\r\n            newProps[3] = massProps.inertiaOrientation.asArray();\r\n        }\r\n        this._hknp.HP_Body_SetMassProperties(pluginData.hpBodyId, newProps);\r\n    }\r\n\r\n    public _internalSetMotionType(pluginData: BodyPluginData, motionType: PhysicsMotionType): void {\r\n        switch (motionType) {\r\n            case PhysicsMotionType.STATIC:\r\n                this._hknp.HP_Body_SetMotionType(pluginData.hpBodyId, this._hknp.MotionType.STATIC);\r\n                break;\r\n            case PhysicsMotionType.ANIMATED:\r\n                this._hknp.HP_Body_SetMotionType(pluginData.hpBodyId, this._hknp.MotionType.KINEMATIC);\r\n                break;\r\n            case PhysicsMotionType.DYNAMIC:\r\n                this._hknp.HP_Body_SetMotionType(pluginData.hpBodyId, this._hknp.MotionType.DYNAMIC);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sets the motion type of a physics body.\r\n     * @param body - The physics body to set the motion type for.\r\n     * @param motionType - The motion type to set.\r\n     * @param instanceIndex - The index of the instance to set the motion type for. If undefined, the motion type of all the bodies will be set.\r\n     */\r\n    public setMotionType(body: PhysicsBody, motionType: PhysicsMotionType, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginData) => {\r\n                this._internalSetMotionType(pluginData, motionType);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the motion type of a physics body.\r\n     * @param body - The physics body to get the motion type from.\r\n     * @param instanceIndex - The index of the instance to get the motion type from. If not specified, the motion type of the first instance will be returned.\r\n     * @returns The motion type of the physics body.\r\n     */\r\n    public getMotionType(body: PhysicsBody, instanceIndex?: number): PhysicsMotionType {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        const type = this._hknp.HP_Body_GetMotionType(pluginRef.hpBodyId)[1];\r\n        switch (type) {\r\n            case this._hknp.MotionType.STATIC:\r\n                return PhysicsMotionType.STATIC;\r\n            case this._hknp.MotionType.KINEMATIC:\r\n                return PhysicsMotionType.ANIMATED;\r\n            case this._hknp.MotionType.DYNAMIC:\r\n                return PhysicsMotionType.DYNAMIC;\r\n        }\r\n        throw new Error(\"Unknown motion type: \" + type);\r\n    }\r\n\r\n    /**\r\n     * sets the activation control mode of a physics body, for instance if you need the body to never sleep.\r\n     * @param body - The physics body to set the activation control mode.\r\n     * @param controlMode - The activation control mode.\r\n     */\r\n    public setActivationControl(body: PhysicsBody, controlMode: PhysicsActivationControl): void {\r\n        switch (controlMode) {\r\n            case PhysicsActivationControl.ALWAYS_ACTIVE:\r\n                this._hknp.HP_Body_SetActivationControl(body._pluginData.hpBodyId, this._hknp.ActivationControl.ALWAYS_ACTIVE);\r\n                break;\r\n            case PhysicsActivationControl.ALWAYS_INACTIVE:\r\n                this._hknp.HP_Body_SetActivationControl(body._pluginData.hpBodyId, this._hknp.ActivationControl.ALWAYS_INACTIVE);\r\n                break;\r\n            case PhysicsActivationControl.SIMULATION_CONTROLLED:\r\n                this._hknp.HP_Body_SetActivationControl(body._pluginData.hpBodyId, this._hknp.ActivationControl.SIMULATION_CONTROLLED);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _internalComputeMassProperties(pluginData: BodyPluginData): any[] {\r\n        const shapeRes = this._hknp.HP_Body_GetShape(pluginData.hpBodyId);\r\n        if (shapeRes[0] == this._hknp.Result.RESULT_OK) {\r\n            const shapeMass = this._hknp.HP_Shape_BuildMassProperties(shapeRes[1]);\r\n            if (shapeMass[0] == this._hknp.Result.RESULT_OK) {\r\n                return shapeMass[1];\r\n            }\r\n        }\r\n\r\n        // Failed; return a unit inertia\r\n        return [[0, 0, 0], 1, [1, 1, 1], [0, 0, 0, 1]];\r\n    }\r\n\r\n    /**\r\n     * Computes the mass properties of a physics body, from it's shape\r\n     *\r\n     * @param body - The physics body to copmute the mass properties of\r\n     * @param instanceIndex - The index of the instance to compute the mass properties of.\r\n     * @returns The mass properties of the physics body.\r\n     */\r\n    public computeMassProperties(body: PhysicsBody, instanceIndex?: number): PhysicsMassProperties {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        const computed = this._internalComputeMassProperties(pluginRef);\r\n        return this._fromMassPropertiesTuple(computed);\r\n    }\r\n\r\n    /**\r\n     * Sets the mass properties of a physics body.\r\n     *\r\n     * @param body - The physics body to set the mass properties of.\r\n     * @param massProps - The mass properties to set.\r\n     * @param instanceIndex - The index of the instance to set the mass properties of. If undefined, the mass properties of all the bodies will be set.\r\n     * This function is useful for setting the mass properties of a physics body,\r\n     * such as its mass, inertia, and center of mass. This is important for\r\n     * accurately simulating the physics of the body in the physics engine.\r\n     *\r\n     */\r\n    public setMassProperties(body: PhysicsBody, massProps: PhysicsMassProperties, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginData) => {\r\n                pluginData.userMassProps = massProps;\r\n                this._internalUpdateMassProperties(pluginData);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n    /**\r\n     * Gets the mass properties of a physics body.\r\n     * @param body - The physics body to get the mass properties from.\r\n     * @param instanceIndex - The index of the instance to get the mass properties from. If not specified, the mass properties of the first instance will be returned.\r\n     * @returns The mass properties of the physics body.\r\n     */\r\n    public getMassProperties(body: PhysicsBody, instanceIndex?: number): PhysicsMassProperties {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        const massPropsTuple = this._hknp.HP_Body_GetMassProperties(pluginRef.hpBodyId)[1];\r\n        return this._fromMassPropertiesTuple(massPropsTuple);\r\n    }\r\n\r\n    /**\r\n     * Sets the linear damping of the given body.\r\n     * @param body - The body to set the linear damping for.\r\n     * @param damping - The linear damping to set.\r\n     * @param instanceIndex - The index of the instance to set the linear damping for. If not specified, the linear damping of the first instance will be set.\r\n     *\r\n     * This method is useful for controlling the linear damping of a body in a physics engine.\r\n     * Linear damping is a force that opposes the motion of the body, and is proportional to the velocity of the body.\r\n     * This method allows the user to set the linear damping of a body, which can be used to control the motion of the body.\r\n     */\r\n    public setLinearDamping(body: PhysicsBody, damping: number, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginData) => {\r\n                this._hknp.HP_Body_SetLinearDamping(pluginData.hpBodyId, damping);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the linear damping of the given body.\r\n     * @param body - The body to get the linear damping from.\r\n     * @param instanceIndex - The index of the instance to get the linear damping from. If not specified, the linear damping of the first instance will be returned.\r\n     * @returns The linear damping of the given body.\r\n     *\r\n     * This method is useful for getting the linear damping of a body in a physics engine.\r\n     * Linear damping is a force that opposes the motion of the body and is proportional to the velocity of the body.\r\n     * It is used to simulate the effects of air resistance and other forms of friction.\r\n     */\r\n    public getLinearDamping(body: PhysicsBody, instanceIndex?: number): number {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        return this._hknp.HP_Body_GetLinearDamping(pluginRef.hpBodyId)[1];\r\n    }\r\n\r\n    /**\r\n     * Sets the angular damping of a physics body.\r\n     * @param body - The physics body to set the angular damping for.\r\n     * @param damping - The angular damping value to set.\r\n     * @param instanceIndex - The index of the instance to set the angular damping for. If not specified, the angular damping of the first instance will be set.\r\n     *\r\n     * This function is useful for controlling the angular velocity of a physics body.\r\n     * By setting the angular damping, the body's angular velocity will be reduced over time, allowing for more realistic physics simulations.\r\n     */\r\n    public setAngularDamping(body: PhysicsBody, damping: number, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginData) => {\r\n                this._hknp.HP_Body_SetAngularDamping(pluginData.hpBodyId, damping);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the angular damping of a physics body.\r\n     * @param body - The physics body to get the angular damping from.\r\n     * @param instanceIndex - The index of the instance to get the angular damping from. If not specified, the angular damping of the first instance will be returned.\r\n     * @returns The angular damping of the body.\r\n     *\r\n     * This function is useful for retrieving the angular damping of a physics body,\r\n     * which is used to control the rotational motion of the body. The angular damping is a value between 0 and 1, where 0 is no damping and 1 is full damping.\r\n     */\r\n    public getAngularDamping(body: PhysicsBody, instanceIndex?: number): number {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        return this._hknp.HP_Body_GetAngularDamping(pluginRef.hpBodyId)[1];\r\n    }\r\n\r\n    /**\r\n     * Sets the linear velocity of a physics body.\r\n     * @param body - The physics body to set the linear velocity of.\r\n     * @param linVel - The linear velocity to set.\r\n     * @param instanceIndex - The index of the instance to set the linear velocity of. If not specified, the linear velocity of the first instance will be set.\r\n     *\r\n     * This function is useful for setting the linear velocity of a physics body, which is necessary for simulating\r\n     * motion in a physics engine. The linear velocity is the speed and direction of the body's movement.\r\n     */\r\n    public setLinearVelocity(body: PhysicsBody, linVel: Vector3, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginData) => {\r\n                this._hknp.HP_Body_SetLinearVelocity(pluginData.hpBodyId, this._bVecToV3(linVel));\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the linear velocity of a physics body and stores it in a given vector.\r\n     * @param body - The physics body to get the linear velocity from.\r\n     * @param linVel - The vector to store the linear velocity in.\r\n     * @param instanceIndex - The index of the instance to get the linear velocity from. If not specified, the linear velocity of the first instance will be returned.\r\n     *\r\n     * This function is useful for retrieving the linear velocity of a physics body,\r\n     * which can be used to determine the speed and direction of the body. This\r\n     * information can be used to simulate realistic physics behavior in a game.\r\n     */\r\n    public getLinearVelocityToRef(body: PhysicsBody, linVel: Vector3, instanceIndex?: number): void {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        const lv = this._hknp.HP_Body_GetLinearVelocity(pluginRef.hpBodyId)[1];\r\n        this._v3ToBvecRef(lv, linVel);\r\n    }\r\n\r\n    /*\r\n     * Apply an operation either to all instances of a body, if instanceIndex is not specified, or to a specific instance.\r\n     */\r\n    private _applyToBodyOrInstances(body: PhysicsBody, fnToApply: (pluginRef: any) => void, instanceIndex?: number): void {\r\n        if (body._pluginDataInstances?.length > 0 && instanceIndex === undefined) {\r\n            for (let i = 0; i < body._pluginDataInstances.length; i++) {\r\n                fnToApply(body._pluginDataInstances[i]);\r\n            }\r\n        } else {\r\n            fnToApply(this._getPluginReference(body, instanceIndex));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Applies an impulse to a physics body at a given location.\r\n     * @param body - The physics body to apply the impulse to.\r\n     * @param impulse - The impulse vector to apply.\r\n     * @param location - The location in world space to apply the impulse.\r\n     * @param instanceIndex - The index of the instance to apply the impulse to. If not specified, the impulse will be applied to all instances.\r\n     *\r\n     * This method is useful for applying an impulse to a physics body at a given location.\r\n     * This can be used to simulate physical forces such as explosions, collisions, and gravity.\r\n     */\r\n    public applyImpulse(body: PhysicsBody, impulse: Vector3, location: Vector3, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginRef) => {\r\n                this._hknp.HP_Body_ApplyImpulse(pluginRef.hpBodyId, this._bVecToV3(location), this._bVecToV3(impulse));\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Applies an angular impulse(torque) to a physics body\r\n     * @param body - The physics body to apply the impulse to.\r\n     * @param angularImpulse - The torque value\r\n     * @param instanceIndex - The index of the instance to apply the impulse to. If not specified, the impulse will be applied to all instances.\r\n     */\r\n    public applyAngularImpulse(body: PhysicsBody, angularImpulse: Vector3, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginRef) => {\r\n                this._hknp.HP_Body_ApplyAngularImpulse(pluginRef.hpBodyId, this._bVecToV3(angularImpulse));\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n    /**\r\n     * Applies a force to a physics body at a given location.\r\n     * @param body - The physics body to apply the impulse to.\r\n     * @param force - The force vector to apply.\r\n     * @param location - The location in world space to apply the impulse.\r\n     * @param instanceIndex - The index of the instance to apply the force to. If not specified, the force will be applied to all instances.\r\n     *\r\n     * This method is useful for applying a force to a physics body at a given location.\r\n     * This can be used to simulate physical forces such as explosions, collisions, and gravity.\r\n     */\r\n    public applyForce(body: PhysicsBody, force: Vector3, location: Vector3, instanceIndex?: number): void {\r\n        force.scaleToRef(this.getTimeStep(), this._tmpVec3[0]);\r\n        this.applyImpulse(body, this._tmpVec3[0], location, instanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Sets the angular velocity of a physics body.\r\n     *\r\n     * @param body - The physics body to set the angular velocity of.\r\n     * @param angVel - The angular velocity to set.\r\n     * @param instanceIndex - The index of the instance to set the angular velocity of. If not specified, the angular velocity of the first instance will be set.\r\n     *\r\n     * This function is useful for setting the angular velocity of a physics body in a physics engine.\r\n     * This allows for more realistic simulations of physical objects, as they can be given a rotational velocity.\r\n     */\r\n    public setAngularVelocity(body: PhysicsBody, angVel: Vector3, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginRef) => {\r\n                this._hknp.HP_Body_SetAngularVelocity(pluginRef.hpBodyId, this._bVecToV3(angVel));\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the angular velocity of a body.\r\n     * @param body - The body to get the angular velocity from.\r\n     * @param angVel - The vector3 to store the angular velocity.\r\n     * @param instanceIndex - The index of the instance to get the angular velocity from. If not specified, the angular velocity of the first instance will be returned.\r\n     *\r\n     * This method is useful for getting the angular velocity of a body in a physics engine. It\r\n     * takes the body and a vector3 as parameters and stores the angular velocity of the body\r\n     * in the vector3. This is useful for getting the angular velocity of a body in order to\r\n     * calculate the motion of the body in the physics engine.\r\n     */\r\n    public getAngularVelocityToRef(body: PhysicsBody, angVel: Vector3, instanceIndex?: number): void {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        const av = this._hknp.HP_Body_GetAngularVelocity(pluginRef.hpBodyId)[1];\r\n        this._v3ToBvecRef(av, angVel);\r\n    }\r\n\r\n    /**\r\n     * Sets the transformation of the given physics body to the given transform node.\r\n     * @param body The physics body to set the transformation for.\r\n     * @param node The transform node to set the transformation from.\r\n     * Sets the transformation of the given physics body to the given transform node.\r\n     *\r\n     * This function is useful for setting the transformation of a physics body to a\r\n     * transform node, which is necessary for the physics engine to accurately simulate\r\n     * the motion of the body. It also takes into account instances of the transform\r\n     * node, which is necessary for accurate simulation of multiple bodies with the\r\n     * same transformation.\r\n     */\r\n    public setPhysicsBodyTransformation(body: PhysicsBody, node: TransformNode) {\r\n        if (body.getPrestepType() == PhysicsPrestepType.TELEPORT) {\r\n            const transformNode = body.transformNode;\r\n            if (body.numInstances > 0) {\r\n                // instances\r\n                const m = transformNode as Mesh;\r\n                const matrixData = m._thinInstanceDataStorage.matrixData;\r\n                if (!matrixData) {\r\n                    return; // TODO: error handling\r\n                }\r\n                const instancesCount = body.numInstances;\r\n                this._createOrUpdateBodyInstances(body, body.getMotionType(), matrixData, 0, instancesCount, true);\r\n            } else {\r\n                // regular\r\n                this._hknp.HP_Body_SetQTransform(body._pluginData.hpBodyId, this._getTransformInfos(node));\r\n            }\r\n        } else if (body.getPrestepType() == PhysicsPrestepType.ACTION) {\r\n            this.setTargetTransform(body, node.absolutePosition, node.absoluteRotationQuaternion);\r\n        } else if (body.getPrestepType() == PhysicsPrestepType.DISABLED) {\r\n            Logger.Warn(\"Prestep type is set to DISABLED. Unable to set physics body transformation.\");\r\n        } else {\r\n            Logger.Warn(\"Invalid prestep type set to physics body.\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set the target transformation (position and rotation) of the body, such that the body will set its velocity to reach that target\r\n     * @param body The physics body to set the target transformation for.\r\n     * @param position The target position\r\n     * @param rotation The target rotation\r\n     * @param instanceIndex The index of the instance in an instanced body\r\n     */\r\n    public setTargetTransform(body: PhysicsBody, position: Vector3, rotation: Quaternion, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginRef) => {\r\n                this._hknp.HP_Body_SetTargetQTransform(pluginRef.hpBodyId, [this._bVecToV3(position), this._bQuatToV4(rotation)]);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Sets the gravity factor of a body\r\n     * @param body the physics body to set the gravity factor for\r\n     * @param factor the gravity factor\r\n     * @param instanceIndex the index of the instance in an instanced body\r\n     */\r\n    public setGravityFactor(body: PhysicsBody, factor: number, instanceIndex?: number): void {\r\n        this._applyToBodyOrInstances(\r\n            body,\r\n            (pluginRef) => {\r\n                this._hknp.HP_Body_SetGravityFactor(pluginRef.hpBodyId, factor);\r\n            },\r\n            instanceIndex\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Get the gravity factor of a body\r\n     * @param body the physics body to get the gravity factor from\r\n     * @param instanceIndex the index of the instance in an instanced body. If not specified, the gravity factor of the first instance will be returned.\r\n     * @returns the gravity factor\r\n     */\r\n    public getGravityFactor(body: PhysicsBody, instanceIndex?: number): number {\r\n        const pluginRef = this._getPluginReference(body, instanceIndex);\r\n        return this._hknp.HP_Body_GetGravityFactor(pluginRef.hpBodyId)[1];\r\n    }\r\n\r\n    /**\r\n     * Disposes a physics body.\r\n     *\r\n     * @param body - The physics body to dispose.\r\n     *\r\n     * This method is useful for releasing the resources associated with a physics body when it is no longer needed.\r\n     * This is important for avoiding memory leaks in the physics engine.\r\n     */\r\n    public disposeBody(body: PhysicsBody): void {\r\n        if (body._pluginDataInstances && body._pluginDataInstances.length > 0) {\r\n            for (const instance of body._pluginDataInstances) {\r\n                this._hknp.HP_Body_Release(instance.hpBodyId);\r\n                instance.hpBodyId = undefined;\r\n            }\r\n        }\r\n        if (body._pluginData) {\r\n            this._hknp.HP_Body_Release(body._pluginData.hpBodyId);\r\n            body._pluginData.hpBodyId = undefined;\r\n        }\r\n    }\r\n\r\n    private _createOptionsFromGroundMesh(options: PhysicsShapeParameters) {\r\n        const mesh = options.groundMesh;\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n        let pos = <FloatArray>mesh.getVerticesData(VertexBuffer.PositionKind);\r\n        const transform = mesh.computeWorldMatrix(true);\r\n        // convert rawVerts to object space\r\n        const transformedVertices: number[] = [];\r\n        let index: number;\r\n        for (index = 0; index < pos.length; index += 3) {\r\n            Vector3.FromArrayToRef(pos, index, TmpVectors.Vector3[0]);\r\n            Vector3.TransformCoordinatesToRef(TmpVectors.Vector3[0], transform, TmpVectors.Vector3[1]);\r\n            TmpVectors.Vector3[1].toArray(transformedVertices, index);\r\n        }\r\n        pos = transformedVertices;\r\n\r\n        const arraySize = ~~(Math.sqrt(pos.length / 3) - 1);\r\n        const boundingInfo = mesh.getBoundingInfo();\r\n        const dim = Math.min(boundingInfo.boundingBox.extendSizeWorld.x, boundingInfo.boundingBox.extendSizeWorld.z);\r\n        const minX = boundingInfo.boundingBox.minimumWorld.x;\r\n        const minY = boundingInfo.boundingBox.minimumWorld.y;\r\n        const minZ = boundingInfo.boundingBox.minimumWorld.z;\r\n\r\n        const matrix = new Float32Array((arraySize + 1) * (arraySize + 1));\r\n\r\n        const elementSize = (dim * 2) / arraySize;\r\n\r\n        for (let i = 0; i < matrix.length; i++) {\r\n            matrix[i] = minY;\r\n        }\r\n        for (let i = 0; i < pos.length; i = i + 3) {\r\n            const x = Math.round((pos[i + 0] - minX) / elementSize);\r\n            const z = arraySize - Math.round((pos[i + 2] - minZ) / elementSize);\r\n            const y = pos[i + 1] - minY;\r\n\r\n            matrix[z * (arraySize + 1) + x] = y;\r\n        }\r\n\r\n        options.numHeightFieldSamplesX = arraySize + 1;\r\n        options.numHeightFieldSamplesZ = arraySize + 1;\r\n        options.heightFieldSizeX = boundingInfo.boundingBox.extendSizeWorld.x * 2;\r\n        options.heightFieldSizeZ = boundingInfo.boundingBox.extendSizeWorld.z * 2;\r\n        options.heightFieldData = matrix;\r\n    }\r\n\r\n    /**\r\n     * Initializes a physics shape with the given type and parameters.\r\n     * @param shape - The physics shape to initialize.\r\n     * @param type - The type of shape to initialize.\r\n     * @param options - The parameters for the shape.\r\n     *\r\n     * This code is useful for initializing a physics shape with the given type and parameters.\r\n     * It allows for the creation of a sphere, box, capsule, container, cylinder, mesh, and heightfield.\r\n     * Depending on the type of shape, different parameters are required.\r\n     * For example, a sphere requires a radius, while a box requires extents and a rotation.\r\n     */\r\n    public initShape(shape: PhysicsShape, type: PhysicsShapeType, options: PhysicsShapeParameters): void {\r\n        switch (type) {\r\n            case PhysicsShapeType.SPHERE:\r\n                {\r\n                    const radius = options.radius || 1;\r\n                    const center = options.center ? this._bVecToV3(options.center) : [0, 0, 0];\r\n                    shape._pluginData = this._hknp.HP_Shape_CreateSphere(center, radius)[1];\r\n                }\r\n                break;\r\n            case PhysicsShapeType.BOX:\r\n                {\r\n                    const rotation = options.rotation ? this._bQuatToV4(options.rotation) : [0, 0, 0, 1];\r\n                    const extent = options.extents ? this._bVecToV3(options.extents) : [1, 1, 1];\r\n                    const center = options.center ? this._bVecToV3(options.center) : [0, 0, 0];\r\n                    shape._pluginData = this._hknp.HP_Shape_CreateBox(center, rotation, extent)[1];\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CAPSULE:\r\n                {\r\n                    const pointA = options.pointA ? this._bVecToV3(options.pointA) : [0, 0, 0];\r\n                    const pointB = options.pointB ? this._bVecToV3(options.pointB) : [0, 1, 0];\r\n                    const radius = options.radius || 0;\r\n                    shape._pluginData = this._hknp.HP_Shape_CreateCapsule(pointA, pointB, radius)[1];\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CONTAINER:\r\n                {\r\n                    shape._pluginData = this._hknp.HP_Shape_CreateContainer()[1];\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CYLINDER:\r\n                {\r\n                    const pointA = options.pointA ? this._bVecToV3(options.pointA) : [0, 0, 0];\r\n                    const pointB = options.pointB ? this._bVecToV3(options.pointB) : [0, 1, 0];\r\n                    const radius = options.radius || 0;\r\n                    shape._pluginData = this._hknp.HP_Shape_CreateCylinder(pointA, pointB, radius)[1];\r\n                }\r\n                break;\r\n            case PhysicsShapeType.CONVEX_HULL:\r\n            case PhysicsShapeType.MESH:\r\n                {\r\n                    const mesh = options.mesh;\r\n                    if (mesh) {\r\n                        const includeChildMeshes = !!options.includeChildMeshes;\r\n                        const needIndices = type != PhysicsShapeType.CONVEX_HULL;\r\n                        const accum = new MeshAccumulator(mesh, needIndices, mesh?.getScene());\r\n                        accum.addNodeMeshes(mesh, includeChildMeshes);\r\n\r\n                        const positions = accum.getVertices(this._hknp);\r\n                        const numVec3s = positions.numObjects / 3;\r\n\r\n                        if (type == PhysicsShapeType.CONVEX_HULL) {\r\n                            shape._pluginData = this._hknp.HP_Shape_CreateConvexHull(positions.offset, numVec3s)[1];\r\n                        } else {\r\n                            const triangles = accum.getTriangles(this._hknp);\r\n                            const numTriangles = triangles.numObjects / 3;\r\n                            shape._pluginData = this._hknp.HP_Shape_CreateMesh(positions.offset, numVec3s, triangles.offset, numTriangles)[1];\r\n                            accum.freeBuffer(this._hknp, triangles);\r\n                        }\r\n                        accum.freeBuffer(this._hknp, positions);\r\n                    } else {\r\n                        throw new Error(\"No mesh provided to create physics shape.\");\r\n                    }\r\n                }\r\n                break;\r\n            case PhysicsShapeType.HEIGHTFIELD:\r\n                {\r\n                    if (options.groundMesh) {\r\n                        // update options with datas from groundMesh\r\n                        this._createOptionsFromGroundMesh(options);\r\n                    }\r\n                    if (options.numHeightFieldSamplesX && options.numHeightFieldSamplesZ && options.heightFieldSizeX && options.heightFieldSizeZ && options.heightFieldData) {\r\n                        const totalNumHeights = options.numHeightFieldSamplesX * options.numHeightFieldSamplesZ;\r\n                        const numBytes = totalNumHeights * 4;\r\n                        const bufferBegin = this._hknp._malloc(numBytes);\r\n\r\n                        const heightBuffer = new Float32Array(this._hknp.HEAPU8.buffer, bufferBegin, totalNumHeights);\r\n                        for (let x = 0; x < options.numHeightFieldSamplesX; x++) {\r\n                            for (let z = 0; z < options.numHeightFieldSamplesZ; z++) {\r\n                                const hkBufferIndex = z * options.numHeightFieldSamplesX + x;\r\n                                const bjsBufferIndex = (options.numHeightFieldSamplesX - 1 - x) * options.numHeightFieldSamplesZ + z;\r\n                                heightBuffer[hkBufferIndex] = options.heightFieldData[bjsBufferIndex];\r\n                            }\r\n                        }\r\n\r\n                        const scaleX = options.heightFieldSizeX / (options.numHeightFieldSamplesX - 1);\r\n                        const scaleZ = options.heightFieldSizeZ / (options.numHeightFieldSamplesZ - 1);\r\n                        shape._pluginData = this._hknp.HP_Shape_CreateHeightField(\r\n                            options.numHeightFieldSamplesX,\r\n                            options.numHeightFieldSamplesZ,\r\n                            [scaleX, 1, scaleZ],\r\n                            bufferBegin\r\n                        )[1];\r\n\r\n                        this._hknp._free(bufferBegin);\r\n                    } else {\r\n                        throw new Error(\"Missing required heightfield parameters\");\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                throw new Error(\"Unsupported Shape Type.\");\r\n                break;\r\n        }\r\n\r\n        this._shapes.set(shape._pluginData[0], shape);\r\n    }\r\n\r\n    /**\r\n     * Sets the shape filter membership mask of a body\r\n     * @param shape - The physics body to set the shape filter membership mask for.\r\n     * @param membershipMask - The shape filter membership mask to set.\r\n     */\r\n    public setShapeFilterMembershipMask(shape: PhysicsShape, membershipMask: number): void {\r\n        const collideWith = this._hknp.HP_Shape_GetFilterInfo(shape._pluginData)[1][1];\r\n        this._hknp.HP_Shape_SetFilterInfo(shape._pluginData, [membershipMask, collideWith]);\r\n    }\r\n\r\n    /**\r\n     * Gets the shape filter membership mask of a body\r\n     * @param shape - The physics body to get the shape filter membership mask from.\r\n     * @returns The shape filter membership mask of the given body.\r\n     */\r\n    public getShapeFilterMembershipMask(shape: PhysicsShape): number {\r\n        return this._hknp.HP_Shape_GetFilterInfo(shape._pluginData)[1][0];\r\n    }\r\n\r\n    /**\r\n     * Sets the shape filter collide mask of a body\r\n     * @param shape - The physics body to set the shape filter collide mask for.\r\n     * @param collideMask - The shape filter collide mask to set.\r\n     */\r\n    public setShapeFilterCollideMask(shape: PhysicsShape, collideMask: number): void {\r\n        const membership = this._hknp.HP_Shape_GetFilterInfo(shape._pluginData)[1][0];\r\n        this._hknp.HP_Shape_SetFilterInfo(shape._pluginData, [membership, collideMask]);\r\n    }\r\n\r\n    /**\r\n     * Gets the shape filter collide mask of a body\r\n     * @param shape - The physics body to get the shape filter collide mask from.\r\n     * @returns The shape filter collide mask of the given body.\r\n     */\r\n    public getShapeFilterCollideMask(shape: PhysicsShape): number {\r\n        return this._hknp.HP_Shape_GetFilterInfo(shape._pluginData)[1][1];\r\n    }\r\n\r\n    /**\r\n     * Sets the material of a physics shape.\r\n     * @param shape - The physics shape to set the material of.\r\n     * @param material - The material to set.\r\n     *\r\n     */\r\n    public setMaterial(shape: PhysicsShape, material: PhysicsMaterial): void {\r\n        const dynamicFriction = material.friction ?? 0.5;\r\n        const staticFriction = material.staticFriction ?? dynamicFriction;\r\n        const restitution = material.restitution ?? 0.0;\r\n        const frictionCombine = material.frictionCombine ?? PhysicsMaterialCombineMode.MINIMUM;\r\n        const restitutionCombine = material.restitutionCombine ?? PhysicsMaterialCombineMode.MAXIMUM;\r\n\r\n        const hpMaterial = [staticFriction, dynamicFriction, restitution, this._materialCombineToNative(frictionCombine), this._materialCombineToNative(restitutionCombine)];\r\n        this._hknp.HP_Shape_SetMaterial(shape._pluginData, hpMaterial);\r\n    }\r\n\r\n    /**\r\n     * Gets the material associated with a physics shape.\r\n     * @param shape - The shape to get the material from.\r\n     * @returns The material associated with the shape.\r\n     */\r\n    public getMaterial(shape: PhysicsShape): PhysicsMaterial {\r\n        const hkMaterial = this._hknp.HP_Shape_GetMaterial(shape._pluginData)[1];\r\n        return {\r\n            staticFriction: hkMaterial[0],\r\n            friction: hkMaterial[1],\r\n            restitution: hkMaterial[2],\r\n            frictionCombine: this._nativeToMaterialCombine(hkMaterial[3]),\r\n            restitutionCombine: this._nativeToMaterialCombine(hkMaterial[4]),\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Sets the density of a physics shape.\r\n     * @param shape - The physics shape to set the density of.\r\n     * @param density - The density to set.\r\n     *\r\n     */\r\n    public setDensity(shape: PhysicsShape, density: number): void {\r\n        this._hknp.HP_Shape_SetDensity(shape._pluginData, density);\r\n    }\r\n\r\n    /**\r\n     * Calculates the density of a given physics shape.\r\n     *\r\n     * @param shape - The physics shape to calculate the density of.\r\n     * @returns The density of the given physics shape.\r\n     *\r\n     */\r\n    public getDensity(shape: PhysicsShape): number {\r\n        return this._hknp.HP_Shape_GetDensity(shape._pluginData)[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the transform infos of a given transform node.\r\n     * This code is useful for getting the position and orientation of a given transform node.\r\n     * It first checks if the node has a rotation quaternion, and if not, it creates one from the node's rotation.\r\n     * It then creates an array containing the position and orientation of the node and returns it.\r\n     * @param node - The transform node.\r\n     * @returns An array containing the position and orientation of the node.\r\n     */\r\n    private _getTransformInfos(node: TransformNode): any[] {\r\n        if (node.parent) {\r\n            node.computeWorldMatrix(true);\r\n            return [this._bVecToV3(node.absolutePosition), this._bQuatToV4(node.absoluteRotationQuaternion)];\r\n        }\r\n\r\n        let orientation = TmpVectors.Quaternion[0];\r\n        if (node.rotationQuaternion) {\r\n            orientation = node.rotationQuaternion;\r\n        } else {\r\n            const r = node.rotation;\r\n            Quaternion.FromEulerAnglesToRef(r.x, r.y, r.z, orientation);\r\n        }\r\n        const transform = [this._bVecToV3(node.position), this._bQuatToV4(orientation)];\r\n        return transform;\r\n    }\r\n\r\n    /**\r\n     * Adds a child shape to the given shape.\r\n     * @param shape - The parent shape.\r\n     * @param newChild - The child shape to add.\r\n     * @param translation - The relative translation of the child from the parent shape\r\n     * @param rotation - The relative rotation of the child from the parent shape\r\n     * @param scale - The relative scale scale of the child from the parent shaep\r\n     *\r\n     */\r\n    public addChild(shape: PhysicsShape, newChild: PhysicsShape, translation?: Vector3, rotation?: Quaternion, scale?: Vector3): void {\r\n        const transformNative = [\r\n            translation ? this._bVecToV3(translation) : [0, 0, 0],\r\n            rotation ? this._bQuatToV4(rotation) : [0, 0, 0, 1],\r\n            scale ? this._bVecToV3(scale) : [1, 1, 1],\r\n        ];\r\n        this._hknp.HP_Shape_AddChild(shape._pluginData, newChild._pluginData, transformNative);\r\n    }\r\n\r\n    /**\r\n     * Removes a child shape from a parent shape.\r\n     * @param shape - The parent shape.\r\n     * @param childIndex - The index of the child shape to remove.\r\n     *\r\n     */\r\n    public removeChild(shape: PhysicsShape, childIndex: number): void {\r\n        this._hknp.HP_Shape_RemoveChild(shape._pluginData, childIndex);\r\n    }\r\n\r\n    /**\r\n     * Returns the number of children of the given shape.\r\n     *\r\n     * @param shape - The shape to get the number of children from.\r\n     * @returns The number of children of the given shape.\r\n     *\r\n     */\r\n    public getNumChildren(shape: PhysicsShape): number {\r\n        return this._hknp.HP_Shape_GetNumChildren(shape._pluginData)[1];\r\n    }\r\n\r\n    /**\r\n     * Marks the shape as a trigger\r\n     * @param shape the shape to mark as a trigger\r\n     * @param isTrigger if the shape is a trigger\r\n     */\r\n    public setTrigger(shape: PhysicsShape, isTrigger: boolean): void {\r\n        this._hknp.HP_Shape_SetTrigger(shape._pluginData, isTrigger);\r\n    }\r\n\r\n    /**\r\n     * Calculates the bounding box of a given physics shape.\r\n     *\r\n     * @param _shape - The physics shape to calculate the bounding box for.\r\n     * @returns The calculated bounding box.\r\n     *\r\n     * This method is useful for physics engines as it allows to calculate the\r\n     * boundaries of a given shape. Knowing the boundaries of a shape is important\r\n     * for collision detection and other physics calculations.\r\n     */\r\n    public getBoundingBox(_shape: PhysicsShape): BoundingBox {\r\n        // get local AABB\r\n        const aabb = this._hknp.HP_Shape_GetBoundingBox(_shape._pluginData, [\r\n            [0, 0, 0],\r\n            [0, 0, 0, 1],\r\n        ])[1];\r\n        TmpVectors.Vector3[0].set(aabb[0][0], aabb[0][1], aabb[0][2]); // min\r\n        TmpVectors.Vector3[1].set(aabb[1][0], aabb[1][1], aabb[1][2]); // max\r\n        const boundingbox = new BoundingBox(TmpVectors.Vector3[0], TmpVectors.Vector3[1], Matrix.IdentityReadOnly);\r\n        return boundingbox;\r\n    }\r\n\r\n    /**\r\n     * Calculates the world bounding box of a given physics body.\r\n     *\r\n     * @param body - The physics body to calculate the bounding box for.\r\n     * @returns The calculated bounding box.\r\n     *\r\n     * This method is useful for physics engines as it allows to calculate the\r\n     * boundaries of a given body.\r\n     */\r\n    public getBodyBoundingBox(body: PhysicsBody): BoundingBox {\r\n        // get local AABB\r\n        const aabb = this.getBoundingBox(body.shape!);\r\n        const boundingbox = new BoundingBox(aabb.minimum, aabb.maximum, body.transformNode.getWorldMatrix());\r\n        return boundingbox;\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry of a physics body.\r\n     *\r\n     * @param body - The physics body.\r\n     * @returns An object containing the positions and indices of the body's geometry.\r\n     *\r\n     */\r\n    public getBodyGeometry(body: PhysicsBody): {\r\n        positions: Float32Array | number[];\r\n        indices: Uint32Array | number[];\r\n    } {\r\n        const dataInfo = body._pluginDataInstances?.length > 0 ? body._pluginDataInstances[0] : body._pluginData;\r\n        const shape = this._hknp.HP_Body_GetShape(dataInfo.hpBodyId)[1];\r\n        const geometryRes = this._hknp.HP_Shape_CreateDebugDisplayGeometry(shape);\r\n\r\n        if (geometryRes[0] != this._hknp.Result.RESULT_OK) {\r\n            return { positions: [], indices: [] };\r\n        }\r\n\r\n        const geometryInfo = this._hknp.HP_DebugGeometry_GetInfo(geometryRes[1])[1];\r\n        const positionsInPlugin = new Float32Array(this._hknp.HEAPU8.buffer, geometryInfo[0], geometryInfo[1] * 3); // 3 floats per position\r\n        const indicesInPlugin = new Uint32Array(this._hknp.HEAPU8.buffer, geometryInfo[2], geometryInfo[3] * 3); // 3 indices per triangle\r\n\r\n        // HP_DebugGeometry_Release will free the buffer in the plugin. To avoid a\r\n        // use-after-free, we need  to make a copy of the data here.\r\n        const positions = positionsInPlugin.slice(0);\r\n        const indices = indicesInPlugin.slice(0);\r\n        this._hknp.HP_DebugGeometry_Release(geometryRes[1]);\r\n        return { positions: positions, indices: indices };\r\n    }\r\n\r\n    /**\r\n     * Releases a physics shape from the physics engine.\r\n     *\r\n     * @param shape - The physics shape to be released.\r\n     *\r\n     * This method is useful for releasing a physics shape from the physics engine, freeing up resources and preventing memory leaks.\r\n     */\r\n    public disposeShape(shape: PhysicsShape): void {\r\n        this._shapes.delete(shape._pluginData[0]);\r\n        this._hknp.HP_Shape_Release(shape._pluginData);\r\n        shape._pluginData = undefined;\r\n    }\r\n\r\n    // constraint\r\n\r\n    /**\r\n     * Initializes a physics constraint with the given parameters.\r\n     *\r\n     * @param constraint - The physics constraint to be initialized.\r\n     * @param body - The main body\r\n     * @param childBody - The child body.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     * @param childInstanceIndex - If the child body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     *\r\n     * This function is useful for setting up a physics constraint in a physics engine.\r\n     */\r\n    public initConstraint(constraint: PhysicsConstraint, body: PhysicsBody, childBody: PhysicsBody, instanceIndex?: number, childInstanceIndex?: number): void {\r\n        const type = constraint.type;\r\n        const options = constraint.options;\r\n        if (!type || !options) {\r\n            Logger.Warn(\"No constraint type or options. Constraint is invalid.\");\r\n            return;\r\n        }\r\n        if ((body._pluginDataInstances.length > 0 && instanceIndex === undefined) || (childBody._pluginDataInstances.length > 0 && childInstanceIndex === undefined)) {\r\n            Logger.Warn(\"Body is instanced but no instance index was specified. Constraint will not be applied.\");\r\n            return;\r\n        }\r\n\r\n        constraint._pluginData = constraint._pluginData ?? [];\r\n        const jointId = this._hknp.HP_Constraint_Create()[1];\r\n        constraint._pluginData.push(jointId);\r\n\r\n        // body parenting\r\n        const bodyA = this._getPluginReference(body, instanceIndex).hpBodyId;\r\n        const bodyB = this._getPluginReference(childBody, childInstanceIndex).hpBodyId;\r\n        this._hknp.HP_Constraint_SetParentBody(jointId, bodyA);\r\n        this._hknp.HP_Constraint_SetChildBody(jointId, bodyB);\r\n\r\n        this._constraintToBodyIdPair.set(jointId[0], [bodyA[0], bodyB[0]]);\r\n\r\n        // anchors\r\n        const pivotA = options.pivotA ? this._bVecToV3(options.pivotA) : this._bVecToV3(Vector3.Zero());\r\n        const axisA = options.axisA ?? new Vector3(1, 0, 0);\r\n        const perpAxisA = this._tmpVec3[0];\r\n        if (options.perpAxisA) {\r\n            perpAxisA.copyFrom(options.perpAxisA);\r\n        } else {\r\n            axisA.getNormalToRef(perpAxisA);\r\n        }\r\n        this._hknp.HP_Constraint_SetAnchorInParent(jointId, pivotA, this._bVecToV3(axisA), this._bVecToV3(perpAxisA));\r\n        const pivotB = options.pivotB ? this._bVecToV3(options.pivotB) : this._bVecToV3(Vector3.Zero());\r\n        const axisB = options.axisB ?? new Vector3(1, 0, 0);\r\n        const perpAxisB = this._tmpVec3[0];\r\n        if (options.perpAxisB) {\r\n            perpAxisB.copyFrom(options.perpAxisB);\r\n        } else {\r\n            axisB.getNormalToRef(perpAxisB);\r\n        }\r\n        this._hknp.HP_Constraint_SetAnchorInChild(jointId, pivotB, this._bVecToV3(axisB), this._bVecToV3(perpAxisB));\r\n\r\n        // Save the options that were used for initializing the constraint for debugging purposes\r\n        // Check first to avoid copying the same options multiple times\r\n        if (!constraint._initOptions) {\r\n            constraint._initOptions = {\r\n                axisA: axisA.clone(),\r\n                axisB: axisB.clone(),\r\n                perpAxisA: perpAxisA.clone(),\r\n                perpAxisB: perpAxisB.clone(),\r\n                pivotA: new Vector3(pivotA[0], pivotA[1], pivotA[2]),\r\n                pivotB: new Vector3(pivotB[0], pivotB[1], pivotB[2]),\r\n            };\r\n        }\r\n\r\n        if (type == PhysicsConstraintType.LOCK) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_X, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_X, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n        } else if (type == PhysicsConstraintType.DISTANCE) {\r\n            const distance = options.maxDistance || 0;\r\n            const dist3d = this._hknp.ConstraintAxis.LINEAR_DISTANCE;\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, dist3d, this._hknp.ConstraintAxisLimitMode.LIMITED);\r\n            this._hknp.HP_Constraint_SetAxisMinLimit(jointId, dist3d, distance);\r\n            this._hknp.HP_Constraint_SetAxisMaxLimit(jointId, dist3d, distance);\r\n        } else if (type == PhysicsConstraintType.HINGE) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_X, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n        } else if (type == PhysicsConstraintType.PRISMATIC) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_X, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n        } else if (type == PhysicsConstraintType.SLIDER) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.ANGULAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n        } else if (type == PhysicsConstraintType.BALL_AND_SOCKET) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_X, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Y, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._hknp.ConstraintAxis.LINEAR_Z, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n        } else if (type == PhysicsConstraintType.SIX_DOF) {\r\n            const sixdofData: Physics6DoFConstraint = <Physics6DoFConstraint>constraint;\r\n            for (const l of sixdofData.limits) {\r\n                const axId = this._constraintAxisToNative(l.axis);\r\n                if ((l.minLimit ?? -1) == 0 && (l.maxLimit ?? -1) == 0) {\r\n                    this._hknp.HP_Constraint_SetAxisMode(jointId, axId, this._hknp.ConstraintAxisLimitMode.LOCKED);\r\n                } else {\r\n                    if (l.minLimit != undefined) {\r\n                        this._hknp.HP_Constraint_SetAxisMode(jointId, axId, this._hknp.ConstraintAxisLimitMode.LIMITED);\r\n                        this._hknp.HP_Constraint_SetAxisMinLimit(jointId, axId, l.minLimit);\r\n                    }\r\n\r\n                    if (l.maxLimit != undefined) {\r\n                        this._hknp.HP_Constraint_SetAxisMode(jointId, axId, this._hknp.ConstraintAxisLimitMode.LIMITED);\r\n                        this._hknp.HP_Constraint_SetAxisMaxLimit(jointId, axId, l.maxLimit);\r\n                    }\r\n                }\r\n                if (l.stiffness) {\r\n                    this._hknp.HP_Constraint_SetAxisStiffness(jointId, axId, l.stiffness);\r\n                }\r\n                if (l.damping) {\r\n                    this._hknp.HP_Constraint_SetAxisDamping(jointId, axId, l.damping);\r\n                }\r\n            }\r\n        } else {\r\n            throw new Error(\"Unsupported Constraint Type.\");\r\n        }\r\n\r\n        const collisionEnabled = !!options.collision;\r\n        this._hknp.HP_Constraint_SetCollisionsEnabled(jointId, collisionEnabled);\r\n        this._hknp.HP_Constraint_SetEnabled(jointId, true);\r\n    }\r\n\r\n    /**\r\n     * Get a list of all the pairs of bodies that are connected by this constraint.\r\n     * @param constraint the constraint to search from\r\n     * @returns a list of parent, child pairs\r\n     */\r\n    getBodiesUsingConstraint(constraint: PhysicsConstraint): ConstrainedBodyPair[] {\r\n        const pairs: ConstrainedBodyPair[] = [];\r\n        for (const jointId of constraint._pluginData) {\r\n            const bodyIds = this._constraintToBodyIdPair.get(jointId[0]);\r\n            if (bodyIds) {\r\n                const parentBodyInfo = this._bodies.get(bodyIds[0]);\r\n                const childBodyInfo = this._bodies.get(bodyIds[1]);\r\n                if (parentBodyInfo && childBodyInfo) {\r\n                    pairs.push({ parentBody: parentBodyInfo.body, parentBodyIndex: parentBodyInfo.index, childBody: childBodyInfo.body, childBodyIndex: childBodyInfo.index });\r\n                }\r\n            }\r\n        }\r\n        return pairs;\r\n    }\r\n\r\n    /**\r\n     * Adds a constraint to the physics engine.\r\n     *\r\n     * @param body - The main body to which the constraint is applied.\r\n     * @param childBody - The body to which the constraint is applied.\r\n     * @param constraint - The constraint to be applied.\r\n     * @param instanceIndex - If this body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     * @param childInstanceIndex - If the child body is instanced, the index of the instance to which the constraint will be applied. If not specified, no constraint will be applied.\r\n     */\r\n    addConstraint(body: PhysicsBody, childBody: PhysicsBody, constraint: PhysicsConstraint, instanceIndex?: number, childInstanceIndex?: number): void {\r\n        //<todo It's real weird that initConstraint() is called only after adding to a body!\r\n        this.initConstraint(constraint, body, childBody, instanceIndex, childInstanceIndex);\r\n    }\r\n\r\n    /**\r\n     * Enables or disables a constraint in the physics engine.\r\n     * @param constraint - The constraint to enable or disable.\r\n     * @param isEnabled - Whether the constraint should be enabled or disabled.\r\n     *\r\n     */\r\n    public setEnabled(constraint: PhysicsConstraint, isEnabled: boolean): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetEnabled(jointId, isEnabled);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the enabled state of the given constraint.\r\n     * @param constraint - The constraint to get the enabled state from.\r\n     * @returns The enabled state of the given constraint.\r\n     *\r\n     */\r\n    public getEnabled(constraint: PhysicsConstraint): boolean {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetEnabled(firstId)[1];\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Enables or disables collisions for the given constraint.\r\n     * @param constraint - The constraint to enable or disable collisions for.\r\n     * @param isEnabled - Whether collisions should be enabled or disabled.\r\n     *\r\n     */\r\n    public setCollisionsEnabled(constraint: PhysicsConstraint, isEnabled: boolean): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetCollisionsEnabled(jointId, isEnabled);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets whether collisions are enabled for the given constraint.\r\n     * @param constraint - The constraint to get collisions enabled for.\r\n     * @returns Whether collisions are enabled for the given constraint.\r\n     *\r\n     */\r\n    public getCollisionsEnabled(constraint: PhysicsConstraint): boolean {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetCollisionsEnabled(firstId)[1];\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Sets the friction of the given axis of the given constraint.\r\n     *\r\n     * @param constraint - The constraint to set the friction of.\r\n     * @param axis - The axis of the constraint to set the friction of.\r\n     * @param friction - The friction to set.\r\n     *\r\n     */\r\n    public setAxisFriction(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, friction: number): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisFriction(jointId, this._constraintAxisToNative(axis), friction);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the friction value of the specified axis of the given constraint.\r\n     *\r\n     * @param constraint - The constraint to get the axis friction from.\r\n     * @param axis - The axis to get the friction from.\r\n     * @returns The friction value of the specified axis.\r\n     *\r\n     */\r\n    public getAxisFriction(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetAxisFriction(firstId, this._constraintAxisToNative(axis))[1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the limit mode of the specified axis of the given constraint.\r\n     * @param constraint - The constraint to set the axis mode of.\r\n     * @param axis - The axis to set the limit mode of.\r\n     * @param limitMode - The limit mode to set.\r\n     */\r\n    public setAxisMode(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, limitMode: PhysicsConstraintAxisLimitMode): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMode(jointId, this._constraintAxisToNative(axis), this._limitModeToNative(limitMode));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the axis limit mode of the given constraint.\r\n     *\r\n     * @param constraint - The constraint to get the axis limit mode from.\r\n     * @param axis - The axis to get the limit mode from.\r\n     * @returns The axis limit mode of the given constraint.\r\n     *\r\n     */\r\n    public getAxisMode(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintAxisLimitMode> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            const mode = this._hknp.HP_Constraint_GetAxisMode(firstId, this._constraintAxisToNative(axis))[1];\r\n            return this._nativeToLimitMode(mode);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the minimum limit of the given axis of the given constraint.\r\n     * @param constraint - The constraint to set the minimum limit of.\r\n     * @param axis - The axis to set the minimum limit of.\r\n     * @param limit - The minimum limit to set.\r\n     *\r\n     */\r\n    public setAxisMinLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, limit: number): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMinLimit(jointId, this._constraintAxisToNative(axis), limit);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the minimum limit of the specified axis of the given constraint.\r\n     * @param constraint - The constraint to get the minimum limit from.\r\n     * @param axis - The axis to get the minimum limit from.\r\n     * @returns The minimum limit of the specified axis of the given constraint.\r\n     *\r\n     */\r\n    public getAxisMinLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetAxisMinLimit(firstId, this._constraintAxisToNative(axis))[1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum limit of the given axis of the given constraint.\r\n     * @param constraint - The constraint to set the maximum limit of the given axis.\r\n     * @param axis - The axis to set the maximum limit of.\r\n     * @param limit - The maximum limit to set.\r\n     *\r\n     */\r\n    public setAxisMaxLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, limit: number): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMaxLimit(jointId, this._constraintAxisToNative(axis), limit);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum limit of the given axis of the given constraint.\r\n     *\r\n     * @param constraint - The constraint to get the maximum limit from.\r\n     * @param axis - The axis to get the maximum limit from.\r\n     * @returns The maximum limit of the given axis of the given constraint.\r\n     *\r\n     */\r\n    public getAxisMaxLimit(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetAxisMaxLimit(firstId, this._constraintAxisToNative(axis))[1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the motor type of the given axis of the given constraint.\r\n     * @param constraint - The constraint to set the motor type of.\r\n     * @param axis - The axis of the constraint to set the motor type of.\r\n     * @param motorType - The motor type to set.\r\n     *\r\n     */\r\n    public setAxisMotorType(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, motorType: PhysicsConstraintMotorType): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMotorType(jointId, this._constraintAxisToNative(axis), this._constraintMotorTypeToNative(motorType));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the motor type of the specified axis of the given constraint.\r\n     * @param constraint - The constraint to get the motor type from.\r\n     * @param axis - The axis of the constraint to get the motor type from.\r\n     * @returns The motor type of the specified axis of the given constraint.\r\n     *\r\n     */\r\n    public getAxisMotorType(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<PhysicsConstraintMotorType> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._nativeToMotorType(this._hknp.HP_Constraint_GetAxisMotorType(firstId, this._constraintAxisToNative(axis))[1]);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the target of an axis motor of a constraint.\r\n     *\r\n     * @param constraint - The constraint to set the axis motor target of.\r\n     * @param axis - The axis of the constraint to set the motor target of.\r\n     * @param target - The target of the axis motor.\r\n     *\r\n     */\r\n    public setAxisMotorTarget(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, target: number): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMotorTarget(jointId, this._constraintAxisToNative(axis), target);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the target of the motor of the given axis of the given constraint.\r\n     *\r\n     * @param constraint - The constraint to get the motor target from.\r\n     * @param axis - The axis of the constraint to get the motor target from.\r\n     * @returns The target of the motor of the given axis of the given constraint.\r\n     *\r\n     */\r\n    public getAxisMotorTarget(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetAxisMotorTarget(constraint._pluginData, this._constraintAxisToNative(axis))[1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Sets the maximum force that can be applied by the motor of the given constraint axis.\r\n     * @param constraint - The constraint to set the motor max force for.\r\n     * @param axis - The axis of the constraint to set the motor max force for.\r\n     * @param maxForce - The maximum force that can be applied by the motor.\r\n     *\r\n     */\r\n    public setAxisMotorMaxForce(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis, maxForce: number): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetAxisMotorMaxForce(jointId, this._constraintAxisToNative(axis), maxForce);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum force of the motor of the given constraint axis.\r\n     *\r\n     * @param constraint - The constraint to get the motor maximum force from.\r\n     * @param axis - The axis of the constraint to get the motor maximum force from.\r\n     * @returns The maximum force of the motor of the given constraint axis.\r\n     *\r\n     */\r\n    public getAxisMotorMaxForce(constraint: PhysicsConstraint, axis: PhysicsConstraintAxis): Nullable<number> {\r\n        const firstId = constraint._pluginData && constraint._pluginData[0];\r\n        if (firstId) {\r\n            return this._hknp.HP_Constraint_GetAxisMotorMaxForce(firstId, this._constraintAxisToNative(axis))[1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Disposes a physics constraint.\r\n     *\r\n     * @param constraint - The physics constraint to dispose.\r\n     *\r\n     * This method is useful for releasing the resources associated with a physics constraint, such as\r\n     * the Havok constraint, when it is no longer needed. This is important for avoiding memory leaks.\r\n     */\r\n    public disposeConstraint(constraint: PhysicsConstraint): void {\r\n        for (const jointId of constraint._pluginData) {\r\n            this._hknp.HP_Constraint_SetEnabled(jointId, false);\r\n            this._hknp.HP_Constraint_Release(jointId);\r\n        }\r\n        constraint._pluginData.length = 0;\r\n    }\r\n\r\n    private _populateHitData(hitData: any, result: ProximityCastResult | PhysicsRaycastResult | ShapeCastResult): void {\r\n        const hitBody = this._bodies.get(hitData[0][0]);\r\n        result.body = hitBody?.body;\r\n        result.bodyIndex = hitBody?.index;\r\n        const hitShape = this._shapes.get(hitData[1][0]);\r\n        result.shape = hitShape;\r\n\r\n        const hitPos = hitData[3];\r\n        const hitNormal = hitData[4];\r\n        const hitTriangle = hitData[5];\r\n\r\n        result.setHitData({ x: hitNormal[0], y: hitNormal[1], z: hitNormal[2] }, { x: hitPos[0], y: hitPos[1], z: hitPos[2] }, hitTriangle);\r\n    }\r\n\r\n    /**\r\n     * Performs a raycast from a given start point to a given end point and stores the result in a given PhysicsRaycastResult object.\r\n     *\r\n     * @param from - The start point of the raycast.\r\n     * @param to - The end point of the raycast.\r\n     * @param result - The PhysicsRaycastResult object (or array of PhysicsRaycastResults) to store the result of the raycast.\r\n     * @param query - The raycast query options. See [[IRaycastQuery]] for more information.\r\n     *\r\n     * Performs a raycast. It takes in two points, from and to, and a PhysicsRaycastResult object to store the result of the raycast.\r\n     * It then performs the raycast and stores the hit data in the PhysicsRaycastResult object.\r\n     * If result is an empty array, it will be populated with every detected raycast hit.\r\n     * If result is a populated array, it will only fill the PhysicsRaycastResults present in the array.\r\n     */\r\n    public raycast(from: Vector3, to: Vector3, result: PhysicsRaycastResult | Array<PhysicsRaycastResult>, query?: IRaycastQuery): void {\r\n        const queryMembership = query?.membership ?? ~0;\r\n        const queryCollideWith = query?.collideWith ?? ~0;\r\n        const shouldHitTriggers = query?.shouldHitTriggers ?? false;\r\n        const bodyToIgnore = query?.ignoreBody ? [BigInt(query.ignoreBody._pluginData.hpBodyId[0])] : [BigInt(0)];\r\n\r\n        const results = Array.isArray(result) ? result : [result];\r\n        for (const raycastResult of results) {\r\n            raycastResult.reset(from, to);\r\n        }\r\n\r\n        const hkQuery = [this._bVecToV3(from), this._bVecToV3(to), [queryMembership, queryCollideWith], shouldHitTriggers, bodyToIgnore];\r\n        const queryCollector = results.length === 1 || !this._multiQueryCollector ? this._queryCollector : this._multiQueryCollector;\r\n        this._hknp.HP_World_CastRayWithCollector(this.world, queryCollector, hkQuery);\r\n\r\n        const numHits = this._hknp.HP_QueryCollector_GetNumHits(queryCollector)[1];\r\n        if (numHits <= 0) {\r\n            return;\r\n        }\r\n\r\n        if (!results.length) {\r\n            for (let i = 0; i < numHits; i++) {\r\n                const raycastResult = new PhysicsRaycastResult();\r\n                raycastResult.reset(from, to);\r\n                results.push(raycastResult);\r\n            }\r\n        }\r\n\r\n        // QueryCollector results are not sorted by distance, so we need to sort them manually\r\n        const hitDatas: Array<{ hitData: any; distance: number }> = new Array(numHits);\r\n        for (let i = 0; i < numHits; i++) {\r\n            const [, hitData] = this._hknp.HP_QueryCollector_GetCastRayResult(queryCollector, i)[1];\r\n\r\n            const hitPos = hitData[3];\r\n            from.subtractFromFloatsToRef(hitPos[0], hitPos[1], hitPos[2], this._tmpVec3[0]);\r\n            const distance = this._tmpVec3[0].lengthSquared();\r\n\r\n            hitDatas[i] = {\r\n                hitData,\r\n                distance: distance,\r\n            };\r\n        }\r\n\r\n        hitDatas.sort((a, b) => a.distance - b.distance);\r\n\r\n        for (let i = 0; i < Math.min(numHits, results.length); i++) {\r\n            const raycastResult = results[i];\r\n            const hitData = hitDatas[i];\r\n\r\n            this._populateHitData(hitData.hitData, raycastResult);\r\n            raycastResult.setHitDistance(Math.sqrt(hitData.distance));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a point, returns the closest physics\r\n     * body to that point.\r\n     * @param query the query to perform. @see IPhysicsPointProximityQuery\r\n     * @param result contact point on the hit shape, in world space\r\n     */\r\n    public pointProximity(query: IPhysicsPointProximityQuery, result: ProximityCastResult): void {\r\n        const queryMembership = query?.collisionFilter?.membership ?? ~0;\r\n        const queryCollideWith = query?.collisionFilter?.collideWith ?? ~0;\r\n\r\n        result.reset();\r\n\r\n        const bodyToIgnore = query.ignoreBody ? [BigInt(query.ignoreBody._pluginData.hpBodyId[0])] : [BigInt(0)];\r\n\r\n        const hkQuery = [this._bVecToV3(query.position), query.maxDistance, [queryMembership, queryCollideWith], query.shouldHitTriggers, bodyToIgnore];\r\n        this._hknp.HP_World_PointProximityWithCollector(this.world, this._queryCollector, hkQuery);\r\n\r\n        if (this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1] > 0) {\r\n            const [distance, hitData] = this._hknp.HP_QueryCollector_GetPointProximityResult(this._queryCollector, 0)[1];\r\n\r\n            this._populateHitData(hitData, result);\r\n            result.setHitDistance(distance);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a shape in a specific position and orientation, returns the closest point to that shape.\r\n     * @param query the query to perform. @see IPhysicsShapeProximityCastQuery\r\n     * @param inputShapeResult contact point on input shape, in input shape space\r\n     * @param hitShapeResult contact point on hit shape, in world space\r\n     */\r\n    public shapeProximity(query: IPhysicsShapeProximityCastQuery, inputShapeResult: ProximityCastResult, hitShapeResult: ProximityCastResult): void {\r\n        inputShapeResult.reset();\r\n        hitShapeResult.reset();\r\n        const shapeId = query.shape._pluginData;\r\n        const bodyToIgnore = query.ignoreBody ? [BigInt(query.ignoreBody._pluginData.hpBodyId[0])] : [BigInt(0)];\r\n\r\n        const hkQuery = [shapeId, this._bVecToV3(query.position), this._bQuatToV4(query.rotation), query.maxDistance, query.shouldHitTriggers, bodyToIgnore];\r\n        this._hknp.HP_World_ShapeProximityWithCollector(this.world, this._queryCollector, hkQuery);\r\n\r\n        if (this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1] > 0) {\r\n            const [distance, hitInputData, hitShapeData] = this._hknp.HP_QueryCollector_GetShapeProximityResult(this._queryCollector, 0)[1];\r\n\r\n            this._populateHitData(hitInputData, inputShapeResult);\r\n            this._populateHitData(hitShapeData, hitShapeResult);\r\n\r\n            inputShapeResult.setHitDistance(distance);\r\n            hitShapeResult.setHitDistance(distance);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a shape in a specific orientation, cast it from the start to end position specified by the query, and return the first hit.\r\n     * @param query the query to perform. @see IPhysicsShapeCastQuery\r\n     * @param inputShapeResult contact point on input shape, in input shape space\r\n     * @param hitShapeResult contact point on hit shape, in world space\r\n     */\r\n    public shapeCast(query: IPhysicsShapeCastQuery, inputShapeResult: ShapeCastResult, hitShapeResult: ShapeCastResult): void {\r\n        inputShapeResult.reset();\r\n        hitShapeResult.reset();\r\n\r\n        const shapeId = query.shape._pluginData;\r\n        const bodyToIgnore = query.ignoreBody ? [BigInt(query.ignoreBody._pluginData.hpBodyId[0])] : [BigInt(0)];\r\n\r\n        const hkQuery = [shapeId, this._bQuatToV4(query.rotation), this._bVecToV3(query.startPosition), this._bVecToV3(query.endPosition), query.shouldHitTriggers, bodyToIgnore];\r\n        this._hknp.HP_World_ShapeCastWithCollector(this.world, this._queryCollector, hkQuery);\r\n\r\n        if (this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1] > 0) {\r\n            const [fractionAlongRay, hitInputData, hitShapeData] = this._hknp.HP_QueryCollector_GetShapeCastResult(this._queryCollector, 0)[1];\r\n\r\n            this._populateHitData(hitInputData, inputShapeResult);\r\n            this._populateHitData(hitShapeData, hitShapeResult);\r\n\r\n            inputShapeResult.setHitFraction(fractionAlongRay);\r\n            hitShapeResult.setHitFraction(fractionAlongRay);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return the collision observable for a particular physics body.\r\n     * @param body the physics body\r\n     * @returns the collision observable for the body\r\n     */\r\n    public getCollisionObservable(body: PhysicsBody): Observable<IPhysicsCollisionEvent> {\r\n        const bodyId = body._pluginData.hpBodyId[0];\r\n        let observable = this._bodyCollisionObservable.get(bodyId);\r\n        if (!observable) {\r\n            observable = new Observable<IPhysicsCollisionEvent>();\r\n            this._bodyCollisionObservable.set(bodyId, observable);\r\n        }\r\n        return observable;\r\n    }\r\n\r\n    /**\r\n     * Return the collision ended observable for a particular physics body.\r\n     * @param body the physics body\r\n     * @returns\r\n     */\r\n    public getCollisionEndedObservable(body: PhysicsBody): Observable<IBasePhysicsCollisionEvent> {\r\n        const bodyId = body._pluginData.hpBodyId[0];\r\n        let observable = this._bodyCollisionEndedObservable.get(bodyId);\r\n        if (!observable) {\r\n            observable = new Observable<IBasePhysicsCollisionEvent>();\r\n            this._bodyCollisionEndedObservable.set(bodyId, observable);\r\n        }\r\n        return observable;\r\n    }\r\n\r\n    /**\r\n     * Enable collision to be reported for a body when a callback is setup on the world\r\n     * @param body the physics body\r\n     * @param enabled whether to enable or disable collision events\r\n     */\r\n    public setCollisionCallbackEnabled(body: PhysicsBody, enabled: boolean): void {\r\n        // Register for collide events by default\r\n        const collideEvents = this._hknp.EventType.COLLISION_STARTED.value | this._hknp.EventType.COLLISION_CONTINUED.value | this._hknp.EventType.COLLISION_FINISHED.value;\r\n        if (body._pluginDataInstances && body._pluginDataInstances.length) {\r\n            for (let index = 0; index < body._pluginDataInstances.length; index++) {\r\n                const bodyId = body._pluginDataInstances[index];\r\n                this._hknp.HP_Body_SetEventMask(bodyId.hpBodyId, enabled ? collideEvents : 0);\r\n            }\r\n        } else if (body._pluginData) {\r\n            this._hknp.HP_Body_SetEventMask(body._pluginData.hpBodyId, enabled ? collideEvents : 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable collision ended to be reported for a body when a callback is setup on the world\r\n     * @param body the physics body\r\n     * @param enabled whether to enable or disable collision ended events\r\n     */\r\n    public setCollisionEndedCallbackEnabled(body: PhysicsBody, enabled: boolean): void {\r\n        // Register to collide ended events\r\n        const pluginRef = this._getPluginReference(body);\r\n        let currentCollideEvents = this._hknp.HP_Body_GetEventMask(pluginRef.hpBodyId)[1];\r\n        // update with the ended mask\r\n        currentCollideEvents = enabled\r\n            ? currentCollideEvents | this._hknp.EventType.COLLISION_FINISHED.value\r\n            : currentCollideEvents & ~this._hknp.EventType.COLLISION_FINISHED.value;\r\n        if (body._pluginDataInstances && body._pluginDataInstances.length) {\r\n            for (let index = 0; index < body._pluginDataInstances.length; index++) {\r\n                const bodyId = body._pluginDataInstances[index];\r\n                this._hknp.HP_Body_SetEventMask(bodyId.hpBodyId, currentCollideEvents);\r\n            }\r\n        } else if (body._pluginData) {\r\n            this._hknp.HP_Body_SetEventMask(body._pluginData.hpBodyId, currentCollideEvents);\r\n        }\r\n    }\r\n\r\n    private _notifyTriggers() {\r\n        let eventAddress = this._hknp.HP_World_GetTriggerEvents(this.world)[1];\r\n        const event = new TriggerEvent();\r\n        while (eventAddress) {\r\n            TriggerEvent.readToRef(this._hknp.HEAPU8.buffer, eventAddress, event);\r\n\r\n            const bodyInfoA = this._bodies.get(event.bodyIdA);\r\n            const bodyInfoB = this._bodies.get(event.bodyIdB);\r\n\r\n            // Bodies may have been disposed between events. Check both still exist.\r\n            if (bodyInfoA && bodyInfoB) {\r\n                const triggerCollisionInfo: IBasePhysicsCollisionEvent = {\r\n                    collider: bodyInfoA.body,\r\n                    colliderIndex: bodyInfoA.index,\r\n                    collidedAgainst: bodyInfoB.body,\r\n                    collidedAgainstIndex: bodyInfoB.index,\r\n                    type: this._nativeTriggerCollisionValueToCollisionType(event.type),\r\n                };\r\n                this.onTriggerCollisionObservable.notifyObservers(triggerCollisionInfo);\r\n            }\r\n\r\n            eventAddress = this._hknp.HP_World_GetNextTriggerEvent(this.world, eventAddress);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Runs thru all detected collisions and filter by body\r\n     */\r\n    private _notifyCollisions() {\r\n        let eventAddress = this._hknp.HP_World_GetCollisionEvents(this.world)[1];\r\n        const event = new CollisionEvent();\r\n        const worldAddr = Number(this.world);\r\n        while (eventAddress) {\r\n            CollisionEvent.readToRef(this._hknp.HEAPU8.buffer, eventAddress, event);\r\n            const bodyInfoA = this._bodies.get(event.contactOnA.bodyId);\r\n            const bodyInfoB = this._bodies.get(event.contactOnB.bodyId);\r\n\r\n            // Bodies may have been disposed between events. Check both still exist.\r\n            if (bodyInfoA && bodyInfoB) {\r\n                const collisionInfo: any = {\r\n                    collider: bodyInfoA.body,\r\n                    colliderIndex: bodyInfoA.index,\r\n                    collidedAgainst: bodyInfoB.body,\r\n                    collidedAgainstIndex: bodyInfoB.index,\r\n                    type: this._nativeCollisionValueToCollisionType(event.type),\r\n                };\r\n                if (collisionInfo.type === PhysicsEventType.COLLISION_FINISHED) {\r\n                    this.onCollisionEndedObservable.notifyObservers(collisionInfo);\r\n                } else {\r\n                    event.contactOnB.position.subtractToRef(event.contactOnA.position, this._tmpVec3[0]);\r\n                    const distance = Vector3.Dot(this._tmpVec3[0], event.contactOnA.normal);\r\n                    collisionInfo.point = event.contactOnA.position;\r\n                    collisionInfo.distance = distance;\r\n                    collisionInfo.impulse = event.impulseApplied;\r\n                    collisionInfo.normal = event.contactOnA.normal;\r\n                    this.onCollisionObservable.notifyObservers(collisionInfo);\r\n                }\r\n\r\n                if (this._bodyCollisionObservable.size && collisionInfo.type !== PhysicsEventType.COLLISION_FINISHED) {\r\n                    const observableA = this._bodyCollisionObservable.get(event.contactOnA.bodyId);\r\n                    const observableB = this._bodyCollisionObservable.get(event.contactOnB.bodyId);\r\n                    event.contactOnA.position.subtractToRef(event.contactOnB.position, this._tmpVec3[0]);\r\n                    const distance = Vector3.Dot(this._tmpVec3[0], event.contactOnB.normal);\r\n                    if (observableA) {\r\n                        observableA.notifyObservers(collisionInfo);\r\n                    }\r\n                    if (observableB) {\r\n                        const collisionInfoB: any = {\r\n                            collider: bodyInfoB.body,\r\n                            colliderIndex: bodyInfoB.index,\r\n                            collidedAgainst: bodyInfoA.body,\r\n                            collidedAgainstIndex: bodyInfoA.index,\r\n                            point: event.contactOnB.position,\r\n                            distance: distance,\r\n                            impulse: event.impulseApplied,\r\n                            normal: event.contactOnB.normal,\r\n                            type: this._nativeCollisionValueToCollisionType(event.type),\r\n                        };\r\n                        observableB.notifyObservers(collisionInfoB);\r\n                    }\r\n                } else if (this._bodyCollisionEndedObservable.size) {\r\n                    const observableA = this._bodyCollisionEndedObservable.get(event.contactOnA.bodyId);\r\n                    const observableB = this._bodyCollisionEndedObservable.get(event.contactOnB.bodyId);\r\n                    event.contactOnA.position.subtractToRef(event.contactOnB.position, this._tmpVec3[0]);\r\n                    const distance = Vector3.Dot(this._tmpVec3[0], event.contactOnB.normal);\r\n                    if (observableA) {\r\n                        observableA.notifyObservers(collisionInfo);\r\n                    }\r\n                    if (observableB) {\r\n                        const collisionInfoB: any = {\r\n                            collider: bodyInfoB.body,\r\n                            colliderIndex: bodyInfoB.index,\r\n                            collidedAgainst: bodyInfoA.body,\r\n                            collidedAgainstIndex: bodyInfoA.index,\r\n                            point: event.contactOnB.position,\r\n                            distance: distance,\r\n                            impulse: event.impulseApplied,\r\n                            normal: event.contactOnB.normal,\r\n                            type: this._nativeCollisionValueToCollisionType(event.type),\r\n                        };\r\n                        observableB.notifyObservers(collisionInfoB);\r\n                    }\r\n                }\r\n            }\r\n\r\n            eventAddress = this._hknp.HP_World_GetNextCollisionEvent(worldAddr, eventAddress);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the number of bodies in the world\r\n     */\r\n    public get numBodies() {\r\n        return this._hknp.HP_World_GetNumBodies(this.world)[1];\r\n    }\r\n\r\n    /**\r\n     * Dispose the world and free resources\r\n     */\r\n    public dispose(): void {\r\n        if (this._queryCollector) {\r\n            this._hknp.HP_QueryCollector_Release(this._queryCollector);\r\n            this._queryCollector = undefined;\r\n        }\r\n        if (this._multiQueryCollector) {\r\n            this._hknp.HP_QueryCollector_Release(this._multiQueryCollector);\r\n            this._multiQueryCollector;\r\n        }\r\n        if (this.world) {\r\n            this._hknp.HP_World_Release(this.world);\r\n            this.world = undefined;\r\n        }\r\n    }\r\n\r\n    private _v3ToBvecRef(v: any, vec3: Vector3): void {\r\n        vec3.set(v[0], v[1], v[2]);\r\n    }\r\n\r\n    private _bVecToV3(v: any): any {\r\n        return [v._x, v._y, v._z];\r\n    }\r\n\r\n    private _bQuatToV4(q: Quaternion): Array<number> {\r\n        return [q._x, q._y, q._z, q._w];\r\n    }\r\n\r\n    private _constraintMotorTypeToNative(motorType: PhysicsConstraintMotorType): any {\r\n        switch (motorType) {\r\n            case PhysicsConstraintMotorType.POSITION:\r\n                return this._hknp.ConstraintMotorType.POSITION;\r\n            case PhysicsConstraintMotorType.VELOCITY:\r\n                return this._hknp.ConstraintMotorType.VELOCITY;\r\n        }\r\n        return this._hknp.ConstraintMotorType.NONE;\r\n    }\r\n\r\n    private _nativeToMotorType(motorType: any): PhysicsConstraintMotorType {\r\n        switch (motorType) {\r\n            case this._hknp.ConstraintMotorType.POSITION:\r\n                return PhysicsConstraintMotorType.POSITION;\r\n            case this._hknp.ConstraintMotorType.VELOCITY:\r\n                return PhysicsConstraintMotorType.VELOCITY;\r\n        }\r\n        return PhysicsConstraintMotorType.NONE;\r\n    }\r\n\r\n    private _materialCombineToNative(mat: PhysicsMaterialCombineMode): any {\r\n        switch (mat) {\r\n            case PhysicsMaterialCombineMode.GEOMETRIC_MEAN:\r\n                return this._hknp.MaterialCombine.GEOMETRIC_MEAN;\r\n            case PhysicsMaterialCombineMode.MINIMUM:\r\n                return this._hknp.MaterialCombine.MINIMUM;\r\n            case PhysicsMaterialCombineMode.MAXIMUM:\r\n                return this._hknp.MaterialCombine.MAXIMUM;\r\n            case PhysicsMaterialCombineMode.ARITHMETIC_MEAN:\r\n                return this._hknp.MaterialCombine.ARITHMETIC_MEAN;\r\n            case PhysicsMaterialCombineMode.MULTIPLY:\r\n                return this._hknp.MaterialCombine.MULTIPLY;\r\n        }\r\n    }\r\n\r\n    private _nativeToMaterialCombine(mat: any): PhysicsMaterialCombineMode | undefined {\r\n        switch (mat) {\r\n            case this._hknp.MaterialCombine.GEOMETRIC_MEAN:\r\n                return PhysicsMaterialCombineMode.GEOMETRIC_MEAN;\r\n            case this._hknp.MaterialCombine.MINIMUM:\r\n                return PhysicsMaterialCombineMode.MINIMUM;\r\n            case this._hknp.MaterialCombine.MAXIMUM:\r\n                return PhysicsMaterialCombineMode.MAXIMUM;\r\n            case this._hknp.MaterialCombine.ARITHMETIC_MEAN:\r\n                return PhysicsMaterialCombineMode.ARITHMETIC_MEAN;\r\n            case this._hknp.MaterialCombine.MULTIPLY:\r\n                return PhysicsMaterialCombineMode.MULTIPLY;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n\r\n    private _constraintAxisToNative(axId: PhysicsConstraintAxis): any {\r\n        switch (axId) {\r\n            case PhysicsConstraintAxis.LINEAR_X:\r\n                return this._hknp.ConstraintAxis.LINEAR_X;\r\n            case PhysicsConstraintAxis.LINEAR_Y:\r\n                return this._hknp.ConstraintAxis.LINEAR_Y;\r\n            case PhysicsConstraintAxis.LINEAR_Z:\r\n                return this._hknp.ConstraintAxis.LINEAR_Z;\r\n            case PhysicsConstraintAxis.ANGULAR_X:\r\n                return this._hknp.ConstraintAxis.ANGULAR_X;\r\n            case PhysicsConstraintAxis.ANGULAR_Y:\r\n                return this._hknp.ConstraintAxis.ANGULAR_Y;\r\n            case PhysicsConstraintAxis.ANGULAR_Z:\r\n                return this._hknp.ConstraintAxis.ANGULAR_Z;\r\n            case PhysicsConstraintAxis.LINEAR_DISTANCE:\r\n                return this._hknp.ConstraintAxis.LINEAR_DISTANCE;\r\n        }\r\n    }\r\n\r\n    private _nativeToLimitMode(mode: number): PhysicsConstraintAxisLimitMode {\r\n        switch (mode) {\r\n            case this._hknp.ConstraintAxisLimitMode.FREE:\r\n                return PhysicsConstraintAxisLimitMode.FREE;\r\n            case this._hknp.ConstraintAxisLimitMode.LIMITED:\r\n                return PhysicsConstraintAxisLimitMode.LIMITED;\r\n            case this._hknp.ConstraintAxisLimitMode.LOCKED:\r\n                return PhysicsConstraintAxisLimitMode.LOCKED;\r\n        }\r\n\r\n        return PhysicsConstraintAxisLimitMode.FREE;\r\n    }\r\n\r\n    private _limitModeToNative(mode: PhysicsConstraintAxisLimitMode): any {\r\n        switch (mode) {\r\n            case PhysicsConstraintAxisLimitMode.FREE:\r\n                return this._hknp.ConstraintAxisLimitMode.FREE;\r\n            case PhysicsConstraintAxisLimitMode.LIMITED:\r\n                return this._hknp.ConstraintAxisLimitMode.LIMITED;\r\n            case PhysicsConstraintAxisLimitMode.LOCKED:\r\n                return this._hknp.ConstraintAxisLimitMode.LOCKED;\r\n        }\r\n    }\r\n\r\n    private _nativeCollisionValueToCollisionType(type: number): PhysicsEventType {\r\n        switch (type) {\r\n            case this._hknp.EventType.COLLISION_STARTED.value:\r\n                return PhysicsEventType.COLLISION_STARTED;\r\n            case this._hknp.EventType.COLLISION_FINISHED.value:\r\n                return PhysicsEventType.COLLISION_FINISHED;\r\n            case this._hknp.EventType.COLLISION_CONTINUED.value:\r\n                return PhysicsEventType.COLLISION_CONTINUED;\r\n        }\r\n\r\n        return PhysicsEventType.COLLISION_STARTED;\r\n    }\r\n\r\n    private _nativeTriggerCollisionValueToCollisionType(type: number): PhysicsEventType {\r\n        switch (type) {\r\n            case 8:\r\n                return PhysicsEventType.TRIGGER_ENTERED;\r\n            case 16:\r\n                return PhysicsEventType.TRIGGER_EXITED;\r\n        }\r\n        return PhysicsEventType.TRIGGER_ENTERED;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9909, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/Plugins/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/Plugins/index.ts"],"sourcesContent":["export * from \"./havokPlugin\";\r\n"],"names":[],"mappings":";AAAA,cAAc,eAAe,CAAC"}},
    {"offset": {"line": 9916, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport { PhysicsEngine as PhysicsEngineV2 } from \"./physicsEngine\";\r\nexport * from \"./physicsBody\";\r\nexport * from \"./physicsShape\";\r\nexport * from \"./physicsConstraint\";\r\nexport * from \"./physicsMaterial\";\r\nexport * from \"./physicsAggregate\";\r\nexport * from \"./ragdoll\";\r\nexport * from \"./IPhysicsEnginePlugin\";\r\nexport * from \"./characterController\";\r\n/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./Plugins/index\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,OAAO,EAAE,aAAa,IAAI,eAAe,EAAE,MAAM,iBAAiB,CAAC;AACnE,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,qBAAqB,CAAC;AACpC,cAAc,mBAAmB,CAAC;AAClC,cAAc,oBAAoB,CAAC;AACnC,cAAc,WAAW,CAAC;AAC1B,cAAc,wBAAwB,CAAC;AACvC,cAAc,uBAAuB,CAAC;AACtC,2DAAA,EAA6D,CAC7D,cAAc,iBAAiB,CAAC"}},
    {"offset": {"line": 9941, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/joinedPhysicsEngineComponent.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/joinedPhysicsEngineComponent.ts"],"sourcesContent":["import type { Nullable } from \"../types\";\r\nimport { Logger } from \"../Misc/logger\";\r\nimport { Observable } from \"../Misc/observable\";\r\nimport type { Vector3 } from \"../Maths/math.vector\";\r\nimport type { AbstractMesh } from \"../Meshes/abstractMesh\";\r\nimport type { ISceneComponent } from \"../sceneComponent\";\r\nimport { SceneComponentConstants } from \"../sceneComponent\";\r\nimport { Scene } from \"../scene\";\r\nimport type { IPhysicsEngine } from \"./IPhysicsEngine\";\r\nimport type { IPhysicsEnginePlugin as IPhysicsEnginePluginV1 } from \"./v1/IPhysicsEnginePlugin\";\r\nimport type { IPhysicsEnginePluginV2 } from \"./v2/IPhysicsEnginePlugin\";\r\nimport { PhysicsEngine as PhysicsEngineV1 } from \"./v1/physicsEngine\";\r\nimport { PhysicsEngine as PhysicsEngineV2 } from \"./v2/physicsEngine\";\r\n\r\ndeclare module \"../scene\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    export interface Scene {\r\n        /** @internal (Backing field) */\r\n        _physicsEngine: Nullable<IPhysicsEngine>;\r\n        /** @internal */\r\n        _physicsTimeAccumulator: number;\r\n\r\n        /**\r\n         * Gets the current physics engine\r\n         * @returns a IPhysicsEngine or null if none attached\r\n         */\r\n        getPhysicsEngine(): Nullable<IPhysicsEngine>;\r\n\r\n        /**\r\n         * Enables physics to the current scene\r\n         * @param gravity defines the scene's gravity for the physics engine. defaults to real earth gravity : (0, -9.81, 0)\r\n         * @param plugin defines the physics engine to be used. defaults to CannonJS.\r\n         * @returns a boolean indicating if the physics engine was initialized\r\n         */\r\n        enablePhysics(gravity?: Nullable<Vector3>, plugin?: IPhysicsEnginePluginV1 | IPhysicsEnginePluginV2): boolean;\r\n\r\n        /**\r\n         * Disables and disposes the physics engine associated with the scene\r\n         */\r\n        disablePhysicsEngine(): void;\r\n\r\n        /**\r\n         * Gets a boolean indicating if there is an active physics engine\r\n         * @returns a boolean indicating if there is an active physics engine\r\n         */\r\n        isPhysicsEnabled(): boolean;\r\n\r\n        /**\r\n         * Deletes a physics compound impostor\r\n         * @param compound defines the compound to delete\r\n         */\r\n        deleteCompoundImpostor(compound: any): void;\r\n\r\n        /**\r\n         * An event triggered when physic simulation is about to be run\r\n         */\r\n        onBeforePhysicsObservable: Observable<Scene>;\r\n\r\n        /**\r\n         * An event triggered when physic simulation has been done\r\n         */\r\n        onAfterPhysicsObservable: Observable<Scene>;\r\n    }\r\n}\r\n\r\n/**\r\n * Gets the current physics engine\r\n * @returns a IPhysicsEngine or null if none attached\r\n */\r\nScene.prototype.getPhysicsEngine = function (): Nullable<IPhysicsEngine> {\r\n    return this._physicsEngine ?? null;\r\n};\r\n\r\n/**\r\n * Enables physics to the current scene\r\n * @param gravity defines the scene's gravity for the physics engine\r\n * @param plugin defines the physics engine to be used. defaults to CannonJS.\r\n * @returns a boolean indicating if the physics engine was initialized\r\n */\r\nScene.prototype.enablePhysics = function (gravity: Nullable<Vector3> = null, plugin?: IPhysicsEnginePluginV1 | IPhysicsEnginePluginV2): boolean {\r\n    if (this._physicsEngine) {\r\n        return true;\r\n    }\r\n\r\n    // Register the component to the scene\r\n    let component = this._getComponent(SceneComponentConstants.NAME_PHYSICSENGINE) as PhysicsEngineSceneComponent;\r\n    if (!component) {\r\n        component = new PhysicsEngineSceneComponent(this);\r\n        this._addComponent(component);\r\n    }\r\n\r\n    try {\r\n        if (!plugin || plugin?.getPluginVersion() === 1) {\r\n            this._physicsEngine = new PhysicsEngineV1(gravity, plugin as IPhysicsEnginePluginV1);\r\n        } else if (plugin?.getPluginVersion() === 2) {\r\n            this._physicsEngine = new PhysicsEngineV2(gravity, plugin as IPhysicsEnginePluginV2);\r\n        } else {\r\n            throw new Error(\"Unsupported Physics plugin version.\");\r\n        }\r\n        this._physicsTimeAccumulator = 0;\r\n        return true;\r\n    } catch (e) {\r\n        Logger.Error(e.message);\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n * Disables and disposes the physics engine associated with the scene\r\n */\r\nScene.prototype.disablePhysicsEngine = function (): void {\r\n    if (!this._physicsEngine) {\r\n        return;\r\n    }\r\n\r\n    this._physicsEngine.dispose();\r\n    this._physicsEngine = null;\r\n};\r\n\r\n/**\r\n * Gets a boolean indicating if there is an active physics engine\r\n * @returns a boolean indicating if there is an active physics engine\r\n */\r\nScene.prototype.isPhysicsEnabled = function (): boolean {\r\n    return this._physicsEngine !== undefined;\r\n};\r\n\r\n/**\r\n * Deletes a physics compound impostor\r\n * @param compound defines the compound to delete\r\n */\r\nScene.prototype.deleteCompoundImpostor = function (compound: any): void {\r\n    const mesh: AbstractMesh = compound.parts[0].mesh;\r\n\r\n    if (mesh.physicsImpostor) {\r\n        mesh.physicsImpostor.dispose(/*true*/);\r\n        mesh.physicsImpostor = null;\r\n    }\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nScene.prototype._advancePhysicsEngineStep = function (step: number) {\r\n    if (this._physicsEngine) {\r\n        const subTime = this._physicsEngine.getSubTimeStep();\r\n        if (subTime > 0) {\r\n            this._physicsTimeAccumulator += step;\r\n            while (this._physicsTimeAccumulator > subTime) {\r\n                this.onBeforePhysicsObservable.notifyObservers(this);\r\n                this._physicsEngine._step(subTime / 1000);\r\n                this.onAfterPhysicsObservable.notifyObservers(this);\r\n                this._physicsTimeAccumulator -= subTime;\r\n            }\r\n        } else {\r\n            this.onBeforePhysicsObservable.notifyObservers(this);\r\n            this._physicsEngine._step(step / 1000);\r\n            this.onAfterPhysicsObservable.notifyObservers(this);\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Defines the physics engine scene component responsible to manage a physics engine\r\n */\r\nexport class PhysicsEngineSceneComponent implements ISceneComponent {\r\n    /**\r\n     * The component name helpful to identify the component in the list of scene components.\r\n     */\r\n    public readonly name = SceneComponentConstants.NAME_PHYSICSENGINE;\r\n\r\n    /**\r\n     * The scene the component belongs to.\r\n     */\r\n    public scene: Scene;\r\n\r\n    /**\r\n     * Creates a new instance of the component for the given scene\r\n     * @param scene Defines the scene to register the component in\r\n     */\r\n    constructor(scene: Scene) {\r\n        this.scene = scene;\r\n        this.scene.onBeforePhysicsObservable = new Observable<Scene>();\r\n        this.scene.onAfterPhysicsObservable = new Observable<Scene>();\r\n\r\n        // Replace the function used to get the deterministic frame time\r\n        this.scene.getDeterministicFrameTime = () => {\r\n            if (this.scene._physicsEngine) {\r\n                return this.scene._physicsEngine.getTimeStep() * 1000;\r\n            }\r\n\r\n            return 1000.0 / 60.0;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Registers the component in a given scene\r\n     */\r\n    public register(): void {}\r\n\r\n    /**\r\n     * Rebuilds the elements related to this component in case of\r\n     * context lost for instance.\r\n     */\r\n    public rebuild(): void {\r\n        // Nothing to do for this component\r\n    }\r\n\r\n    /**\r\n     * Disposes the component and the associated resources\r\n     */\r\n    public dispose(): void {\r\n        this.scene.onBeforePhysicsObservable.clear();\r\n        this.scene.onAfterPhysicsObservable.clear();\r\n\r\n        if (this.scene._physicsEngine) {\r\n            this.scene.disablePhysicsEngine();\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10080, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/v2/physicsEngineComponent.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/v2/physicsEngineComponent.ts"],"sourcesContent":["import type { Nullable } from \"../../types\";\r\nimport type { Observer } from \"../../Misc/observable\";\r\nimport type { Vector3 } from \"../../Maths/math.vector\";\r\nimport { TransformNode } from \"../../Meshes/transformNode\";\r\nimport type { Node } from \"../../node\";\r\nimport type { PhysicsBody } from \"./physicsBody\";\r\n\r\nimport \"../joinedPhysicsEngineComponent\";\r\n\r\ndeclare module \"../../Meshes/transformNode\" {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    export interface TransformNode {\r\n        /** @internal */\r\n        _physicsBody: Nullable<PhysicsBody>;\r\n\r\n        /**\r\n         * @see\r\n         */\r\n        physicsBody: Nullable<PhysicsBody>;\r\n\r\n        /**\r\n         *\r\n         */\r\n        getPhysicsBody(): Nullable<PhysicsBody>;\r\n\r\n        /** Apply a physic impulse to the mesh\r\n         * @param force defines the force to apply\r\n         * @param contactPoint defines where to apply the force\r\n         * @returns the current mesh\r\n         */\r\n        applyImpulse(force: Vector3, contactPoint: Vector3): TransformNode;\r\n\r\n        /** Apply a physic angular impulse to the mesh\r\n         * @param angularImpulse defines the torque to apply\r\n         * @returns the current mesh\r\n         */\r\n        applyAngularImpulse(angularImpulse: Vector3): TransformNode;\r\n\r\n        /** @internal */\r\n        _disposePhysicsObserver: Nullable<Observer<Node>>;\r\n    }\r\n}\r\n\r\nObject.defineProperty(TransformNode.prototype, \"physicsBody\", {\r\n    get: function (this: TransformNode) {\r\n        return this._physicsBody;\r\n    },\r\n    set: function (this: TransformNode, value: Nullable<PhysicsBody>) {\r\n        if (this._physicsBody === value) {\r\n            return;\r\n        }\r\n        if (this._disposePhysicsObserver) {\r\n            this.onDisposeObservable.remove(this._disposePhysicsObserver);\r\n        }\r\n\r\n        this._physicsBody = value;\r\n\r\n        if (value) {\r\n            this._disposePhysicsObserver = this.onDisposeObservable.add(() => {\r\n                // Physics\r\n                if (this.physicsBody) {\r\n                    this.physicsBody.dispose(/*!doNotRecurse*/);\r\n                    this.physicsBody = null;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    enumerable: true,\r\n    configurable: true,\r\n});\r\n\r\n/**\r\n * Gets the current physics body\r\n * @returns a physics body or null\r\n */\r\nTransformNode.prototype.getPhysicsBody = function (): Nullable<PhysicsBody> {\r\n    return this.physicsBody;\r\n};\r\n\r\n/**\r\n * Apply a physic impulse to the mesh\r\n * @param force defines the force to apply\r\n * @param contactPoint defines where to apply the force\r\n * @returns the current mesh\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nTransformNode.prototype.applyImpulse = function (force: Vector3, contactPoint: Vector3): TransformNode {\r\n    if (!this.physicsBody) {\r\n        throw new Error(\"No Physics Body for TransformNode\");\r\n    }\r\n    this.physicsBody.applyImpulse(force, contactPoint);\r\n    return this;\r\n};\r\n\r\n/**\r\n * Apply a physic angular impulse to the mesh\r\n * @param angularImpulse defines the torque to apply\r\n * @returns the current mesh\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine\r\n */\r\nTransformNode.prototype.applyAngularImpulse = function (angularImpulse: Vector3): TransformNode {\r\n    if (!this.physicsBody) {\r\n        throw new Error(\"No Physics Body for TransformNode\");\r\n    }\r\n    this.physicsBody.applyAngularImpulse(angularImpulse);\r\n    return this;\r\n};\r\n"],"names":[],"mappings":";AAGA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAI3D,OAAO,iCAAiC,CAAC;;;AAoCzC,MAAM,CAAC,cAAc,CAAC,mPAAa,CAAC,SAAS,EAAE,aAAa,EAAE;IAC1D,GAAG,EAAE;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IACD,GAAG,EAAE,SAA+B,KAA4B;QAC5D,IAAI,IAAI,CAAC,YAAY,KAAK,KAAK,EAAE,CAAC;YAC9B,OAAO;QACX,CAAC;QACD,IAAI,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAClE,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAE1B,IAAI,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,GAAG,EAAE;gBAC7D,UAAU;gBACV,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,WAAW,CAAC,OAAO,EAAC,iBAAiB,CAAC,CAAC;oBAC5C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC5B,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IACD,UAAU,EAAE,IAAI;IAChB,YAAY,EAAE,IAAI;CACrB,CAAC,CAAC;AAEH;;;GAGG,CACH,mPAAa,CAAC,SAAS,CAAC,cAAc,GAAG;IACrC,OAAO,IAAI,CAAC,WAAW,CAAC;AAC5B,CAAC,CAAC;AAEF;;;;;;GAMG,CACH,mPAAa,CAAC,SAAS,CAAC,YAAY,GAAG,SAAU,KAAc,EAAE,YAAqB;IAClF,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;IACzD,CAAC;IACD,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;IACnD,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF;;;;;GAKG,CACH,mPAAa,CAAC,SAAS,CAAC,mBAAmB,GAAG,SAAU,cAAuB;IAC3E,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;IACzD,CAAC;IACD,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;IACrD,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC"}},
    {"offset": {"line": 10145, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/physicsEngineComponent.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/physicsEngineComponent.ts"],"sourcesContent":["// back compat\r\n\r\nimport \"./joinedPhysicsEngineComponent\";\r\nimport \"./v1/physicsEngineComponent\";\r\nimport \"./v2/physicsEngineComponent\";\r\n"],"names":[],"mappings":"AAAA,cAAc;;AAEd,OAAO,gCAAgC,CAAC;AACxC,OAAO,6BAA6B,CAAC;AACrC,OAAO,6BAA6B,CAAC"}},
    {"offset": {"line": 10157, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/physicsHelper.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/physicsHelper.ts"],"sourcesContent":["import type { Nullable } from \"../types\";\r\nimport { Logger } from \"../Misc/logger\";\r\nimport { TmpVectors, Vector3 } from \"../Maths/math.vector\";\r\nimport type { AbstractMesh } from \"../Meshes/abstractMesh\";\r\nimport type { Mesh } from \"../Meshes/mesh\";\r\nimport { CreateSphere } from \"../Meshes/Builders/sphereBuilder\";\r\nimport { CreateCylinder } from \"../Meshes/Builders/cylinderBuilder\";\r\nimport { Ray } from \"../Culling/ray\";\r\nimport type { Scene } from \"../scene\";\r\nimport type { PhysicsEngine as PhysicsEngineV1 } from \"./physicsEngine\";\r\nimport type { PhysicsEngine as PhysicsEngineV2 } from \"./v2/physicsEngine\";\r\nimport type { IPhysicsEngine } from \"./IPhysicsEngine\";\r\nimport type { PhysicsImpostor } from \"./v1/physicsImpostor\";\r\nimport type { PhysicsBody } from \"./v2/physicsBody\";\r\nimport { PhysicsMotionType } from \"./v2/IPhysicsEnginePlugin\";\r\n\r\nclass HelperTools {\r\n    /*\r\n     * Gets the hit contact point between a mesh and a ray. The method varies between\r\n     * the different plugin versions; V1 uses a mesh intersection, V2 uses the physics body instance/object center (to avoid a raycast and improve perf).\r\n     */\r\n    static GetContactPointToRef(mesh: AbstractMesh, origin: Vector3, direction: Vector3, result: Vector3, instanceIndex?: number): boolean {\r\n        const engine = mesh.getScene().getPhysicsEngine();\r\n        const pluginVersion = engine?.getPluginVersion();\r\n        if (pluginVersion === 1) {\r\n            const ray = new Ray(origin, direction);\r\n            const hit = ray.intersectsMesh(mesh);\r\n            if (hit.hit && hit.pickedPoint) {\r\n                result.copyFrom(hit.pickedPoint);\r\n                return true;\r\n            }\r\n        } else if (pluginVersion === 2) {\r\n            mesh.physicsBody!.getObjectCenterWorldToRef(result, instanceIndex);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Checks if a body will be affected by forces\r\n     * @param body the body to check\r\n     * @param instanceIndex for instanced bodies, the index of the instance to check\r\n     * @returns\r\n     */\r\n    static HasAppliedForces(body: PhysicsBody, instanceIndex?: number) {\r\n        return (\r\n            body.getMotionType(instanceIndex) === PhysicsMotionType.STATIC ||\r\n            (body.getMassProperties(instanceIndex)?.mass ?? 0) === 0 ||\r\n            (body.transformNode as Mesh)?.getTotalVertices() === 0\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Checks if a point is inside a cylinder\r\n     * @param point point to check\r\n     * @param origin cylinder origin on the bottom\r\n     * @param radius cylinder radius\r\n     * @param height cylinder height\r\n     * @returns\r\n     */\r\n    static IsInsideCylinder(point: Vector3, origin: Vector3, radius: number, height: number): boolean {\r\n        const distance = TmpVectors.Vector3[0];\r\n        point.subtractToRef(origin, distance);\r\n        return Math.abs(distance.x) <= radius && Math.abs(distance.z) <= radius && distance.y >= 0 && distance.y <= height;\r\n    }\r\n}\r\n\r\n/**\r\n * A helper for physics simulations\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport class PhysicsHelper {\r\n    private _scene: Scene;\r\n    private _physicsEngine: Nullable<IPhysicsEngine>;\r\n    private _hitData: PhysicsHitData = { force: new Vector3(), contactPoint: new Vector3(), distanceFromOrigin: 0 };\r\n\r\n    /**\r\n     * Initializes the Physics helper\r\n     * @param scene Babylon.js scene\r\n     */\r\n    constructor(scene: Scene) {\r\n        this._scene = scene;\r\n        this._physicsEngine = this._scene.getPhysicsEngine();\r\n\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you can use the methods.\");\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Applies a radial explosion impulse\r\n     * @param origin the origin of the explosion\r\n     * @param radiusOrEventOptions the radius or the options of radial explosion\r\n     * @param strength the explosion strength\r\n     * @param falloff possible options: Constant & Linear. Defaults to Constant\r\n     * @returns A physics radial explosion event, or null\r\n     */\r\n    public applyRadialExplosionImpulse(\r\n        origin: Vector3,\r\n        radiusOrEventOptions: number | PhysicsRadialExplosionEventOptions,\r\n        strength?: number,\r\n        falloff?: PhysicsRadialImpulseFalloff\r\n    ): Nullable<PhysicsRadialExplosionEvent> {\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you call this method.\");\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1 && (<PhysicsEngineV1>this._physicsEngine).getImpostors().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 2 && (<PhysicsEngineV2>this._physicsEngine).getBodies().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        let useCallback = false;\r\n        if (typeof radiusOrEventOptions === \"number\") {\r\n            const r = radiusOrEventOptions;\r\n            radiusOrEventOptions = new PhysicsRadialExplosionEventOptions();\r\n            radiusOrEventOptions.radius = r;\r\n            radiusOrEventOptions.strength = strength ?? radiusOrEventOptions.strength;\r\n            radiusOrEventOptions.falloff = falloff ?? radiusOrEventOptions.falloff;\r\n        } else {\r\n            useCallback = !!(radiusOrEventOptions.affectedImpostorsCallback || radiusOrEventOptions.affectedBodiesCallback);\r\n        }\r\n\r\n        const event = new PhysicsRadialExplosionEvent(this._scene, radiusOrEventOptions);\r\n\r\n        const hitData = this._hitData;\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            const affectedImpostorsWithData = Array<PhysicsAffectedImpostorWithData>();\r\n            const impostors = (<PhysicsEngineV1>this._physicsEngine).getImpostors();\r\n            for (const impostor of impostors) {\r\n                if (!event.getImpostorHitData(impostor, origin, hitData)) {\r\n                    continue;\r\n                }\r\n\r\n                impostor.applyImpulse(hitData.force, hitData.contactPoint);\r\n\r\n                if (useCallback) {\r\n                    affectedImpostorsWithData.push({\r\n                        impostor: impostor,\r\n                        hitData: this._copyPhysicsHitData(hitData),\r\n                    });\r\n                }\r\n            }\r\n\r\n            event.triggerAffectedImpostorsCallback(affectedImpostorsWithData);\r\n        } else {\r\n            this._applicationForBodies(event, origin, hitData, useCallback, (body: PhysicsBody, hitData: PhysicsHitData) => {\r\n                body.applyImpulse(hitData.force, hitData.contactPoint, hitData.instanceIndex);\r\n            });\r\n        }\r\n\r\n        event.dispose(false);\r\n\r\n        return event;\r\n    }\r\n\r\n    /**\r\n     * Applies a radial explosion force\r\n     * @param origin the origin of the explosion\r\n     * @param radiusOrEventOptions the radius or the options of radial explosion\r\n     * @param strength the explosion strength\r\n     * @param falloff possible options: Constant & Linear. Defaults to Constant\r\n     * @returns A physics radial explosion event, or null\r\n     */\r\n    public applyRadialExplosionForce(\r\n        origin: Vector3,\r\n        radiusOrEventOptions: number | PhysicsRadialExplosionEventOptions,\r\n        strength?: number,\r\n        falloff?: PhysicsRadialImpulseFalloff\r\n    ): Nullable<PhysicsRadialExplosionEvent> {\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you call the PhysicsHelper.\");\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1 && (<PhysicsEngineV1>this._physicsEngine).getImpostors().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 2 && (<PhysicsEngineV2>this._physicsEngine).getBodies().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        let useCallback = false;\r\n        if (typeof radiusOrEventOptions === \"number\") {\r\n            const r = radiusOrEventOptions;\r\n            radiusOrEventOptions = new PhysicsRadialExplosionEventOptions();\r\n            radiusOrEventOptions.radius = r;\r\n            radiusOrEventOptions.strength = strength ?? radiusOrEventOptions.strength;\r\n            radiusOrEventOptions.falloff = falloff ?? radiusOrEventOptions.falloff;\r\n        } else {\r\n            useCallback = !!(radiusOrEventOptions.affectedImpostorsCallback || radiusOrEventOptions.affectedBodiesCallback);\r\n        }\r\n\r\n        const event = new PhysicsRadialExplosionEvent(this._scene, radiusOrEventOptions);\r\n\r\n        const hitData = this._hitData;\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            const affectedImpostorsWithData = Array<PhysicsAffectedImpostorWithData>();\r\n            const impostors = (<PhysicsEngineV1>this._physicsEngine).getImpostors();\r\n            for (const impostor of impostors) {\r\n                if (!event.getImpostorHitData(impostor, origin, hitData)) {\r\n                    continue;\r\n                }\r\n\r\n                impostor.applyForce(hitData.force, hitData.contactPoint);\r\n\r\n                if (useCallback) {\r\n                    affectedImpostorsWithData.push({\r\n                        impostor: impostor,\r\n                        hitData: this._copyPhysicsHitData(hitData),\r\n                    });\r\n                }\r\n            }\r\n\r\n            event.triggerAffectedImpostorsCallback(affectedImpostorsWithData);\r\n        } else {\r\n            this._applicationForBodies(event, origin, hitData, useCallback, (body: PhysicsBody, hitData: PhysicsHitData) => {\r\n                body.applyForce(hitData.force, hitData.contactPoint, hitData.instanceIndex);\r\n            });\r\n        }\r\n\r\n        event.dispose(false);\r\n\r\n        return event;\r\n    }\r\n\r\n    private _applicationForBodies(\r\n        event: PhysicsRadialExplosionEvent,\r\n        origin: Vector3,\r\n        hitData: PhysicsHitData,\r\n        useCallback: boolean,\r\n        fnApplication: (body: PhysicsBody, hitData: PhysicsHitData, instanceIndex?: number) => void\r\n    ) {\r\n        const affectedBodiesWithData = Array<PhysicsAffectedBodyWithData>();\r\n        const bodies = (<PhysicsEngineV2>this._physicsEngine).getBodies();\r\n        for (const body of bodies) {\r\n            body.iterateOverAllInstances((body, instanceIndex) => {\r\n                if (!event.getBodyHitData(body, origin, hitData, instanceIndex)) {\r\n                    return;\r\n                }\r\n                fnApplication(body, hitData);\r\n\r\n                if (useCallback) {\r\n                    affectedBodiesWithData.push({\r\n                        body: body,\r\n                        hitData: this._copyPhysicsHitData(hitData),\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        event.triggerAffectedBodiesCallback(affectedBodiesWithData);\r\n    }\r\n\r\n    /**\r\n     * Creates a gravitational field\r\n     * @param origin the origin of the gravitational field\r\n     * @param radiusOrEventOptions the radius or the options of radial gravitational field\r\n     * @param strength the gravitational field strength\r\n     * @param falloff possible options: Constant & Linear. Defaults to Constant\r\n     * @returns A physics gravitational field event, or null\r\n     */\r\n    public gravitationalField(\r\n        origin: Vector3,\r\n        radiusOrEventOptions: number | PhysicsRadialExplosionEventOptions,\r\n        strength?: number,\r\n        falloff?: PhysicsRadialImpulseFalloff\r\n    ): Nullable<PhysicsGravitationalFieldEvent> {\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you call the PhysicsHelper.\");\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1 && (<PhysicsEngineV1>this._physicsEngine).getImpostors().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 2 && (<PhysicsEngineV2>this._physicsEngine).getBodies().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (typeof radiusOrEventOptions === \"number\") {\r\n            const r = radiusOrEventOptions;\r\n            radiusOrEventOptions = new PhysicsRadialExplosionEventOptions();\r\n            radiusOrEventOptions.radius = r;\r\n            radiusOrEventOptions.strength = strength ?? radiusOrEventOptions.strength;\r\n            radiusOrEventOptions.falloff = falloff ?? radiusOrEventOptions.falloff;\r\n        }\r\n\r\n        const event = new PhysicsGravitationalFieldEvent(this, this._scene, origin, radiusOrEventOptions);\r\n\r\n        event.dispose(false);\r\n\r\n        return event;\r\n    }\r\n\r\n    /**\r\n     * Creates a physics updraft event\r\n     * @param origin the origin of the updraft\r\n     * @param radiusOrEventOptions the radius or the options of the updraft\r\n     * @param strength the strength of the updraft\r\n     * @param height the height of the updraft\r\n     * @param updraftMode possible options: Center & Perpendicular. Defaults to Center\r\n     * @returns A physics updraft event, or null\r\n     */\r\n    public updraft(\r\n        origin: Vector3,\r\n        radiusOrEventOptions: number | PhysicsUpdraftEventOptions,\r\n        strength?: number,\r\n        height?: number,\r\n        updraftMode?: PhysicsUpdraftMode\r\n    ): Nullable<PhysicsUpdraftEvent> {\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you call the PhysicsHelper.\");\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1 && (<PhysicsEngineV1>this._physicsEngine).getImpostors().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 2 && (<PhysicsEngineV2>this._physicsEngine).getBodies().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (typeof radiusOrEventOptions === \"number\") {\r\n            const r = radiusOrEventOptions;\r\n            radiusOrEventOptions = new PhysicsUpdraftEventOptions();\r\n            radiusOrEventOptions.radius = r;\r\n            radiusOrEventOptions.strength = strength ?? radiusOrEventOptions.strength;\r\n            radiusOrEventOptions.height = height ?? radiusOrEventOptions.height;\r\n            radiusOrEventOptions.updraftMode = updraftMode ?? radiusOrEventOptions.updraftMode;\r\n        }\r\n\r\n        const event = new PhysicsUpdraftEvent(this._scene, origin, radiusOrEventOptions);\r\n\r\n        event.dispose(false);\r\n\r\n        return event;\r\n    }\r\n\r\n    /**\r\n     * Creates a physics vortex event\r\n     * @param origin the of the vortex\r\n     * @param radiusOrEventOptions the radius or the options of the vortex\r\n     * @param strength the strength of the vortex\r\n     * @param height   the height of the vortex\r\n     * @returns a Physics vortex event, or null\r\n     * A physics vortex event or null\r\n     */\r\n    public vortex(origin: Vector3, radiusOrEventOptions: number | PhysicsVortexEventOptions, strength?: number, height?: number): Nullable<PhysicsVortexEvent> {\r\n        if (!this._physicsEngine) {\r\n            Logger.Warn(\"Physics engine not enabled. Please enable the physics before you call the PhysicsHelper.\");\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1 && (<PhysicsEngineV1>this._physicsEngine).getImpostors().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 2 && (<PhysicsEngineV2>this._physicsEngine).getBodies().length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (typeof radiusOrEventOptions === \"number\") {\r\n            const r = radiusOrEventOptions;\r\n            radiusOrEventOptions = new PhysicsVortexEventOptions();\r\n            radiusOrEventOptions.radius = r;\r\n            radiusOrEventOptions.strength = strength ?? radiusOrEventOptions.strength;\r\n            radiusOrEventOptions.height = height ?? radiusOrEventOptions.height;\r\n        }\r\n\r\n        const event = new PhysicsVortexEvent(this._scene, origin, radiusOrEventOptions);\r\n\r\n        event.dispose(false);\r\n\r\n        return event;\r\n    }\r\n\r\n    private _copyPhysicsHitData(data: PhysicsHitData): PhysicsHitData {\r\n        return { force: data.force.clone(), contactPoint: data.contactPoint.clone(), distanceFromOrigin: data.distanceFromOrigin, instanceIndex: data.instanceIndex };\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a physics radial explosion event\r\n */\r\nclass PhysicsRadialExplosionEvent {\r\n    private _sphere: Mesh; // create a sphere, so we can get the intersecting meshes inside\r\n    private _dataFetched: boolean = false; // check if the data has been fetched. If not, do cleanup\r\n\r\n    /**\r\n     * Initializes a radial explosion event\r\n     * @param _scene BabylonJS scene\r\n     * @param _options The options for the vortex event\r\n     */\r\n    constructor(\r\n        private _scene: Scene,\r\n        private _options: PhysicsRadialExplosionEventOptions\r\n    ) {\r\n        this._options = { ...new PhysicsRadialExplosionEventOptions(), ...this._options };\r\n    }\r\n\r\n    /**\r\n     * Returns the data related to the radial explosion event (sphere).\r\n     * @returns The radial explosion event data\r\n     */\r\n    public getData(): PhysicsRadialExplosionEventData {\r\n        this._dataFetched = true;\r\n\r\n        return {\r\n            sphere: this._sphere,\r\n        };\r\n    }\r\n\r\n    private _getHitData(mesh: AbstractMesh, center: Vector3, origin: Vector3, data: PhysicsHitData): boolean {\r\n        const direction = TmpVectors.Vector3[0];\r\n        direction.copyFrom(center).subtractInPlace(origin);\r\n\r\n        const contactPoint = TmpVectors.Vector3[1];\r\n        const hasContactPoint = HelperTools.GetContactPointToRef(mesh, origin, direction, contactPoint, data.instanceIndex);\r\n\r\n        if (!hasContactPoint) {\r\n            return false;\r\n        }\r\n\r\n        const distanceFromOrigin = Vector3.Distance(origin, contactPoint);\r\n        if (distanceFromOrigin > this._options.radius) {\r\n            return false;\r\n        }\r\n\r\n        const multiplier =\r\n            this._options.falloff === PhysicsRadialImpulseFalloff.Constant ? this._options.strength : this._options.strength * (1 - distanceFromOrigin / this._options.radius);\r\n\r\n        // Direction x multiplier equals force\r\n        direction.scaleInPlace(multiplier);\r\n\r\n        data.force.copyFrom(direction);\r\n        data.contactPoint.copyFrom(contactPoint);\r\n        data.distanceFromOrigin = distanceFromOrigin;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Returns the force and contact point of the body or false, if the body is not affected by the force/impulse.\r\n     * @param body A physics body where the transform node is an AbstractMesh\r\n     * @param origin the origin of the explosion\r\n     * @param data the data of the hit\r\n     * @param instanceIndex the instance index of the body\r\n     * @returns if there was a hit\r\n     */\r\n    public getBodyHitData(body: PhysicsBody, origin: Vector3, data: PhysicsHitData, instanceIndex?: number): boolean {\r\n        // No force will be applied in these cases, so we skip calculation\r\n        if (HelperTools.HasAppliedForces(body, instanceIndex)) {\r\n            return false;\r\n        }\r\n\r\n        const mesh = body.transformNode as AbstractMesh;\r\n        const bodyObjectCenter = body.getObjectCenterWorld(instanceIndex);\r\n        data.instanceIndex = instanceIndex;\r\n        return this._getHitData(mesh, bodyObjectCenter, origin, data);\r\n    }\r\n    /**\r\n     * Returns the force and contact point of the impostor or false, if the impostor is not affected by the force/impulse.\r\n     * @param impostor A physics imposter\r\n     * @param origin the origin of the explosion\r\n     * @param data the data of the hit\r\n     * @returns A physics force and contact point, or null\r\n     */\r\n    public getImpostorHitData(impostor: PhysicsImpostor, origin: Vector3, data: PhysicsHitData): boolean {\r\n        if (impostor.mass === 0) {\r\n            return false;\r\n        }\r\n\r\n        if (impostor.object.getClassName() !== \"Mesh\" && impostor.object.getClassName() !== \"InstancedMesh\") {\r\n            return false;\r\n        }\r\n\r\n        const mesh = impostor.object as AbstractMesh;\r\n        if (!this._intersectsWithSphere(mesh, origin, this._options.radius)) {\r\n            return false;\r\n        }\r\n\r\n        const impostorObjectCenter = impostor.getObjectCenter();\r\n\r\n        this._getHitData(mesh, impostorObjectCenter, origin, data);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Triggers affected impostors callbacks\r\n     * @param affectedImpostorsWithData defines the list of affected impostors (including associated data)\r\n     */\r\n    public triggerAffectedImpostorsCallback(affectedImpostorsWithData: Array<PhysicsAffectedImpostorWithData>) {\r\n        if (this._options.affectedImpostorsCallback) {\r\n            this._options.affectedImpostorsCallback(affectedImpostorsWithData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggers affected bodies callbacks\r\n     * @param affectedBodiesWithData defines the list of affected bodies (including associated data)\r\n     */\r\n    public triggerAffectedBodiesCallback(affectedBodiesWithData: Array<PhysicsAffectedBodyWithData>) {\r\n        if (this._options.affectedBodiesCallback) {\r\n            this._options.affectedBodiesCallback(affectedBodiesWithData);\r\n        }\r\n    }\r\n    /**\r\n     * Disposes the sphere.\r\n     * @param force Specifies if the sphere should be disposed by force\r\n     */\r\n    public dispose(force: boolean = true) {\r\n        if (this._sphere) {\r\n            if (force) {\r\n                this._sphere.dispose();\r\n            } else {\r\n                setTimeout(() => {\r\n                    if (!this._dataFetched) {\r\n                        this._sphere.dispose();\r\n                    }\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    /*** Helpers ***/\r\n\r\n    private _prepareSphere(): void {\r\n        if (!this._sphere) {\r\n            this._sphere = CreateSphere(\"radialExplosionEventSphere\", this._options.sphere, this._scene);\r\n            this._sphere.isVisible = false;\r\n        }\r\n    }\r\n\r\n    private _intersectsWithSphere(mesh: AbstractMesh, origin: Vector3, radius: number): boolean {\r\n        this._prepareSphere();\r\n\r\n        this._sphere.position = origin;\r\n        this._sphere.scaling.setAll(radius * 2);\r\n        this._sphere._updateBoundingInfo();\r\n        this._sphere.computeWorldMatrix(true);\r\n\r\n        return this._sphere.intersectsMesh(mesh, true);\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a gravitational field event\r\n */\r\nclass PhysicsGravitationalFieldEvent {\r\n    private _tickCallback: any;\r\n    private _sphere: Mesh;\r\n    private _dataFetched: boolean = false; // check if the has been fetched the data. If not, do cleanup\r\n\r\n    /**\r\n     * Initializes the physics gravitational field event\r\n     * @param _physicsHelper A physics helper\r\n     * @param _scene BabylonJS scene\r\n     * @param _origin The origin position of the gravitational field event\r\n     * @param _options The options for the vortex event\r\n     */\r\n    constructor(\r\n        private _physicsHelper: PhysicsHelper,\r\n        private _scene: Scene,\r\n        private _origin: Vector3,\r\n        private _options: PhysicsRadialExplosionEventOptions\r\n    ) {\r\n        this._options = { ...new PhysicsRadialExplosionEventOptions(), ...this._options };\r\n\r\n        this._tickCallback = () => this._tick();\r\n\r\n        this._options.strength = this._options.strength * -1;\r\n    }\r\n\r\n    /**\r\n     * Returns the data related to the gravitational field event (sphere).\r\n     * @returns A gravitational field event\r\n     */\r\n    public getData(): PhysicsGravitationalFieldEventData {\r\n        this._dataFetched = true;\r\n\r\n        return {\r\n            sphere: this._sphere,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Enables the gravitational field.\r\n     */\r\n    public enable() {\r\n        this._tickCallback.call(this);\r\n        this._scene.registerBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disables the gravitational field.\r\n     */\r\n    public disable() {\r\n        this._scene.unregisterBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disposes the sphere.\r\n     * @param force The force to dispose from the gravitational field event\r\n     */\r\n    public dispose(force: boolean = true) {\r\n        if (!this._sphere) {\r\n            return;\r\n        }\r\n        if (force) {\r\n            this._sphere.dispose();\r\n        } else {\r\n            setTimeout(() => {\r\n                if (!this._dataFetched) {\r\n                    this._sphere.dispose();\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    private _tick() {\r\n        // Since the params won't change, we fetch the event only once\r\n        if (this._sphere) {\r\n            this._physicsHelper.applyRadialExplosionForce(this._origin, this._options);\r\n        } else {\r\n            const radialExplosionEvent = this._physicsHelper.applyRadialExplosionForce(this._origin, this._options);\r\n            if (radialExplosionEvent) {\r\n                this._sphere = radialExplosionEvent.getData().sphere?.clone(\"radialExplosionEventSphereClone\");\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a physics updraft event\r\n */\r\nclass PhysicsUpdraftEvent {\r\n    private _physicsEngine: PhysicsEngineV1 | PhysicsEngineV2;\r\n    private _originTop: Vector3 = Vector3.Zero(); // the most upper part of the cylinder\r\n    private _originDirection: Vector3 = Vector3.Zero(); // used if the updraftMode is perpendicular\r\n    private _tickCallback: any;\r\n    private _cylinder: Mesh | undefined;\r\n    private _cylinderPosition: Vector3 = Vector3.Zero(); // to keep the cylinders position, because normally the origin is in the center and not on the bottom\r\n    private _dataFetched: boolean = false; // check if the has been fetched the data. If not, do cleanup\r\n    private static _HitData: PhysicsHitData = { force: new Vector3(), contactPoint: new Vector3(), distanceFromOrigin: 0 };\r\n    /**\r\n     * Initializes the physics updraft event\r\n     * @param _scene BabylonJS scene\r\n     * @param _origin The origin position of the updraft\r\n     * @param _options The options for the updraft event\r\n     */\r\n    constructor(\r\n        private _scene: Scene,\r\n        private _origin: Vector3,\r\n        private _options: PhysicsUpdraftEventOptions\r\n    ) {\r\n        this._physicsEngine = this._scene.getPhysicsEngine() as PhysicsEngineV1 | PhysicsEngineV2;\r\n        this._options = { ...new PhysicsUpdraftEventOptions(), ...this._options };\r\n\r\n        this._origin.addToRef(new Vector3(0, this._options.height / 2, 0), this._cylinderPosition);\r\n        this._origin.addToRef(new Vector3(0, this._options.height, 0), this._originTop);\r\n\r\n        if (this._options.updraftMode === PhysicsUpdraftMode.Perpendicular) {\r\n            this._originDirection = this._origin.subtract(this._originTop).normalize();\r\n        }\r\n\r\n        this._tickCallback = () => this._tick();\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            this._prepareCylinder();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the data related to the updraft event (cylinder).\r\n     * @returns A physics updraft event\r\n     */\r\n    public getData(): PhysicsUpdraftEventData {\r\n        this._dataFetched = true;\r\n\r\n        return {\r\n            cylinder: this._cylinder,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Enables the updraft.\r\n     */\r\n    public enable() {\r\n        this._tickCallback.call(this);\r\n        this._scene.registerBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disables the updraft.\r\n     */\r\n    public disable() {\r\n        this._scene.unregisterBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disposes the cylinder.\r\n     * @param force Specifies if the updraft should be disposed by force\r\n     */\r\n    public dispose(force: boolean = true) {\r\n        if (!this._cylinder) {\r\n            return;\r\n        }\r\n        if (force) {\r\n            this._cylinder.dispose();\r\n            this._cylinder = undefined;\r\n        } else {\r\n            setTimeout(() => {\r\n                if (!this._dataFetched && this._cylinder) {\r\n                    this._cylinder.dispose();\r\n                    this._cylinder = undefined;\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    private _getHitData(center: Vector3, data: PhysicsHitData): void {\r\n        let direction: Vector3;\r\n        if (this._options.updraftMode === PhysicsUpdraftMode.Perpendicular) {\r\n            direction = this._originDirection;\r\n        } else {\r\n            direction = center.subtract(this._originTop);\r\n        }\r\n\r\n        const distanceFromOrigin = Vector3.Distance(this._origin, center);\r\n\r\n        const multiplier = this._options.strength * -1;\r\n\r\n        const force = direction.multiplyByFloats(multiplier, multiplier, multiplier);\r\n\r\n        data.force.copyFrom(force);\r\n        data.contactPoint.copyFrom(center);\r\n        data.distanceFromOrigin = distanceFromOrigin;\r\n    }\r\n\r\n    private _getBodyHitData(body: PhysicsBody, data: PhysicsHitData, instanceIndex?: number): boolean {\r\n        if (HelperTools.HasAppliedForces(body)) {\r\n            return false;\r\n        }\r\n\r\n        const center = body.getObjectCenterWorld(instanceIndex);\r\n\r\n        if (!HelperTools.IsInsideCylinder(center, this._origin, this._options.radius, this._options.height)) {\r\n            return false;\r\n        }\r\n\r\n        data.instanceIndex = instanceIndex;\r\n        this._getHitData(center, data);\r\n        return true;\r\n    }\r\n\r\n    private _getImpostorHitData(impostor: PhysicsImpostor, data: PhysicsHitData): boolean {\r\n        if (impostor.mass === 0) {\r\n            return false;\r\n        }\r\n\r\n        const impostorObject = <AbstractMesh>impostor.object;\r\n        if (!this._intersectsWithCylinder(impostorObject)) {\r\n            return false;\r\n        }\r\n\r\n        const center = impostor.getObjectCenter();\r\n        this._getHitData(center, data);\r\n        return true;\r\n    }\r\n\r\n    private _tick() {\r\n        const hitData = PhysicsUpdraftEvent._HitData;\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            const impostors = (<PhysicsEngineV1>this._physicsEngine).getImpostors();\r\n            for (const impostor of impostors) {\r\n                if (!this._getImpostorHitData(impostor, hitData)) {\r\n                    continue;\r\n                }\r\n\r\n                impostor.applyForce(hitData.force, hitData.contactPoint);\r\n            }\r\n        } else {\r\n            // V2\r\n            const bodies = (<PhysicsEngineV2>this._physicsEngine).getBodies();\r\n            for (const body of bodies) {\r\n                body.iterateOverAllInstances((body, instanceIndex) => {\r\n                    if (!this._getBodyHitData(body, hitData, instanceIndex)) {\r\n                        return;\r\n                    }\r\n\r\n                    body.applyForce(hitData.force, hitData.contactPoint, hitData.instanceIndex);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /*** Helpers ***/\r\n\r\n    private _prepareCylinder(): void {\r\n        if (!this._cylinder) {\r\n            this._cylinder = CreateCylinder(\r\n                \"updraftEventCylinder\",\r\n                {\r\n                    height: this._options.height,\r\n                    diameter: this._options.radius * 2,\r\n                },\r\n                this._scene\r\n            );\r\n            this._cylinder.isVisible = false;\r\n        }\r\n    }\r\n\r\n    private _intersectsWithCylinder(mesh: AbstractMesh): boolean {\r\n        if (!this._cylinder) {\r\n            return false;\r\n        }\r\n        this._cylinder.position = this._cylinderPosition;\r\n        return this._cylinder.intersectsMesh(mesh, true);\r\n    }\r\n}\r\n\r\n/**\r\n * Represents a physics vortex event\r\n */\r\nclass PhysicsVortexEvent {\r\n    private _physicsEngine: PhysicsEngineV1 | PhysicsEngineV2;\r\n    private _originTop: Vector3 = Vector3.Zero(); // the most upper part of the cylinder\r\n    private _tickCallback: any;\r\n    private _cylinder: Mesh;\r\n    private _cylinderPosition: Vector3 = Vector3.Zero(); // to keep the cylinders position, because normally the origin is in the center and not on the bottom\r\n    private _dataFetched: boolean = false; // check if the has been fetched the data. If not, do cleanup\r\n    private static _OriginOnPlane: Vector3 = Vector3.Zero();\r\n    private static _HitData: PhysicsHitData = { force: new Vector3(), contactPoint: new Vector3(), distanceFromOrigin: 0 };\r\n\r\n    /**\r\n     * Initializes the physics vortex event\r\n     * @param _scene The BabylonJS scene\r\n     * @param _origin The origin position of the vortex\r\n     * @param _options The options for the vortex event\r\n     */\r\n    constructor(\r\n        private _scene: Scene,\r\n        private _origin: Vector3,\r\n        private _options: PhysicsVortexEventOptions\r\n    ) {\r\n        this._physicsEngine = this._scene.getPhysicsEngine() as PhysicsEngineV1 | PhysicsEngineV2;\r\n        this._options = { ...new PhysicsVortexEventOptions(), ...this._options };\r\n\r\n        this._origin.addToRef(new Vector3(0, this._options.height / 2, 0), this._cylinderPosition);\r\n        this._origin.addToRef(new Vector3(0, this._options.height, 0), this._originTop);\r\n\r\n        this._tickCallback = () => this._tick();\r\n\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            this._prepareCylinder();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the data related to the vortex event (cylinder).\r\n     * @returns The physics vortex event data\r\n     */\r\n    public getData(): PhysicsVortexEventData {\r\n        this._dataFetched = true;\r\n\r\n        return {\r\n            cylinder: this._cylinder,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Enables the vortex.\r\n     */\r\n    public enable() {\r\n        this._tickCallback.call(this);\r\n        this._scene.registerBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disables the cortex.\r\n     */\r\n    public disable() {\r\n        this._scene.unregisterBeforeRender(this._tickCallback);\r\n    }\r\n\r\n    /**\r\n     * Disposes the sphere.\r\n     * @param force\r\n     */\r\n    public dispose(force: boolean = true) {\r\n        if (!this._cylinder) {\r\n            return;\r\n        }\r\n        if (force) {\r\n            this._cylinder.dispose();\r\n        } else {\r\n            setTimeout(() => {\r\n                if (!this._dataFetched) {\r\n                    this._cylinder.dispose();\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    private _getHitData(mesh: AbstractMesh, center: Vector3, data: PhysicsHitData): boolean {\r\n        const originOnPlane = PhysicsVortexEvent._OriginOnPlane;\r\n        originOnPlane.set(this._origin.x, center.y, this._origin.z); // the distance to the origin as if both objects were on a plane (Y-axis)\r\n        const originToImpostorDirection = TmpVectors.Vector3[0];\r\n        center.subtractToRef(originOnPlane, originToImpostorDirection);\r\n\r\n        const contactPoint = TmpVectors.Vector3[1];\r\n        const hasContactPoint = HelperTools.GetContactPointToRef(mesh, originOnPlane, originToImpostorDirection, contactPoint, data.instanceIndex);\r\n        if (!hasContactPoint) {\r\n            return false;\r\n        }\r\n        const distance = Vector3.Distance(contactPoint, originOnPlane);\r\n        const absoluteDistanceFromOrigin = distance / this._options.radius;\r\n\r\n        const directionToOrigin = TmpVectors.Vector3[2];\r\n        contactPoint.normalizeToRef(directionToOrigin);\r\n        if (absoluteDistanceFromOrigin > this._options.centripetalForceThreshold) {\r\n            directionToOrigin.negateInPlace();\r\n        }\r\n\r\n        let forceX: number;\r\n        let forceY: number;\r\n        let forceZ: number;\r\n\r\n        if (absoluteDistanceFromOrigin > this._options.centripetalForceThreshold) {\r\n            forceX = directionToOrigin.x * this._options.centripetalForceMultiplier;\r\n            forceY = directionToOrigin.y * this._options.updraftForceMultiplier;\r\n            forceZ = directionToOrigin.z * this._options.centripetalForceMultiplier;\r\n        } else {\r\n            const perpendicularDirection = Vector3.Cross(originOnPlane, center).normalize();\r\n\r\n            forceX = (perpendicularDirection.x + directionToOrigin.x) * this._options.centrifugalForceMultiplier;\r\n            forceY = this._originTop.y * this._options.updraftForceMultiplier;\r\n            forceZ = (perpendicularDirection.z + directionToOrigin.z) * this._options.centrifugalForceMultiplier;\r\n        }\r\n\r\n        const force = TmpVectors.Vector3[3];\r\n        force.set(forceX, forceY, forceZ);\r\n        force.scaleInPlace(this._options.strength);\r\n\r\n        data.force.copyFrom(force);\r\n        data.contactPoint.copyFrom(center);\r\n        data.distanceFromOrigin = absoluteDistanceFromOrigin;\r\n        return true;\r\n    }\r\n\r\n    private _getBodyHitData(body: PhysicsBody, data: PhysicsHitData, instanceIndex?: number): boolean {\r\n        if (HelperTools.HasAppliedForces(body, instanceIndex)) {\r\n            return false;\r\n        }\r\n\r\n        const bodyObject = body.transformNode as AbstractMesh;\r\n        const bodyCenter = body.getObjectCenterWorld(instanceIndex);\r\n\r\n        if (!HelperTools.IsInsideCylinder(bodyCenter, this._origin, this._options.radius, this._options.height)) {\r\n            return false;\r\n        }\r\n\r\n        data.instanceIndex = instanceIndex;\r\n        return this._getHitData(bodyObject, bodyCenter, data);\r\n    }\r\n\r\n    private _getImpostorHitData(impostor: PhysicsImpostor, data: PhysicsHitData): boolean {\r\n        if (impostor.mass === 0) {\r\n            return false;\r\n        }\r\n\r\n        if (impostor.object.getClassName() !== \"Mesh\" && impostor.object.getClassName() !== \"InstancedMesh\") {\r\n            return false;\r\n        }\r\n\r\n        const impostorObject = impostor.object as AbstractMesh;\r\n        if (!this._intersectsWithCylinder(impostorObject)) {\r\n            return false;\r\n        }\r\n\r\n        const impostorObjectCenter = impostor.getObjectCenter();\r\n        this._getHitData(impostorObject, impostorObjectCenter, data);\r\n        return true;\r\n    }\r\n\r\n    private _tick() {\r\n        const hitData = PhysicsVortexEvent._HitData;\r\n        if (this._physicsEngine.getPluginVersion() === 1) {\r\n            const impostors = (<PhysicsEngineV1>this._physicsEngine).getImpostors();\r\n            for (const impostor of impostors) {\r\n                if (!this._getImpostorHitData(impostor, hitData)) {\r\n                    continue;\r\n                }\r\n\r\n                impostor.applyForce(hitData.force, hitData.contactPoint);\r\n            }\r\n        } else {\r\n            const bodies = (<PhysicsEngineV2>this._physicsEngine).getBodies();\r\n            for (const body of bodies) {\r\n                body.iterateOverAllInstances((body: PhysicsBody, instanceIndex?: number) => {\r\n                    if (!this._getBodyHitData(body, hitData, instanceIndex)) {\r\n                        return;\r\n                    }\r\n\r\n                    body.applyForce(hitData.force, hitData.contactPoint, hitData.instanceIndex);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /*** Helpers ***/\r\n\r\n    private _prepareCylinder(): void {\r\n        if (!this._cylinder) {\r\n            this._cylinder = CreateCylinder(\r\n                \"vortexEventCylinder\",\r\n                {\r\n                    height: this._options.height,\r\n                    diameter: this._options.radius * 2,\r\n                },\r\n                this._scene\r\n            );\r\n            this._cylinder.isVisible = false;\r\n        }\r\n    }\r\n\r\n    private _intersectsWithCylinder(mesh: AbstractMesh): boolean {\r\n        this._cylinder.position = this._cylinderPosition;\r\n\r\n        return this._cylinder.intersectsMesh(mesh, true);\r\n    }\r\n}\r\n\r\n/**\r\n * Options fot the radial explosion event\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport class PhysicsRadialExplosionEventOptions {\r\n    /**\r\n     * The radius of the sphere for the radial explosion.\r\n     */\r\n    radius: number = 5;\r\n\r\n    /**\r\n     * The strength of the explosion.\r\n     */\r\n    strength: number = 10;\r\n\r\n    /**\r\n     * The strength of the force in correspondence to the distance of the affected object\r\n     */\r\n    falloff: PhysicsRadialImpulseFalloff = PhysicsRadialImpulseFalloff.Constant;\r\n\r\n    /**\r\n     * Sphere options for the radial explosion.\r\n     */\r\n    sphere: { segments: number; diameter: number } = { segments: 32, diameter: 1 };\r\n\r\n    /**\r\n     * Sphere options for the radial explosion.\r\n     */\r\n    affectedImpostorsCallback: (affectedImpostorsWithData: Array<PhysicsAffectedImpostorWithData>) => void;\r\n\r\n    /**\r\n     * Sphere options for the radial explosion.\r\n     */\r\n    affectedBodiesCallback: (affectedBodiesWithData: Array<PhysicsAffectedBodyWithData>) => void;\r\n}\r\n\r\n/**\r\n * Options fot the updraft event\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport class PhysicsUpdraftEventOptions {\r\n    /**\r\n     * The radius of the cylinder for the vortex\r\n     */\r\n    radius: number = 5;\r\n\r\n    /**\r\n     * The strength of the updraft.\r\n     */\r\n    strength: number = 10;\r\n\r\n    /**\r\n     * The height of the cylinder for the updraft.\r\n     */\r\n    height: number = 10;\r\n\r\n    /**\r\n     * The mode for the updraft.\r\n     */\r\n    updraftMode: PhysicsUpdraftMode = PhysicsUpdraftMode.Center;\r\n}\r\n\r\n/**\r\n * Options fot the vortex event\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport class PhysicsVortexEventOptions {\r\n    /**\r\n     * The radius of the cylinder for the vortex\r\n     */\r\n    radius: number = 5;\r\n\r\n    /**\r\n     * The strength of the vortex.\r\n     */\r\n    strength: number = 10;\r\n\r\n    /**\r\n     * The height of the cylinder for the vortex.\r\n     */\r\n    height: number = 10;\r\n\r\n    /**\r\n     * At which distance, relative to the radius the centripetal forces should kick in? Range: 0-1\r\n     */\r\n    centripetalForceThreshold: number = 0.7;\r\n\r\n    /**\r\n     * This multiplier determines with how much force the objects will be pushed sideways/around the vortex, when below the threshold.\r\n     */\r\n    centripetalForceMultiplier: number = 5;\r\n\r\n    /**\r\n     * This multiplier determines with how much force the objects will be pushed sideways/around the vortex, when above the threshold.\r\n     */\r\n    centrifugalForceMultiplier: number = 0.5;\r\n\r\n    /**\r\n     * This multiplier determines with how much force the objects will be pushed upwards, when in the vortex.\r\n     */\r\n    updraftForceMultiplier: number = 0.02;\r\n}\r\n\r\n/**\r\n * The strength of the force in correspondence to the distance of the affected object\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport const enum PhysicsRadialImpulseFalloff {\r\n    /** Defines that impulse is constant in strength across it's whole radius */\r\n    Constant,\r\n    /** Defines that impulse gets weaker if it's further from the origin */\r\n    Linear,\r\n}\r\n\r\n/**\r\n * The strength of the force in correspondence to the distance of the affected object\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\nexport const enum PhysicsUpdraftMode {\r\n    /** Defines that the upstream forces will pull towards the top center of the cylinder */\r\n    Center,\r\n    /** Defines that once a impostor is inside the cylinder, it will shoot out perpendicular from the ground of the cylinder */\r\n    Perpendicular,\r\n}\r\n\r\n/**\r\n * Interface for a physics hit data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsHitData {\r\n    /**\r\n     * The force applied at the contact point\r\n     */\r\n    force: Vector3;\r\n    /**\r\n     * The contact point\r\n     */\r\n    contactPoint: Vector3;\r\n    /**\r\n     * The distance from the origin to the contact point\r\n     */\r\n    distanceFromOrigin: number;\r\n    /**\r\n     * For an instanced physics body (mesh with thin instances), the index of the thin instance the hit applies to\r\n     */\r\n    instanceIndex?: number;\r\n}\r\n\r\n/**\r\n * Interface for radial explosion event data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsRadialExplosionEventData {\r\n    /**\r\n     * A sphere used for the radial explosion event\r\n     */\r\n    sphere: Mesh;\r\n}\r\n\r\n/**\r\n * Interface for gravitational field event data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsGravitationalFieldEventData {\r\n    /**\r\n     * A sphere mesh used for the gravitational field event\r\n     */\r\n    sphere: Mesh;\r\n}\r\n\r\n/**\r\n * Interface for updraft event data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsUpdraftEventData {\r\n    /**\r\n     * A cylinder used for the updraft event\r\n     */\r\n    cylinder?: Mesh;\r\n}\r\n\r\n/**\r\n * Interface for vortex event data\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsVortexEventData {\r\n    /**\r\n     * A cylinder used for the vortex event\r\n     */\r\n    cylinder: Mesh;\r\n}\r\n\r\n/**\r\n * Interface for an affected physics impostor\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/physics/usingPhysicsEngine#further-functionality-of-the-impostor-class\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsAffectedImpostorWithData {\r\n    /**\r\n     * The impostor affected by the effect\r\n     */\r\n    impostor: PhysicsImpostor;\r\n\r\n    /**\r\n     * The data about the hit/force from the explosion\r\n     */\r\n    hitData: PhysicsHitData;\r\n}\r\n\r\n/**\r\n * Interface for an affected physics body\r\n * @see\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport interface PhysicsAffectedBodyWithData {\r\n    /**\r\n     * The impostor affected by the effect\r\n     */\r\n    body: PhysicsBody;\r\n\r\n    /**\r\n     * The data about the hit/force from the explosion\r\n     */\r\n    hitData: PhysicsHitData;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11065, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/proximityCastResult.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/proximityCastResult.ts"],"sourcesContent":["import { CastingResult } from \"./castingResult\";\r\n\r\n/**\r\n * Class representing a contact point produced in a proximity cast\r\n */\r\nexport class ProximityCastResult extends CastingResult {\r\n    protected _hitDistance: number = 0;\r\n\r\n    /**\r\n     * Gets the distance from the hit\r\n     */\r\n    get hitDistance(): number {\r\n        return this._hitDistance;\r\n    }\r\n\r\n    /**\r\n     * Sets the distance from the start point to the hit point\r\n     * @param distance\r\n     */\r\n    public setHitDistance(distance: number) {\r\n        this._hitDistance = distance;\r\n    }\r\n\r\n    /**\r\n     * Resets all the values to default\r\n     */\r\n    public override reset() {\r\n        super.reset();\r\n        this._hitDistance = 0;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;;AAK1C,MAAO,mBAAoB,SAAQ,oPAAa;IAAtD,aAAA;;QACc,IAAA,CAAA,YAAY,GAAW,CAAC,CAAC;IAwBvC,CAAC;IAtBG;;OAEG,CACH,IAAI,WAAW,GAAA;QACX,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;OAGG,CACI,cAAc,CAAC,QAAgB,EAAA;QAClC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,CAAC;IAED;;OAEG,CACa,KAAK,GAAA;QACjB,KAAK,CAAC,KAAK,EAAE,CAAC;QACd,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;IAC1B,CAAC;CACJ"}},
    {"offset": {"line": 11098, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/physicsPointProximityQuery.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/physicsPointProximityQuery.ts"],"sourcesContent":["import type { Vector3 } from \"../Maths/math.vector\";\r\nimport type { IRaycastQuery } from \"./physicsRaycastResult\";\r\nimport type { PhysicsBody } from \"./v2/physicsBody\";\r\n\r\n/**\r\n * Interface for point proximity query.\r\n */\r\nexport interface IPhysicsPointProximityQuery {\r\n    /**\r\n     * The position of the query\r\n     */\r\n    position: Vector3;\r\n    /**\r\n     * Maximum distance to check for collisions. Can be set to 0 to check for overlaps.\r\n     */\r\n    maxDistance: number;\r\n    /**\r\n     * Collision filter for the query.\r\n     */\r\n    collisionFilter: IRaycastQuery;\r\n    /**\r\n     * Should trigger collisions be considered in the query?\r\n     */\r\n    shouldHitTriggers: boolean;\r\n    /**\r\n     * Should the query ignore the body that is passed in?\r\n     */\r\n    ignoreBody?: PhysicsBody;\r\n}\r\n"],"names":[],"mappings":""}},
    {"offset": {"line": 11105, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/physicsShapeProximityCastQuery.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/physicsShapeProximityCastQuery.ts"],"sourcesContent":["import type { Quaternion, Vector3 } from \"../Maths/math.vector\";\r\nimport type { PhysicsShape } from \"./v2/physicsShape\";\r\nimport type { PhysicsBody } from \"./v2/physicsBody\";\r\n\r\n/**\r\n * Query for shape proximity.\r\n */\r\nexport interface IPhysicsShapeProximityCastQuery {\r\n    /**\r\n     * The shape to test proximity against\r\n     */\r\n    shape: PhysicsShape;\r\n    /**\r\n     * The position of shape\r\n     */\r\n    position: Vector3;\r\n    /**\r\n     * The rotation of shape\r\n     */\r\n    rotation: Quaternion;\r\n    /**\r\n     * Maximum distance to check for collisions. Can be set to 0 to check for overlaps.\r\n     */\r\n    maxDistance: number;\r\n    /**\r\n     * Should trigger collisions be considered in the query?\r\n     */\r\n    shouldHitTriggers: boolean;\r\n    /**\r\n     * Ignores the body passed if it is in the query\r\n     */\r\n    ignoreBody?: PhysicsBody;\r\n}\r\n"],"names":[],"mappings":""}},
    {"offset": {"line": 11112, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/shapeCastResult.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/shapeCastResult.ts"],"sourcesContent":["import { CastingResult } from \"./castingResult\";\r\n\r\n/**\r\n * Class representing a contact point produced in a shape cast\r\n */\r\nexport class ShapeCastResult extends CastingResult {\r\n    private _hitFraction: number = 0;\r\n\r\n    /**\r\n     * Gets the hit fraction along the casting ray\r\n     */\r\n    get hitFraction(): number {\r\n        return this._hitFraction;\r\n    }\r\n\r\n    /**\r\n     * Sets the hit fraction along the casting ray\r\n     * @param fraction\r\n     */\r\n    public setHitFraction(fraction: number) {\r\n        this._hitFraction = fraction;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;;AAK1C,MAAO,eAAgB,SAAQ,oPAAa;IAAlD,aAAA;;QACY,IAAA,CAAA,YAAY,GAAW,CAAC,CAAC;IAgBrC,CAAC;IAdG;;OAEG,CACH,IAAI,WAAW,GAAA;QACX,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;OAGG,CACI,cAAc,CAAC,QAAgB,EAAA;QAClC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,CAAC;CACJ"}},
    {"offset": {"line": 11139, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/Physics/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/Physics/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./v1/index\";\r\nexport * from \"./v2/index\";\r\nexport * from \"./physicsEngineComponent\";\r\nexport * from \"./v1/physicsEngineComponent\";\r\nexport * from \"./physicsHelper\";\r\nexport * from \"./physicsRaycastResult\";\r\nexport * from \"./proximityCastResult\";\r\nexport * from \"./physicsPointProximityQuery\";\r\nexport * from \"./physicsShapeProximityCastQuery\";\r\nexport * from \"./shapeCastResult\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,cAAc,YAAY,CAAC;AAC3B,cAAc,YAAY,CAAC;AAC3B,cAAc,0BAA0B,CAAC;AACzC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,iBAAiB,CAAC;AAChC,cAAc,wBAAwB,CAAC;AACvC,cAAc,uBAAuB,CAAC;AACtC,cAAc,8BAA8B,CAAC;AAC7C,cAAc,kCAAkC,CAAC;AACjD,cAAc,mBAAmB,CAAC"}}]
}