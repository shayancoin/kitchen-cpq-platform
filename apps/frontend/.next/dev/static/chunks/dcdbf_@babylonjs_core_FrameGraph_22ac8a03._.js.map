{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphTypes.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphTypes.ts"],"sourcesContent":["import type { Nullable, TextureSize, FrameGraphContext } from \"core/index\";\r\n\r\n/**\r\n * Represents a texture handle in the frame graph.\r\n */\r\nexport type FrameGraphTextureHandle = number;\r\n\r\n/**\r\n * Represents a texture handle for the backbuffer color texture.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport const backbufferColorTextureHandle: FrameGraphTextureHandle = 0;\r\n\r\n/**\r\n * Represents a texture handle for the backbuffer depth/stencil texture.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexport const backbufferDepthStencilTextureHandle: FrameGraphTextureHandle = 1;\r\n\r\n/**\r\n * Options used to describe a texture to be created in the frame graph.\r\n */\r\nexport type FrameGraphTextureOptions = {\r\n    /** Specifies if mipmaps must be created for the textures (default: false) */\r\n    createMipMaps?: boolean;\r\n\r\n    /** Defines sample count (default: 1) */\r\n    samples?: number;\r\n\r\n    /** Defines the types of the textures */\r\n    types?: number[];\r\n\r\n    /** Defines the format of the textures (RED, RG, RGB, RGBA, ALPHA...) */\r\n    formats?: number[];\r\n\r\n    /** Defines if sRGB format should be used for each of texture */\r\n    useSRGBBuffers?: boolean[];\r\n\r\n    /** Defines the creation flags of the textures (Constants.TEXTURE_CREATIONFLAG_STORAGE for storage textures, for eg) */\r\n    creationFlags?: number[];\r\n\r\n    /** Defines the names of the textures (used for debugging purpose) */\r\n    labels?: string[];\r\n};\r\n\r\n/**\r\n * Options used to create a texture / list of textures in the frame graph.\r\n */\r\nexport type FrameGraphTextureCreationOptions = {\r\n    /** Size of the textures. If sizeIsPercentage is true, these are percentages relative to the screen size (100 = 100%) */\r\n    size: TextureSize;\r\n\r\n    /** Options used to create the textures */\r\n    options: FrameGraphTextureOptions;\r\n\r\n    /** If true, indicates that \"size\" is percentages relative to the screen size */\r\n    sizeIsPercentage: boolean;\r\n\r\n    /** Indicates that the texture is a history texture (default: false) */\r\n    isHistoryTexture?: boolean;\r\n};\r\n\r\n/**\r\n * Represents a texture description in the frame graph.\r\n * This is basically the same thing than FrameGraphTextureCreationOptions, but the size is never in percentage and always in pixels.\r\n */\r\nexport type FrameGraphTextureDescription = {\r\n    /** Size of the texture */\r\n    size: { width: number; height: number };\r\n\r\n    /** Options used to create the texture */\r\n    options: FrameGraphTextureOptions;\r\n};\r\n\r\n/**\r\n * Defines a pass in the frame graph.\r\n */\r\nexport interface IFrameGraphPass {\r\n    /**\r\n     * The name of the pass.\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * Whether the pass is disabled.\r\n     */\r\n    disabled: boolean;\r\n\r\n    /**\r\n     * Sets the function to execute when the pass is executed\r\n     * @param func The function to execute when the pass is executed\r\n     */\r\n    setExecuteFunc(func: (context: FrameGraphContext) => void): void;\r\n\r\n    /** @internal */\r\n    _execute(): void;\r\n\r\n    /** @internal */\r\n    _isValid(): Nullable<string>;\r\n\r\n    /** @internal */\r\n    _dispose(): void;\r\n}\r\n"],"names":[],"mappings":"AAOA;;GAEG,CACH,gEAAgE;;;;;;;AACzD,MAAM,4BAA4B,GAA4B,CAAC,CAAC;AAMhE,MAAM,mCAAmC,GAA4B,CAAC,CAAC"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Passes/pass.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Passes/pass.ts"],"sourcesContent":["import type { Nullable, FrameGraphContext, IFrameGraphPass, FrameGraphTask } from \"core/index\";\r\n\r\n/**\r\n * Base class for a frame graph pass.\r\n */\r\nexport class FrameGraphPass<T extends FrameGraphContext> implements IFrameGraphPass {\r\n    private _executeFunc: (context: T) => void;\r\n\r\n    /**\r\n     * Whether the pass is disabled. Disabled passes will be skipped during execution.\r\n     */\r\n    public disabled = false;\r\n\r\n    /** @internal */\r\n    constructor(\r\n        public name: string,\r\n        protected readonly _parentTask: FrameGraphTask,\r\n        protected readonly _context: T\r\n    ) {}\r\n\r\n    /**\r\n     * Executes the pass.\r\n     * @param func The function to execute for the pass.\r\n     */\r\n    public setExecuteFunc(func: (context: T) => void) {\r\n        this._executeFunc = func;\r\n    }\r\n\r\n    /** @internal */\r\n    public _execute() {\r\n        if (!this.disabled) {\r\n            this._executeFunc(this._context);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _isValid(): Nullable<string> {\r\n        return this._executeFunc !== undefined ? null : \"Execute function is not set (call setExecuteFunc to set it)\";\r\n    }\r\n\r\n    /** @internal */\r\n    public _dispose() {}\r\n}\r\n"],"names":[],"mappings":"AAEA;;GAEG;;;;AACG,MAAO,cAAc;IAQvB,cAAA,EAAgB,CAChB,YACW,IAAY,EACA,WAA2B,EAC3B,QAAW,CAAA;QAFvB,IAAA,CAAA,IAAI,GAAJ,IAAI,CAAQ;QACA,IAAA,CAAA,WAAW,GAAX,WAAW,CAAgB;QAC3B,IAAA,CAAA,QAAQ,GAAR,QAAQ,CAAG;QATlC;;WAEG,CACI,IAAA,CAAA,QAAQ,GAAG,KAAK,CAAC;IAOrB,CAAC;IAEJ;;;OAGG,CACI,cAAc,CAAC,IAA0B,EAAA;QAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IAC7B,CAAC;IAED,cAAA,EAAgB,CACT,QAAQ,GAAA;QACX,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACjB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,CAAC;IACL,CAAC;IAED,cAAA,EAAgB,CACT,QAAQ,GAAA;QACX,OAAO,IAAI,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,6DAA6D,CAAC;IAClH,CAAC;IAED,cAAA,EAAgB,CACT,QAAQ,GAAA,CAAI,CAAC;CACvB"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Passes/objectListPass.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Passes/objectListPass.ts"],"sourcesContent":["import type { Nullable, AbstractEngine, IFrameGraphPass, FrameGraphContext, FrameGraphObjectList, FrameGraphTask } from \"core/index\";\r\nimport { FrameGraphPass } from \"./pass\";\r\n\r\n/**\r\n * Object list pass used to generate a list of objects.\r\n */\r\nexport class FrameGraphObjectListPass extends FrameGraphPass<FrameGraphContext> {\r\n    protected readonly _engine: AbstractEngine;\r\n    protected _objectList: FrameGraphObjectList;\r\n\r\n    /**\r\n     * Checks if a pass is an object list pass.\r\n     * @param pass The pass to check.\r\n     * @returns True if the pass is an object list pass, else false.\r\n     */\r\n    public static IsObjectListPass(pass: IFrameGraphPass): pass is FrameGraphObjectListPass {\r\n        return (pass as FrameGraphObjectListPass).setObjectList !== undefined;\r\n    }\r\n\r\n    /**\r\n     * Gets the object list used by the pass.\r\n     */\r\n    public get objectList(): FrameGraphObjectList {\r\n        return this._objectList;\r\n    }\r\n\r\n    /**\r\n     * Sets the object list to use for the pass.\r\n     * @param objectList The object list to use for the pass.\r\n     */\r\n    public setObjectList(objectList: FrameGraphObjectList) {\r\n        this._objectList = objectList;\r\n    }\r\n\r\n    /** @internal */\r\n    constructor(name: string, parentTask: FrameGraphTask, context: FrameGraphContext, engine: AbstractEngine) {\r\n        super(name, parentTask, context);\r\n        this._engine = engine;\r\n    }\r\n\r\n    /** @internal */\r\n    public override _isValid(): Nullable<string> {\r\n        const errMsg = super._isValid();\r\n        return errMsg ? errMsg : this._objectList !== undefined ? null : \"Object list is not set (call setObjectList to set it)\";\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,cAAc,EAAE,MAAM,QAAQ,CAAC;;AAKlC,MAAO,wBAAyB,SAAQ,yPAAiC;IAI3E;;;;OAIG,CACI,MAAM,CAAC,gBAAgB,CAAC,IAAqB,EAAA;QAChD,OAAQ,IAAiC,CAAC,aAAa,KAAK,SAAS,CAAC;IAC1E,CAAC;IAED;;OAEG,CACH,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACI,aAAa,CAAC,UAAgC,EAAA;QACjD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;IAClC,CAAC;IAED,cAAA,EAAgB,CAChB,YAAY,IAAY,EAAE,UAA0B,EAAE,OAA0B,EAAE,MAAsB,CAAA;QACpG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IAC1B,CAAC;IAED,cAAA,EAAgB,CACA,QAAQ,GAAA;QACpB,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAChC,OAAO,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,uDAAuD,CAAC;IAC7H,CAAC;CACJ"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Passes/renderPass.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Passes/renderPass.ts"],"sourcesContent":["import type { Nullable, FrameGraphRenderContext, AbstractEngine, IFrameGraphPass, FrameGraphTextureHandle, FrameGraphTask, FrameGraphRenderTarget } from \"core/index\";\r\nimport { FrameGraphPass } from \"./pass\";\r\n\r\n/**\r\n * Render pass used to render objects.\r\n */\r\nexport class FrameGraphRenderPass extends FrameGraphPass<FrameGraphRenderContext> {\r\n    protected readonly _engine: AbstractEngine;\r\n    protected _renderTarget: FrameGraphTextureHandle | FrameGraphTextureHandle[] | undefined;\r\n    protected _renderTargetDepth: FrameGraphTextureHandle | undefined;\r\n    protected _frameGraphRenderTarget: FrameGraphRenderTarget | undefined;\r\n    protected _dependencies: Set<FrameGraphTextureHandle> = new Set();\r\n\r\n    /**\r\n     * Checks if a pass is a render pass.\r\n     * @param pass The pass to check.\r\n     * @returns True if the pass is a render pass, else false.\r\n     */\r\n    public static IsRenderPass(pass: IFrameGraphPass): pass is FrameGraphRenderPass {\r\n        return (pass as FrameGraphRenderPass).setRenderTarget !== undefined;\r\n    }\r\n\r\n    /**\r\n     * Gets the handle(s) of the render target(s) used by the render pass.\r\n     */\r\n    public get renderTarget(): FrameGraphTextureHandle | FrameGraphTextureHandle[] | undefined {\r\n        return this._renderTarget;\r\n    }\r\n\r\n    /**\r\n     * Gets the handle of the render target depth used by the render pass.\r\n     */\r\n    public get renderTargetDepth(): FrameGraphTextureHandle | undefined {\r\n        return this._renderTargetDepth;\r\n    }\r\n\r\n    /**\r\n     * Gets the frame graph render target used by the render pass.\r\n     */\r\n    public get frameGraphRenderTarget(): FrameGraphRenderTarget | undefined {\r\n        return this._frameGraphRenderTarget;\r\n    }\r\n\r\n    /**\r\n     * If true, the depth attachment will be read-only (may allow some optimizations in WebGPU)\r\n     */\r\n    public depthReadOnly = false;\r\n\r\n    /**\r\n     * If true, the stencil attachment will be read-only (may allow some optimizations in WebGPU)\r\n     */\r\n    public stencilReadOnly = false;\r\n\r\n    /** @internal */\r\n    constructor(name: string, parentTask: FrameGraphTask, context: FrameGraphRenderContext, engine: AbstractEngine) {\r\n        super(name, parentTask, context);\r\n        this._engine = engine;\r\n    }\r\n\r\n    /**\r\n     * Sets the render target(s) to use for rendering.\r\n     * @param renderTargetHandle The render target to use for rendering, or an array of render targets to use for multi render target rendering.\r\n     */\r\n    public setRenderTarget(renderTargetHandle?: FrameGraphTextureHandle | FrameGraphTextureHandle[]) {\r\n        this._renderTarget = renderTargetHandle;\r\n    }\r\n\r\n    /**\r\n     * Sets the render target depth to use for rendering.\r\n     * @param renderTargetHandle The render target depth to use for rendering.\r\n     */\r\n    public setRenderTargetDepth(renderTargetHandle?: FrameGraphTextureHandle) {\r\n        this._renderTargetDepth = renderTargetHandle;\r\n    }\r\n\r\n    /**\r\n     * Adds dependencies to the render pass.\r\n     * @param dependencies The dependencies to add.\r\n     */\r\n    public addDependencies(dependencies?: FrameGraphTextureHandle | FrameGraphTextureHandle[]) {\r\n        if (dependencies === undefined) {\r\n            return;\r\n        }\r\n\r\n        if (Array.isArray(dependencies)) {\r\n            for (const dependency of dependencies) {\r\n                this._dependencies.add(dependency);\r\n            }\r\n        } else {\r\n            this._dependencies.add(dependencies);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Collects the dependencies of the render pass.\r\n     * @param dependencies The set of dependencies to update.\r\n     */\r\n    public collectDependencies(dependencies: Set<FrameGraphTextureHandle>): void {\r\n        const iterator = this._dependencies.keys();\r\n        for (let key = iterator.next(); key.done !== true; key = iterator.next()) {\r\n            dependencies.add(key.value);\r\n        }\r\n\r\n        if (this._renderTarget !== undefined) {\r\n            if (Array.isArray(this._renderTarget)) {\r\n                for (const handle of this._renderTarget) {\r\n                    if (handle !== undefined) {\r\n                        dependencies.add(handle);\r\n                    }\r\n                }\r\n            } else {\r\n                dependencies.add(this._renderTarget);\r\n            }\r\n        }\r\n\r\n        if (this._renderTargetDepth !== undefined) {\r\n            dependencies.add(this._renderTargetDepth);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public override _execute() {\r\n        this._frameGraphRenderTarget =\r\n            this._frameGraphRenderTarget || this._context.createRenderTarget(this.name, this._renderTarget, this._renderTargetDepth, this.depthReadOnly, this.stencilReadOnly);\r\n\r\n        this._context.bindRenderTarget(this._frameGraphRenderTarget, `frame graph render pass - ${this.name}`);\r\n\r\n        super._execute();\r\n\r\n        this._context._flushDebugMessages();\r\n\r\n        const renderTargetWrapper = this._frameGraphRenderTarget.renderTargetWrapper;\r\n        if (renderTargetWrapper && (renderTargetWrapper.resolveMSAAColors || renderTargetWrapper.resolveMSAADepth || renderTargetWrapper.resolveMSAAStencil)) {\r\n            // Unbinding the render target will trigger resolving MSAA textures.\r\n            this._context.bindRenderTarget(undefined, `frame graph render pass - ${this.name} - resolve MSAA`, true);\r\n            this._context._flushDebugMessages();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public override _isValid(): Nullable<string> {\r\n        const errMsg = super._isValid();\r\n        return errMsg\r\n            ? errMsg\r\n            : this._renderTarget !== undefined || this.renderTargetDepth !== undefined\r\n              ? null\r\n              : \"Render target and render target depth cannot both be undefined.\";\r\n    }\r\n\r\n    /** @internal */\r\n    public override _dispose() {\r\n        this._frameGraphRenderTarget?.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphObjectList, IFrameGraphPass, Nullable, FrameGraphTextureHandle, InternalTexture, FrameGraphRenderContext } from \"core/index\";\r\nimport { FrameGraphObjectListPass } from \"./Passes/objectListPass\";\r\nimport { FrameGraphRenderPass } from \"./Passes/renderPass\";\r\nimport { Observable } from \"core/Misc/observable\";\r\n\r\n/**\r\n * Represents a task in a frame graph.\r\n * @experimental\r\n */\r\nexport abstract class FrameGraphTask {\r\n    protected readonly _frameGraph: FrameGraph;\r\n\r\n    private readonly _passes: IFrameGraphPass[] = [];\r\n    private readonly _passesDisabled: IFrameGraphPass[] = [];\r\n\r\n    // Note: must be a getter/setter even if there's no specific processing, otherwise inherited classes can't make it a getter/setter!\r\n    // Same thing for the disabled property\r\n    protected _name: string;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    protected _disabled = false;\r\n\r\n    /**\r\n     * Whether the task is disabled.\r\n     */\r\n    public get disabled() {\r\n        return this._disabled;\r\n    }\r\n\r\n    public set disabled(value: boolean) {\r\n        this._disabled = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the render passes of the task.\r\n     */\r\n    public get passes() {\r\n        return this._passes;\r\n    }\r\n\r\n    /**\r\n     * Gets the disabled render passes of the task.\r\n     */\r\n    public get passesDisabled() {\r\n        return this._passesDisabled;\r\n    }\r\n\r\n    /**\r\n     * The (texture) dependencies of the task (optional).\r\n     */\r\n    public dependencies?: Set<FrameGraphTextureHandle>;\r\n\r\n    /**\r\n     * Records the task in the frame graph. Use this function to add content (render passes, ...) to the task.\r\n     * @param skipCreationOfDisabledPasses If true, the disabled passe(s) won't be created.\r\n     */\r\n    public abstract record(skipCreationOfDisabledPasses?: boolean): void;\r\n\r\n    /**\r\n     * This function is called once after the task has been added to the frame graph and before the frame graph is built for the first time.\r\n     * This allows you to initialize asynchronous resources, which is not possible in the constructor.\r\n     * @returns A promise that resolves when the initialization is complete.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\r\n    public initAsync(): Promise<void> {\r\n        return Promise.resolve();\r\n    }\r\n\r\n    /**\r\n     * An observable that is triggered after the textures have been allocated.\r\n     */\r\n    public onTexturesAllocatedObservable: Observable<FrameGraphRenderContext> = new Observable();\r\n\r\n    /**\r\n     * An observable that is triggered before the task is executed.\r\n     */\r\n    public onBeforeTaskExecute: Observable<FrameGraphTask> = new Observable();\r\n\r\n    /**\r\n     * An observable that is triggered after the task is executed.\r\n     */\r\n    public onAfterTaskExecute: Observable<FrameGraphTask> = new Observable();\r\n\r\n    /**\r\n     * Checks if the task is ready to be executed.\r\n     * @returns True if the task is ready to be executed, else false.\r\n     */\r\n    public isReady(): boolean {\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Disposes of the task.\r\n     */\r\n    public dispose() {\r\n        this._reset();\r\n        this.onTexturesAllocatedObservable.clear();\r\n        this.onBeforeTaskExecute.clear();\r\n        this.onAfterTaskExecute.clear();\r\n    }\r\n\r\n    /**\r\n     * Constructs a new frame graph task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        this.name = name;\r\n        this._frameGraph = frameGraph;\r\n        this._reset();\r\n    }\r\n\r\n    /** @internal */\r\n    public _reset() {\r\n        for (const pass of this._passes) {\r\n            pass._dispose();\r\n        }\r\n        for (const pass of this._passesDisabled) {\r\n            pass._dispose();\r\n        }\r\n        this._passes.length = 0;\r\n        this._passesDisabled.length = 0;\r\n    }\r\n\r\n    /** @internal */\r\n    public _addPass(pass: IFrameGraphPass, disabled: boolean) {\r\n        if (disabled) {\r\n            this._passesDisabled.push(pass);\r\n        } else {\r\n            this._passes.push(pass);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _checkTask() {\r\n        let outputTexture: Nullable<Nullable<InternalTexture>[]> = null;\r\n        let outputDepthTexture: Nullable<InternalTexture> = null;\r\n        let outputObjectList: FrameGraphObjectList | undefined;\r\n\r\n        for (const pass of this._passes) {\r\n            const errMsg = pass._isValid();\r\n            if (errMsg) {\r\n                throw new Error(`Pass \"${pass.name}\" is not valid. ${errMsg}`);\r\n            }\r\n            if (FrameGraphRenderPass.IsRenderPass(pass)) {\r\n                const handles = Array.isArray(pass.renderTarget) ? pass.renderTarget : [pass.renderTarget];\r\n                outputTexture = [];\r\n                for (const handle of handles) {\r\n                    if (handle !== undefined) {\r\n                        outputTexture.push(this._frameGraph.textureManager.getTextureFromHandle(handle));\r\n                    }\r\n                }\r\n                outputDepthTexture = pass.renderTargetDepth !== undefined ? this._frameGraph.textureManager.getTextureFromHandle(pass.renderTargetDepth) : null;\r\n            } else if (FrameGraphObjectListPass.IsObjectListPass(pass)) {\r\n                outputObjectList = pass.objectList;\r\n            }\r\n        }\r\n\r\n        let disabledOutputTexture: Nullable<Nullable<InternalTexture>[]> = null;\r\n        let disabledOutputTextureHandle: (FrameGraphTextureHandle | undefined)[] = [];\r\n        let disabledOutputDepthTexture: Nullable<InternalTexture> = null;\r\n        let disabledOutputObjectList: FrameGraphObjectList | undefined;\r\n\r\n        for (const pass of this._passesDisabled) {\r\n            const errMsg = pass._isValid();\r\n            if (errMsg) {\r\n                throw new Error(`Pass \"${pass.name}\" is not valid. ${errMsg}`);\r\n            }\r\n            if (FrameGraphRenderPass.IsRenderPass(pass)) {\r\n                const handles = Array.isArray(pass.renderTarget) ? pass.renderTarget : [pass.renderTarget];\r\n                disabledOutputTexture = [];\r\n                for (const handle of handles) {\r\n                    if (handle !== undefined) {\r\n                        disabledOutputTexture.push(this._frameGraph.textureManager.getTextureFromHandle(handle));\r\n                    }\r\n                }\r\n                disabledOutputTextureHandle = handles;\r\n                disabledOutputDepthTexture = pass.renderTargetDepth !== undefined ? this._frameGraph.textureManager.getTextureFromHandle(pass.renderTargetDepth) : null;\r\n            } else if (FrameGraphObjectListPass.IsObjectListPass(pass)) {\r\n                disabledOutputObjectList = pass.objectList;\r\n            }\r\n        }\r\n\r\n        if (this._passesDisabled.length > 0) {\r\n            if (!this._checkSameRenderTarget(outputTexture, disabledOutputTexture)) {\r\n                let ok = true;\r\n                for (const handle of disabledOutputTextureHandle) {\r\n                    if (handle !== undefined && !this._frameGraph.textureManager.isHistoryTexture(handle)) {\r\n                        ok = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!ok) {\r\n                    throw new Error(`The output texture of the task \"${this.name}\" is different when it is enabled or disabled.`);\r\n                }\r\n            }\r\n            if (outputDepthTexture !== disabledOutputDepthTexture) {\r\n                throw new Error(`The output depth texture of the task \"${this.name}\" is different when it is enabled or disabled.`);\r\n            }\r\n            if (outputObjectList !== disabledOutputObjectList) {\r\n                throw new Error(`The output object list of the task \"${this.name}\" is different when it is enabled or disabled.`);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _execute() {\r\n        const passes = this._disabled && this._passesDisabled.length > 0 ? this._passesDisabled : this._passes;\r\n\r\n        this.onBeforeTaskExecute.notifyObservers(this);\r\n\r\n        for (const pass of passes) {\r\n            pass._execute();\r\n        }\r\n\r\n        this.onAfterTaskExecute.notifyObservers(this);\r\n    }\r\n\r\n    private _checkSameRenderTarget(src: Nullable<Nullable<InternalTexture>[]>, dst: Nullable<Nullable<InternalTexture>[]>) {\r\n        if (src === null || dst === null) {\r\n            return src === dst;\r\n        }\r\n\r\n        if (src.length !== dst.length) {\r\n            return false;\r\n        }\r\n\r\n        for (let i = 0; i < src.length; i++) {\r\n            if (src[i] !== dst[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Rendering/shadowGeneratorTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Rendering/shadowGeneratorTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphObjectList, IShadowLight, WritableObject, FrameGraphTextureHandle, Camera } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ShadowGenerator } from \"../../../Lights/Shadows/shadowGenerator\";\r\n\r\n/**\r\n * Task used to generate shadows from a list of objects.\r\n */\r\nexport class FrameGraphShadowGeneratorTask extends FrameGraphTask {\r\n    /**\r\n     * The object list that generates shadows.\r\n     */\r\n    public objectList: FrameGraphObjectList;\r\n\r\n    private _light: IShadowLight;\r\n    /**\r\n     * The light to generate shadows from.\r\n     */\r\n    public get light(): IShadowLight {\r\n        return this._light;\r\n    }\r\n\r\n    public set light(value: IShadowLight) {\r\n        if (value === this._light) {\r\n            return;\r\n        }\r\n\r\n        this._light = value;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _camera: Camera;\r\n    /**\r\n     * Gets or sets the camera used to generate the shadow generator.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(camera: Camera) {\r\n        this._camera = camera;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _mapSize = 1024;\r\n    /**\r\n     * The size of the shadow map.\r\n     */\r\n    public get mapSize() {\r\n        return this._mapSize;\r\n    }\r\n\r\n    public set mapSize(value: number) {\r\n        if (value === this._mapSize) {\r\n            return;\r\n        }\r\n\r\n        this._mapSize = value;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _useFloat32TextureType = false;\r\n    /**\r\n     * If true, the shadow map will use a 32 bits float texture type (else, 16 bits float is used if supported).\r\n     */\r\n    public get useFloat32TextureType() {\r\n        return this._useFloat32TextureType;\r\n    }\r\n\r\n    public set useFloat32TextureType(value: boolean) {\r\n        if (value === this._useFloat32TextureType) {\r\n            return;\r\n        }\r\n\r\n        this._useFloat32TextureType = value;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _useRedTextureFormat = true;\r\n    /**\r\n     * If true, the shadow map will use a red texture format (else, a RGBA format is used).\r\n     */\r\n    public get useRedTextureFormat() {\r\n        return this._useRedTextureFormat;\r\n    }\r\n\r\n    public set useRedTextureFormat(value: boolean) {\r\n        if (value === this._useRedTextureFormat) {\r\n            return;\r\n        }\r\n\r\n        this._useRedTextureFormat = value;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _bias = 0.01;\r\n    /**\r\n     * The bias to apply to the shadow map.\r\n     */\r\n    public get bias() {\r\n        return this._bias;\r\n    }\r\n\r\n    public set bias(value: number) {\r\n        if (value === this._bias) {\r\n            return;\r\n        }\r\n\r\n        this._bias = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.bias = value;\r\n        }\r\n    }\r\n\r\n    private _normalBias = 0;\r\n    /**\r\n     * The normal bias to apply to the shadow map.\r\n     */\r\n    public get normalBias() {\r\n        return this._normalBias;\r\n    }\r\n\r\n    public set normalBias(value: number) {\r\n        if (value === this._normalBias) {\r\n            return;\r\n        }\r\n\r\n        this._normalBias = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.normalBias = value;\r\n        }\r\n    }\r\n\r\n    private _darkness = 0;\r\n    /**\r\n     * The darkness of the shadows.\r\n     */\r\n    public get darkness() {\r\n        return this._darkness;\r\n    }\r\n\r\n    public set darkness(value: number) {\r\n        if (value === this._darkness) {\r\n            return;\r\n        }\r\n\r\n        this._darkness = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.darkness = value;\r\n        }\r\n    }\r\n\r\n    private _transparencyShadow = false;\r\n    /**\r\n     * Gets or sets the ability to have transparent shadow\r\n     */\r\n    public get transparencyShadow() {\r\n        return this._transparencyShadow;\r\n    }\r\n\r\n    public set transparencyShadow(value: boolean) {\r\n        if (value === this._transparencyShadow) {\r\n            return;\r\n        }\r\n\r\n        this._transparencyShadow = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.transparencyShadow = value;\r\n        }\r\n    }\r\n\r\n    private _enableSoftTransparentShadow = false;\r\n    /**\r\n     * Enables or disables shadows with varying strength based on the transparency\r\n     */\r\n    public get enableSoftTransparentShadow() {\r\n        return this._enableSoftTransparentShadow;\r\n    }\r\n\r\n    public set enableSoftTransparentShadow(value: boolean) {\r\n        if (value === this._enableSoftTransparentShadow) {\r\n            return;\r\n        }\r\n\r\n        this._enableSoftTransparentShadow = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.enableSoftTransparentShadow = value;\r\n        }\r\n    }\r\n\r\n    private _useOpacityTextureForTransparentShadow = false;\r\n    /**\r\n     * If this is true, use the opacity texture's alpha channel for transparent shadows instead of the diffuse one\r\n     */\r\n    public get useOpacityTextureForTransparentShadow() {\r\n        return this._useOpacityTextureForTransparentShadow;\r\n    }\r\n\r\n    public set useOpacityTextureForTransparentShadow(value: boolean) {\r\n        if (value === this._useOpacityTextureForTransparentShadow) {\r\n            return;\r\n        }\r\n\r\n        this._useOpacityTextureForTransparentShadow = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.useOpacityTextureForTransparentShadow = value;\r\n        }\r\n    }\r\n\r\n    private _filter = ShadowGenerator.FILTER_PCF;\r\n    /**\r\n     * The filter to apply to the shadow map.\r\n     */\r\n    public get filter() {\r\n        return this._filter;\r\n    }\r\n\r\n    public set filter(value: number) {\r\n        if (value === this._filter) {\r\n            return;\r\n        }\r\n\r\n        this._filter = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.filter = value;\r\n        }\r\n    }\r\n\r\n    private _filteringQuality = ShadowGenerator.QUALITY_HIGH;\r\n    /**\r\n     * The filtering quality to apply to the filter.\r\n     */\r\n    public get filteringQuality() {\r\n        return this._filteringQuality;\r\n    }\r\n\r\n    public set filteringQuality(value: number) {\r\n        if (value === this._filteringQuality) {\r\n            return;\r\n        }\r\n\r\n        this._filteringQuality = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.filteringQuality = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The shadow generator.\r\n     */\r\n    public readonly shadowGenerator: ShadowGenerator;\r\n\r\n    /**\r\n     * The shadow map texture.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    protected _shadowGenerator: ShadowGenerator | undefined;\r\n\r\n    protected _createShadowGenerator() {\r\n        this._shadowGenerator = new ShadowGenerator(this._mapSize, this._light, this._useFloat32TextureType, undefined, this._useRedTextureFormat);\r\n    }\r\n\r\n    protected _setupShadowGenerator() {\r\n        this._shadowGenerator?.dispose();\r\n        this._shadowGenerator = undefined;\r\n        if (this._light !== undefined) {\r\n            this._createShadowGenerator();\r\n            const shadowGenerator = this._shadowGenerator as ShadowGenerator | undefined;\r\n            if (shadowGenerator === undefined) {\r\n                return;\r\n            }\r\n            shadowGenerator.bias = this._bias;\r\n            shadowGenerator.normalBias = this._normalBias;\r\n            shadowGenerator.darkness = this._darkness;\r\n            shadowGenerator.transparencyShadow = this._transparencyShadow;\r\n            shadowGenerator.enableSoftTransparentShadow = this._enableSoftTransparentShadow;\r\n            shadowGenerator.useOpacityTextureForTransparentShadow = this._useOpacityTextureForTransparentShadow;\r\n            shadowGenerator.filter = this._filter;\r\n            shadowGenerator.filteringQuality = this._filteringQuality;\r\n\r\n            const shadowMap = shadowGenerator.getShadowMap()!;\r\n            shadowMap._disableEngineStages = true;\r\n            shadowMap.cameraForLOD = this._camera;\r\n\r\n            (this.shadowGenerator as WritableObject<ShadowGenerator | undefined>) = shadowGenerator;\r\n        }\r\n    }\r\n\r\n    public override isReady(): boolean {\r\n        return !!this._shadowGenerator && !!this._shadowGenerator.getShadowMap()?.isReadyForRendering();\r\n    }\r\n\r\n    /**\r\n     * Creates a new shadow generator task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public record() {\r\n        if (this.light === undefined || this.objectList === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphShadowGeneratorTask ${this.name}: light, objectList and camera are required`);\r\n        }\r\n\r\n        // Make sure the renderList / particleSystemList are set when FrameGraphShadowGeneratorTask.isReady() is called!\r\n        const shadowMap = this._shadowGenerator!.getShadowMap()!;\r\n\r\n        shadowMap.renderList = this.objectList.meshes;\r\n        shadowMap.particleSystemList = this.objectList.particleSystems;\r\n\r\n        const shadowTextureHandle = this._frameGraph.textureManager.importTexture(`${this.name} shadowmap`, this._shadowGenerator!.getShadowMap()!.getInternalTexture()!);\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, shadowTextureHandle);\r\n\r\n        const pass = this._frameGraph.addPass(this.name);\r\n\r\n        pass.setExecuteFunc((context) => {\r\n            if (!this.light.isEnabled() || !this.light.shadowEnabled) {\r\n                return;\r\n            }\r\n\r\n            const shadowMap = this._shadowGenerator!.getShadowMap()!;\r\n\r\n            shadowMap.renderList = this.objectList.meshes;\r\n            shadowMap.particleSystemList = this.objectList.particleSystems;\r\n\r\n            context.saveDepthStates();\r\n            context.setDepthStates(true, true);\r\n\r\n            context.renderUnmanaged(shadowMap);\r\n\r\n            context.restoreDepthStates();\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n\r\n    public override dispose() {\r\n        this._shadowGenerator?.dispose();\r\n        this._shadowGenerator = undefined;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 661, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/postProcessTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/postProcessTask.ts"],"sourcesContent":["import type {\r\n    FrameGraph,\r\n    FrameGraphTextureHandle,\r\n    DrawWrapper,\r\n    FrameGraphRenderPass,\r\n    FrameGraphRenderContext,\r\n    EffectWrapper,\r\n    IStencilState,\r\n    IViewportLike,\r\n    Nullable,\r\n} from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\n\r\n/**\r\n * Task which applies a post process.\r\n */\r\nexport class FrameGraphPostProcessTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to apply the post process on.\r\n     * It's allowed to be undefined if the post process does not require a source texture.\r\n     * In that case, targetTexture must be provided.\r\n     */\r\n    public sourceTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the source texture.\r\n     */\r\n    public sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The target texture to render the post process to.\r\n     * If not supplied, a texture with the same configuration as the source texture will be created.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The stencil state to use for the post process (optional).\r\n     */\r\n    public stencilState?: IStencilState;\r\n\r\n    /**\r\n     * The depth attachment texture to use for the post process (optional).\r\n     * Note that a post-process task never writes to the depth buffer: attaching a depth texture is only useful if you want to test against the depth/stencil aspect or write to the stencil buffer.\r\n     */\r\n    public depthAttachmentTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * If true, the depth attachment will be read-only.\r\n     * This means that the post process will not write to the depth buffer.\r\n     * Setting depthReadOnly and stencilReadOnly to true is useful when you want to also be able to bind this same depth/stencil attachment to a shader.\r\n     * Note that it will only work in WebGPU, as WebGL does not support read-only depth/stencil attachments.\r\n     */\r\n    public depthReadOnly = false;\r\n\r\n    /**\r\n     * If true, the stencil attachment will be read-only.\r\n     * This means that the post process will not write to the stencil buffer.\r\n     * Setting depthReadOnly and stencilReadOnly to true is useful when you want to also be able to bind this same depth/stencil attachment to a shader.\r\n     * Note that it will only work in WebGPU, as WebGL does not support read-only depth/stencil attachments.\r\n     */\r\n    public stencilReadOnly = false;\r\n\r\n    /**\r\n     * If true, color write will be disabled when applying the post process.\r\n     * This means that the post process will not write to the color buffer.\r\n     */\r\n    public disableColorWrite = false;\r\n\r\n    /**\r\n     * If true, the post process will be generated by a back face full-screen quad (CW order).\r\n     */\r\n    public drawBackFace = false;\r\n\r\n    /**\r\n     * If depth testing should be enabled (default is true).\r\n     */\r\n    public depthTest = true;\r\n\r\n    /**\r\n     * The viewport to use when applying the post process.\r\n     * If set to null, the currently active viewport is used.\r\n     * If undefined (default), the viewport is reset to a full screen viewport before applying the post process.\r\n     */\r\n    public viewport?: Nullable<IViewportLike>;\r\n\r\n    /**\r\n     * The output texture of the post process.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output depth attachment texture.\r\n     * This texture will point to the same texture than the depthAttachmentTexture property if it is set.\r\n     * Note, however, that the handle itself will be different!\r\n     */\r\n    public readonly outputDepthAttachmentTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The post process to apply.\r\n     */\r\n    public readonly postProcess: EffectWrapper;\r\n\r\n    /**\r\n     * The draw wrapper used by the post process\r\n     */\r\n    public get drawWrapper() {\r\n        return this._postProcessDrawWrapper;\r\n    }\r\n\r\n    protected readonly _postProcessDrawWrapper: DrawWrapper;\r\n    protected _sourceWidth: number;\r\n    protected _sourceHeight: number;\r\n    protected _outputWidth: number;\r\n    protected _outputHeight: number;\r\n\r\n    /**\r\n     * Constructs a new post process task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param postProcess The post process to apply.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, postProcess: EffectWrapper) {\r\n        super(name, frameGraph);\r\n\r\n        this.postProcess = postProcess;\r\n        this._postProcessDrawWrapper = this.postProcess.drawWrapper;\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.outputDepthAttachmentTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this.postProcess.isReady();\r\n    }\r\n\r\n    public record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined && this.targetTexture === undefined) {\r\n            throw new Error(`FrameGraphPostProcessTask \"${this.name}\": sourceTexture or targetTexture is required`);\r\n        }\r\n\r\n        const sourceTextureCreationOptions = this.sourceTexture !== undefined ? this._frameGraph.textureManager.getTextureCreationOptions(this.sourceTexture) : undefined;\r\n        if (sourceTextureCreationOptions) {\r\n            sourceTextureCreationOptions.options.samples = 1;\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture, this.name, sourceTextureCreationOptions);\r\n        if (this.depthAttachmentTexture !== undefined) {\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputDepthAttachmentTexture, this.depthAttachmentTexture);\r\n        }\r\n\r\n        if (sourceTextureCreationOptions) {\r\n            const sourceSize = this._frameGraph.textureManager.getTextureAbsoluteDimensions(sourceTextureCreationOptions);\r\n\r\n            this._sourceWidth = sourceSize.width;\r\n            this._sourceHeight = sourceSize.height;\r\n        }\r\n\r\n        const outputTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.outputTexture);\r\n\r\n        this._outputWidth = outputTextureDescription.size.width;\r\n        this._outputHeight = outputTextureDescription.size.height;\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.depthReadOnly = this.depthReadOnly;\r\n        pass.stencilReadOnly = this.stencilReadOnly;\r\n\r\n        pass.addDependencies(this.sourceTexture);\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        pass.setRenderTargetDepth(this.depthAttachmentTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            if (this.sourceTexture !== undefined) {\r\n                context.setTextureSamplingMode(this.sourceTexture, this.sourceSamplingMode);\r\n            }\r\n            additionalExecute?.(context);\r\n            if (this.viewport) {\r\n                context.setViewport(this.viewport);\r\n            }\r\n            context.applyFullScreenEffect(\r\n                this._postProcessDrawWrapper,\r\n                () => {\r\n                    if (this.sourceTexture !== undefined) {\r\n                        context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"textureSampler\", this.sourceTexture);\r\n                    }\r\n                    additionalBindings?.(context);\r\n                    this.postProcess.bind();\r\n                },\r\n                this.stencilState,\r\n                this.disableColorWrite,\r\n                this.drawBackFace,\r\n                this.depthTest,\r\n                this.viewport !== undefined\r\n            );\r\n        });\r\n\r\n        if (!skipCreationOfDisabledPasses) {\r\n            const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n            passDisabled.depthReadOnly = this.depthReadOnly;\r\n            passDisabled.stencilReadOnly = this.stencilReadOnly;\r\n\r\n            passDisabled.addDependencies(this.sourceTexture);\r\n\r\n            passDisabled.setRenderTarget(this.outputTexture);\r\n            passDisabled.setRenderTargetDepth(this.depthAttachmentTexture);\r\n            passDisabled.setExecuteFunc((context) => {\r\n                if (this.sourceTexture !== undefined) {\r\n                    if (this.viewport) {\r\n                        context.setViewport(this.viewport);\r\n                    }\r\n                    context.copyTexture(this.sourceTexture, undefined, this.viewport !== undefined);\r\n                }\r\n            });\r\n        }\r\n\r\n        return pass;\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this.postProcess.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Rendering/csmShadowGeneratorTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Rendering/csmShadowGeneratorTask.ts"],"sourcesContent":["import type { FrameGraphTextureHandle, FrameGraph } from \"core/index\";\r\nimport { CascadedShadowGenerator } from \"../../../Lights/Shadows/cascadedShadowGenerator\";\r\nimport { FrameGraphShadowGeneratorTask } from \"./shadowGeneratorTask\";\r\nimport { DirectionalLight } from \"../../../Lights/directionalLight\";\r\nimport { DepthTextureType, ThinMinMaxReducer } from \"../../../Misc/thinMinMaxReducer\";\r\nimport { FrameGraphPostProcessTask } from \"../PostProcesses/postProcessTask\";\r\nimport { Constants } from \"../../../Engines/constants\";\r\nimport { textureSizeIsObject } from \"../../../Materials/Textures/textureCreationOptions\";\r\n\r\n/**\r\n * Task used to generate a cascaded shadow map from a list of objects.\r\n */\r\nexport class FrameGraphCascadedShadowGeneratorTask extends FrameGraphShadowGeneratorTask {\r\n    protected override _shadowGenerator: CascadedShadowGenerator | undefined;\r\n\r\n    /**\r\n     * Checks if a shadow generator task is a cascaded shadow generator task.\r\n     * @param task The task to check.\r\n     * @returns True if the task is a cascaded shadow generator task, else false.\r\n     */\r\n    public static IsCascadedShadowGenerator(task: FrameGraphShadowGeneratorTask): task is FrameGraphCascadedShadowGeneratorTask {\r\n        return (task as FrameGraphCascadedShadowGeneratorTask).numCascades !== undefined;\r\n    }\r\n\r\n    /**\r\n     * The depth texture used by the autoCalcDepthBounds feature (optional if autoCalcDepthBounds is set to false).\r\n     * This texture is used to compute the min/max depth bounds of the scene to setup the cascaded shadow generator.\r\n     * The texture should contain either view, normalized view, or screen depth values - if possible, connect normalized view, or screen for best performance.\r\n     * Warning: Do not set a texture if you are not using the autoCalcDepthBounds feature, to avoid generating a depth texture that will not be used.\r\n     */\r\n    public depthTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The type of the depth texture used by the autoCalcDepthBounds feature.\r\n     */\r\n    public depthTextureType: DepthTextureType = DepthTextureType.NormalizedViewDepth;\r\n\r\n    private _numCascades = CascadedShadowGenerator.DEFAULT_CASCADES_COUNT;\r\n    /**\r\n     * The number of cascades.\r\n     */\r\n    public get numCascades() {\r\n        return this._numCascades;\r\n    }\r\n\r\n    public set numCascades(value: number) {\r\n        if (value === this._numCascades) {\r\n            return;\r\n        }\r\n\r\n        this._numCascades = value;\r\n        this._setupShadowGenerator();\r\n    }\r\n\r\n    private _debug = false;\r\n    /**\r\n     * Gets or sets a value indicating whether the shadow generator should display the cascades.\r\n     */\r\n    public get debug() {\r\n        return this._debug;\r\n    }\r\n\r\n    public set debug(value: boolean) {\r\n        if (value === this._debug) {\r\n            return;\r\n        }\r\n\r\n        this._debug = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.debug = value;\r\n        }\r\n    }\r\n\r\n    private _stabilizeCascades = false;\r\n    /**\r\n     * Gets or sets a value indicating whether the shadow generator should stabilize the cascades.\r\n     */\r\n    public get stabilizeCascades() {\r\n        return this._stabilizeCascades;\r\n    }\r\n\r\n    public set stabilizeCascades(value: boolean) {\r\n        if (value === this._stabilizeCascades) {\r\n            return;\r\n        }\r\n\r\n        this._stabilizeCascades = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.stabilizeCascades = value;\r\n        }\r\n    }\r\n\r\n    private _lambda = 0.5;\r\n    /**\r\n     * Gets or sets the lambda parameter of the shadow generator.\r\n     */\r\n    public get lambda() {\r\n        return this._lambda;\r\n    }\r\n\r\n    public set lambda(value: number) {\r\n        if (value === this._lambda) {\r\n            return;\r\n        }\r\n\r\n        this._lambda = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.lambda = value;\r\n        }\r\n    }\r\n\r\n    private _cascadeBlendPercentage = 0.1;\r\n    /**\r\n     * Gets or sets the cascade blend percentage.\r\n     */\r\n    public get cascadeBlendPercentage() {\r\n        return this._cascadeBlendPercentage;\r\n    }\r\n\r\n    public set cascadeBlendPercentage(value: number) {\r\n        if (value === this._cascadeBlendPercentage) {\r\n            return;\r\n        }\r\n\r\n        this._cascadeBlendPercentage = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.cascadeBlendPercentage = value;\r\n        }\r\n    }\r\n\r\n    private _depthClamp = true;\r\n    /**\r\n     * Gets or sets a value indicating whether the shadow generator should use depth clamping.\r\n     */\r\n    public get depthClamp() {\r\n        return this._depthClamp;\r\n    }\r\n\r\n    public set depthClamp(value: boolean) {\r\n        if (value === this._depthClamp) {\r\n            return;\r\n        }\r\n\r\n        this._depthClamp = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.depthClamp = value;\r\n        }\r\n    }\r\n\r\n    private _autoCalcDepthBounds = false;\r\n    /**\r\n     * Gets or sets a value indicating whether the shadow generator should automatically calculate the depth bounds.\r\n     */\r\n    public get autoCalcDepthBounds() {\r\n        return this._autoCalcDepthBounds;\r\n    }\r\n\r\n    public set autoCalcDepthBounds(value: boolean) {\r\n        if (value === this._autoCalcDepthBounds) {\r\n            return;\r\n        }\r\n\r\n        this._autoCalcDepthBounds = value;\r\n        this._currentAutoCalcDepthBoundsCounter = this._autoCalcDepthBoundsRefreshRate;\r\n\r\n        if (!value) {\r\n            this._shadowGenerator?.setMinMaxDistance(0, 1);\r\n        }\r\n\r\n        // All passes but the last one are related to min/max reduction and should be enabled/disabled depending on autoCalcDepthBounds value\r\n        const passes = this.passes;\r\n        for (let i = 0; i < passes.length - 1; ++i) {\r\n            passes[i].disabled = !value;\r\n        }\r\n    }\r\n\r\n    private _currentAutoCalcDepthBoundsCounter = 0;\r\n    private _autoCalcDepthBoundsRefreshRate = 1;\r\n    /**\r\n     * Defines the refresh rate of the min/max computation used when autoCalcDepthBounds is set to true\r\n     * Use 0 to compute just once, 1 to compute on every frame, 2 to compute every two frames and so on...\r\n     */\r\n    public get autoCalcDepthBoundsRefreshRate() {\r\n        return this._autoCalcDepthBoundsRefreshRate;\r\n    }\r\n\r\n    public set autoCalcDepthBoundsRefreshRate(value: number) {\r\n        this._autoCalcDepthBoundsRefreshRate = value;\r\n        this._currentAutoCalcDepthBoundsCounter = this._autoCalcDepthBoundsRefreshRate;\r\n    }\r\n\r\n    private _shadowMaxZ = 10000;\r\n    /**\r\n     * Gets or sets the maximum shadow Z value.\r\n     */\r\n    public get shadowMaxZ() {\r\n        return this._shadowMaxZ;\r\n    }\r\n\r\n    public set shadowMaxZ(value: number) {\r\n        if (value === this._shadowMaxZ) {\r\n            return;\r\n        }\r\n\r\n        this._shadowMaxZ = value;\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.shadowMaxZ = value;\r\n        }\r\n    }\r\n\r\n    protected readonly _thinMinMaxReducer: ThinMinMaxReducer;\r\n\r\n    /**\r\n     * Creates a new shadow generator task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n\r\n        this._thinMinMaxReducer = new ThinMinMaxReducer(frameGraph.scene);\r\n\r\n        this._thinMinMaxReducer.onAfterReductionPerformed.add((minmax: { min: number; max: number }) => {\r\n            if (!this._shadowGenerator) {\r\n                return;\r\n            }\r\n\r\n            const camera = this.camera;\r\n\r\n            let min = minmax.min,\r\n                max = minmax.max;\r\n\r\n            if (min >= max) {\r\n                min = 0;\r\n                max = 1;\r\n            } else if (camera && this.depthTextureType !== DepthTextureType.NormalizedViewDepth) {\r\n                if (this.depthTextureType === DepthTextureType.ScreenDepth) {\r\n                    const engine = this._frameGraph.engine;\r\n                    const projectionMatrix = camera.getProjectionMatrix();\r\n                    const p2z = projectionMatrix.m[10];\r\n                    const p3z = projectionMatrix.m[14];\r\n\r\n                    if (!engine.isNDCHalfZRange) {\r\n                        // Convert to NDC depth\r\n                        min = min * 2 - 1;\r\n                        max = max * 2 - 1;\r\n                    }\r\n\r\n                    // Convert to view depth\r\n                    min = p3z / (min - p2z);\r\n                    max = p3z / (max - p2z);\r\n                }\r\n\r\n                // Convert to normalized view depth\r\n                const zNear = camera.minZ;\r\n                const zFar = camera.maxZ;\r\n\r\n                min = (min - zNear) / (zFar - zNear);\r\n                max = (max - zNear) / (zFar - zNear);\r\n            }\r\n\r\n            if (min !== this._shadowGenerator.minDistance || max !== this._shadowGenerator.maxDistance) {\r\n                this._shadowGenerator.setMinMaxDistance(min, max);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected override _createShadowGenerator() {\r\n        if (!(this.light instanceof DirectionalLight)) {\r\n            throw new Error(`FrameGraphCascadedShadowGeneratorTask ${this.name}: the CSM shadow generator only supports directional lights.`);\r\n        }\r\n        this._shadowGenerator = new CascadedShadowGenerator(this.mapSize, this.light, this.useFloat32TextureType, this.camera, this.useRedTextureFormat);\r\n        this._shadowGenerator.numCascades = this._numCascades;\r\n    }\r\n\r\n    protected override _setupShadowGenerator() {\r\n        super._setupShadowGenerator();\r\n\r\n        const shadowGenerator = this._shadowGenerator;\r\n        if (shadowGenerator === undefined) {\r\n            return;\r\n        }\r\n\r\n        shadowGenerator.debug = this._debug;\r\n        shadowGenerator.stabilizeCascades = this._stabilizeCascades;\r\n        shadowGenerator.lambda = this._lambda;\r\n        shadowGenerator.cascadeBlendPercentage = this._cascadeBlendPercentage;\r\n        shadowGenerator.depthClamp = this._depthClamp;\r\n        shadowGenerator.shadowMaxZ = this._shadowMaxZ;\r\n    }\r\n\r\n    public override record() {\r\n        if (this.light === undefined || this.objectList === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphCascadedShadowGeneratorTask ${this.name}: light, objectList and camera are required`);\r\n        }\r\n\r\n        if (this.depthTexture !== undefined) {\r\n            const depthTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.depthTexture);\r\n\r\n            const size = !depthTextureCreationOptions.sizeIsPercentage\r\n                ? textureSizeIsObject(depthTextureCreationOptions.size)\r\n                    ? depthTextureCreationOptions.size\r\n                    : { width: depthTextureCreationOptions.size, height: depthTextureCreationOptions.size }\r\n                : this._frameGraph.textureManager.getAbsoluteDimensions(depthTextureCreationOptions.size);\r\n\r\n            const width = size.width;\r\n            const height = size.height;\r\n\r\n            depthTextureCreationOptions.sizeIsPercentage = false;\r\n            depthTextureCreationOptions.options.formats = [Constants.TEXTUREFORMAT_RG];\r\n            depthTextureCreationOptions.options.samples = 1;\r\n\r\n            this._thinMinMaxReducer.setTextureDimensions(width, height, this.depthTextureType);\r\n\r\n            const reductionSteps = this._thinMinMaxReducer.reductionSteps;\r\n\r\n            let targetTexture: FrameGraphTextureHandle;\r\n\r\n            this._frameGraph.addPass(`${this.name} Before Min Max Reduction`).setExecuteFunc((context) => {\r\n                context.pushDebugGroup(`Min Max Reduction`);\r\n            });\r\n\r\n            for (let i = 0; i < reductionSteps.length - 1; ++i) {\r\n                const reductionStep = reductionSteps[i];\r\n\r\n                depthTextureCreationOptions.size = { width: reductionSteps[i + 1].textureWidth, height: reductionSteps[i + 1].textureHeight };\r\n\r\n                const postProcess = new FrameGraphPostProcessTask(reductionStep.name, this._frameGraph, reductionStep);\r\n\r\n                postProcess.sourceTexture = i == 0 ? this.depthTexture : targetTexture!;\r\n                postProcess.sourceSamplingMode = Constants.TEXTURE_NEAREST_NEAREST;\r\n                postProcess.targetTexture = this._frameGraph.textureManager.createRenderTargetTexture(`${this.name} ${reductionStep.name}`, depthTextureCreationOptions);\r\n\r\n                postProcess.record(true);\r\n\r\n                targetTexture = postProcess.outputTexture;\r\n            }\r\n\r\n            this._frameGraph.addPass(`${this.name} After Min Max Reduction`).setExecuteFunc((context) => {\r\n                context.popDebugGroup();\r\n                if (this._autoCalcDepthBounds && this._currentAutoCalcDepthBoundsCounter >= 0) {\r\n                    if (++this._currentAutoCalcDepthBoundsCounter >= this._autoCalcDepthBoundsRefreshRate) {\r\n                        const minMaxTexture = context.getTextureFromHandle(targetTexture!);\r\n                        if (minMaxTexture) {\r\n                            this._thinMinMaxReducer.readMinMax(minMaxTexture);\r\n                        }\r\n                    }\r\n                    this._currentAutoCalcDepthBoundsCounter %= this._autoCalcDepthBoundsRefreshRate;\r\n                    if (this._autoCalcDepthBoundsRefreshRate === 0) {\r\n                        this._currentAutoCalcDepthBoundsCounter = -1;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        super.record();\r\n    }\r\n\r\n    public override dispose() {\r\n        super.dispose();\r\n        this._thinMinMaxReducer.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Rendering/objectRendererTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Rendering/objectRendererTask.ts"],"sourcesContent":["import type {\r\n    FrameGraph,\r\n    FrameGraphTextureHandle,\r\n    Scene,\r\n    Camera,\r\n    FrameGraphObjectList,\r\n    FrameGraphRenderContext,\r\n    ObjectRendererOptions,\r\n    Light,\r\n    Nullable,\r\n    Observer,\r\n    FrameGraphShadowGeneratorTask,\r\n    FrameGraphRenderPass,\r\n    AbstractEngine,\r\n    BoundingBoxRenderer,\r\n    ShadowLight,\r\n} from \"core/index\";\r\nimport { backbufferColorTextureHandle, backbufferDepthStencilTextureHandle } from \"../../frameGraphTypes\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ObjectRenderer } from \"../../../Rendering/objectRenderer\";\r\nimport { FrameGraphCascadedShadowGeneratorTask } from \"./csmShadowGeneratorTask\";\r\nimport { Constants } from \"../../../Engines/constants\";\r\n\r\n/**\r\n * Task used to render objects to a texture.\r\n */\r\nexport class FrameGraphObjectRendererTask extends FrameGraphTask {\r\n    /**\r\n     * The target texture where the objects will be rendered.\r\n     */\r\n    public targetTexture: FrameGraphTextureHandle | FrameGraphTextureHandle[];\r\n\r\n    /**\r\n     * The depth attachment texture where the objects will be rendered (optional).\r\n     */\r\n    public depthTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The shadow generators used to render the objects (optional).\r\n     */\r\n    public shadowGenerators?: FrameGraphShadowGeneratorTask[] = [];\r\n\r\n    private _camera: Camera;\r\n\r\n    /**\r\n     * Gets or sets the camera used to render the objects.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(camera: Camera) {\r\n        this._camera = camera;\r\n        this._renderer.activeCamera = this.camera;\r\n    }\r\n\r\n    /**\r\n     * The list of objects to render.\r\n     */\r\n    public objectList: FrameGraphObjectList;\r\n\r\n    /**\r\n     * If depth testing should be enabled (default is true).\r\n     */\r\n    public depthTest = true;\r\n\r\n    /**\r\n     * If depth writing should be enabled (default is true).\r\n     */\r\n    public depthWrite = true;\r\n\r\n    /**\r\n     * If shadows should be disabled (default is false).\r\n     */\r\n    public disableShadows = false;\r\n\r\n    private _disableImageProcessing = false;\r\n    /**\r\n     * If image processing should be disabled (default is false).\r\n     * false means that the default image processing configuration will be applied (the one from the scene)\r\n     */\r\n    public get disableImageProcessing() {\r\n        return this._disableImageProcessing;\r\n    }\r\n\r\n    public set disableImageProcessing(value: boolean) {\r\n        if (value === this._disableImageProcessing) {\r\n            return;\r\n        }\r\n\r\n        this._disableImageProcessing = value;\r\n        this._renderer.disableImageProcessing = value;\r\n    }\r\n\r\n    /**\r\n     * Sets this property to true if this task is the main object renderer of the frame graph.\r\n     * It will help to locate the main object renderer in the frame graph when multiple object renderers are used.\r\n     * This is useful for the inspector to know which object renderer to use for additional rendering features like wireframe rendering or frustum light debugging.\r\n     * It is also used to determine the main camera used by the frame graph: this is the camera used by the main object renderer.\r\n     */\r\n    public isMainObjectRenderer = false;\r\n\r\n    private _renderParticles = true;\r\n    /**\r\n     * Defines if particles should be rendered (default is true).\r\n     */\r\n    public get renderParticles() {\r\n        return this._renderParticles;\r\n    }\r\n\r\n    public set renderParticles(value: boolean) {\r\n        if (value === this._renderParticles) {\r\n            return;\r\n        }\r\n\r\n        this._renderParticles = value;\r\n        this._renderer.renderParticles = value;\r\n    }\r\n\r\n    private _renderSprites = true;\r\n    /**\r\n     * Defines if sprites should be rendered (default is true).\r\n     */\r\n    public get renderSprites() {\r\n        return this._renderSprites;\r\n    }\r\n\r\n    public set renderSprites(value: boolean) {\r\n        if (value === this._renderSprites) {\r\n            return;\r\n        }\r\n\r\n        this._renderSprites = value;\r\n        this._renderer.renderSprites = value;\r\n    }\r\n\r\n    private _forceLayerMaskCheck = true;\r\n    /**\r\n     * Forces checking the layerMask property even if a custom list of meshes is provided (ie. if renderList is not undefined). Default is true.\r\n     */\r\n    public get forceLayerMaskCheck() {\r\n        return this._forceLayerMaskCheck;\r\n    }\r\n\r\n    public set forceLayerMaskCheck(value: boolean) {\r\n        if (value === this._forceLayerMaskCheck) {\r\n            return;\r\n        }\r\n\r\n        this._forceLayerMaskCheck = value;\r\n        this._renderer.forceLayerMaskCheck = value;\r\n    }\r\n\r\n    private _enableBoundingBoxRendering = true;\r\n    /**\r\n     * Enables the rendering of bounding boxes for meshes (still subject to Mesh.showBoundingBox or scene.forceShowBoundingBoxes). Default is true.\r\n     */\r\n    public get enableBoundingBoxRendering() {\r\n        return this._enableBoundingBoxRendering;\r\n    }\r\n\r\n    public set enableBoundingBoxRendering(value: boolean) {\r\n        if (value === this._enableBoundingBoxRendering) {\r\n            return;\r\n        }\r\n\r\n        this._enableBoundingBoxRendering = value;\r\n        this._renderer.enableBoundingBoxRendering = value;\r\n    }\r\n\r\n    private _enableOutlineRendering = true;\r\n    /**\r\n     * Enables the rendering of outlines/overlays for meshes (still subject to Mesh.renderOutline/Mesh.renderOverlay). Default is true.\r\n     */\r\n    public get enableOutlineRendering() {\r\n        return this._enableOutlineRendering;\r\n    }\r\n\r\n    public set enableOutlineRendering(value: boolean) {\r\n        if (value === this._enableOutlineRendering) {\r\n            return;\r\n        }\r\n\r\n        this._enableOutlineRendering = value;\r\n        this._renderer.enableOutlineRendering = value;\r\n    }\r\n\r\n    /**\r\n     * If true, targetTexture will be resolved at the end of the render pass, if this/these texture(s) is/are MSAA (default: true)\r\n     */\r\n    public resolveMSAAColors = true;\r\n\r\n    /**\r\n     * If true, depthTexture will be resolved at the end of the render pass, if this texture is provided and is MSAA (default: false).\r\n     */\r\n    public resolveMSAADepth = false;\r\n\r\n    /**\r\n     * The output texture.\r\n     * This texture will point to the same texture than the targetTexture property.\r\n     * Note, however, that the handle itself will be different!\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output depth attachment texture.\r\n     * This texture will point to the same texture than the depthTexture property if it is set.\r\n     * Note, however, that the handle itself will be different!\r\n     */\r\n    public readonly outputDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The object renderer used to render the objects.\r\n     */\r\n    public get objectRenderer() {\r\n        return this._renderer;\r\n    }\r\n\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(value: string) {\r\n        this._name = value;\r\n        if (this._renderer) {\r\n            this._renderer.name = value;\r\n        }\r\n    }\r\n\r\n    protected readonly _engine: AbstractEngine;\r\n    protected readonly _scene: Scene;\r\n    protected readonly _renderer: ObjectRenderer;\r\n    protected _textureWidth: number;\r\n    protected _textureHeight: number;\r\n    protected _onBeforeRenderObservable: Nullable<Observer<number>> = null;\r\n    protected _onAfterRenderObservable: Nullable<Observer<number>> = null;\r\n    protected _externalObjectRenderer = false;\r\n\r\n    /**\r\n     * Constructs a new object renderer task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param scene The scene the frame graph is associated with.\r\n     * @param options The options of the object renderer.\r\n     * @param existingObjectRenderer An existing object renderer to use (optional). If provided, the options parameter will be ignored.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene, options?: ObjectRendererOptions, existingObjectRenderer?: ObjectRenderer) {\r\n        super(name, frameGraph);\r\n\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n        this._externalObjectRenderer = !!existingObjectRenderer;\r\n        this._renderer = existingObjectRenderer ?? new ObjectRenderer(name, scene, options);\r\n        this.name = name;\r\n\r\n        this._renderer.disableImageProcessing = this._disableImageProcessing;\r\n        this._renderer.renderParticles = this._renderParticles;\r\n        this._renderer.renderSprites = this._renderSprites;\r\n        this._renderer.enableBoundingBoxRendering = this._enableBoundingBoxRendering;\r\n        this._renderer.forceLayerMaskCheck = this._forceLayerMaskCheck;\r\n\r\n        if (!this._externalObjectRenderer) {\r\n            this._renderer.onBeforeRenderingManagerRenderObservable.add(() => {\r\n                if (!this._renderer.options.doNotChangeAspectRatio) {\r\n                    scene.updateTransformMatrix(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.outputDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this._renderer.isReadyForRendering(this._textureWidth, this._textureHeight);\r\n    }\r\n\r\n    public record(skipCreationOfDisabledPasses = false, additionalExecute?: (context: FrameGraphRenderContext) => void): FrameGraphRenderPass {\r\n        if (this.targetTexture === undefined || this.objectList === undefined) {\r\n            throw new Error(`FrameGraphObjectRendererTask ${this.name}: targetTexture and objectList are required`);\r\n        }\r\n\r\n        // Make sure the renderList / particleSystemList are set when FrameGraphObjectRendererTask.isReady() is called!\r\n        this._renderer.renderList = this.objectList.meshes;\r\n        this._renderer.particleSystemList = this.objectList.particleSystems;\r\n\r\n        const targetTextures = Array.isArray(this.targetTexture) ? this.targetTexture : [this.targetTexture];\r\n\r\n        const outputTextureDescription = this._frameGraph.textureManager.getTextureDescription(targetTextures[0]);\r\n\r\n        let depthEnabled = false;\r\n\r\n        if (this.depthTexture !== undefined) {\r\n            if (this.depthTexture === backbufferDepthStencilTextureHandle && (targetTextures[0] !== backbufferColorTextureHandle || targetTextures.length > 1)) {\r\n                throw new Error(\r\n                    `FrameGraphObjectRendererTask ${this.name}: the back buffer color texture is the only color texture allowed when the depth is the back buffer depth/stencil`\r\n                );\r\n            }\r\n            if (this.depthTexture !== backbufferDepthStencilTextureHandle && targetTextures[0] === backbufferColorTextureHandle) {\r\n                throw new Error(\r\n                    `FrameGraphObjectRendererTask ${this.name}: the back buffer depth/stencil texture is the only depth texture allowed when the target is the back buffer color`\r\n                );\r\n            }\r\n\r\n            const depthTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.depthTexture);\r\n            if (depthTextureDescription.options.samples !== outputTextureDescription.options.samples) {\r\n                throw new Error(`FrameGraphObjectRendererTask ${this.name}: the depth texture and the output texture must have the same number of samples`);\r\n            }\r\n\r\n            depthEnabled = true;\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, targetTextures[0]);\r\n        if (this.depthTexture !== undefined) {\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputDepthTexture, this.depthTexture);\r\n        }\r\n\r\n        this._textureWidth = outputTextureDescription.size.width;\r\n        this._textureHeight = outputTextureDescription.size.height;\r\n\r\n        this._setLightsForShadow();\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.setRenderTarget(targetTextures);\r\n        pass.setRenderTargetDepth(this.depthTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            this._renderer.renderList = this.objectList.meshes;\r\n            this._renderer.particleSystemList = this.objectList.particleSystems;\r\n\r\n            const renderTargetWrapper = pass.frameGraphRenderTarget!.renderTargetWrapper;\r\n            if (renderTargetWrapper) {\r\n                renderTargetWrapper.resolveMSAAColors = this.resolveMSAAColors;\r\n                renderTargetWrapper.resolveMSAADepth = this.resolveMSAADepth;\r\n            }\r\n\r\n            // The cast to \"any\" is to avoid an error in ES6 in case you don't import boundingBoxRenderer\r\n            const boundingBoxRenderer = (this as any).getBoundingBoxRenderer?.() as Nullable<BoundingBoxRenderer>;\r\n\r\n            const currentBoundingBoxMeshList = boundingBoxRenderer && boundingBoxRenderer.renderList.length > 0 ? boundingBoxRenderer.renderList.data.slice() : [];\r\n            if (boundingBoxRenderer) {\r\n                currentBoundingBoxMeshList.length = boundingBoxRenderer.renderList.length;\r\n            }\r\n\r\n            context.setDepthStates(this.depthTest && depthEnabled, this.depthWrite && depthEnabled);\r\n\r\n            const camera = this._renderer.activeCamera;\r\n            if (camera && camera.cameraRigMode !== Constants.RIG_MODE_NONE && !camera._renderingMultiview) {\r\n                for (let index = 0; index < camera._rigCameras.length; index++) {\r\n                    const rigCamera = camera._rigCameras[index];\r\n\r\n                    rigCamera.rigParent = undefined; // for some reasons, ObjectRenderer uses the rigParent viewport if rigParent is defined (we want to use rigCamera.viewport instead)\r\n\r\n                    this._renderer.activeCamera = rigCamera;\r\n\r\n                    context.render(this._renderer, this._textureWidth, this._textureHeight);\r\n\r\n                    rigCamera.rigParent = camera;\r\n                }\r\n                this._renderer.activeCamera = camera;\r\n            } else {\r\n                context.render(this._renderer, this._textureWidth, this._textureHeight);\r\n            }\r\n\r\n            additionalExecute?.(context);\r\n\r\n            if (boundingBoxRenderer) {\r\n                boundingBoxRenderer.renderList.data = currentBoundingBoxMeshList;\r\n                boundingBoxRenderer.renderList.length = currentBoundingBoxMeshList.length;\r\n            }\r\n        });\r\n\r\n        if (!skipCreationOfDisabledPasses) {\r\n            const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n            passDisabled.setRenderTarget(targetTextures);\r\n            passDisabled.setRenderTargetDepth(this.depthTexture);\r\n            passDisabled.setExecuteFunc((_context) => {});\r\n        }\r\n\r\n        return pass;\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._renderer.onBeforeRenderObservable.remove(this._onBeforeRenderObservable);\r\n        this._renderer.onAfterRenderObservable.remove(this._onAfterRenderObservable);\r\n        if (!this._externalObjectRenderer) {\r\n            this._renderer.dispose();\r\n        }\r\n        super.dispose();\r\n    }\r\n\r\n    protected _setLightsForShadow() {\r\n        const lightsForShadow: Set<Light> = new Set();\r\n        const shadowEnabled: Map<Light, boolean> = new Map();\r\n\r\n        if (this.shadowGenerators) {\r\n            for (const shadowGeneratorTask of this.shadowGenerators) {\r\n                const shadowGenerator = shadowGeneratorTask.shadowGenerator;\r\n                const light = shadowGenerator.getLight();\r\n                if (light.isEnabled() && light.shadowEnabled) {\r\n                    lightsForShadow.add(light);\r\n                    if (FrameGraphCascadedShadowGeneratorTask.IsCascadedShadowGenerator(shadowGeneratorTask)) {\r\n                        light._shadowGenerators!.set(shadowGeneratorTask.camera, shadowGenerator);\r\n                    } else {\r\n                        light._shadowGenerators!.set(null, shadowGenerator);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this._renderer.onBeforeRenderObservable.remove(this._onBeforeRenderObservable);\r\n        this._onBeforeRenderObservable = this._renderer.onBeforeRenderObservable.add(() => {\r\n            for (let i = 0; i < this._scene.lights.length; i++) {\r\n                const light = this._scene.lights[i];\r\n                if (!(light as ShadowLight).setShadowProjectionMatrix) {\r\n                    continue; // Ignore lights that cannot cast shadows\r\n                }\r\n                shadowEnabled.set(light, light.shadowEnabled);\r\n                light.shadowEnabled = !this.disableShadows && lightsForShadow.has(light);\r\n            }\r\n        });\r\n\r\n        this._renderer.onAfterRenderObservable.remove(this._onAfterRenderObservable);\r\n        this._onAfterRenderObservable = this._renderer.onAfterRenderObservable.add(() => {\r\n            for (let i = 0; i < this._scene.lights.length; i++) {\r\n                const light = this._scene.lights[i];\r\n                if (!(light as ShadowLight).setShadowProjectionMatrix) {\r\n                    continue; // Ignore lights that cannot cast shadows\r\n                }\r\n                light.shadowEnabled = shadowEnabled.get(light)!;\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAiBA,OAAO,EAAE,4BAA4B,EAAE,mCAAmC,EAAE,MAAM,uBAAuB,CAAC;AAC1G,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,OAAO,EAAE,cAAc,EAAE,MAAM,mCAAmC,CAAC;AACnE,OAAO,EAAE,qCAAqC,EAAE,MAAM,0BAA0B,CAAC;;;;;AAM3E,MAAO,4BAA6B,SAAQ,yPAAc;IAkB5D;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,MAAc,EAAA;QAC5B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;IAC9C,CAAC;IAuBD;;;OAGG,CACH,IAAW,sBAAsB,GAAA;QAC7B,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACxC,CAAC;IAED,IAAW,sBAAsB,CAAC,KAAc,EAAA;QAC5C,IAAI,KAAK,KAAK,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACzC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,SAAS,CAAC,sBAAsB,GAAG,KAAK,CAAC;IAClD,CAAC;IAWD;;OAEG,CACH,IAAW,eAAe,GAAA;QACtB,OAAO,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAED,IAAW,eAAe,CAAC,KAAc,EAAA;QACrC,IAAI,KAAK,KAAK,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAClC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,eAAe,GAAG,KAAK,CAAC;IAC3C,CAAC;IAGD;;OAEG,CACH,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IAED,IAAW,aAAa,CAAC,KAAc,EAAA;QACnC,IAAI,KAAK,KAAK,IAAI,CAAC,cAAc,EAAE,CAAC;YAChC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,SAAS,CAAC,aAAa,GAAG,KAAK,CAAC;IACzC,CAAC;IAGD;;OAEG,CACH,IAAW,mBAAmB,GAAA;QAC1B,OAAO,IAAI,CAAC,oBAAoB,CAAC;IACrC,CAAC;IAED,IAAW,mBAAmB,CAAC,KAAc,EAAA;QACzC,IAAI,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACtC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAClC,IAAI,CAAC,SAAS,CAAC,mBAAmB,GAAG,KAAK,CAAC;IAC/C,CAAC;IAGD;;OAEG,CACH,IAAW,0BAA0B,GAAA;QACjC,OAAO,IAAI,CAAC,2BAA2B,CAAC;IAC5C,CAAC;IAED,IAAW,0BAA0B,CAAC,KAAc,EAAA;QAChD,IAAI,KAAK,KAAK,IAAI,CAAC,2BAA2B,EAAE,CAAC;YAC7C,OAAO;QACX,CAAC;QAED,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;QACzC,IAAI,CAAC,SAAS,CAAC,0BAA0B,GAAG,KAAK,CAAC;IACtD,CAAC;IAGD;;OAEG,CACH,IAAW,sBAAsB,GAAA;QAC7B,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACxC,CAAC;IAED,IAAW,sBAAsB,CAAC,KAAc,EAAA;QAC5C,IAAI,KAAK,KAAK,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACzC,OAAO;QACX,CAAC;QAED,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,SAAS,CAAC,sBAAsB,GAAG,KAAK,CAAC;IAClD,CAAC;IA0BD;;OAEG,CACH,IAAW,cAAc,GAAA;QACrB,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAoB,IAAI,CAAC,KAAa,EAAA;QAClC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,KAAK,CAAC;QAChC,CAAC;IACL,CAAC;IAWD;;;;;;;OAOG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,OAA+B,EAAE,sBAAuC,CAAA;QACpI,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAlN5B;;WAEG,CACI,IAAA,CAAA,gBAAgB,GAAqC,EAAE,CAAC;QAqB/D;;WAEG,CACI,IAAA,CAAA,SAAS,GAAG,IAAI,CAAC;QAExB;;WAEG,CACI,IAAA,CAAA,UAAU,GAAG,IAAI,CAAC;QAEzB;;WAEG,CACI,IAAA,CAAA,cAAc,GAAG,KAAK,CAAC;QAEtB,IAAA,CAAA,uBAAuB,GAAG,KAAK,CAAC;QAkBxC;;;;;WAKG,CACI,IAAA,CAAA,oBAAoB,GAAG,KAAK,CAAC;QAE5B,IAAA,CAAA,gBAAgB,GAAG,IAAI,CAAC;QAiBxB,IAAA,CAAA,cAAc,GAAG,IAAI,CAAC;QAiBtB,IAAA,CAAA,oBAAoB,GAAG,IAAI,CAAC;QAiB5B,IAAA,CAAA,2BAA2B,GAAG,IAAI,CAAC;QAiBnC,IAAA,CAAA,uBAAuB,GAAG,IAAI,CAAC;QAiBvC;;WAEG,CACI,IAAA,CAAA,iBAAiB,GAAG,IAAI,CAAC;QAEhC;;WAEG,CACI,IAAA,CAAA,gBAAgB,GAAG,KAAK,CAAC;QAuCtB,IAAA,CAAA,yBAAyB,GAA+B,IAAI,CAAC;QAC7D,IAAA,CAAA,wBAAwB,GAA+B,IAAI,CAAC;QAC5D,IAAA,CAAA,uBAAuB,GAAG,KAAK,CAAC;QAatC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QACjC,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,sBAAsB,CAAC;QACxD,IAAI,CAAC,SAAS,GAAG,sBAAsB,IAAI,IAAI,wPAAc,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;QACpF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,IAAI,CAAC,SAAS,CAAC,sBAAsB,GAAG,IAAI,CAAC,uBAAuB,CAAC;QACrE,IAAI,CAAC,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACvD,IAAI,CAAC,SAAS,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QACnD,IAAI,CAAC,SAAS,CAAC,0BAA0B,GAAG,IAAI,CAAC,2BAA2B,CAAC;QAC7E,IAAI,CAAC,SAAS,CAAC,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAE/D,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,wCAAwC,CAAC,GAAG,CAAC,GAAG,EAAE;gBAC7D,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;oBACjD,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;gBACtC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;QAC5E,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;IACrF,CAAC;IAEe,OAAO,GAAA;QACnB,OAAO,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACvF,CAAC;IAEM,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAE,iBAA8D,EAAA;QAC9G,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE,CAAC;YACpE,MAAM,IAAI,KAAK,CAAC,CAAA,6BAAA,EAAgC,IAAI,CAAC,IAAI,CAAA,2CAAA,CAA6C,CAAC,CAAC;QAC5G,CAAC;QAED,+GAA+G;QAC/G,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QACnD,IAAI,CAAC,SAAS,CAAC,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC;QAEpE,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,aAAa;SAAC,CAAC;QAErG,MAAM,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1G,IAAI,YAAY,GAAG,KAAK,CAAC;QAEzB,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YAClC,IAAI,IAAI,CAAC,YAAY,KAAK,+QAAmC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,wQAA4B,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC;gBACjJ,MAAM,IAAI,KAAK,CACX,CAAA,6BAAA,EAAgC,IAAI,CAAC,IAAI,CAAA,iHAAA,CAAmH,CAC/J,CAAC;YACN,CAAC;YACD,IAAI,IAAI,CAAC,YAAY,KAAK,+QAAmC,IAAI,cAAc,CAAC,CAAC,CAAC,KAAK,wQAA4B,EAAE,CAAC;gBAClH,MAAM,IAAI,KAAK,CACX,CAAA,6BAAA,EAAgC,IAAI,CAAC,IAAI,CAAA,kHAAA,CAAoH,CAChK,CAAC;YACN,CAAC;YAED,MAAM,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACzG,IAAI,uBAAuB,CAAC,OAAO,CAAC,OAAO,KAAK,wBAAwB,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACvF,MAAM,IAAI,KAAK,CAAC,CAAA,6BAAA,EAAgC,IAAI,CAAC,IAAI,CAAA,+EAAA,CAAiF,CAAC,CAAC;YAChJ,CAAC;YAED,YAAY,GAAG,IAAI,CAAC;QACxB,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7F,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YAClC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACtG,CAAC;QAED,IAAI,CAAC,aAAa,GAAG,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC;QACzD,IAAI,CAAC,cAAc,GAAG,wBAAwB,CAAC,IAAI,CAAC,MAAM,CAAC;QAE3D,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE3B,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC;QACrC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YACnD,IAAI,CAAC,SAAS,CAAC,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC;YAEpE,MAAM,mBAAmB,GAAG,IAAI,CAAC,sBAAuB,CAAC,mBAAmB,CAAC;YAC7E,IAAI,mBAAmB,EAAE,CAAC;gBACtB,mBAAmB,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;gBAC/D,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;YACjE,CAAC;YAED,6FAA6F;YAC7F,MAAM,mBAAmB,GAAI,IAAY,CAAC,sBAAsB,EAAE,EAAmC,CAAC;YAEtG,MAAM,0BAA0B,GAAG,mBAAmB,IAAI,mBAAmB,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACvJ,IAAI,mBAAmB,EAAE,CAAC;gBACtB,0BAA0B,CAAC,MAAM,GAAG,mBAAmB,CAAC,UAAU,CAAC,MAAM,CAAC;YAC9E,CAAC;YAED,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,IAAI,YAAY,EAAE,IAAI,CAAC,UAAU,IAAI,YAAY,CAAC,CAAC;YAExF,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC;YAC3C,IAAI,MAAM,IAAI,MAAM,CAAC,aAAa,KAAK,KAAA,CAAA,GAAS,CAAC,GAAA,UAAa,IAAI,CAAC,IAAA,EAAM,CAAC,mBAAmB,EAAE,CAAC;gBAC5F,IAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE,CAAE,CAAC;oBAC7D,MAAM,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;oBAE5C,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,mIAAmI;oBAEpK,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,SAAS,CAAC;oBAExC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;oBAExE,SAAS,CAAC,SAAS,GAAG,MAAM,CAAC;gBACjC,CAAC;gBACD,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,MAAM,CAAC;YACzC,CAAC,MAAM,CAAC;gBACJ,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAC5E,CAAC;YAED,iBAAiB,EAAE,CAAC,OAAO,CAAC,CAAC;YAE7B,IAAI,mBAAmB,EAAE,CAAC;gBACtB,mBAAmB,CAAC,UAAU,CAAC,IAAI,GAAG,0BAA0B,CAAC;gBACjE,mBAAmB,CAAC,UAAU,CAAC,MAAM,GAAG,0BAA0B,CAAC,MAAM,CAAC;YAC9E,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4BAA4B,EAAE,CAAC;YAChC,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;YAEnF,YAAY,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC;YAC7C,YAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACrD,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,AAAE,CAAC,CAAC,CAAC;QAClD,CAAC;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAEe,OAAO,GAAA;QACnB,IAAI,CAAC,SAAS,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAC/E,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7E,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QACD,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAES,mBAAmB,GAAA;QACzB,MAAM,eAAe,GAAe,IAAI,GAAG,EAAE,CAAC;QAC9C,MAAM,aAAa,GAAwB,IAAI,GAAG,EAAE,CAAC;QAErD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,KAAK,MAAM,mBAAmB,IAAI,IAAI,CAAC,gBAAgB,CAAE,CAAC;gBACtD,MAAM,eAAe,GAAG,mBAAmB,CAAC,eAAe,CAAC;gBAC5D,MAAM,KAAK,GAAG,eAAe,CAAC,QAAQ,EAAE,CAAC;gBACzC,IAAI,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,aAAa,EAAE,CAAC;oBAC3C,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBAC3B,IAAI,8SAAqC,CAAC,yBAAyB,CAAC,mBAAmB,CAAC,EAAE,CAAC;wBACvF,KAAK,CAAC,iBAAkB,CAAC,GAAG,CAAC,mBAAmB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;oBAC9E,CAAC,MAAM,CAAC;wBACJ,KAAK,CAAC,iBAAkB,CAAC,GAAG,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;oBACxD,CAAC;gBACL,CAAC;YACL,CAAC;QACL,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAC/E,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,SAAS,CAAC,wBAAwB,CAAC,GAAG,CAAC,GAAG,EAAE;YAC9E,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;gBACjD,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACpC,IAAI,CAAE,KAAqB,CAAC,yBAAyB,EAAE,CAAC;oBACpD,SAAS,CAAC,yCAAyC;gBACvD,CAAC;gBACD,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,aAAa,CAAC,CAAC;gBAC9C,KAAK,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,cAAc,IAAI,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAC7E,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC7E,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,GAAG,CAAC,GAAG,EAAE;YAC5E,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;gBACjD,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACpC,IAAI,CAAE,KAAqB,CAAC,yBAAyB,EAAE,CAAC;oBACpD,SAAS,CAAC,yCAAyC;gBACvD,CAAC;gBACD,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC;YACpD,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;CACJ"}},
    {"offset": {"line": 1373, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Rendering/geometryRendererTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Rendering/geometryRendererTask.ts"],"sourcesContent":["import type {\r\n    FrameGraphTextureHandle,\r\n    Scene,\r\n    Camera,\r\n    AbstractEngine,\r\n    FrameGraph,\r\n    GeometryRenderingTextureClearType,\r\n    FrameGraphObjectList,\r\n    AbstractMesh,\r\n    ObjectRendererOptions,\r\n} from \"core/index\";\r\nimport { backbufferDepthStencilTextureHandle } from \"../../frameGraphTypes\";\r\nimport { Color4 } from \"core/Maths/math.color\";\r\nimport { MaterialHelperGeometryRendering } from \"core/Materials/materialHelper.geometryrendering\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ObjectRenderer } from \"../../../Rendering/objectRenderer\";\r\n\r\n/**\r\n * Description of a texture used by the geometry renderer task.\r\n */\r\nexport interface IFrameGraphGeometryRendererTextureDescription {\r\n    /**\r\n     * The type of the texture.\r\n     * The value should be one of the Constants.PREPASS_XXX_TEXTURE_TYPE values.\r\n     */\r\n    type: number;\r\n\r\n    /**\r\n     * The type of the texture.\r\n     */\r\n    textureType: number;\r\n\r\n    /**\r\n     * The format of the texture.\r\n     */\r\n    textureFormat: number;\r\n}\r\n\r\nconst ClearColors: Color4[] = [new Color4(0, 0, 0, 0), new Color4(1, 1, 1, 1), new Color4(0, 0, 0, 0)];\r\n\r\n/**\r\n * Task used to render geometry to a set of textures.\r\n */\r\nexport class FrameGraphGeometryRendererTask extends FrameGraphTask {\r\n    /**\r\n     * The depth texture attachment to use for rendering (optional).\r\n     */\r\n    public depthTexture?: FrameGraphTextureHandle;\r\n\r\n    private _camera: Camera;\r\n\r\n    /**\r\n     * Gets or sets the camera used for rendering.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(camera: Camera) {\r\n        this._camera = camera;\r\n        this._renderer.activeCamera = this.camera;\r\n    }\r\n\r\n    /**\r\n     * The object list used for rendering.\r\n     */\r\n    public objectList: FrameGraphObjectList;\r\n\r\n    /**\r\n     * Whether depth testing is enabled (default is true).\r\n     */\r\n    public depthTest = true;\r\n\r\n    /**\r\n     * Whether depth writing is enabled (default is true).\r\n     */\r\n    public depthWrite = true;\r\n\r\n    /**\r\n     * The size of the output textures (default is 100% of the back buffer texture size).\r\n     */\r\n    public size: { width: number; height: number } = { width: 100, height: 100 };\r\n\r\n    /**\r\n     * Whether the size is a percentage of the back buffer size (default is true).\r\n     */\r\n    public sizeIsPercentage = true;\r\n\r\n    /**\r\n     * The number of samples to use for the output textures (default is 1).\r\n     */\r\n    public samples = 1;\r\n\r\n    private _reverseCulling = false;\r\n\r\n    /**\r\n     * Whether to reverse culling (default is false).\r\n     */\r\n    public get reverseCulling() {\r\n        return this._reverseCulling;\r\n    }\r\n\r\n    public set reverseCulling(value: boolean) {\r\n        this._reverseCulling = value;\r\n\r\n        const configuration = MaterialHelperGeometryRendering.GetConfiguration(this._renderer.renderPassId);\r\n        if (configuration) {\r\n            configuration.reverseCulling = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Indicates if a mesh shouldn't be rendered when its material has depth write disabled (default is true).\r\n     */\r\n    public dontRenderWhenMaterialDepthWriteIsDisabled = true;\r\n\r\n    /**\r\n     * If true, the output geometry texture(s) will be resolved at the end of the render pass, if samples is greater than 1 (default: true)\r\n     */\r\n    public resolveMSAAColors = true;\r\n\r\n    /**\r\n     * If true, depthTexture will be resolved at the end of the render pass, if this texture is provided and samples is greater than 1 (default: true)\r\n     */\r\n    public resolveMSAADepth = false;\r\n\r\n    /**\r\n     * The list of texture descriptions used by the geometry renderer task.\r\n     */\r\n    public textureDescriptions: IFrameGraphGeometryRendererTextureDescription[] = [];\r\n\r\n    /**\r\n     * The output depth texture attachment texture.\r\n     * This texture will point to the same texture than the depthTexture property if it is set.\r\n     * Note, however, that the handle itself will be different!\r\n     */\r\n    public readonly outputDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The depth (in view space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryViewDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The normalized depth (in view space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     * The normalization is (d - near) / (far - near), where d is the depth value in view space and near and far are the near and far planes of the camera.\r\n     */\r\n    public readonly geometryNormViewDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The depth (in screen space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryScreenDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The normal (in view space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryViewNormalTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The normal (in world space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryWorldNormalTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The position (in local space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryLocalPositionTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The position (in world space) output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryWorldPositionTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The albedo output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryAlbedoTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The reflectivity output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryReflectivityTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The velocity output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryVelocityTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The linear velocity output texture. Will point to a valid texture only if that texture has been requested in textureDescriptions!\r\n     */\r\n    public readonly geometryLinearVelocityTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The object renderer used by the geometry renderer task.\r\n     */\r\n    public get objectRenderer() {\r\n        return this._renderer;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(value: string) {\r\n        this._name = value;\r\n        if (this._renderer) {\r\n            this._renderer.name = value;\r\n        }\r\n    }\r\n\r\n    private _forceLayerMaskCheck = true;\r\n    /**\r\n     * Force checking the layerMask property even if a custom list of meshes is provided (ie. if renderList is not undefined). Default is true.\r\n     */\r\n    public get forceLayerMaskCheck() {\r\n        return this._forceLayerMaskCheck;\r\n    }\r\n\r\n    public set forceLayerMaskCheck(value: boolean) {\r\n        if (value === this._forceLayerMaskCheck) {\r\n            return;\r\n        }\r\n\r\n        this._forceLayerMaskCheck = value;\r\n        this._renderer.forceLayerMaskCheck = value;\r\n    }\r\n\r\n    private readonly _engine: AbstractEngine;\r\n    private readonly _scene: Scene;\r\n    private readonly _renderer: ObjectRenderer;\r\n    private _textureWidth: number;\r\n    private _textureHeight: number;\r\n    private _clearAttachmentsLayout: Map<GeometryRenderingTextureClearType, number[]>;\r\n    private _allAttachmentsLayout: number[];\r\n\r\n    /**\r\n     * Constructs a new geometry renderer task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param scene The scene the frame graph is associated with.\r\n     * @param options The options of the object renderer.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene, options?: ObjectRendererOptions) {\r\n        super(name, frameGraph);\r\n\r\n        this._scene = scene;\r\n        this._engine = this._scene.getEngine();\r\n\r\n        this._renderer = new ObjectRenderer(name, scene, options);\r\n        this._renderer.renderSprites = false;\r\n        this._renderer.renderParticles = false;\r\n        this._renderer.enableBoundingBoxRendering = false;\r\n        this._renderer.enableOutlineRendering = false;\r\n        this._renderer.disableDepthPrePass = true;\r\n\r\n        this._renderer.customIsReadyFunction = (mesh: AbstractMesh, refreshRate: number, preWarm?: boolean) => {\r\n            if (this.dontRenderWhenMaterialDepthWriteIsDisabled && mesh.material && mesh.material.disableDepthWrite) {\r\n                return !!preWarm;\r\n            }\r\n\r\n            return mesh.isReady(refreshRate === 0);\r\n        };\r\n\r\n        this._renderer.onBeforeRenderingManagerRenderObservable.add(() => {\r\n            if (!this._renderer.options.doNotChangeAspectRatio) {\r\n                scene.updateTransformMatrix(true);\r\n            }\r\n        });\r\n\r\n        this.name = name;\r\n        this._clearAttachmentsLayout = new Map();\r\n        this._allAttachmentsLayout = [];\r\n\r\n        this.outputDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryViewDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryNormViewDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryScreenDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryViewNormalTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryWorldNormalTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryLocalPositionTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryWorldPositionTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryAlbedoTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryReflectivityTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryVelocityTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.geometryLinearVelocityTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    /**\r\n     * Gets the list of excluded meshes from the velocity texture.\r\n     */\r\n    public get excludedSkinnedMeshFromVelocityTexture(): AbstractMesh[] {\r\n        return MaterialHelperGeometryRendering.GetConfiguration(this._renderer.renderPassId).excludedSkinnedMesh;\r\n    }\r\n\r\n    /**\r\n     * Excludes the given skinned mesh from computing bones velocities.\r\n     * Computing bones velocities can have a cost. The cost can be saved by calling this function and by passing the skinned mesh to ignore.\r\n     * @param skinnedMesh The mesh containing the skeleton to ignore when computing the velocity map.\r\n     */\r\n    public excludeSkinnedMeshFromVelocityTexture(skinnedMesh: AbstractMesh): void {\r\n        if (skinnedMesh.skeleton) {\r\n            const list = this.excludedSkinnedMeshFromVelocityTexture;\r\n            if (list.indexOf(skinnedMesh) === -1) {\r\n                list.push(skinnedMesh);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes the given skinned mesh from the excluded meshes to integrate bones velocities while rendering the velocity map.\r\n     * @param skinnedMesh The mesh containing the skeleton that has been ignored previously.\r\n     * @see excludeSkinnedMesh to exclude a skinned mesh from bones velocity computation.\r\n     */\r\n    public removeExcludedSkinnedMeshFromVelocityTexture(skinnedMesh: AbstractMesh): void {\r\n        const list = this.excludedSkinnedMeshFromVelocityTexture;\r\n        const index = list.indexOf(skinnedMesh);\r\n        if (index !== -1) {\r\n            list.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public override isReady() {\r\n        return this._renderer.isReadyForRendering(this._textureWidth, this._textureHeight);\r\n    }\r\n\r\n    public record() {\r\n        if (this.objectList === undefined) {\r\n            throw new Error(`FrameGraphGeometryRendererTask ${this.name}: object list must be provided`);\r\n        }\r\n\r\n        // Make sure the renderList / particleSystemList are set when FrameGraphGeometryRendererTask.isReady() is called!\r\n        this._renderer.renderList = this.objectList.meshes;\r\n        this._renderer.particleSystemList = this.objectList.particleSystems;\r\n\r\n        const outputTextureHandle = this._createMultiRenderTargetTexture();\r\n\r\n        const depthEnabled = this._checkDepthTextureCompatibility();\r\n\r\n        this._buildClearAttachmentsLayout();\r\n\r\n        this._registerForRenderPassId(this._renderer.renderPassId);\r\n\r\n        const outputTextureDescription = outputTextureHandle.length > 0 ? this._frameGraph.textureManager.getTextureDescription(outputTextureHandle[0]) : null;\r\n\r\n        this._textureWidth = outputTextureDescription?.size.width ?? 0;\r\n        this._textureHeight = outputTextureDescription?.size.height ?? 0;\r\n\r\n        // Create pass\r\n        MaterialHelperGeometryRendering.MarkAsDirty(this._renderer.renderPassId, this.objectList.meshes || this._scene.meshes);\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.setRenderTarget(outputTextureHandle);\r\n\r\n        let needPreviousWorldMatrices = false;\r\n\r\n        for (let i = 0; i < this.textureDescriptions.length; i++) {\r\n            const description = this.textureDescriptions[i];\r\n            const handle = outputTextureHandle[i];\r\n            const index = MaterialHelperGeometryRendering.GeometryTextureDescriptions.findIndex((f) => f.type === description.type);\r\n            const geometryDescription = MaterialHelperGeometryRendering.GeometryTextureDescriptions[index];\r\n\r\n            switch (geometryDescription.type) {\r\n                case Constants.PREPASS_DEPTH_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryViewDepthTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_NORMALIZED_VIEW_DEPTH_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryNormViewDepthTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_SCREENSPACE_DEPTH_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryScreenDepthTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_NORMAL_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryViewNormalTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_WORLD_NORMAL_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryWorldNormalTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_LOCAL_POSITION_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryLocalPositionTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_POSITION_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryWorldPositionTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_ALBEDO_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryAlbedoTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_REFLECTIVITY_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryReflectivityTexture, handle);\r\n                    break;\r\n                case Constants.PREPASS_VELOCITY_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryVelocityTexture, handle);\r\n                    needPreviousWorldMatrices = true;\r\n                    break;\r\n                case Constants.PREPASS_VELOCITY_LINEAR_TEXTURE_TYPE:\r\n                    this._frameGraph.textureManager.resolveDanglingHandle(this.geometryLinearVelocityTexture, handle);\r\n                    needPreviousWorldMatrices = true;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        this._scene.needsPreviousWorldMatrices = needPreviousWorldMatrices;\r\n\r\n        pass.setRenderTargetDepth(this.depthTexture);\r\n\r\n        pass.setExecuteFunc((context) => {\r\n            this._renderer.renderList = this.objectList.meshes;\r\n            this._renderer.particleSystemList = this.objectList.particleSystems;\r\n\r\n            pass.frameGraphRenderTarget!.renderTargetWrapper!.resolveMSAAColors = this.resolveMSAAColors;\r\n            pass.frameGraphRenderTarget!.renderTargetWrapper!.resolveMSAADepth = this.resolveMSAADepth;\r\n\r\n            context.setDepthStates(this.depthTest && depthEnabled, this.depthWrite && depthEnabled);\r\n\r\n            this._clearAttachmentsLayout.forEach((layout, clearType) => {\r\n                context.clearColorAttachments(ClearColors[clearType], layout);\r\n            });\r\n\r\n            context.bindAttachments(this._allAttachmentsLayout);\r\n\r\n            context.render(this._renderer, this._textureWidth, this._textureHeight);\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(outputTextureHandle);\r\n        passDisabled.setRenderTargetDepth(this.depthTexture);\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n\r\n    public override dispose(): void {\r\n        MaterialHelperGeometryRendering.DeleteConfiguration(this._renderer.renderPassId);\r\n        this._renderer.dispose();\r\n        super.dispose();\r\n    }\r\n\r\n    private _createMultiRenderTargetTexture(): FrameGraphTextureHandle[] {\r\n        const types: number[] = [];\r\n        const formats: number[] = [];\r\n        const labels: string[] = [];\r\n        const useSRGBBuffers: boolean[] = [];\r\n\r\n        for (let i = 0; i < this.textureDescriptions.length; i++) {\r\n            const description = this.textureDescriptions[i];\r\n            const index = MaterialHelperGeometryRendering.GeometryTextureDescriptions.findIndex((f) => f.type === description.type);\r\n\r\n            if (index === -1) {\r\n                throw new Error(`FrameGraphGeometryRendererTask ${this.name}: unknown texture type ${description.type}`);\r\n            }\r\n\r\n            types[i] = description.textureType;\r\n            formats[i] = description.textureFormat;\r\n            labels[i] = MaterialHelperGeometryRendering.GeometryTextureDescriptions[index].name;\r\n            useSRGBBuffers[i] = false;\r\n        }\r\n\r\n        const baseHandle = this._frameGraph.textureManager.createRenderTargetTexture(this.name, {\r\n            size: this.size,\r\n            sizeIsPercentage: this.sizeIsPercentage,\r\n            options: {\r\n                createMipMaps: false,\r\n                samples: this.samples,\r\n                types,\r\n                formats,\r\n                useSRGBBuffers,\r\n                labels,\r\n            },\r\n        });\r\n\r\n        const handles: FrameGraphTextureHandle[] = [];\r\n        for (let i = 0; i < this.textureDescriptions.length; i++) {\r\n            handles.push(baseHandle + i);\r\n        }\r\n\r\n        return handles;\r\n    }\r\n\r\n    private _checkDepthTextureCompatibility(): boolean {\r\n        let depthEnabled = false;\r\n\r\n        if (this.depthTexture !== undefined) {\r\n            if (this.depthTexture === backbufferDepthStencilTextureHandle) {\r\n                throw new Error(`FrameGraphGeometryRendererTask ${this.name}: the depth/stencil back buffer is not allowed as a depth texture`);\r\n            }\r\n\r\n            const depthTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.depthTexture);\r\n            if (depthTextureDescription.options.samples !== this.samples && this.textureDescriptions.length > 0) {\r\n                throw new Error(`FrameGraphGeometryRendererTask ${this.name}: the depth texture and the output texture must have the same number of samples`);\r\n            }\r\n\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputDepthTexture, this.depthTexture);\r\n\r\n            depthEnabled = true;\r\n        }\r\n\r\n        return depthEnabled;\r\n    }\r\n\r\n    private _buildClearAttachmentsLayout() {\r\n        const clearAttachmentsLayout = new Map<GeometryRenderingTextureClearType, boolean[]>();\r\n        const allAttachmentsLayout: boolean[] = [];\r\n\r\n        for (let i = 0; i < this.textureDescriptions.length; i++) {\r\n            const description = this.textureDescriptions[i];\r\n            const index = MaterialHelperGeometryRendering.GeometryTextureDescriptions.findIndex((f) => f.type === description.type);\r\n            const geometryDescription = MaterialHelperGeometryRendering.GeometryTextureDescriptions[index];\r\n\r\n            let layout = clearAttachmentsLayout.get(geometryDescription.clearType);\r\n            if (layout === undefined) {\r\n                layout = [];\r\n                clearAttachmentsLayout.set(geometryDescription.clearType, layout);\r\n                for (let j = 0; j < i; j++) {\r\n                    layout[j] = false;\r\n                }\r\n            }\r\n\r\n            clearAttachmentsLayout.forEach((layout, clearType) => {\r\n                layout.push(clearType === geometryDescription.clearType);\r\n            });\r\n\r\n            allAttachmentsLayout.push(true);\r\n        }\r\n\r\n        this._clearAttachmentsLayout = new Map();\r\n\r\n        clearAttachmentsLayout.forEach((layout, clearType) => {\r\n            this._clearAttachmentsLayout.set(clearType, this._engine.buildTextureLayout(layout));\r\n        });\r\n\r\n        this._allAttachmentsLayout = this._engine.buildTextureLayout(allAttachmentsLayout);\r\n    }\r\n\r\n    private _registerForRenderPassId(renderPassId: number) {\r\n        const configuration = MaterialHelperGeometryRendering.CreateConfiguration(renderPassId);\r\n\r\n        for (let i = 0; i < this.textureDescriptions.length; i++) {\r\n            const description = this.textureDescriptions[i];\r\n            const index = MaterialHelperGeometryRendering.GeometryTextureDescriptions.findIndex((f) => f.type === description.type);\r\n            const geometryDescription = MaterialHelperGeometryRendering.GeometryTextureDescriptions[index];\r\n\r\n            configuration.defines[geometryDescription.defineIndex] = i;\r\n        }\r\n\r\n        configuration.reverseCulling = this.reverseCulling;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1724, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Rendering/utilityLayerRendererTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Rendering/utilityLayerRendererTask.ts"],"sourcesContent":["import type { Camera, FrameGraph, FrameGraphTextureHandle, Scene } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\n\r\n/**\r\n * Task used to render an utility layer.\r\n */\r\nexport class FrameGraphUtilityLayerRendererTask extends FrameGraphTask {\r\n    /**\r\n     * The target texture of the task.\r\n     */\r\n    public targetTexture: FrameGraphTextureHandle;\r\n\r\n    private _camera: Camera;\r\n    /**\r\n     * The camera used to render the utility layer.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(value: Camera) {\r\n        this._camera = value;\r\n\r\n        this.layer.setRenderCamera(value);\r\n        this.layer.utilityLayerScene.activeCamera = value;\r\n    }\r\n\r\n    /**\r\n     * The output texture of the task.\r\n     * This is the same texture as the target texture, but the handles are different!\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The utility layer renderer.\r\n     */\r\n    public readonly layer: UtilityLayerRenderer;\r\n\r\n    /**\r\n     * Creates a new utility layer renderer task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param scene The scene the task belongs to.\r\n     * @param handleEvents If the utility layer should handle events.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene, handleEvents = true) {\r\n        super(name, frameGraph);\r\n\r\n        this.layer = new UtilityLayerRenderer(scene, handleEvents, true);\r\n        this.layer.utilityLayerScene._useCurrentFrameBuffer = true;\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public record(): void {\r\n        if (!this.targetTexture || !this.camera) {\r\n            throw new Error(`FrameGraphUtilityLayerRendererTask \"${this.name}\": targetTexture and camera are required`);\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture);\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            context.render(this.layer);\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this.layer.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,OAAO,EAAE,oBAAoB,EAAE,mDAA4C;;;AAKrE,MAAO,kCAAmC,SAAQ,yPAAc;IAOlE;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,KAAa,EAAA;QAC3B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,YAAY,GAAG,KAAK,CAAC;IACtD,CAAC;IAaD;;;;;;OAMG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,YAAY,GAAG,IAAI,CAAA;QAC/E,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAExB,IAAI,CAAC,KAAK,GAAG,IAAI,oQAAoB,CAAC,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAE3D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;IAChF,CAAC;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACtC,MAAM,IAAI,KAAK,CAAC,CAAA,oCAAA,EAAuC,IAAI,CAAC,IAAI,CAAA,wCAAA,CAA0C,CAAC,CAAC;QAChH,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAE9F,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;QAEnF,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjD,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,AAAE,CAAC,CAAC,CAAC;IAClD,CAAC;IAEe,OAAO,GAAA;QACnB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QACrB,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;CACJ"}},
    {"offset": {"line": 1778, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphUtils.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphUtils.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/naming-convention */\r\n// eslint-disable-next-line import/no-internal-modules\r\nimport type { Camera, FrameGraph, Nullable } from \"core/index\";\r\nimport { FrameGraphObjectRendererTask } from \"core/FrameGraph/Tasks/Rendering/objectRendererTask\";\r\nimport { FrameGraphGeometryRendererTask } from \"core/FrameGraph/Tasks/Rendering/geometryRendererTask\";\r\nimport { FrameGraphUtilityLayerRendererTask } from \"core/FrameGraph/Tasks/Rendering/utilityLayerRendererTask\";\r\nimport { UtilityLayerRenderer } from \"core/Rendering/utilityLayerRenderer\";\r\n\r\n/**\r\n * Looks for the main camera used by the frame graph.\r\n * By default, this is the camera used by the main object renderer task.\r\n * If no such task, we try to find a camera in either a geometry renderer or a utility layer renderer tasks.\r\n * @param frameGraph The frame graph to search in\r\n * @returns The main camera used by the frame graph, or null if not found\r\n */\r\nexport function FindMainCamera(frameGraph: FrameGraph): Nullable<Camera> {\r\n    const mainObjectRenderer = FrameGraphUtils.FindMainObjectRenderer(frameGraph);\r\n    if (mainObjectRenderer) {\r\n        return mainObjectRenderer.camera;\r\n    }\r\n\r\n    // Try to find a camera in either the geometry renderer or the utility layer renderer tasks\r\n    const tasks = frameGraph.tasks;\r\n\r\n    for (let i = tasks.length - 1; i >= 0; i--) {\r\n        const task = tasks[i];\r\n        if (task instanceof FrameGraphGeometryRendererTask || task instanceof FrameGraphUtilityLayerRendererTask) {\r\n            return task.camera;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Looks for the main object renderer task in the frame graph.\r\n * By default, this is the object renderer task with isMainObjectRenderer set to true.\r\n * If no such task, we return the last object renderer task that has an object list with meshes (or null if none found).\r\n * @param frameGraph The frame graph to search in\r\n * @returns The main object renderer of the frame graph, or null if not found\r\n */\r\nexport function FindMainObjectRenderer(frameGraph: FrameGraph): Nullable<FrameGraphObjectRendererTask> {\r\n    const objectRenderers = frameGraph.getTasksByType<FrameGraphObjectRendererTask>(FrameGraphObjectRendererTask);\r\n\r\n    let fallbackRenderer: Nullable<FrameGraphObjectRendererTask> = null;\r\n    for (let i = objectRenderers.length - 1; i >= 0; --i) {\r\n        if (objectRenderers[i].isMainObjectRenderer) {\r\n            return objectRenderers[i];\r\n        }\r\n        if (objectRenderers[i].objectList.meshes && !fallbackRenderer) {\r\n            fallbackRenderer = objectRenderers[i];\r\n        }\r\n    }\r\n    return fallbackRenderer;\r\n}\r\n\r\n/**\r\n * Creates a utility layer renderer compatible with the given frame graph.\r\n * @param frameFraph The frame graph to create the utility layer renderer for\r\n * @param handleEvents True if the utility layer renderer should handle events, false otherwise (default is true)\r\n * @returns The created utility layer renderer\r\n */\r\nexport function CreateUtilityLayerRenderer(frameFraph: FrameGraph, handleEvents = true): UtilityLayerRenderer {\r\n    const scene = frameFraph.scene;\r\n    const layer = new UtilityLayerRenderer(scene, handleEvents, true);\r\n\r\n    layer.utilityLayerScene.activeCamera = scene.activeCamera;\r\n\r\n    let camera = FrameGraphUtils.FindMainCamera(scene.frameGraph!);\r\n\r\n    if (!camera && scene.cameras.length > 0) {\r\n        camera = scene.cameras[0];\r\n    }\r\n\r\n    if (camera) {\r\n        layer.setRenderCamera(camera);\r\n        layer.utilityLayerScene.activeCamera = camera;\r\n    }\r\n\r\n    const gizmoLayerRenderObserver = scene.onAfterRenderObservable.add(() => {\r\n        layer.render();\r\n    });\r\n\r\n    layer.utilityLayerScene.onDisposeObservable.addOnce(() => {\r\n        scene.onAfterRenderObservable.remove(gizmoLayerRenderObserver);\r\n    });\r\n\r\n    return layer;\r\n}\r\n\r\n/**\r\n * Class used to host frame graph specific utilities\r\n */\r\nexport const FrameGraphUtils = {\r\n    /**\r\n     * Looks for the main camera used by the frame graph.\r\n     * We assume that the camera used by the the last rendering task in the graph is the main camera.\r\n     * @param frameGraph The frame graph to search in\r\n     * @returns The main camera used by the frame graph, or null if not found\r\n     */\r\n    FindMainCamera,\r\n\r\n    /**\r\n     * Looks for the main object renderer task in the frame graph.\r\n     * We assume that the last object renderer task that has an object list with meshes is the main object renderer.\r\n     * @param frameGraph The frame graph to search in\r\n     * @returns The main object renderer of the frame graph, or null if not found\r\n     */\r\n    FindMainObjectRenderer,\r\n\r\n    /**\r\n     * Creates a utility layer renderer compatible with the given frame graph.\r\n     * @param frameFraph The frame graph to create the utility layer renderer for\r\n     * @param handleEvents True if the utility layer renderer should handle events, false otherwise\r\n     * @returns The created utility layer renderer\r\n     */\r\n    CreateUtilityLayerRenderer,\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1868, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Types/nodeRenderGraphTypes.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Types/nodeRenderGraphTypes.ts"],"sourcesContent":["import type {\r\n    Color4,\r\n    Scene,\r\n    FrameGraphTextureHandle,\r\n    Camera,\r\n    FrameGraphObjectList,\r\n    IShadowLight,\r\n    FrameGraphShadowGeneratorTask,\r\n    FrameGraphObjectRendererTask,\r\n    FrameGraph,\r\n    NodeRenderGraphBlock,\r\n} from \"core/index\";\r\n\r\n/**\r\n * Description of a custom block to be used in the node render graph editor\r\n */\r\nexport interface INodeRenderGraphCustomBlockDescription {\r\n    /** Block name. It will be used as the block name in the left menu of the editor. Spaces must be replaced by underscores in the name. */\r\n    name: string;\r\n    /** Description (tooltip) of the block. */\r\n    description: string;\r\n    /** Category of the block. Spaces must be replaced by underscores in the category name. */\r\n    menu: string;\r\n    /** Factory function to create the block. */\r\n    factory: (frameGraph: FrameGraph, scene: Scene) => NodeRenderGraphBlock;\r\n}\r\n\r\n/**\r\n * Interface used to configure the node render graph editor\r\n */\r\nexport interface INodeRenderGraphEditorOptions {\r\n    /** Define the URL to load node editor script from */\r\n    editorURL?: string;\r\n    /** Additional configuration for the FGE */\r\n    nodeRenderGraphEditorConfig?: {\r\n        backgroundColor?: Color4;\r\n        hostScene?: Scene;\r\n        customBlockDescriptions?: INodeRenderGraphCustomBlockDescription[];\r\n    };\r\n}\r\n\r\n/**\r\n * Options that can be passed to the node render graph build method\r\n */\r\nexport interface INodeRenderGraphCreateOptions {\r\n    /** If true, textures created by the node render graph will be visible in the inspector, for easier debugging (default: false) */\r\n    debugTextures?: boolean;\r\n    /** Rebuild the node render graph when the screen is resized (default: true) */\r\n    rebuildGraphOnEngineResize?: boolean;\r\n    /** Defines if the build should log activity (default: false) */\r\n    verbose?: boolean;\r\n    /** Defines if the autoConfigure method should be called when initializing blocks (default: false) */\r\n    autoConfigure?: boolean;\r\n    /** If true, external inputs like object lists and cameras will be filled with default values, taken from the scene. Note that external textures are not concerned (default: true). */\r\n    autoFillExternalInputs?: boolean;\r\n}\r\n\r\n/**\r\n * Defines the kind of connection point for node render graph nodes\r\n */\r\nexport enum NodeRenderGraphBlockConnectionPointTypes {\r\n    /** General purpose texture */\r\n    Texture = 0x00000001,\r\n    /** Back buffer color texture */\r\n    TextureBackBuffer = 0x00000002,\r\n    /** Back buffer depth/stencil attachment */\r\n    TextureBackBufferDepthStencilAttachment = 0x00000004,\r\n    /** Depth/stencil attachment */\r\n    TextureDepthStencilAttachment = 0x00000008,\r\n    /** Depth (in view space) geometry texture */\r\n    TextureViewDepth = 0x00000010,\r\n    /** Normal (in view space) geometry texture */\r\n    TextureViewNormal = 0x00000020,\r\n    /** Albedo geometry texture */\r\n    TextureAlbedo = 0x00000040,\r\n    /** Reflectivity geometry texture */\r\n    TextureReflectivity = 0x00000080,\r\n    /** Position (in world space) geometry texture */\r\n    TextureWorldPosition = 0x00000100,\r\n    /** Velocity geometry texture */\r\n    TextureVelocity = 0x00000200,\r\n    /** Irradiance geometry texture */\r\n    TextureIrradiance = 0x00000400,\r\n    /** Albedo (sqrt) geometry texture */\r\n    TextureAlbedoSqrt = 0x00000800,\r\n    /** Depth (in screen space) geometry texture */\r\n    TextureScreenDepth = 0x00001000,\r\n    /** Normal (in world space) geometry texture */\r\n    TextureWorldNormal = 0x00002000,\r\n    /** Position (in local space) geometry texture */\r\n    TextureLocalPosition = 0x00004000,\r\n    /** Linear velocity geometry texture */\r\n    TextureLinearVelocity = 0x00008000,\r\n    /** Normalied depth (in view space) geometry texture */\r\n    TextureNormalizedViewDepth = 0x00010000,\r\n\r\n    /** Bit field for all textures but back buffer depth/stencil */\r\n    TextureAllButBackBufferDepthStencil = 0x000ffffb,\r\n    /** Bit field for all textures but back buffer color and depth/stencil */\r\n    TextureAllButBackBuffer = 0x000ffff9,\r\n    /** Bit field for all textures */\r\n    TextureAll = 0x000fffff,\r\n\r\n    /** Resource container */\r\n    ResourceContainer = 0x00100000,\r\n    /** Shadow generator */\r\n    ShadowGenerator = 0x00200000,\r\n    /** Light */\r\n    ShadowLight = 0x00400000,\r\n    /** Camera */\r\n    Camera = 0x01000000,\r\n    /** List of objects (meshes, particle systems, sprites) */\r\n    ObjectList = 0x02000000,\r\n\r\n    /** Detect type based on connection */\r\n    AutoDetect = 0x10000000,\r\n    /** Output type that will be defined by input type */\r\n    BasedOnInput = 0x20000000,\r\n    /** Undefined */\r\n    Undefined = 0x40000000,\r\n    /** Custom object */\r\n    Object = 0x80000000,\r\n    /** Bitmask of all types */\r\n    All = 0xffffffff,\r\n}\r\n\r\n/**\r\n * Enum used to define the compatibility state between two connection points\r\n */\r\nexport const enum NodeRenderGraphConnectionPointCompatibilityStates {\r\n    /** Points are compatibles */\r\n    Compatible,\r\n    /** Points are incompatible because of their types */\r\n    TypeIncompatible,\r\n    /** Points are incompatible because they are in the same hierarchy **/\r\n    HierarchyIssue,\r\n}\r\n\r\n/**\r\n * Defines the direction of a connection point\r\n */\r\nexport const enum NodeRenderGraphConnectionPointDirection {\r\n    /** Input */\r\n    Input,\r\n    /** Output */\r\n    Output,\r\n}\r\n\r\n/**\r\n * Defines the type of a connection point value\r\n */\r\nexport type NodeRenderGraphBlockConnectionPointValueType =\r\n    | FrameGraphTextureHandle\r\n    | Camera\r\n    | FrameGraphObjectList\r\n    | IShadowLight\r\n    | FrameGraphShadowGeneratorTask\r\n    | FrameGraphObjectRendererTask;\r\n"],"names":[],"mappings":"AAyDA;;GAEG;;;;;;;;AACH,IAAY,wCAgEX;AAhED,CAAA,SAAY,wCAAwC;IAChD,4BAAA,EAA8B,CAC9B,wCAAA,CAAA,wCAAA,CAAA,UAAA,GAAA,EAAA,GAAA,SAAoB,CAAA;IACpB,8BAAA,EAAgC,CAChC,wCAAA,CAAA,wCAAA,CAAA,oBAAA,GAAA,EAAA,GAAA,mBAA8B,CAAA;IAC9B,yCAAA,EAA2C,CAC3C,wCAAA,CAAA,wCAAA,CAAA,0CAAA,GAAA,EAAA,GAAA,yCAAoD,CAAA;IACpD,6BAAA,EAA+B,CAC/B,wCAAA,CAAA,wCAAA,CAAA,gCAAA,GAAA,EAAA,GAAA,+BAA0C,CAAA;IAC1C,2CAAA,EAA6C,CAC7C,wCAAA,CAAA,wCAAA,CAAA,mBAAA,GAAA,GAAA,GAAA,kBAA6B,CAAA;IAC7B,4CAAA,EAA8C,CAC9C,wCAAA,CAAA,wCAAA,CAAA,oBAAA,GAAA,GAAA,GAAA,mBAA8B,CAAA;IAC9B,4BAAA,EAA8B,CAC9B,wCAAA,CAAA,wCAAA,CAAA,gBAAA,GAAA,GAAA,GAAA,eAA0B,CAAA;IAC1B,kCAAA,EAAoC,CACpC,wCAAA,CAAA,wCAAA,CAAA,sBAAA,GAAA,IAAA,GAAA,qBAAgC,CAAA;IAChC,+CAAA,EAAiD,CACjD,wCAAA,CAAA,wCAAA,CAAA,uBAAA,GAAA,IAAA,GAAA,sBAAiC,CAAA;IACjC,8BAAA,EAAgC,CAChC,wCAAA,CAAA,wCAAA,CAAA,kBAAA,GAAA,IAAA,GAAA,iBAA4B,CAAA;IAC5B,gCAAA,EAAkC,CAClC,wCAAA,CAAA,wCAAA,CAAA,oBAAA,GAAA,KAAA,GAAA,mBAA8B,CAAA;IAC9B,mCAAA,EAAqC,CACrC,wCAAA,CAAA,wCAAA,CAAA,oBAAA,GAAA,KAAA,GAAA,mBAA8B,CAAA;IAC9B,6CAAA,EAA+C,CAC/C,wCAAA,CAAA,wCAAA,CAAA,qBAAA,GAAA,KAAA,GAAA,oBAA+B,CAAA;IAC/B,6CAAA,EAA+C,CAC/C,wCAAA,CAAA,wCAAA,CAAA,qBAAA,GAAA,KAAA,GAAA,oBAA+B,CAAA;IAC/B,+CAAA,EAAiD,CACjD,wCAAA,CAAA,wCAAA,CAAA,uBAAA,GAAA,MAAA,GAAA,sBAAiC,CAAA;IACjC,qCAAA,EAAuC,CACvC,wCAAA,CAAA,wCAAA,CAAA,wBAAA,GAAA,MAAA,GAAA,uBAAkC,CAAA;IAClC,qDAAA,EAAuD,CACvD,wCAAA,CAAA,wCAAA,CAAA,6BAAA,GAAA,MAAA,GAAA,4BAAuC,CAAA;IAEvC,6DAAA,EAA+D,CAC/D,wCAAA,CAAA,wCAAA,CAAA,sCAAA,GAAA,QAAA,GAAA,qCAAgD,CAAA;IAChD,uEAAA,EAAyE,CACzE,wCAAA,CAAA,wCAAA,CAAA,0BAAA,GAAA,QAAA,GAAA,yBAAoC,CAAA;IACpC,+BAAA,EAAiC,CACjC,wCAAA,CAAA,wCAAA,CAAA,aAAA,GAAA,QAAA,GAAA,YAAuB,CAAA;IAEvB,uBAAA,EAAyB,CACzB,wCAAA,CAAA,wCAAA,CAAA,oBAAA,GAAA,QAAA,GAAA,mBAA8B,CAAA;IAC9B,qBAAA,EAAuB,CACvB,wCAAA,CAAA,wCAAA,CAAA,kBAAA,GAAA,QAAA,GAAA,iBAA4B,CAAA;IAC5B,UAAA,EAAY,CACZ,wCAAA,CAAA,wCAAA,CAAA,cAAA,GAAA,QAAA,GAAA,aAAwB,CAAA;IACxB,WAAA,EAAa,CACb,wCAAA,CAAA,wCAAA,CAAA,SAAA,GAAA,SAAA,GAAA,QAAmB,CAAA;IACnB,wDAAA,EAA0D,CAC1D,wCAAA,CAAA,wCAAA,CAAA,aAAA,GAAA,SAAA,GAAA,YAAuB,CAAA;IAEvB,oCAAA,EAAsC,CACtC,wCAAA,CAAA,wCAAA,CAAA,aAAA,GAAA,UAAA,GAAA,YAAuB,CAAA;IACvB,mDAAA,EAAqD,CACrD,wCAAA,CAAA,wCAAA,CAAA,eAAA,GAAA,UAAA,GAAA,cAAyB,CAAA;IACzB,cAAA,EAAgB,CAChB,wCAAA,CAAA,wCAAA,CAAA,YAAA,GAAA,WAAA,GAAA,WAAsB,CAAA;IACtB,kBAAA,EAAoB,CACpB,wCAAA,CAAA,wCAAA,CAAA,SAAA,GAAA,WAAA,GAAA,QAAmB,CAAA;IACnB,yBAAA,EAA2B,CAC3B,wCAAA,CAAA,wCAAA,CAAA,MAAA,GAAA,WAAA,GAAA,KAAgB,CAAA;AACpB,CAAC,EAhEW,wCAAwC,IAAA,CAAxC,wCAAwC,GAAA,CAAA,CAAA,GAgEnD;AAKD,IAAkB,iDAOjB;AAPD,CAAA,SAAkB,iDAAiD;IAC/D,2BAAA,EAA6B,CAC7B,iDAAA,CAAA,iDAAA,CAAA,aAAA,GAAA,EAAA,GAAA,YAAU,CAAA;IACV,mDAAA,EAAqD,CACrD,iDAAA,CAAA,iDAAA,CAAA,mBAAA,GAAA,EAAA,GAAA,kBAAgB,CAAA;IAChB,oEAAA,EAAsE,CACtE,iDAAA,CAAA,iDAAA,CAAA,iBAAA,GAAA,EAAA,GAAA,gBAAc,CAAA;AAClB,CAAC,EAPiB,iDAAiD,IAAA,CAAjD,iDAAiD,GAAA,CAAA,CAAA,GAOlE;AAKD,IAAkB,uCAKjB;AALD,CAAA,SAAkB,uCAAuC;IACrD,UAAA,EAAY,CACZ,uCAAA,CAAA,uCAAA,CAAA,QAAA,GAAA,EAAA,GAAA,OAAK,CAAA;IACL,WAAA,EAAa,CACb,uCAAA,CAAA,uCAAA,CAAA,SAAA,GAAA,EAAA,GAAA,QAAM,CAAA;AACV,CAAC,EALiB,uCAAuC,IAAA,CAAvC,uCAAuC,GAAA,CAAA,CAAA,GAKxD"}},
    {"offset": {"line": 1926, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/nodeRenderGraphBlockConnectionPoint.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/nodeRenderGraphBlockConnectionPoint.ts"],"sourcesContent":["import type {\r\n    Nullable,\r\n    NodeRenderGraphBlock,\r\n    NodeRenderGraphBlockConnectionPointValueType,\r\n    NodeRenderGraphInputBlock,\r\n    IShadowLight,\r\n    FrameGraphShadowGeneratorTask,\r\n} from \"core/index\";\r\nimport { Observable } from \"../../Misc/observable\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointCompatibilityStates, NodeRenderGraphConnectionPointDirection } from \"./Types/nodeRenderGraphTypes\";\r\n\r\n/**\r\n * Defines a connection point for a block\r\n */\r\nexport class NodeRenderGraphConnectionPoint {\r\n    private readonly _ownerBlock: NodeRenderGraphBlock;\r\n    private _connectedPoint: Nullable<NodeRenderGraphConnectionPoint> = null;\r\n\r\n    /** @internal */\r\n    public _acceptedConnectionPointType: Nullable<NodeRenderGraphConnectionPoint> = null;\r\n\r\n    private _endpoints = new Array<NodeRenderGraphConnectionPoint>();\r\n    private readonly _direction: NodeRenderGraphConnectionPointDirection;\r\n    private _type = NodeRenderGraphBlockConnectionPointTypes.Undefined;\r\n\r\n    /** @internal */\r\n    public _linkedConnectionSource: Nullable<NodeRenderGraphConnectionPoint> = null;\r\n\r\n    /** @internal */\r\n    public _isMainLinkSource = false;\r\n\r\n    /** @internal */\r\n    public _typeConnectionSource: Nullable<NodeRenderGraphConnectionPoint | (() => NodeRenderGraphConnectionPoint)> = null;\r\n\r\n    /** @internal */\r\n    public _defaultConnectionPointType: Nullable<NodeRenderGraphBlockConnectionPointTypes> = null;\r\n\r\n    /** Gets the direction of the point */\r\n    public get direction() {\r\n        return this._direction;\r\n    }\r\n\r\n    /**\r\n     * Checks if the value is a texture handle\r\n     * @param value The value to check\r\n     * @returns True if the value is a texture handle\r\n     */\r\n    public static IsTextureHandle(value: NodeRenderGraphBlockConnectionPointValueType | undefined): boolean {\r\n        return value !== undefined && Number.isFinite(value);\r\n    }\r\n\r\n    /**\r\n     * Checks if the value is a shadow generator task\r\n     * @param value The value to check\r\n     * @returns True if the value is a shadow generator\r\n     */\r\n    public static IsShadowGenerator(value: NodeRenderGraphBlockConnectionPointValueType | undefined): boolean {\r\n        return value !== undefined && (value as FrameGraphShadowGeneratorTask).mapSize !== undefined;\r\n    }\r\n\r\n    /**\r\n     * Checks if the value is a shadow light\r\n     * @param value The value to check\r\n     * @returns True if the value is a shadow light\r\n     */\r\n    public static IsShadowLight(value: NodeRenderGraphBlockConnectionPointValueType | undefined): boolean {\r\n        return value !== undefined && (value as IShadowLight).setShadowProjectionMatrix !== undefined;\r\n    }\r\n\r\n    /**\r\n     * The value stored in this connection point\r\n     */\r\n    public value: NodeRenderGraphBlockConnectionPointValueType | undefined;\r\n\r\n    /** Indicates that this connection point needs dual validation before being connected to another point */\r\n    public needDualDirectionValidation: boolean = false;\r\n\r\n    /**\r\n     * Gets or sets the additional types supported by this connection point\r\n     */\r\n    public acceptedConnectionPointTypes: NodeRenderGraphBlockConnectionPointTypes[] = [];\r\n\r\n    /**\r\n     * Gets or sets the additional types excluded by this connection point\r\n     */\r\n    public excludedConnectionPointTypes: NodeRenderGraphBlockConnectionPointTypes[] = [];\r\n\r\n    /**\r\n     * Observable triggered when this point is connected\r\n     */\r\n    public onConnectionObservable = new Observable<NodeRenderGraphConnectionPoint>();\r\n\r\n    /**\r\n     * Observable triggered when this point is disconnected\r\n     */\r\n    public onDisconnectionObservable = new Observable<NodeRenderGraphConnectionPoint>();\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this connection point is exposed on a frame\r\n     */\r\n    public isExposedOnFrame: boolean = false;\r\n\r\n    /**\r\n     * Gets or sets number indicating the position that the port is exposed to on a frame\r\n     */\r\n    public exposedPortPosition: number = -1;\r\n\r\n    /**\r\n     * Gets or sets the connection point type (default is Undefined)\r\n     */\r\n    public get type(): NodeRenderGraphBlockConnectionPointTypes {\r\n        if (this._type === NodeRenderGraphBlockConnectionPointTypes.AutoDetect) {\r\n            if (this._ownerBlock.isInput) {\r\n                return (this._ownerBlock as NodeRenderGraphInputBlock).type;\r\n            }\r\n\r\n            if (this._connectedPoint) {\r\n                return this._connectedPoint.type;\r\n            }\r\n\r\n            if (this._linkedConnectionSource) {\r\n                if (this._linkedConnectionSource.isConnected) {\r\n                    return this._linkedConnectionSource.type;\r\n                }\r\n                if (this._linkedConnectionSource._defaultConnectionPointType) {\r\n                    return this._linkedConnectionSource._defaultConnectionPointType;\r\n                }\r\n            }\r\n\r\n            if (this._defaultConnectionPointType) {\r\n                return this._defaultConnectionPointType;\r\n            }\r\n        }\r\n\r\n        if (this._type === NodeRenderGraphBlockConnectionPointTypes.BasedOnInput) {\r\n            if (this._typeConnectionSource) {\r\n                const typeConnectionSource = typeof this._typeConnectionSource === \"function\" ? this._typeConnectionSource() : this._typeConnectionSource;\r\n                if (!typeConnectionSource.isConnected) {\r\n                    return this._defaultConnectionPointType ?? typeConnectionSource.type;\r\n                }\r\n                return typeConnectionSource._connectedPoint!.type;\r\n            } else if (this._defaultConnectionPointType) {\r\n                return this._defaultConnectionPointType;\r\n            }\r\n        }\r\n\r\n        return this._type;\r\n    }\r\n\r\n    public set type(value: NodeRenderGraphBlockConnectionPointTypes) {\r\n        this._type = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the connection point name\r\n     */\r\n    public name: string;\r\n\r\n    /**\r\n     * Gets or sets the connection point display name\r\n     */\r\n    public displayName: string;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that this connection point can be omitted\r\n     */\r\n    public isOptional: boolean;\r\n\r\n    /**\r\n     * Gets a boolean indicating that the current point is connected to another NodeRenderGraphBlock\r\n     */\r\n    public get isConnected(): boolean {\r\n        return this.connectedPoint !== null || this.hasEndpoints;\r\n    }\r\n\r\n    /** Get the other side of the connection (if any) */\r\n    public get connectedPoint(): Nullable<NodeRenderGraphConnectionPoint> {\r\n        return this._connectedPoint;\r\n    }\r\n\r\n    /** Get the block that owns this connection point */\r\n    public get ownerBlock(): NodeRenderGraphBlock {\r\n        return this._ownerBlock;\r\n    }\r\n\r\n    /** Get the block connected on the other side of this connection (if any) */\r\n    public get sourceBlock(): Nullable<NodeRenderGraphBlock> {\r\n        if (!this._connectedPoint) {\r\n            return null;\r\n        }\r\n\r\n        return this._connectedPoint.ownerBlock;\r\n    }\r\n\r\n    /** Get the block connected on the endpoints of this connection (if any) */\r\n    public get connectedBlocks(): Array<NodeRenderGraphBlock> {\r\n        if (this._endpoints.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return this._endpoints.map((e) => e.ownerBlock);\r\n    }\r\n\r\n    /** Gets the list of connected endpoints */\r\n    public get endpoints() {\r\n        return this._endpoints;\r\n    }\r\n\r\n    /** Gets a boolean indicating if that output point is connected to at least one input */\r\n    public get hasEndpoints(): boolean {\r\n        return this._endpoints && this._endpoints.length > 0;\r\n    }\r\n\r\n    /** Get the inner type (ie AutoDetect for instance instead of the inferred one) */\r\n    public get innerType() {\r\n        if (this._linkedConnectionSource && !this._isMainLinkSource && this._linkedConnectionSource.isConnected) {\r\n            return this.type;\r\n        }\r\n        return this._type;\r\n    }\r\n\r\n    /**\r\n     * Creates a block suitable to be used as an input for this input point.\r\n     * If null is returned, a block based on the point type will be created.\r\n     * @returns The returned string parameter is the name of the output point of NodeRenderGraphBlock (first parameter of the returned array) that can be connected to the input\r\n     */\r\n    public createCustomInputBlock(): Nullable<[NodeRenderGraphBlock, string]> {\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Creates a new connection point\r\n     * @param name defines the connection point name\r\n     * @param ownerBlock defines the block hosting this connection point\r\n     * @param direction defines the direction of the connection point\r\n     */\r\n    public constructor(name: string, ownerBlock: NodeRenderGraphBlock, direction: NodeRenderGraphConnectionPointDirection) {\r\n        this._ownerBlock = ownerBlock;\r\n        this.name = name;\r\n        this._direction = direction;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name e.g. \"NodeRenderGraphConnectionPoint\"\r\n     * @returns the class name\r\n     */\r\n    public getClassName(): string {\r\n        return \"NodeRenderGraphConnectionPoint\";\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the current point can be connected to another point\r\n     * @param connectionPoint defines the other connection point\r\n     * @returns a boolean\r\n     */\r\n    public canConnectTo(connectionPoint: NodeRenderGraphConnectionPoint) {\r\n        return this.checkCompatibilityState(connectionPoint) === NodeRenderGraphConnectionPointCompatibilityStates.Compatible;\r\n    }\r\n\r\n    /**\r\n     * Gets a number indicating if the current point can be connected to another point\r\n     * @param connectionPoint defines the other connection point\r\n     * @returns a number defining the compatibility state\r\n     */\r\n    public checkCompatibilityState(connectionPoint: NodeRenderGraphConnectionPoint): NodeRenderGraphConnectionPointCompatibilityStates {\r\n        const ownerBlock = this._ownerBlock;\r\n        const otherBlock = connectionPoint.ownerBlock;\r\n\r\n        if (this.type !== connectionPoint.type && connectionPoint.innerType !== NodeRenderGraphBlockConnectionPointTypes.AutoDetect) {\r\n            // Accepted types\r\n            if (connectionPoint.acceptedConnectionPointTypes && connectionPoint.acceptedConnectionPointTypes.indexOf(this.type) !== -1) {\r\n                return NodeRenderGraphConnectionPointCompatibilityStates.Compatible;\r\n            } else {\r\n                return NodeRenderGraphConnectionPointCompatibilityStates.TypeIncompatible;\r\n            }\r\n        }\r\n\r\n        // Excluded\r\n        if (connectionPoint.excludedConnectionPointTypes && connectionPoint.excludedConnectionPointTypes.indexOf(this.type) !== -1) {\r\n            return NodeRenderGraphConnectionPointCompatibilityStates.TypeIncompatible;\r\n        }\r\n\r\n        // Check hierarchy\r\n        let targetBlock = otherBlock;\r\n        let sourceBlock = ownerBlock;\r\n        if (this.direction === NodeRenderGraphConnectionPointDirection.Input) {\r\n            targetBlock = ownerBlock;\r\n            sourceBlock = otherBlock;\r\n        }\r\n\r\n        if (targetBlock.isAnAncestorOf(sourceBlock)) {\r\n            return NodeRenderGraphConnectionPointCompatibilityStates.HierarchyIssue;\r\n        }\r\n\r\n        return NodeRenderGraphConnectionPointCompatibilityStates.Compatible;\r\n    }\r\n\r\n    /**\r\n     * Connect this point to another connection point\r\n     * @param connectionPoint defines the other connection point\r\n     * @param ignoreConstraints defines if the system will ignore connection type constraints (default is false)\r\n     * @returns the current connection point\r\n     */\r\n    public connectTo(connectionPoint: NodeRenderGraphConnectionPoint, ignoreConstraints = false): NodeRenderGraphConnectionPoint {\r\n        if (!ignoreConstraints && !this.canConnectTo(connectionPoint)) {\r\n            // eslint-disable-next-line no-throw-literal\r\n            throw `Cannot connect these two connectors. source: \"${this.ownerBlock.name}\".${this.name}, target: \"${connectionPoint.ownerBlock.name}\".${connectionPoint.name}`;\r\n        }\r\n\r\n        this._endpoints.push(connectionPoint);\r\n        connectionPoint._connectedPoint = this;\r\n\r\n        this.onConnectionObservable.notifyObservers(connectionPoint);\r\n        connectionPoint.onConnectionObservable.notifyObservers(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Disconnect this point from one of his endpoint\r\n     * @param endpoint defines the other connection point\r\n     * @returns the current connection point\r\n     */\r\n    public disconnectFrom(endpoint: NodeRenderGraphConnectionPoint): NodeRenderGraphConnectionPoint {\r\n        const index = this._endpoints.indexOf(endpoint);\r\n\r\n        if (index === -1) {\r\n            return this;\r\n        }\r\n\r\n        this._endpoints.splice(index, 1);\r\n        endpoint._connectedPoint = null;\r\n\r\n        this.onDisconnectionObservable.notifyObservers(endpoint);\r\n        endpoint.onDisconnectionObservable.notifyObservers(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Fills the list of excluded connection point types with all types other than those passed in the parameter\r\n     * @param mask Types (ORed values of NodeRenderGraphBlockConnectionPointTypes) that are allowed, and thus will not be pushed to the excluded list\r\n     */\r\n    public addExcludedConnectionPointFromAllowedTypes(mask: number): void {\r\n        let bitmask = 0;\r\n        let val = 2 ** bitmask;\r\n        // Note: don't use 1 << bitmask instead of 2 ** bitmask, as it will cause an infinite loop because 1 << 31 is negative!\r\n        while (val < NodeRenderGraphBlockConnectionPointTypes.All) {\r\n            if (!(mask & val)) {\r\n                this.excludedConnectionPointTypes.push(val);\r\n            }\r\n            bitmask++;\r\n            val = 2 ** bitmask;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds accepted connection point types\r\n     * @param mask Types (ORed values of NodeRenderGraphBlockConnectionPointTypes) that are allowed to connect to this point\r\n     */\r\n    public addAcceptedConnectionPointTypes(mask: number): void {\r\n        let bitmask = 0;\r\n        let val = 2 ** bitmask;\r\n        // Note: don't use 1 << bitmask instead of 2 ** bitmask, as it will cause an infinite loop because 1 << 31 is negative!\r\n        while (val < NodeRenderGraphBlockConnectionPointTypes.All) {\r\n            if (mask & val && this.acceptedConnectionPointTypes.indexOf(val) === -1) {\r\n                this.acceptedConnectionPointTypes.push(val);\r\n            }\r\n            bitmask++;\r\n            val = 2 ** bitmask;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Serializes this point in a JSON representation\r\n     * @param isInput defines if the connection point is an input (default is true)\r\n     * @returns the serialized point object\r\n     */\r\n    public serialize(isInput = true): any {\r\n        const serializationObject: any = {};\r\n\r\n        serializationObject.name = this.name;\r\n        serializationObject.displayName = this.displayName;\r\n\r\n        if (isInput && this.connectedPoint) {\r\n            serializationObject.inputName = this.name;\r\n            serializationObject.targetBlockId = this.connectedPoint.ownerBlock.uniqueId;\r\n            serializationObject.targetConnectionName = this.connectedPoint.name;\r\n            serializationObject.isExposedOnFrame = true;\r\n            serializationObject.exposedPortPosition = this.exposedPortPosition;\r\n        }\r\n\r\n        if (this.isExposedOnFrame || this.exposedPortPosition >= 0) {\r\n            serializationObject.isExposedOnFrame = true;\r\n            serializationObject.exposedPortPosition = this.exposedPortPosition;\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public dispose() {\r\n        this.onConnectionObservable.clear();\r\n        this.onDisconnectionObservable.clear();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2213, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/nodeRenderGraphBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/nodeRenderGraphBlock.ts"],"sourcesContent":["import type {\r\n    NodeRenderGraphBuildState,\r\n    Nullable,\r\n    NodeRenderGraphInputBlock,\r\n    AbstractEngine,\r\n    Scene,\r\n    FrameGraphTask,\r\n    FrameGraph,\r\n    NodeRenderGraphResourceContainerBlock,\r\n    FrameGraphTextureHandle,\r\n} from \"core/index\";\r\nimport { GetClass } from \"../../Misc/typeStore\";\r\nimport { serialize } from \"../../Misc/decorators\";\r\nimport { UniqueIdGenerator } from \"../../Misc/uniqueIdGenerator\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointDirection } from \"./Types/nodeRenderGraphTypes\";\r\nimport { Observable } from \"../../Misc/observable\";\r\nimport { Logger } from \"../../Misc/logger\";\r\nimport { NodeRenderGraphConnectionPoint } from \"./nodeRenderGraphBlockConnectionPoint\";\r\n\r\n/**\r\n * Defines a block that can be used inside a node render graph\r\n */\r\nexport class NodeRenderGraphBlock {\r\n    private _name = \"\";\r\n    private _buildId: number;\r\n    protected _isInput = false;\r\n    protected _isTeleportOut = false;\r\n    protected _isTeleportIn = false;\r\n    protected _isDebug = false;\r\n    protected _isUnique = false;\r\n    protected _scene: Scene;\r\n    protected _engine: AbstractEngine;\r\n    protected _frameGraph: FrameGraph;\r\n    protected _frameGraphTask?: FrameGraphTask;\r\n\r\n    /**\r\n     * Gets or sets the disable flag of the task associated with this block\r\n     */\r\n    public get disabled() {\r\n        return !!this._frameGraphTask?.disabled;\r\n    }\r\n\r\n    public set disabled(value: boolean) {\r\n        if (this._frameGraphTask) {\r\n            this._frameGraphTask.disabled = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Gets an observable raised when the block is built\r\n     */\r\n    public onBuildObservable = new Observable<NodeRenderGraphBlock>();\r\n\r\n    /** @internal */\r\n    public _inputs = new Array<NodeRenderGraphConnectionPoint>();\r\n\r\n    /** @internal */\r\n    public _outputs = new Array<NodeRenderGraphConnectionPoint>();\r\n\r\n    /** @internal */\r\n    public _codeVariableName = \"\";\r\n\r\n    /** @internal */\r\n    public _additionalConstructionParameters: Nullable<unknown[]> = null;\r\n\r\n    /**\r\n     * Gets the list of input points\r\n     */\r\n    public get inputs(): NodeRenderGraphConnectionPoint[] {\r\n        return this._inputs;\r\n    }\r\n\r\n    /** Gets the list of output points */\r\n    public get outputs(): NodeRenderGraphConnectionPoint[] {\r\n        return this._outputs;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the unique id of the node\r\n     */\r\n    public uniqueId: number;\r\n\r\n    /**\r\n     * Gets or set the name of the block\r\n     */\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is an input\r\n     */\r\n    public get isInput(): boolean {\r\n        return this._isInput;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a teleport out\r\n     */\r\n    public get isTeleportOut(): boolean {\r\n        return this._isTeleportOut;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a teleport in\r\n     */\r\n    public get isTeleportIn(): boolean {\r\n        return this._isTeleportIn;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this block is a debug block\r\n     */\r\n    public get isDebug(): boolean {\r\n        return this._isDebug;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating that this block can only be used once per node render graph\r\n     */\r\n    public get isUnique() {\r\n        return this._isUnique;\r\n    }\r\n\r\n    /**\r\n     * A free comment about the block\r\n     */\r\n    @serialize(\"comment\")\r\n    public comments: string;\r\n\r\n    /** Gets or sets a boolean indicating that this input can be edited from a collapsed frame */\r\n    public visibleOnFrame = false;\r\n\r\n    /**\r\n     * Gets the current class name e.g. \"NodeRenderGraphBlock\"\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"NodeRenderGraphBlock\";\r\n    }\r\n\r\n    protected _inputRename(name: string) {\r\n        return name;\r\n    }\r\n\r\n    protected _outputRename(name: string) {\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given block\r\n     * @param block defines the potential descendant block to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public isAnAncestorOf(block: NodeRenderGraphBlock): boolean {\r\n        for (const output of this._outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                if (endpoint.ownerBlock === block) {\r\n                    return true;\r\n                }\r\n\r\n                if (endpoint.ownerBlock.isAnAncestorOf(block)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given type\r\n     * @param type defines the potential type to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public isAnAncestorOfType(type: string): boolean {\r\n        if (this.getClassName() === type) {\r\n            return true;\r\n        }\r\n\r\n        for (const output of this._outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                if (endpoint.ownerBlock.isAnAncestorOfType(type)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get the first descendant using a predicate\r\n     * @param predicate defines the predicate to check\r\n     * @returns descendant or null if none found\r\n     */\r\n    public getDescendantOfPredicate(predicate: (block: NodeRenderGraphBlock) => boolean): Nullable<NodeRenderGraphBlock> {\r\n        if (predicate(this)) {\r\n            return this;\r\n        }\r\n\r\n        for (const output of this._outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                const descendant = endpoint.ownerBlock.getDescendantOfPredicate(predicate);\r\n                if (descendant) {\r\n                    return descendant;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeRenderGraphBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param _additionalConstructionParameters defines additional parameters to pass to the block constructor\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, ..._additionalConstructionParameters: unknown[]) {\r\n        this._name = name;\r\n        this._frameGraph = frameGraph;\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n        this.uniqueId = UniqueIdGenerator.UniqueId;\r\n    }\r\n\r\n    /**\r\n     * Register a new input. Must be called inside a block constructor\r\n     * @param name defines the connection point name\r\n     * @param type defines the connection point type\r\n     * @param isOptional defines a boolean indicating that this input can be omitted\r\n     * @param point an already created connection point. If not provided, create a new one\r\n     * @returns the current block\r\n     */\r\n    public registerInput(name: string, type: NodeRenderGraphBlockConnectionPointTypes, isOptional: boolean = false, point?: NodeRenderGraphConnectionPoint) {\r\n        point = point ?? new NodeRenderGraphConnectionPoint(name, this, NodeRenderGraphConnectionPointDirection.Input);\r\n        point.type = type;\r\n        point.isOptional = isOptional;\r\n\r\n        this._inputs.push(point);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Register a new output. Must be called inside a block constructor\r\n     * @param name defines the connection point name\r\n     * @param type defines the connection point type\r\n     * @param point an already created connection point. If not provided, create a new one\r\n     * @returns the current block\r\n     */\r\n    public registerOutput(name: string, type: NodeRenderGraphBlockConnectionPointTypes, point?: NodeRenderGraphConnectionPoint) {\r\n        point = point ?? new NodeRenderGraphConnectionPoint(name, this, NodeRenderGraphConnectionPointDirection.Output);\r\n        point.type = type;\r\n\r\n        this._outputs.push(point);\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _addDependenciesInput(additionalAllowedTypes = 0) {\r\n        this.registerInput(\"dependencies\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        const dependencies = this.getInputByName(\"dependencies\")!;\r\n\r\n        Object.defineProperty(this, \"dependencies\", {\r\n            get: function (this: FrameGraphTask) {\r\n                return dependencies;\r\n            },\r\n            enumerable: true,\r\n            configurable: true,\r\n        });\r\n\r\n        dependencies.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer |\r\n                NodeRenderGraphBlockConnectionPointTypes.ResourceContainer |\r\n                NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator |\r\n                additionalAllowedTypes\r\n        );\r\n\r\n        return dependencies;\r\n    }\r\n\r\n    protected _buildBlock(_state: NodeRenderGraphBuildState) {\r\n        // Empty. Must be defined by child nodes\r\n    }\r\n\r\n    protected _customBuildStep(_state: NodeRenderGraphBuildState): void {\r\n        // Must be implemented by children\r\n    }\r\n\r\n    protected _propagateInputValueToOutput(inputConnectionPoint: NodeRenderGraphConnectionPoint, outputConnectionPoint: NodeRenderGraphConnectionPoint) {\r\n        if (inputConnectionPoint.connectedPoint) {\r\n            outputConnectionPoint.value = inputConnectionPoint.connectedPoint.value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Build the current node and generate the vertex data\r\n     * @param state defines the current generation state\r\n     * @returns true if already built\r\n     */\r\n    public build(state: NodeRenderGraphBuildState): boolean {\r\n        if (this._buildId === state.buildId) {\r\n            return true;\r\n        }\r\n\r\n        this._buildId = state.buildId;\r\n\r\n        // Check if \"parent\" blocks are compiled\r\n        for (const input of this._inputs) {\r\n            if (!input.connectedPoint) {\r\n                if (!input.isOptional) {\r\n                    // Emit a warning\r\n                    state._notConnectedNonOptionalInputs.push(input);\r\n                }\r\n                continue;\r\n            }\r\n\r\n            const block = input.connectedPoint.ownerBlock;\r\n            if (block && block !== this) {\r\n                block.build(state);\r\n            }\r\n        }\r\n\r\n        this._customBuildStep(state);\r\n\r\n        // Logs\r\n        if (state.verbose) {\r\n            Logger.Log(`Building ${this.name} [${this.getClassName()}]`);\r\n        }\r\n\r\n        if (this._frameGraphTask) {\r\n            this._frameGraphTask.name = this.name;\r\n        }\r\n\r\n        this._buildBlock(state);\r\n\r\n        if (this._frameGraphTask) {\r\n            this._frameGraphTask.dependencies = undefined;\r\n\r\n            const dependenciesConnectedPoint = this.getInputByName(\"dependencies\")?.connectedPoint;\r\n            if (dependenciesConnectedPoint) {\r\n                if (dependenciesConnectedPoint.type === NodeRenderGraphBlockConnectionPointTypes.ResourceContainer) {\r\n                    const container = dependenciesConnectedPoint.ownerBlock as NodeRenderGraphResourceContainerBlock;\r\n                    for (let i = 0; i < container.inputs.length; i++) {\r\n                        const input = container.inputs[i];\r\n                        if (input.connectedPoint && input.connectedPoint.value !== undefined && NodeRenderGraphConnectionPoint.IsTextureHandle(input.connectedPoint.value)) {\r\n                            this._frameGraphTask.dependencies = this._frameGraphTask.dependencies || new Set();\r\n                            this._frameGraphTask.dependencies.add(input.connectedPoint.value as FrameGraphTextureHandle);\r\n                        }\r\n                    }\r\n                } else if (NodeRenderGraphConnectionPoint.IsTextureHandle(dependenciesConnectedPoint.value)) {\r\n                    this._frameGraphTask.dependencies = this._frameGraphTask.dependencies || new Set();\r\n                    this._frameGraphTask.dependencies.add(dependenciesConnectedPoint.value as FrameGraphTextureHandle);\r\n                }\r\n            }\r\n            this._frameGraph.addTask(this._frameGraphTask);\r\n        }\r\n\r\n        this.onBuildObservable.notifyObservers(this);\r\n\r\n        return false;\r\n    }\r\n\r\n    protected _linkConnectionTypes(inputIndex0: number, inputIndex1: number, looseCoupling = false) {\r\n        if (looseCoupling) {\r\n            this._inputs[inputIndex1]._acceptedConnectionPointType = this._inputs[inputIndex0];\r\n        } else {\r\n            this._inputs[inputIndex0]._linkedConnectionSource = this._inputs[inputIndex1];\r\n            this._inputs[inputIndex0]._isMainLinkSource = true;\r\n        }\r\n\r\n        this._inputs[inputIndex1]._linkedConnectionSource = this._inputs[inputIndex0];\r\n    }\r\n\r\n    /**\r\n     * Initialize the block and prepare the context for build\r\n     */\r\n    public initialize() {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * Lets the block try to connect some inputs automatically\r\n     */\r\n    public autoConfigure() {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * Find an input by its name\r\n     * @param name defines the name of the input to look for\r\n     * @returns the input or null if not found\r\n     */\r\n    public getInputByName(name: string) {\r\n        const filter = this._inputs.filter((e) => e.name === name);\r\n\r\n        if (filter.length) {\r\n            return filter[0];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Find an output by its name\r\n     * @param name defines the name of the output to look for\r\n     * @returns the output or null if not found\r\n     */\r\n    public getOutputByName(name: string) {\r\n        const filter = this._outputs.filter((e) => e.name === name);\r\n\r\n        if (filter.length) {\r\n            return filter[0];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public serialize(): any {\r\n        const serializationObject: any = {};\r\n\r\n        serializationObject.customType = \"BABYLON.\" + this.getClassName();\r\n        serializationObject.id = this.uniqueId;\r\n        serializationObject.name = this.name;\r\n        serializationObject.comments = this.comments;\r\n        serializationObject.visibleOnFrame = this.visibleOnFrame;\r\n        serializationObject.disabled = this.disabled;\r\n        if (this._additionalConstructionParameters) {\r\n            serializationObject.additionalConstructionParameters = this._additionalConstructionParameters;\r\n        }\r\n\r\n        serializationObject.inputs = [];\r\n        serializationObject.outputs = [];\r\n\r\n        for (const input of this.inputs) {\r\n            serializationObject.inputs.push(input.serialize());\r\n        }\r\n\r\n        for (const output of this.outputs) {\r\n            serializationObject.outputs.push(output.serialize(false));\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    public _deserialize(serializationObject: any) {\r\n        this._name = serializationObject.name;\r\n        this.comments = serializationObject.comments;\r\n        this.visibleOnFrame = serializationObject.visibleOnFrame;\r\n        this.disabled = serializationObject.disabled;\r\n\r\n        this._deserializePortDisplayNamesAndExposedOnFrame(serializationObject);\r\n    }\r\n\r\n    private _deserializePortDisplayNamesAndExposedOnFrame(serializationObject: any) {\r\n        const serializedInputs = serializationObject.inputs;\r\n        const serializedOutputs = serializationObject.outputs;\r\n\r\n        if (serializedInputs) {\r\n            for (const port of serializedInputs) {\r\n                const input = this.inputs.find((i) => i.name === port.name);\r\n                if (!input) {\r\n                    continue;\r\n                }\r\n                if (port.displayName) {\r\n                    input.displayName = port.displayName;\r\n                }\r\n                if (port.isExposedOnFrame) {\r\n                    input.isExposedOnFrame = port.isExposedOnFrame;\r\n                    input.exposedPortPosition = port.exposedPortPosition;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (serializedOutputs) {\r\n            for (let i = 0; i < serializedOutputs.length; i++) {\r\n                const port = serializedOutputs[i];\r\n                if (port.displayName) {\r\n                    this.outputs[i].displayName = port.displayName;\r\n                }\r\n                if (port.isExposedOnFrame) {\r\n                    this.outputs[i].isExposedOnFrame = port.isExposedOnFrame;\r\n                    this.outputs[i].exposedPortPosition = port.exposedPortPosition;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _dumpPropertiesCode() {\r\n        const variableName = this._codeVariableName;\r\n        return `${variableName}.visibleOnFrame = ${this.visibleOnFrame};\\n${variableName}.disabled = ${this.disabled};\\n`;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _dumpCodeForOutputConnections(alreadyDumped: NodeRenderGraphBlock[]) {\r\n        let codeString = \"\";\r\n\r\n        if (alreadyDumped.indexOf(this) !== -1) {\r\n            return codeString;\r\n        }\r\n\r\n        alreadyDumped.push(this);\r\n\r\n        for (const input of this.inputs) {\r\n            if (!input.isConnected) {\r\n                continue;\r\n            }\r\n\r\n            const connectedOutput = input.connectedPoint!;\r\n            const connectedBlock = connectedOutput.ownerBlock;\r\n\r\n            codeString += connectedBlock._dumpCodeForOutputConnections(alreadyDumped);\r\n            codeString += `${connectedBlock._codeVariableName}.${connectedBlock._outputRename(connectedOutput.name)}.connectTo(${this._codeVariableName}.${this._inputRename(\r\n                input.name\r\n            )});\\n`;\r\n        }\r\n\r\n        return codeString;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _dumpCode(uniqueNames: string[], alreadyDumped: NodeRenderGraphBlock[]) {\r\n        alreadyDumped.push(this);\r\n\r\n        // Get unique name\r\n        const nameAsVariableName = this.name.replace(/[^A-Za-z_]+/g, \"\");\r\n        this._codeVariableName = nameAsVariableName || `${this.getClassName()}_${this.uniqueId}`;\r\n\r\n        if (uniqueNames.indexOf(this._codeVariableName) !== -1) {\r\n            let index = 0;\r\n            do {\r\n                index++;\r\n                this._codeVariableName = nameAsVariableName + index;\r\n            } while (uniqueNames.indexOf(this._codeVariableName) !== -1);\r\n        }\r\n\r\n        uniqueNames.push(this._codeVariableName);\r\n\r\n        // Declaration\r\n        let codeString = `\\n// ${this.getClassName()}\\n`;\r\n        if (this.comments) {\r\n            codeString += `// ${this.comments}\\n`;\r\n        }\r\n        const className = this.getClassName();\r\n        if (className === \"NodeRenderGraphInputBlock\") {\r\n            const block = this as unknown as NodeRenderGraphInputBlock;\r\n            const blockType = block.type;\r\n\r\n            codeString += `var ${this._codeVariableName} = new BABYLON.NodeRenderGraphInputBlock(\"${this.name}\", nodeRenderGraph.frameGraph, scene, BABYLON.NodeRenderGraphBlockConnectionPointTypes.${NodeRenderGraphBlockConnectionPointTypes[blockType]});\\n`;\r\n        } else {\r\n            if (this._additionalConstructionParameters) {\r\n                codeString += `var ${this._codeVariableName} = new BABYLON.${className}(\"${this.name}\", nodeRenderGraph.frameGraph, scene, ...${JSON.stringify(this._additionalConstructionParameters)});\\n`;\r\n            } else {\r\n                codeString += `var ${this._codeVariableName} = new BABYLON.${className}(\"${this.name}\", nodeRenderGraph.frameGraph, scene);\\n`;\r\n            }\r\n        }\r\n\r\n        // Properties\r\n        codeString += this._dumpPropertiesCode() + \"\\n\";\r\n\r\n        // Inputs\r\n        for (const input of this.inputs) {\r\n            if (!input.isConnected) {\r\n                continue;\r\n            }\r\n\r\n            const connectedOutput = input.connectedPoint!;\r\n            const connectedBlock = connectedOutput.ownerBlock;\r\n\r\n            if (alreadyDumped.indexOf(connectedBlock) === -1) {\r\n                codeString += connectedBlock._dumpCode(uniqueNames, alreadyDumped);\r\n            }\r\n        }\r\n\r\n        // Outputs\r\n        for (const output of this.outputs) {\r\n            if (!output.hasEndpoints) {\r\n                continue;\r\n            }\r\n\r\n            for (const endpoint of output.endpoints) {\r\n                const connectedBlock = endpoint.ownerBlock;\r\n                if (connectedBlock && alreadyDumped.indexOf(connectedBlock) === -1) {\r\n                    codeString += connectedBlock._dumpCode(uniqueNames, alreadyDumped);\r\n                }\r\n            }\r\n        }\r\n\r\n        return codeString;\r\n    }\r\n\r\n    /**\r\n     * Clone the current block to a new identical block\r\n     * @returns a copy of the current block\r\n     */\r\n    public clone() {\r\n        const serializationObject = this.serialize();\r\n        const blockType: typeof NodeRenderGraphBlock = GetClass(serializationObject.customType);\r\n\r\n        if (blockType) {\r\n            const additionalConstructionParameters = serializationObject.additionalConstructionParameters;\r\n            const block: NodeRenderGraphBlock = additionalConstructionParameters\r\n                ? new blockType(\"\", this._frameGraph, this._scene, ...additionalConstructionParameters)\r\n                : new blockType(\"\", this._frameGraph, this._scene);\r\n            block._deserialize(serializationObject);\r\n            return block;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public dispose() {\r\n        for (const input of this.inputs) {\r\n            input.dispose();\r\n        }\r\n\r\n        for (const output of this.outputs) {\r\n            output.dispose();\r\n        }\r\n\r\n        this._frameGraphTask?.dispose();\r\n        this._frameGraphTask = undefined as any;\r\n\r\n        this.onBuildObservable.clear();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2717, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Texture/copyToBackbufferColorTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Texture/copyToBackbufferColorTask.ts"],"sourcesContent":["import type { FrameGraphTextureHandle } from \"core/index\";\r\nimport { backbufferColorTextureHandle } from \"../../frameGraphTypes\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\n\r\n/**\r\n * Task which copies a texture to the backbuffer color texture.\r\n */\r\nexport class FrameGraphCopyToBackbufferColorTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to copy to the backbuffer color texture.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    public record() {\r\n        if (this.sourceTexture === undefined) {\r\n            throw new Error(`FrameGraphCopyToBackbufferColorTask \"${this.name}\": sourceTexture is required`);\r\n        }\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.addDependencies(this.sourceTexture);\r\n\r\n        pass.setRenderTarget(backbufferColorTextureHandle);\r\n        pass.setExecuteFunc((context) => {\r\n            if (!context.isBackbuffer(this.sourceTexture)) {\r\n                context.copyTexture(this.sourceTexture);\r\n            }\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(backbufferColorTextureHandle);\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,4BAA4B,EAAE,MAAM,uBAAuB,CAAC;AACrE,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;;;AAKhD,MAAO,mCAAoC,SAAQ,yPAAc;IAM5D,MAAM,GAAA;QACT,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;YACnC,MAAM,IAAI,KAAK,CAAC,CAAA,qCAAA,EAAwC,IAAI,CAAC,IAAI,CAAA,4BAAA,CAA8B,CAAC,CAAC;QACrG,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAEzC,IAAI,CAAC,eAAe,CAAC,wQAA4B,CAAC,CAAC;QACnD,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;gBAC5C,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC5C,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;QAEnF,YAAY,CAAC,eAAe,CAAC,wQAA4B,CAAC,CAAC;QAC3D,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,AAAE,CAAC,CAAC,CAAC;IAClD,CAAC;CACJ"}},
    {"offset": {"line": 2747, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/outputBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/outputBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph, NodeRenderGraphBuildState, FrameGraphTextureHandle } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { FrameGraphCopyToBackbufferColorTask } from \"../../Tasks/Texture/copyToBackbufferColorTask\";\r\n\r\n/**\r\n * Block used to generate the final graph\r\n */\r\nexport class NodeRenderGraphOutputBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphCopyToBackbufferColorTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphOutputBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._isUnique = true;\r\n\r\n        this.registerInput(\"texture\", NodeRenderGraphBlockConnectionPointTypes.Texture);\r\n        this._addDependenciesInput();\r\n\r\n        this.texture.addAcceptedConnectionPointTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAll);\r\n\r\n        this._frameGraphTask = new FrameGraphCopyToBackbufferColorTask(name, frameGraph);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphOutputBlock\";\r\n    }\r\n    /**\r\n     * Gets the texture input component\r\n     */\r\n    public get texture(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.name = this.name;\r\n\r\n        const textureConnectedPoint = this.texture.connectedPoint;\r\n        if (textureConnectedPoint) {\r\n            this._frameGraphTask.sourceTexture = textureConnectedPoint.value as FrameGraphTextureHandle;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphOutputBlock\", NodeRenderGraphOutputBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,wCAAwC,EAAE,MAAM,+BAA+B,CAAC;AACzF,OAAO,EAAE,mCAAmC,EAAE,MAAM,+CAA+C,CAAC;;;;;AAK9F,MAAO,0BAA2B,SAAQ,6QAAoB;IAGhE;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,0SAAwC,CAAC,OAAO,CAAC,CAAC;QAChF,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,IAAI,CAAC,OAAO,CAAC,+BAA+B,CAAC,0SAAwC,CAAC,UAAU,CAAC,CAAC;QAElG,IAAI,CAAC,eAAe,GAAG,IAAI,6SAAmC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACrF,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,4BAA4B,CAAC;IACxC,CAAC;IACD;;OAEG,CACH,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QAEtC,MAAM,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;QAC1D,IAAI,qBAAqB,EAAE,CAAC;YACxB,IAAI,CAAC,eAAe,CAAC,aAAa,GAAG,qBAAqB,CAAC,KAAgC,CAAC;QAChG,CAAC;IACL,CAAC;CACJ;IAED,6OAAa,EAAC,oCAAoC,EAAE,0BAA0B,CAAC,CAAC"}},
    {"offset": {"line": 2803, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphContext.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphContext.ts"],"sourcesContent":["import type { AbstractEngine, FrameGraphTextureManager, Scene, FrameGraphTextureHandle, Nullable, InternalTexture, IViewportLike } from \"core/index\";\r\n\r\n/**\r\n * Base class for frame graph context.\r\n */\r\nexport class FrameGraphContext {\r\n    private _depthTest: boolean;\r\n    private _depthWrite: boolean;\r\n\r\n    /** @internal */\r\n    constructor(\r\n        protected readonly _engine: AbstractEngine,\r\n        protected readonly _textureManager: FrameGraphTextureManager,\r\n        protected readonly _scene: Scene\r\n    ) {}\r\n\r\n    /**\r\n     * Renders a component without managing the render target.\r\n     * Use this method when you have a component that handles its own rendering logic which is not fully integrated into the frame graph system.\r\n     * @param component The component to render.\r\n     * @param intermediateRendering If true, the scene's intermediate rendering flag will be set to true during the render call (default: true)\r\n     */\r\n    public renderUnmanaged(component: { render: () => void }, intermediateRendering = true): void {\r\n        const currentRenderTarget = this._engine._currentRenderTarget;\r\n\r\n        this._scene.incrementRenderId();\r\n        this._scene.resetCachedMaterial();\r\n\r\n        this._scene._intermediateRendering = intermediateRendering;\r\n\r\n        component.render();\r\n\r\n        this._scene._intermediateRendering = false;\r\n\r\n        if (this._engine._currentRenderTarget !== currentRenderTarget) {\r\n            if (!currentRenderTarget) {\r\n                this._engine.restoreDefaultFramebuffer();\r\n            } else {\r\n                this._engine.bindFramebuffer(currentRenderTarget);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a texture from a handle.\r\n     * Note that if the texture is a history texture, the read texture for the current frame will be returned.\r\n     * @param handle The handle of the texture\r\n     * @returns The texture or null if not found\r\n     */\r\n    public getTextureFromHandle(handle: FrameGraphTextureHandle): Nullable<InternalTexture> {\r\n        return this._textureManager.getTextureFromHandle(handle);\r\n    }\r\n\r\n    /**\r\n     * Pushes a debug group to the engine's debug stack.\r\n     * @param name The name of the debug group\r\n     */\r\n    public pushDebugGroup(name: string) {\r\n        this._engine._debugPushGroup?.(name, 1);\r\n    }\r\n\r\n    /**\r\n     * Pops a debug group from the engine's debug stack.\r\n     */\r\n    public popDebugGroup() {\r\n        this._engine._debugPopGroup?.(1);\r\n    }\r\n\r\n    /**\r\n     * Saves the current depth states (depth testing and depth writing)\r\n     */\r\n    public saveDepthStates(): void {\r\n        this._depthTest = this._engine.getDepthBuffer();\r\n        this._depthWrite = this._engine.getDepthWrite();\r\n    }\r\n\r\n    /**\r\n     * Restores the depth states saved by saveDepthStates\r\n     */\r\n    public restoreDepthStates(): void {\r\n        this._engine.setDepthBuffer(this._depthTest);\r\n        this._engine.setDepthWrite(this._depthWrite);\r\n    }\r\n\r\n    /**\r\n     * Sets the depth states for the current render target\r\n     * @param depthTest If true, depth testing is enabled\r\n     * @param depthWrite If true, depth writing is enabled\r\n     */\r\n    public setDepthStates(depthTest: boolean, depthWrite: boolean): void {\r\n        this._engine.setDepthBuffer(depthTest);\r\n        this._engine.setDepthWrite(depthWrite);\r\n    }\r\n\r\n    /**\r\n     * Sets the current viewport\r\n     * @param viewport defines the viewport element to be used\r\n     * @param requiredWidth defines the width required for rendering. If not provided, the width of the render texture is used.\r\n     * @param requiredHeight defines the height required for rendering. If not provided the height of the render texture is used.\r\n     */\r\n    public setViewport(viewport: IViewportLike, requiredWidth?: number, requiredHeight?: number): void {\r\n        this._engine.setViewport(viewport, requiredHeight, requiredWidth);\r\n    }\r\n}\r\n"],"names":[],"mappings":"AAEA;;GAEG;;;;AACG,MAAO,iBAAiB;IAI1B,cAAA,EAAgB,CAChB,YACuB,OAAuB,EACvB,eAAyC,EACzC,MAAa,CAAA;QAFb,IAAA,CAAA,OAAO,GAAP,OAAO,CAAgB;QACvB,IAAA,CAAA,eAAe,GAAf,eAAe,CAA0B;QACzC,IAAA,CAAA,MAAM,GAAN,MAAM,CAAO;IACjC,CAAC;IAEJ;;;;;OAKG,CACI,eAAe,CAAC,SAAiC,EAAE,qBAAqB,GAAG,IAAI,EAAA;QAClF,MAAM,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC;QAE9D,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;QAElC,IAAI,CAAC,MAAM,CAAC,sBAAsB,GAAG,qBAAqB,CAAC;QAE3D,SAAS,CAAC,MAAM,EAAE,CAAC;QAEnB,IAAI,CAAC,MAAM,CAAC,sBAAsB,GAAG,KAAK,CAAC;QAE3C,IAAI,IAAI,CAAC,OAAO,CAAC,oBAAoB,KAAK,mBAAmB,EAAE,CAAC;YAC5D,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBACvB,IAAI,CAAC,OAAO,CAAC,yBAAyB,EAAE,CAAC;YAC7C,CAAC,MAAM,CAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,mBAAmB,CAAC,CAAC;YACtD,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;;OAKG,CACI,oBAAoB,CAAC,MAA+B,EAAA;QACvD,OAAO,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;IAC7D,CAAC;IAED;;;OAGG,CACI,cAAc,CAAC,IAAY,EAAA;QAC9B,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAC5C,CAAC;IAED;;OAEG,CACI,aAAa,GAAA;QAChB,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAED;;OAEG,CACI,eAAe,GAAA;QAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACpD,CAAC;IAED;;OAEG,CACI,kBAAkB,GAAA;QACrB,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACjD,CAAC;IAED;;;;OAIG,CACI,cAAc,CAAC,SAAkB,EAAE,UAAmB,EAAA;QACzD,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;IAED;;;;;OAKG,CACI,WAAW,CAAC,QAAuB,EAAE,aAAsB,EAAE,cAAuB,EAAA;QACvF,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,cAAc,EAAE,aAAa,CAAC,CAAC;IACtE,CAAC;CACJ"}},
    {"offset": {"line": 2887, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphRenderContext.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphRenderContext.ts"],"sourcesContent":["import type {\r\n    Nullable,\r\n    AbstractEngine,\r\n    DrawWrapper,\r\n    IColor4Like,\r\n    Layer,\r\n    FrameGraphTextureHandle,\r\n    Effect,\r\n    FrameGraphTextureManager,\r\n    ObjectRenderer,\r\n    Scene,\r\n    FrameGraphRenderTarget,\r\n    InternalTexture,\r\n    UtilityLayerRenderer,\r\n    IStencilState,\r\n} from \"core/index\";\r\nimport { Constants } from \"../Engines/constants\";\r\nimport { EffectRenderer } from \"../Materials/effectRenderer\";\r\nimport { CopyTextureToTexture } from \"../Misc/copyTextureToTexture\";\r\nimport { FrameGraphContext } from \"./frameGraphContext\";\r\n\r\nconst SamplingModeHasMipMapFiltering = [\r\n    false, // not used\r\n    false, // TEXTURE_NEAREST_SAMPLINGMODE / TEXTURE_NEAREST_NEAREST\r\n    false, // TEXTURE_BILINEAR_SAMPLINGMODE / TEXTURE_LINEAR_LINEAR\r\n    true, // TEXTURE_TRILINEAR_SAMPLINGMODE / TEXTURE_LINEAR_LINEAR_MIPLINEAR\r\n    true, // TEXTURE_NEAREST_NEAREST_MIPNEAREST\r\n    true, // TEXTURE_NEAREST_LINEAR_MIPNEAREST\r\n    true, // TEXTURE_NEAREST_LINEAR_MIPLINEAR\r\n    false, // TEXTURE_NEAREST_LINEAR\r\n    true, // TEXTURE_NEAREST_NEAREST_MIPLINEAR\r\n    true, // TEXTURE_LINEAR_NEAREST_MIPNEAREST\r\n    true, // TEXTURE_LINEAR_NEAREST_MIPLINEAR\r\n    true, // TEXTURE_LINEAR_LINEAR_MIPNEAREST\r\n    false, // TEXTURE_LINEAR_NEAREST\r\n];\r\n\r\n/**\r\n * Frame graph context used render passes.\r\n * @experimental\r\n */\r\nexport class FrameGraphRenderContext extends FrameGraphContext {\r\n    private readonly _effectRenderer: EffectRenderer;\r\n    private readonly _effectRendererBack: EffectRenderer;\r\n    private _currentRenderTarget: FrameGraphRenderTarget | undefined;\r\n    private _debugMessageWhenTargetBound: string | undefined;\r\n    private _debugMessageHasBeenPushed = false;\r\n    private _renderTargetIsBound = true;\r\n    private readonly _copyTexture: CopyTextureToTexture;\r\n\r\n    private static _IsObjectRenderer(value: Layer | ObjectRenderer | UtilityLayerRenderer): value is ObjectRenderer {\r\n        return (value as ObjectRenderer).initRender !== undefined;\r\n    }\r\n\r\n    /** @internal */\r\n    constructor(engine: AbstractEngine, textureManager: FrameGraphTextureManager, scene: Scene) {\r\n        super(engine, textureManager, scene);\r\n        this._effectRenderer = new EffectRenderer(this._engine);\r\n        this._effectRendererBack = new EffectRenderer(this._engine, {\r\n            positions: [1, 1, -1, 1, -1, -1, 1, -1],\r\n            indices: [0, 2, 1, 0, 3, 2],\r\n        });\r\n        this._copyTexture = new CopyTextureToTexture(this._engine);\r\n    }\r\n\r\n    /**\r\n     * Checks whether a texture handle points to the backbuffer's color or depth texture\r\n     * @param handle The handle to check\r\n     * @returns True if the handle points to the backbuffer's color or depth texture, otherwise false\r\n     */\r\n    public isBackbuffer(handle: FrameGraphTextureHandle): boolean {\r\n        return this._textureManager._isBackbuffer(handle);\r\n    }\r\n\r\n    /**\r\n     * Checks whether a texture handle points to the backbuffer's color texture\r\n     * @param handle The handle to check\r\n     * @returns True if the handle points to the backbuffer's color texture, otherwise false\r\n     */\r\n    public isBackbufferColor(handle: FrameGraphTextureHandle): boolean {\r\n        return this._textureManager.isBackbufferColor(handle);\r\n    }\r\n\r\n    /**\r\n     * Checks whether a texture handle points to the backbuffer's depth texture\r\n     * @param handle The handle to check\r\n     * @returns True if the handle points to the backbuffer's depth texture, otherwise false\r\n     */\r\n    public isBackbufferDepthStencil(handle: FrameGraphTextureHandle): boolean {\r\n        return this._textureManager.isBackbufferDepthStencil(handle);\r\n    }\r\n\r\n    /**\r\n     * Creates a (frame graph) render target wrapper\r\n     * Note that renderTargets or renderTargetDepth can be undefined, but not both at the same time!\r\n     * @param name Name of the render target wrapper\r\n     * @param renderTargets Render target handles (textures) to use\r\n     * @param renderTargetDepth Render target depth handle (texture) to use\r\n     * @param depthReadOnly If true, the depth buffer will be read-only\r\n     * @param stencilReadOnly If true, the stencil buffer will be read-only\r\n     * @returns The created render target wrapper\r\n     */\r\n    public createRenderTarget(\r\n        name: string,\r\n        renderTargets?: FrameGraphTextureHandle | FrameGraphTextureHandle[],\r\n        renderTargetDepth?: FrameGraphTextureHandle,\r\n        depthReadOnly?: boolean,\r\n        stencilReadOnly?: boolean\r\n    ): FrameGraphRenderTarget {\r\n        return this._textureManager.createRenderTarget(name, renderTargets, renderTargetDepth, depthReadOnly, stencilReadOnly);\r\n    }\r\n\r\n    /**\r\n     * Clears the current render buffer or the current render target (if any is set up)\r\n     * @param color Defines the color to use\r\n     * @param backBuffer Defines if the back buffer must be cleared\r\n     * @param depth Defines if the depth buffer must be cleared\r\n     * @param stencil Defines if the stencil buffer must be cleared\r\n     * @param stencilClearValue Defines the value to use to clear the stencil buffer (default is 0)\r\n     */\r\n    public clear(color: Nullable<IColor4Like>, backBuffer: boolean, depth: boolean, stencil?: boolean, stencilClearValue = 0): void {\r\n        this._applyRenderTarget();\r\n        this._engine.clear(color, backBuffer, depth, stencil, stencilClearValue);\r\n    }\r\n\r\n    /**\r\n     * Clears the color attachments of the current render target\r\n     * @param color Defines the color to use\r\n     * @param attachments The attachments to clear\r\n     */\r\n    public clearColorAttachments(color: Nullable<IColor4Like>, attachments: number[]): void {\r\n        this._applyRenderTarget();\r\n        this._engine.bindAttachments(attachments);\r\n        this._engine.clear(color, true, false, false);\r\n    }\r\n\r\n    /**\r\n     * Clears all attachments (color(s) + depth/stencil) of the current render target\r\n     * @param color Defines the color to use\r\n     * @param attachments The attachments to clear\r\n     * @param backBuffer Defines if the back buffer must be cleared\r\n     * @param depth Defines if the depth buffer must be cleared\r\n     * @param stencil Defines if the stencil buffer must be cleared\r\n     * @param stencilClearValue Defines the value to use to clear the stencil buffer (default is 0)\r\n     */\r\n    public clearAttachments(color: Nullable<IColor4Like>, attachments: number[], backBuffer: boolean, depth: boolean, stencil?: boolean, stencilClearValue = 0): void {\r\n        this._applyRenderTarget();\r\n        this._engine.bindAttachments(attachments);\r\n        this._engine.clear(color, backBuffer, depth, stencil, stencilClearValue);\r\n    }\r\n\r\n    /**\r\n     * Binds the attachments to the current render target\r\n     * @param attachments The attachments to bind\r\n     */\r\n    public bindAttachments(attachments: number[]): void {\r\n        this._applyRenderTarget();\r\n        this._engine.bindAttachments(attachments);\r\n    }\r\n\r\n    /**\r\n     * Generates mipmaps for the current render target\r\n     */\r\n    public generateMipMaps(): void {\r\n        if (this._currentRenderTarget?.renderTargetWrapper === undefined) {\r\n            return;\r\n        }\r\n\r\n        if (this._engine._currentRenderTarget && (!this._engine.isWebGPU || this._renderTargetIsBound)) {\r\n            // we can't generate the mipmaps if the render target (which is the texture we want to generate mipmaps for) is bound\r\n            // Also, for some reasons, on WebGL2, generating mipmaps doesn't work if a render target is bound, even if it's not the texture we want to generate mipmaps for...\r\n            this._flushDebugMessages();\r\n            this._engine.unBindFramebuffer(this._engine._currentRenderTarget);\r\n            this._renderTargetIsBound = false;\r\n        }\r\n\r\n        const textures = this._currentRenderTarget.renderTargetWrapper.textures;\r\n        if (textures) {\r\n            for (const texture of textures) {\r\n                this._engine.generateMipmaps(texture);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the texture sampling mode for a given texture handle\r\n     * @param handle Handle of the texture to set the sampling mode for\r\n     * @param samplingMode Sampling mode to set\r\n     */\r\n    public setTextureSamplingMode(handle: FrameGraphTextureHandle, samplingMode: number): void {\r\n        const internalTexture = this._textureManager.getTextureFromHandle(handle);\r\n        if (internalTexture && internalTexture.samplingMode !== samplingMode) {\r\n            internalTexture.useMipMaps = SamplingModeHasMipMapFiltering[samplingMode];\r\n            this._engine.updateTextureSamplingMode(samplingMode, internalTexture);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds a texture handle to a given effect (resolves the handle to a texture and binds it to the effect)\r\n     * @param effect The effect to bind the texture to\r\n     * @param name The name of the texture in the effect\r\n     * @param handle The handle of the texture to bind\r\n     */\r\n    public bindTextureHandle(effect: Effect, name: string, handle: FrameGraphTextureHandle): void {\r\n        let texture: Nullable<InternalTexture>;\r\n\r\n        const historyEntry = this._textureManager._historyTextures.get(handle);\r\n        if (historyEntry) {\r\n            texture = historyEntry.textures[historyEntry.index]; // texture we write to in this frame\r\n            if (\r\n                this._currentRenderTarget !== undefined &&\r\n                this._currentRenderTarget.renderTargetWrapper !== undefined &&\r\n                this._currentRenderTarget.renderTargetWrapper.textures!.includes(texture!)\r\n            ) {\r\n                // If the current render target renders to the history write texture, we bind the read texture instead\r\n                texture = historyEntry.textures[historyEntry.index ^ 1];\r\n            }\r\n        } else {\r\n            texture = this._textureManager._textures.get(handle)!.texture;\r\n        }\r\n\r\n        effect._bindTexture(name, texture);\r\n    }\r\n\r\n    /**\r\n     * Applies a full-screen effect to the current render target\r\n     * @param drawWrapper The draw wrapper containing the effect to apply\r\n     * @param customBindings The custom bindings to use when applying the effect (optional)\r\n     * @param stencilState The stencil state to use when applying the effect (optional)\r\n     * @param disableColorWrite If true, color write will be disabled when applying the effect (optional)\r\n     * @param drawBackFace If true, the fullscreen quad will be drawn as a back face (in CW - optional)\r\n     * @param depthTest If true, depth testing will be enabled when applying the effect (default is false)\r\n     * @param noViewport If true, the current viewport will be left unchanged (optional). If false or undefined, the viewport will be set to the full render target size.\r\n     * @returns True if the effect was applied, otherwise false (effect not ready)\r\n     */\r\n    public applyFullScreenEffect(\r\n        drawWrapper: DrawWrapper,\r\n        customBindings?: () => void,\r\n        stencilState?: IStencilState,\r\n        disableColorWrite?: boolean,\r\n        drawBackFace?: boolean,\r\n        depthTest?: boolean,\r\n        noViewport?: boolean\r\n    ): boolean {\r\n        if (!drawWrapper.effect?.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        this._applyRenderTarget();\r\n\r\n        const engineDepthMask = this._engine.getDepthWrite(); // for some reasons, depthWrite is not restored by EffectRenderer.restoreStates\r\n\r\n        const effectRenderer = drawBackFace ? this._effectRendererBack : this._effectRenderer;\r\n\r\n        effectRenderer.saveStates();\r\n        if (!noViewport) {\r\n            effectRenderer.setViewport();\r\n        }\r\n\r\n        this._engine.enableEffect(drawWrapper);\r\n        this._engine.setState(false, undefined, undefined, undefined, undefined, stencilState);\r\n        this._engine.setDepthBuffer(!!depthTest);\r\n        if (disableColorWrite) {\r\n            this._engine.setColorWrite(false);\r\n        }\r\n        this._engine.setDepthWrite(false);\r\n\r\n        effectRenderer.bindBuffers(drawWrapper.effect);\r\n        customBindings?.();\r\n        effectRenderer.draw();\r\n        effectRenderer.restoreStates();\r\n        if (disableColorWrite) {\r\n            this._engine.setColorWrite(true);\r\n        }\r\n        this._engine.setDepthWrite(engineDepthMask);\r\n        this._engine.setAlphaMode(Constants.ALPHA_DISABLE);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Copies a texture to the current render target\r\n     * @param sourceTexture The source texture to copy from\r\n     * @param forceCopyToBackbuffer If true, the copy will be done to the back buffer regardless of the current render target\r\n     * @param noViewport If true, the current viewport will be left unchanged (optional). If false or undefined, the viewport will be set to the full render target size.\r\n     * @param lodLevel The LOD level to use when copying the texture (default: 0).\r\n     */\r\n    public copyTexture(sourceTexture: FrameGraphTextureHandle, forceCopyToBackbuffer = false, noViewport?: boolean, lodLevel = 0): void {\r\n        if (forceCopyToBackbuffer) {\r\n            this.bindRenderTarget();\r\n        }\r\n\r\n        this._copyTexture.source = this._textureManager.getTextureFromHandle(sourceTexture, true)!;\r\n        this._copyTexture.lodLevel = lodLevel;\r\n\r\n        this.applyFullScreenEffect(\r\n            this._copyTexture.effectWrapper.drawWrapper,\r\n            () => {\r\n                this._copyTexture.effectWrapper.onApplyObservable.notifyObservers({});\r\n            },\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            noViewport\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Renders a RenderTargetTexture or a layer\r\n     * @param object The RenderTargetTexture/Layer to render\r\n     * @param viewportWidth The width of the viewport (optional for Layer, but mandatory for ObjectRenderer)\r\n     * @param viewportHeight The height of the viewport (optional for Layer, but mandatory for ObjectRenderer)\r\n     */\r\n    public render(object: Layer | ObjectRenderer | UtilityLayerRenderer, viewportWidth?: number, viewportHeight?: number): void {\r\n        if (FrameGraphRenderContext._IsObjectRenderer(object)) {\r\n            this._scene._intermediateRendering = true;\r\n            if (object.shouldRender()) {\r\n                this._scene.incrementRenderId();\r\n                this._scene.resetCachedMaterial();\r\n\r\n                this._applyRenderTarget();\r\n\r\n                object.prepareRenderList();\r\n\r\n                object.initRender(viewportWidth!, viewportHeight!);\r\n\r\n                object.render();\r\n\r\n                object.finishRender();\r\n            }\r\n            this._scene._intermediateRendering = false;\r\n        } else {\r\n            this._applyRenderTarget();\r\n            object.render();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds a render target texture so that upcoming draw calls will render to it\r\n     * Note: it is a lazy operation, so the render target will only be bound when needed. This way, it is possible to call\r\n     *   this method several times with different render targets without incurring the cost of binding if no draw calls are made\r\n     * @param renderTarget The handle of the render target texture to bind (default: undefined, meaning \"back buffer\"). Pass an array for MRT rendering.\r\n     * @param debugMessage Optional debug message to display when the render target is bound (visible in PIX, for example)\r\n     * @param applyImmediately If true, the render target will be applied immediately (otherwise it will be applied at first use). Default is false (delayed application).\r\n     */\r\n    public bindRenderTarget(renderTarget?: FrameGraphRenderTarget, debugMessage?: string, applyImmediately = false): void {\r\n        if (\r\n            (renderTarget?.renderTargetWrapper === undefined && this._currentRenderTarget === undefined) ||\r\n            (renderTarget && this._currentRenderTarget && renderTarget.equals(this._currentRenderTarget))\r\n        ) {\r\n            this._flushDebugMessages();\r\n            if (debugMessage !== undefined) {\r\n                this._engine._debugPushGroup?.(debugMessage, 2);\r\n                this._debugMessageWhenTargetBound = undefined;\r\n                this._debugMessageHasBeenPushed = true;\r\n            }\r\n            if (applyImmediately) {\r\n                this._applyRenderTarget();\r\n            }\r\n            return;\r\n        }\r\n        this._currentRenderTarget = renderTarget?.renderTargetWrapper === undefined ? undefined : renderTarget;\r\n        this._debugMessageWhenTargetBound = debugMessage;\r\n        this._renderTargetIsBound = false;\r\n        if (applyImmediately) {\r\n            this._applyRenderTarget();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _flushDebugMessages() {\r\n        if (this._debugMessageHasBeenPushed) {\r\n            this._engine._debugPopGroup?.(2);\r\n            this._debugMessageHasBeenPushed = false;\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _applyRenderTarget() {\r\n        if (this._renderTargetIsBound) {\r\n            return;\r\n        }\r\n\r\n        this._flushDebugMessages();\r\n\r\n        const renderTargetWrapper = this._currentRenderTarget?.renderTargetWrapper;\r\n\r\n        if (renderTargetWrapper === undefined) {\r\n            this._engine.restoreDefaultFramebuffer();\r\n        } else {\r\n            if (this._engine._currentRenderTarget) {\r\n                this._engine.unBindFramebuffer(this._engine._currentRenderTarget);\r\n            }\r\n            this._engine.bindFramebuffer(renderTargetWrapper);\r\n        }\r\n\r\n        if (this._debugMessageWhenTargetBound !== undefined) {\r\n            this._engine._debugPushGroup?.(this._debugMessageWhenTargetBound, 2);\r\n            this._debugMessageWhenTargetBound = undefined;\r\n            this._debugMessageHasBeenPushed = true;\r\n        }\r\n\r\n        this._renderTargetIsBound = true;\r\n    }\r\n\r\n    /** @internal */\r\n    public _isReady(): boolean {\r\n        return this._copyTexture.isReady();\r\n    }\r\n\r\n    /** @internal */\r\n    public _dispose() {\r\n        this._effectRenderer.dispose();\r\n        this._effectRendererBack.dispose();\r\n        this._copyTexture.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3211, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphRenderTarget.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphRenderTarget.ts"],"sourcesContent":["import type { FrameGraphTextureHandle, FrameGraphTextureManager, IMultiRenderTargetOptions, RenderTargetWrapper } from \"core/index\";\r\n\r\n/**\r\n * @internal\r\n * @experimental\r\n */\r\nexport class FrameGraphRenderTarget {\r\n    protected readonly _textureManager: FrameGraphTextureManager;\r\n    protected readonly _renderTargets: FrameGraphTextureHandle[] | undefined;\r\n    protected readonly _renderTargetDepth: FrameGraphTextureHandle | undefined;\r\n    protected _renderTargetWrapper: RenderTargetWrapper | undefined;\r\n    protected _isBackBuffer = false;\r\n\r\n    public readonly name: string;\r\n\r\n    constructor(\r\n        name: string,\r\n        textureManager: FrameGraphTextureManager,\r\n        renderTargets?: FrameGraphTextureHandle | FrameGraphTextureHandle[],\r\n        renderTargetDepth?: FrameGraphTextureHandle\r\n    ) {\r\n        this.name = name;\r\n        this._textureManager = textureManager;\r\n        this._renderTargets = renderTargets === undefined ? undefined : Array.isArray(renderTargets) ? renderTargets : [renderTargets];\r\n        this._renderTargetDepth = renderTargetDepth;\r\n    }\r\n\r\n    public get renderTargetWrapper() {\r\n        if (this._isBackBuffer) {\r\n            return undefined;\r\n        }\r\n\r\n        if (!this._renderTargetWrapper) {\r\n            const engine = this._textureManager.engine;\r\n\r\n            // _renderTargets and _renderTargetDepth cannot both be undefined\r\n            const textureHandle = this._renderTargets === undefined || this._renderTargets.length === 0 ? this._renderTargetDepth! : this._renderTargets[0];\r\n\r\n            if (this._textureManager.isBackbuffer(textureHandle)) {\r\n                this._isBackBuffer = true;\r\n                return undefined;\r\n            }\r\n\r\n            const textureDescription = this._textureManager.getTextureDescription(textureHandle);\r\n\r\n            const creationOptionsForTexture: IMultiRenderTargetOptions = {\r\n                textureCount: this._renderTargets?.length ?? 0,\r\n                generateDepthBuffer: false,\r\n                label: this.name,\r\n                samples: textureDescription.options.samples ?? 1,\r\n                dontCreateTextures: true,\r\n            };\r\n\r\n            this._renderTargetWrapper = engine.createMultipleRenderTarget(textureDescription.size, creationOptionsForTexture, true);\r\n\r\n            for (let i = 0; i < creationOptionsForTexture.textureCount!; i++) {\r\n                const handle = this._renderTargets![i];\r\n                const texture = this._textureManager.getTextureFromHandle(handle);\r\n\r\n                if (!texture) {\r\n                    throw new Error(\r\n                        `FrameGraphRenderTarget.renderTargetWrapper: Failed to get texture from handle. handle: ${handle}, name: ${this.name}, index: ${i}, renderTargets: ${this._renderTargets}`\r\n                    );\r\n                }\r\n\r\n                this._renderTargetWrapper.setTexture(texture, i, false);\r\n            }\r\n\r\n            if (this._renderTargetDepth !== undefined) {\r\n                this._renderTargetWrapper.setDepthStencilTexture(this._textureManager.getTextureFromHandle(this._renderTargetDepth), false);\r\n            }\r\n        }\r\n\r\n        return this._renderTargetWrapper;\r\n    }\r\n\r\n    public equals(other: FrameGraphRenderTarget): boolean {\r\n        const src = this._renderTargets;\r\n        const dst = other._renderTargets;\r\n\r\n        if (src !== undefined && dst !== undefined) {\r\n            if (src.length !== dst.length) {\r\n                return false;\r\n            }\r\n\r\n            for (let i = 0; i < src.length; i++) {\r\n                if (src[i] !== dst[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n        } else if ((src === undefined && dst !== undefined) || (src !== undefined && dst === undefined)) {\r\n            return false;\r\n        }\r\n\r\n        return this._renderTargetDepth === other._renderTargetDepth;\r\n    }\r\n\r\n    public dispose() {\r\n        this._renderTargetWrapper?.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3288, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphTextureManager.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphTextureManager.ts"],"sourcesContent":["import type {\r\n    Scene,\r\n    AbstractEngine,\r\n    TextureSize,\r\n    Nullable,\r\n    FrameGraphTextureCreationOptions,\r\n    FrameGraphTextureHandle,\r\n    InternalTextureCreationOptions,\r\n    InternalTexture,\r\n    FrameGraphTextureOptions,\r\n    FrameGraphTextureDescription,\r\n    RenderTargetWrapper,\r\n    FrameGraphTask,\r\n    IFrameGraphPass,\r\n} from \"core/index\";\r\nimport { getDimensionsFromTextureSize, textureSizeIsObject } from \"../Materials/Textures/textureCreationOptions\";\r\nimport { Texture } from \"../Materials/Textures/texture\";\r\nimport { backbufferColorTextureHandle, backbufferDepthStencilTextureHandle } from \"./frameGraphTypes\";\r\nimport { Constants } from \"../Engines/constants\";\r\nimport { InternalTextureSource } from \"../Materials/Textures/internalTexture\";\r\nimport { FrameGraphRenderTarget } from \"./frameGraphRenderTarget\";\r\nimport { FrameGraphRenderPass } from \"./Passes/renderPass\";\r\nimport { Logger } from \"../Misc/logger\";\r\nimport { GetTypeForDepthTexture, IsDepthTexture, HasStencilAspect } from \"core/Materials/Textures/textureHelper.functions\";\r\n\r\ntype HistoryTexture = {\r\n    textures: Array<Nullable<InternalTexture>>;\r\n    handles: Array<FrameGraphTextureHandle>;\r\n    index: number; // current index in textures array - in the current frame, textures[index] is the write texture, textures[index^1] is the read texture - index is flipped at the end of each frame\r\n    references: Array<{ renderTargetWrapper: RenderTargetWrapper; textureIndex: number }>; // render target wrappers that reference this history texture\r\n};\r\n\r\ntype TextureLifespan = {\r\n    firstTask: number;\r\n    lastTask: number;\r\n};\r\n\r\ntype TextureEntry = {\r\n    texture: Nullable<InternalTexture>;\r\n    name: string;\r\n    creationOptions: FrameGraphTextureCreationOptions; // in TextureEntry, creationOptions.size is always an object\r\n    namespace: FrameGraphTextureNamespace;\r\n    textureIndex?: number; // Index of the texture in the types, formats, etc array of FrameGraphTextureOptions (default: 0)\r\n    debug?: Texture;\r\n    refHandle?: FrameGraphTextureHandle; // Handle of the texture this one is referencing - used for dangling handles\r\n    textureDescriptionHash?: string; // a hash of the texture creation options\r\n    lifespan?: TextureLifespan;\r\n    aliasHandle?: FrameGraphTextureHandle; // Handle of the texture this one is aliasing - can be set after execution of texture allocation optimization\r\n    historyTexture?: boolean; // True if the texture is part of a history texture\r\n};\r\n\r\nenum FrameGraphTextureNamespace {\r\n    Task,\r\n    Graph,\r\n    External,\r\n}\r\n\r\n/**\r\n * Manages the textures used by a frame graph\r\n * @experimental\r\n */\r\nexport class FrameGraphTextureManager {\r\n    private static _Counter = 2; // 0 and 1 are reserved for backbuffer textures\r\n\r\n    /** @internal */\r\n    public readonly _textures: Map<FrameGraphTextureHandle, TextureEntry> = new Map();\r\n\r\n    /** @internal */\r\n    public readonly _historyTextures: Map<FrameGraphTextureHandle, HistoryTexture> = new Map();\r\n\r\n    /** @internal */\r\n    public _isRecordingTask = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if debug logs should be shown when applying texture allocation optimization (default: false)\r\n     */\r\n    public showDebugLogsForTextureAllcationOptimization = false;\r\n\r\n    private _backBufferTextureEntry: Nullable<TextureEntry> = null;\r\n    private _backBufferDepthStencilTextureEntry: Nullable<TextureEntry> = null;\r\n    private _backBufferTextureOverriden = false;\r\n\r\n    /**\r\n     * Constructs a new instance of the texture manager\r\n     * @param engine The engine to use\r\n     * @param _debugTextures If true, debug textures will be created so that they are visible in the inspector\r\n     * @param _scene The scene the manager belongs to\r\n     */\r\n    constructor(\r\n        public readonly engine: AbstractEngine,\r\n        private readonly _debugTextures = false,\r\n        private readonly _scene: Scene\r\n    ) {\r\n        this._addSystemTextures();\r\n    }\r\n\r\n    /**\r\n     * Checks if a handle is a backbuffer handle (color or depth/stencil)\r\n     * @param handle The handle to check\r\n     * @returns True if the handle is a backbuffer handle\r\n     */\r\n    public isBackbuffer(handle: FrameGraphTextureHandle): boolean {\r\n        if (this._backBufferTextureOverriden) {\r\n            return false;\r\n        }\r\n\r\n        return this._isBackbuffer(handle);\r\n    }\r\n\r\n    /** @internal */\r\n    public _isBackbuffer(handle: FrameGraphTextureHandle): boolean {\r\n        if (handle === backbufferColorTextureHandle || handle === backbufferDepthStencilTextureHandle) {\r\n            return true;\r\n        }\r\n\r\n        const textureEntry = this._textures.get(handle);\r\n        if (!textureEntry) {\r\n            return false;\r\n        }\r\n\r\n        return textureEntry.refHandle === backbufferColorTextureHandle || textureEntry.refHandle === backbufferDepthStencilTextureHandle;\r\n    }\r\n\r\n    /**\r\n     * Checks if a handle is a backbuffer color handle\r\n     * @param handle The handle to check\r\n     * @returns True if the handle is a backbuffer color handle\r\n     */\r\n    public isBackbufferColor(handle: FrameGraphTextureHandle): boolean {\r\n        if (this._backBufferTextureOverriden) {\r\n            return false;\r\n        }\r\n\r\n        if (handle === backbufferColorTextureHandle) {\r\n            return true;\r\n        }\r\n\r\n        const textureEntry = this._textures.get(handle);\r\n        if (!textureEntry) {\r\n            return false;\r\n        }\r\n\r\n        return textureEntry.refHandle === backbufferColorTextureHandle;\r\n    }\r\n\r\n    /**\r\n     * Checks if a handle is a backbuffer depth/stencil handle\r\n     * @param handle The handle to check\r\n     * @returns True if the handle is a backbuffer depth/stencil handle\r\n     */\r\n    public isBackbufferDepthStencil(handle: FrameGraphTextureHandle): boolean {\r\n        if (this._backBufferTextureOverriden) {\r\n            return false;\r\n        }\r\n\r\n        if (handle === backbufferDepthStencilTextureHandle) {\r\n            return true;\r\n        }\r\n\r\n        const textureEntry = this._textures.get(handle);\r\n        if (!textureEntry) {\r\n            return false;\r\n        }\r\n\r\n        return textureEntry.refHandle === backbufferDepthStencilTextureHandle;\r\n    }\r\n\r\n    /**\r\n     * Checks if a handle is a history texture (or points to a history texture, for a dangling handle)\r\n     * @param handle The handle to check\r\n     * @param checkAllTextures If false (default), the function will check if the handle is the main handle of a history texture (the first handle of the history texture).\r\n     *   If true, the function will also check if the handle is one of the other handles of a history texture.\r\n     * @returns True if the handle is a history texture, otherwise false\r\n     */\r\n    public isHistoryTexture(handle: FrameGraphTextureHandle, checkAllTextures = false): boolean {\r\n        const entry = this._textures.get(handle);\r\n        if (!entry) {\r\n            return false;\r\n        }\r\n\r\n        handle = entry.refHandle ?? handle;\r\n\r\n        if (!checkAllTextures) {\r\n            return this._historyTextures.has(handle);\r\n        }\r\n\r\n        return this._textures.get(handle)?.historyTexture === true;\r\n    }\r\n\r\n    /**\r\n     * Gets the creation options of a texture\r\n     * @param handle Handle of the texture\r\n     * @param preserveHistoryTextureFlag If true, the isHistoryTexture flag in the returned creation options will be the same as when the texture was created (default: false)\r\n     * @returns The creation options of the texture\r\n     */\r\n    public getTextureCreationOptions(handle: FrameGraphTextureHandle, preserveHistoryTextureFlag = false): FrameGraphTextureCreationOptions {\r\n        handle = this._textures.get(handle)?.refHandle ?? handle;\r\n\r\n        const entry = this._textures.get(handle)!;\r\n        const creationOptions = entry.creationOptions;\r\n\r\n        return {\r\n            size: textureSizeIsObject(creationOptions.size) ? { ...creationOptions.size } : creationOptions.size,\r\n            sizeIsPercentage: creationOptions.sizeIsPercentage,\r\n            options: FrameGraphTextureManager.CloneTextureOptions(creationOptions.options, entry.textureIndex),\r\n            isHistoryTexture: preserveHistoryTextureFlag ? creationOptions.isHistoryTexture : false,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets the description of a texture\r\n     * @param handle Handle of the texture\r\n     * @returns The description of the texture\r\n     */\r\n    public getTextureDescription(handle: FrameGraphTextureHandle): FrameGraphTextureDescription {\r\n        const creationOptions = this.getTextureCreationOptions(handle);\r\n\r\n        const size = !creationOptions.sizeIsPercentage\r\n            ? textureSizeIsObject(creationOptions.size)\r\n                ? creationOptions.size\r\n                : { width: creationOptions.size, height: creationOptions.size }\r\n            : this.getAbsoluteDimensions(creationOptions.size);\r\n\r\n        return {\r\n            size,\r\n            options: creationOptions.options,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets a texture handle or creates a new texture if the handle is not provided.\r\n     * If handle is not provided, newTextureName and creationOptions must be provided.\r\n     * @param handle If provided, will simply return the handle\r\n     * @param newTextureName Name of the new texture to create\r\n     * @param creationOptions Options to use when creating the new texture\r\n     * @returns The handle to the texture.\r\n     */\r\n    public getTextureHandleOrCreateTexture(handle?: FrameGraphTextureHandle, newTextureName?: string, creationOptions?: FrameGraphTextureCreationOptions): FrameGraphTextureHandle {\r\n        if (handle === undefined) {\r\n            if (newTextureName === undefined || creationOptions === undefined) {\r\n                throw new Error(\"getTextureHandleOrCreateTexture: Either handle or newTextureName and creationOptions must be provided.\");\r\n            }\r\n            return this.createRenderTargetTexture(newTextureName, creationOptions);\r\n        }\r\n        return handle;\r\n    }\r\n\r\n    /**\r\n     * Gets a texture from a handle.\r\n     * Note that if the texture is a history texture, the read texture for the current frame will be returned, except if historyGetWriteTexture is true.\r\n     * @param handle The handle of the texture\r\n     * @param historyGetWriteTexture If true and the texture is a history texture, the write texture for the current frame will be returned (default: false)\r\n     * @returns The texture or null if not found\r\n     */\r\n    public getTextureFromHandle(handle: FrameGraphTextureHandle, historyGetWriteTexture?: boolean): Nullable<InternalTexture> {\r\n        const entry = this._textures.get(handle);\r\n        const refHandle = entry?.refHandle;\r\n        const finalEntry = refHandle !== undefined ? this._textures.get(refHandle) : entry;\r\n        const finalHandle = refHandle !== undefined ? refHandle : handle;\r\n\r\n        const historyEntry = this._historyTextures.get(finalHandle);\r\n        if (historyEntry) {\r\n            return historyEntry.textures[historyGetWriteTexture ? historyEntry.index : historyEntry.index ^ 1];\r\n        }\r\n        return finalEntry!.texture;\r\n    }\r\n\r\n    /**\r\n     * Imports a texture into the texture manager\r\n     * @param name Name of the texture\r\n     * @param texture Texture to import\r\n     * @param handle Existing handle to use for the texture. If not provided (default), a new handle will be created.\r\n     * @returns The handle to the texture\r\n     */\r\n    public importTexture(name: string, texture: InternalTexture, handle?: FrameGraphTextureHandle): FrameGraphTextureHandle {\r\n        if (handle !== undefined) {\r\n            this._freeEntry(handle);\r\n        }\r\n\r\n        const creationOptions: FrameGraphTextureCreationOptions = {\r\n            size: { width: texture.width, height: texture.height },\r\n            sizeIsPercentage: false,\r\n            isHistoryTexture: false,\r\n            options: {\r\n                createMipMaps: texture.generateMipMaps,\r\n                samples: texture.samples,\r\n                types: [texture.type],\r\n                formats: [texture.format],\r\n                useSRGBBuffers: [texture._useSRGBBuffer],\r\n                creationFlags: [texture._creationFlags],\r\n                labels: texture.label ? [texture.label] : [\"imported\"],\r\n            },\r\n        };\r\n\r\n        return this._createHandleForTexture(name, texture, creationOptions, FrameGraphTextureNamespace.External, handle);\r\n    }\r\n\r\n    /**\r\n     * Creates a new render target texture\r\n     * If multiple textures are described in FrameGraphTextureCreationOptions, the handle of the first texture is returned, handle+1 is the handle of the second texture, etc.\r\n     * @param name Name of the texture\r\n     * @param creationOptions Options to use when creating the texture\r\n     * @param handle Existing handle to use for the texture. If not provided (default), a new handle will be created.\r\n     * @returns The handle to the texture\r\n     */\r\n    public createRenderTargetTexture(name: string, creationOptions: FrameGraphTextureCreationOptions, handle?: FrameGraphTextureHandle): FrameGraphTextureHandle {\r\n        return this._createHandleForTexture(\r\n            name,\r\n            null,\r\n            {\r\n                size: textureSizeIsObject(creationOptions.size) ? { ...creationOptions.size } : creationOptions.size,\r\n                sizeIsPercentage: creationOptions.sizeIsPercentage,\r\n                isHistoryTexture: creationOptions.isHistoryTexture,\r\n                options: FrameGraphTextureManager.CloneTextureOptions(creationOptions.options, undefined, true),\r\n            },\r\n            this._isRecordingTask ? FrameGraphTextureNamespace.Task : FrameGraphTextureNamespace.Graph,\r\n            handle\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Creates a (frame graph) render target wrapper\r\n     * Note that renderTargets or renderTargetDepth can be undefined, but not both at the same time!\r\n     * @param name Name of the render target wrapper\r\n     * @param renderTargets Render target handles (textures) to use\r\n     * @param renderTargetDepth Render target depth handle (texture) to use\r\n     * @param depthReadOnly If true, the depth buffer will be read-only\r\n     * @param stencilReadOnly If true, the stencil buffer will be read-only\r\n     * @returns The created render target wrapper\r\n     */\r\n    public createRenderTarget(\r\n        name: string,\r\n        renderTargets?: FrameGraphTextureHandle | FrameGraphTextureHandle[],\r\n        renderTargetDepth?: FrameGraphTextureHandle,\r\n        depthReadOnly?: boolean,\r\n        stencilReadOnly?: boolean\r\n    ): FrameGraphRenderTarget {\r\n        const renderTarget = new FrameGraphRenderTarget(name, this, renderTargets, renderTargetDepth);\r\n\r\n        const rtw = renderTarget.renderTargetWrapper;\r\n\r\n        if (rtw !== undefined) {\r\n            rtw.depthReadOnly = !!depthReadOnly;\r\n            rtw.stencilReadOnly = !!stencilReadOnly;\r\n\r\n            if (renderTargets) {\r\n                const handles = Array.isArray(renderTargets) ? renderTargets : [renderTargets];\r\n\r\n                for (let i = 0; i < handles.length; i++) {\r\n                    let handle = handles[i];\r\n                    handle = this._textures.get(handle)?.refHandle ?? handle;\r\n\r\n                    const historyEntry = this._historyTextures.get(handle);\r\n                    if (historyEntry) {\r\n                        historyEntry.references.push({ renderTargetWrapper: rtw, textureIndex: i });\r\n\r\n                        rtw.setTexture(historyEntry.textures[historyEntry.index]!, i, false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return renderTarget;\r\n    }\r\n\r\n    /**\r\n     * Creates a handle which is not associated with any texture.\r\n     * Call resolveDanglingHandle to associate the handle with a valid texture handle.\r\n     * @returns The dangling handle\r\n     */\r\n    public createDanglingHandle() {\r\n        return FrameGraphTextureManager._Counter++;\r\n    }\r\n\r\n    /**\r\n     * Associates a texture with a dangling handle\r\n     * @param danglingHandle The dangling handle\r\n     * @param handle The handle to associate with the dangling handle (if not provided, a new texture handle will be created, using the newTextureName and creationOptions parameters)\r\n     * @param newTextureName The name of the new texture to create (if handle is not provided)\r\n     * @param creationOptions The options to use when creating the new texture (if handle is not provided)\r\n     */\r\n    public resolveDanglingHandle(\r\n        danglingHandle: FrameGraphTextureHandle,\r\n        handle?: FrameGraphTextureHandle,\r\n        newTextureName?: string,\r\n        creationOptions?: FrameGraphTextureCreationOptions\r\n    ) {\r\n        if (handle === undefined) {\r\n            if (newTextureName === undefined || creationOptions === undefined) {\r\n                throw new Error(\"resolveDanglingHandle: Either handle or newTextureName and creationOptions must be provided.\");\r\n            }\r\n            this.createRenderTargetTexture(newTextureName, creationOptions, danglingHandle);\r\n            return;\r\n        }\r\n\r\n        const textureEntry = this._textures.get(handle);\r\n\r\n        if (textureEntry === undefined) {\r\n            throw new Error(`resolveDanglingHandle: Handle ${handle} does not exist!`);\r\n        }\r\n\r\n        handle = textureEntry.refHandle ?? handle; // gets the refHandle if handle is a (resolved) dangling handle itself\r\n\r\n        this._textures.set(danglingHandle, {\r\n            texture: textureEntry.texture,\r\n            refHandle: handle,\r\n            name: textureEntry.name,\r\n            creationOptions: {\r\n                size: { ...(textureEntry.creationOptions.size as { width: number; height: number; depth?: number; layers?: number }) },\r\n                options: FrameGraphTextureManager.CloneTextureOptions(textureEntry.creationOptions.options),\r\n                sizeIsPercentage: textureEntry.creationOptions.sizeIsPercentage,\r\n                isHistoryTexture: false,\r\n            },\r\n            namespace: textureEntry.namespace,\r\n            textureIndex: textureEntry.textureIndex,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets the absolute dimensions of a texture.\r\n     * @param size The size of the texture. Width and height must be expressed as a percentage of the screen size (100=100%)!\r\n     * @param screenWidth The width of the screen (default: the width of the rendering canvas)\r\n     * @param screenHeight The height of the screen (default: the height of the rendering canvas)\r\n     * @returns The absolute dimensions of the texture\r\n     */\r\n    public getAbsoluteDimensions(size: TextureSize, screenWidth?: number, screenHeight?: number): { width: number; height: number } {\r\n        if (this._backBufferTextureOverriden) {\r\n            const backbufferColorTextureSize = this._textures.get(backbufferColorTextureHandle)!.creationOptions.size as { width: number; height: number };\r\n\r\n            screenWidth ??= backbufferColorTextureSize.width;\r\n            screenHeight ??= backbufferColorTextureSize.height;\r\n        } else {\r\n            screenWidth ??= this.engine.getRenderWidth(true);\r\n            screenHeight ??= this.engine.getRenderHeight(true);\r\n        }\r\n\r\n        const { width, height } = getDimensionsFromTextureSize(size);\r\n\r\n        return {\r\n            width: Math.floor((width * screenWidth) / 100),\r\n            height: Math.floor((height * screenHeight) / 100),\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets the absolute dimensions of a texture from its handle or creation options.\r\n     * @param handleOrCreationOptions The handle or creation options of the texture\r\n     * @returns The absolute dimensions of the texture\r\n     */\r\n    public getTextureAbsoluteDimensions(handleOrCreationOptions: FrameGraphTextureHandle | FrameGraphTextureCreationOptions): { width: number; height: number } {\r\n        if (typeof handleOrCreationOptions === \"number\") {\r\n            handleOrCreationOptions = this.getTextureCreationOptions(handleOrCreationOptions);\r\n        }\r\n\r\n        return !handleOrCreationOptions.sizeIsPercentage\r\n            ? textureSizeIsObject(handleOrCreationOptions.size)\r\n                ? handleOrCreationOptions.size\r\n                : { width: handleOrCreationOptions.size, height: handleOrCreationOptions.size }\r\n            : this.getAbsoluteDimensions(handleOrCreationOptions.size);\r\n    }\r\n\r\n    /**\r\n     * Calculates the total byte size of all textures used by the frame graph texture manager (including external textures)\r\n     * @param optimizedSize True if the calculation should not factor in aliased textures\r\n     * @param outputWidth The output width of the frame graph. Will be used to calculate the size of percentage-based textures\r\n     * @param outputHeight The output height of the frame graph. Will be used to calculate the size of percentage-based textures\r\n     * @returns The total size of all textures\r\n     */\r\n    public computeTotalTextureSize(optimizedSize: boolean, outputWidth: number, outputHeight: number) {\r\n        let totalSize = 0;\r\n\r\n        this._textures.forEach((entry, handle) => {\r\n            if (\r\n                (!this._backBufferTextureOverriden && (handle === backbufferColorTextureHandle || handle === backbufferDepthStencilTextureHandle)) ||\r\n                entry.refHandle !== undefined\r\n            ) {\r\n                return;\r\n            }\r\n            if (optimizedSize && entry.aliasHandle !== undefined) {\r\n                return;\r\n            }\r\n\r\n            const options = entry.creationOptions;\r\n            const textureIndex = entry.textureIndex || 0;\r\n            const dimensions = options.sizeIsPercentage ? this.getAbsoluteDimensions(options.size, outputWidth, outputHeight) : getDimensionsFromTextureSize(options.size);\r\n\r\n            const blockInfo = FrameGraphTextureManager._GetTextureBlockInformation(\r\n                options.options.types?.[textureIndex] ?? Constants.TEXTURETYPE_UNSIGNED_BYTE,\r\n                options.options.formats![textureIndex]\r\n            );\r\n\r\n            const textureByteSize = Math.ceil(dimensions.width / blockInfo.width) * Math.ceil(dimensions.height / blockInfo.height) * blockInfo.length;\r\n\r\n            let byteSize = textureByteSize;\r\n\r\n            if (options.options.createMipMaps) {\r\n                byteSize = Math.floor((byteSize * 4) / 3);\r\n            }\r\n\r\n            if ((options.options.samples || 1) > 1) {\r\n                // We need an additional texture in the case of MSAA\r\n                byteSize += textureByteSize;\r\n            }\r\n\r\n            totalSize += byteSize;\r\n        });\r\n\r\n        return totalSize;\r\n    }\r\n\r\n    /**\r\n     * True if the back buffer texture has been overriden by a call to setBackBufferTexture\r\n     */\r\n    public get backBufferTextureOverriden() {\r\n        return this._backBufferTextureOverriden;\r\n    }\r\n\r\n    /**\r\n     * Overrides the default back buffer color/depth-stencil textures used by the frame graph.\r\n     * Note that if both textureCreationOptions and depthStencilTextureCreationOptions are provided,\r\n     * the engine will use them to create the back buffer color and depth/stencil textures respectively.\r\n     * In that case, width and height are ignored.\r\n     * @param width The width of the back buffer color/depth-stencil texture (if 0, the engine's current back buffer color/depth-stencil texture width will be used)\r\n     * @param height The height of the back buffer color/depth-stencil texture (if 0, the engine's current back buffer color/depth-stencil texture height will be used)\r\n     * @param textureCreationOptions The color texture creation options (optional)\r\n     * @param depthStencilTextureCreationOptions The depth/stencil texture creation options (optional)\r\n     */\r\n    public setBackBufferTextures(\r\n        width: number,\r\n        height: number,\r\n        textureCreationOptions?: FrameGraphTextureCreationOptions,\r\n        depthStencilTextureCreationOptions?: FrameGraphTextureCreationOptions\r\n    ) {\r\n        if ((width === 0 || height === 0) && (!textureCreationOptions || !depthStencilTextureCreationOptions)) {\r\n            if (this._backBufferTextureOverriden) {\r\n                let entry = this._textures.get(backbufferColorTextureHandle)!;\r\n\r\n                entry.texture?.dispose();\r\n                entry.texture = null;\r\n                entry.debug?.dispose();\r\n                entry.debug = undefined;\r\n\r\n                entry = this._textures.get(backbufferDepthStencilTextureHandle)!;\r\n                entry.texture?.dispose();\r\n                entry.texture = null;\r\n                entry.debug?.dispose();\r\n                entry.debug = undefined;\r\n            }\r\n\r\n            this._backBufferTextureEntry = null;\r\n            this._backBufferDepthStencilTextureEntry = null;\r\n            this._backBufferTextureOverriden = false;\r\n\r\n            this._addSystemTextures();\r\n            return;\r\n        }\r\n\r\n        this._backBufferTextureOverriden = true;\r\n\r\n        const size = { width, height };\r\n\r\n        this._backBufferTextureEntry = {\r\n            name: \"backbuffer color\",\r\n            texture: null,\r\n            creationOptions: textureCreationOptions ?? {\r\n                size,\r\n                options: {\r\n                    createMipMaps: false,\r\n                    samples: this.engine.getCreationOptions().antialias ? 4 : 1,\r\n                    types: [Constants.TEXTURETYPE_UNSIGNED_BYTE],\r\n                    formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                    useSRGBBuffers: [false],\r\n                    creationFlags: [0],\r\n                    labels: [\"backbuffer color\"],\r\n                },\r\n                sizeIsPercentage: false,\r\n            },\r\n            namespace: FrameGraphTextureNamespace.Graph,\r\n            lifespan: {\r\n                firstTask: Number.MAX_VALUE,\r\n                lastTask: 0,\r\n            },\r\n        };\r\n        this._backBufferTextureEntry.textureDescriptionHash = this._createTextureDescriptionHash(this._backBufferTextureEntry.creationOptions);\r\n\r\n        this._backBufferDepthStencilTextureEntry = {\r\n            name: \"backbuffer depth/stencil\",\r\n            texture: null,\r\n            creationOptions: depthStencilTextureCreationOptions ?? {\r\n                size,\r\n                options: {\r\n                    createMipMaps: false,\r\n                    samples: this.engine.getCreationOptions().antialias ? 4 : 1,\r\n                    types: [Constants.TEXTURETYPE_UNSIGNED_BYTE],\r\n                    formats: [this.engine.isStencilEnable ? Constants.TEXTUREFORMAT_DEPTH24_STENCIL8 : Constants.TEXTUREFORMAT_DEPTH32_FLOAT],\r\n                    useSRGBBuffers: [false],\r\n                    creationFlags: [0],\r\n                    labels: [\"backbuffer depth/stencil\"],\r\n                },\r\n                sizeIsPercentage: false,\r\n            },\r\n            namespace: FrameGraphTextureNamespace.Graph,\r\n            lifespan: {\r\n                firstTask: Number.MAX_VALUE,\r\n                lastTask: 0,\r\n            },\r\n        };\r\n        this._backBufferDepthStencilTextureEntry.textureDescriptionHash = this._createTextureDescriptionHash(this._backBufferDepthStencilTextureEntry.creationOptions);\r\n\r\n        this._addSystemTextures();\r\n    }\r\n\r\n    /**\r\n     * Resets the back buffer color/depth-stencil textures to the default (the engine's current back buffer textures)\r\n     * It has no effect if setBackBufferTextures has not been called before.\r\n     */\r\n    public resetBackBufferTextures() {\r\n        this.setBackBufferTextures(0, 0);\r\n    }\r\n\r\n    /**\r\n     * Returns true if the texture manager has at least one history texture\r\n     */\r\n    public get hasHistoryTextures() {\r\n        return this._historyTextures.size > 0;\r\n    }\r\n\r\n    /** @internal */\r\n    public _dispose(): void {\r\n        this._releaseTextures();\r\n    }\r\n\r\n    /** @internal */\r\n    public _allocateTextures(tasks?: FrameGraphTask[]): void {\r\n        if (tasks) {\r\n            this._optimizeTextureAllocation(tasks);\r\n        }\r\n\r\n        this._textures.forEach((entry) => {\r\n            if (!entry.texture) {\r\n                if (entry.refHandle !== undefined) {\r\n                    // entry is a dangling handle which has been resolved to point to refHandle\r\n                    // We simply update the texture to point to the refHandle texture\r\n                    const refEntry = this._textures.get(entry.refHandle)!;\r\n\r\n                    entry.texture = refEntry.texture;\r\n                    entry.texture?.incrementReferences();\r\n\r\n                    if (refEntry.refHandle === backbufferColorTextureHandle) {\r\n                        entry.refHandle = backbufferColorTextureHandle;\r\n                    }\r\n                    if (refEntry.refHandle === backbufferDepthStencilTextureHandle) {\r\n                        entry.refHandle = backbufferDepthStencilTextureHandle;\r\n                    }\r\n                } else if (entry.namespace !== FrameGraphTextureNamespace.External) {\r\n                    if (entry.aliasHandle !== undefined) {\r\n                        const aliasEntry = this._textures.get(entry.aliasHandle)!;\r\n\r\n                        entry.texture = aliasEntry.texture!;\r\n                        entry.texture.incrementReferences();\r\n                    } else {\r\n                        const creationOptions = entry.creationOptions;\r\n                        const size = creationOptions.sizeIsPercentage ? this.getAbsoluteDimensions(creationOptions.size) : creationOptions.size;\r\n                        const textureIndex = entry.textureIndex || 0;\r\n\r\n                        const internalTextureCreationOptions: InternalTextureCreationOptions = {\r\n                            createMipMaps: creationOptions.options.createMipMaps,\r\n                            samples: creationOptions.options.samples,\r\n                            type: creationOptions.options.types?.[textureIndex],\r\n                            format: creationOptions.options.formats?.[textureIndex],\r\n                            useSRGBBuffer: creationOptions.options.useSRGBBuffers?.[textureIndex],\r\n                            creationFlags: creationOptions.options.creationFlags?.[textureIndex],\r\n                            label: creationOptions.options.labels?.[textureIndex] ?? `${entry.name}${textureIndex > 0 ? \"#\" + textureIndex : \"\"}`,\r\n                            samplingMode: Constants.TEXTURE_NEAREST_SAMPLINGMODE,\r\n                            createMSAATexture: creationOptions.options.samples! > 1,\r\n                        };\r\n\r\n                        const isDepthTexture = IsDepthTexture(internalTextureCreationOptions.format!);\r\n                        const hasStencil = HasStencilAspect(internalTextureCreationOptions.format!);\r\n                        const source =\r\n                            isDepthTexture && hasStencil\r\n                                ? InternalTextureSource.DepthStencil\r\n                                : isDepthTexture || hasStencil\r\n                                  ? InternalTextureSource.Depth\r\n                                  : InternalTextureSource.RenderTarget;\r\n\r\n                        const internalTexture = this.engine._createInternalTexture(size, internalTextureCreationOptions, false, source);\r\n\r\n                        if (isDepthTexture) {\r\n                            internalTexture.type = GetTypeForDepthTexture(internalTexture.format);\r\n                        }\r\n\r\n                        entry.texture = internalTexture;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (entry.texture && entry.refHandle === undefined) {\r\n                entry.debug?.dispose();\r\n                entry.debug = this._createDebugTexture(entry.name, entry.texture);\r\n            }\r\n        });\r\n\r\n        this._historyTextures.forEach((entry) => {\r\n            for (let i = 0; i < entry.handles.length; i++) {\r\n                entry.textures[i] = this._textures.get(entry.handles[i])!.texture;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @internal */\r\n    public _releaseTextures(releaseAll = true): void {\r\n        this._textures.forEach((entry, handle) => {\r\n            if (entry.lifespan) {\r\n                entry.lifespan.firstTask = Number.MAX_VALUE;\r\n                entry.lifespan.lastTask = 0;\r\n            }\r\n\r\n            entry.aliasHandle = undefined;\r\n\r\n            if (releaseAll || entry.namespace !== FrameGraphTextureNamespace.External) {\r\n                entry.debug?.dispose();\r\n                entry.debug = undefined;\r\n            }\r\n\r\n            if (entry.namespace === FrameGraphTextureNamespace.External) {\r\n                return;\r\n            }\r\n\r\n            // We dispose of \"Graph\" and \"Task\" textures:\r\n            // - \"Graph\" textures will be recreated by _allocateTextures because the entry still exists in this._textures, but entry.texture is null\r\n            // - \"Task\" textures will be re-added to this._textures when the task is recorded (by a call to FrameGraph.build): that's why we delete the entry from this._textures below\r\n            entry.texture?.dispose();\r\n            entry.texture = null;\r\n\r\n            if (releaseAll || entry.namespace === FrameGraphTextureNamespace.Task) {\r\n                this._textures.delete(handle);\r\n                this._historyTextures.delete(handle);\r\n            }\r\n        });\r\n\r\n        this._historyTextures.forEach((entry) => {\r\n            for (let i = 0; i < entry.handles.length; i++) {\r\n                entry.textures[i] = null;\r\n            }\r\n        });\r\n\r\n        if (releaseAll) {\r\n            this._textures.clear();\r\n            this._historyTextures.clear();\r\n            this._addSystemTextures();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public _updateHistoryTextures(): void {\r\n        this._historyTextures.forEach((entry) => {\r\n            entry.index = entry.index ^ 1;\r\n            const currentTexture = entry.textures[entry.index];\r\n            if (currentTexture) {\r\n                for (const { renderTargetWrapper, textureIndex } of entry.references) {\r\n                    renderTargetWrapper.setTexture(currentTexture, textureIndex, false);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private _addSystemTextures() {\r\n        const size = { width: this.engine.getRenderWidth(true), height: this.engine.getRenderHeight(true) };\r\n\r\n        this._textures.set(\r\n            backbufferColorTextureHandle,\r\n            this._backBufferTextureEntry ?? {\r\n                name: \"backbuffer color\",\r\n                texture: null,\r\n                creationOptions: {\r\n                    size,\r\n                    options: {\r\n                        createMipMaps: false,\r\n                        samples: this.engine.getCreationOptions().antialias ? 4 : 1,\r\n                        types: [Constants.TEXTURETYPE_UNSIGNED_BYTE], // todo? get from engine\r\n                        formats: [Constants.TEXTUREFORMAT_RGBA], // todo? get from engine\r\n                        useSRGBBuffers: [false],\r\n                        creationFlags: [0],\r\n                        labels: [\"backbuffer color\"],\r\n                    },\r\n                    sizeIsPercentage: false,\r\n                },\r\n                namespace: FrameGraphTextureNamespace.External,\r\n            }\r\n        );\r\n\r\n        this._textures.set(\r\n            backbufferDepthStencilTextureHandle,\r\n            this._backBufferDepthStencilTextureEntry ?? {\r\n                name: \"backbuffer depth/stencil\",\r\n                texture: null,\r\n                creationOptions: {\r\n                    size,\r\n                    options: {\r\n                        createMipMaps: false,\r\n                        samples: this.engine.getCreationOptions().antialias ? 4 : 1,\r\n                        types: [Constants.TEXTURETYPE_UNSIGNED_BYTE], // todo? get from engine\r\n                        formats: [Constants.TEXTUREFORMAT_DEPTH24], // todo? get from engine\r\n                        useSRGBBuffers: [false],\r\n                        creationFlags: [0],\r\n                        labels: [\"backbuffer depth/stencil\"],\r\n                    },\r\n                    sizeIsPercentage: false,\r\n                },\r\n                namespace: FrameGraphTextureNamespace.External,\r\n            }\r\n        );\r\n    }\r\n\r\n    private _createDebugTexture(name: string, texture: InternalTexture): Texture | undefined {\r\n        if (!this._debugTextures) {\r\n            return;\r\n        }\r\n\r\n        const textureDebug = new Texture(null, this._scene);\r\n\r\n        textureDebug.name = name;\r\n        textureDebug._texture = texture;\r\n        textureDebug._texture.incrementReferences();\r\n\r\n        return textureDebug;\r\n    }\r\n\r\n    private _freeEntry(handle: number): void {\r\n        const entry = this._textures.get(handle);\r\n\r\n        if (entry) {\r\n            entry.debug?.dispose();\r\n            this._textures.delete(handle);\r\n        }\r\n    }\r\n\r\n    private _createHandleForTexture(\r\n        name: string,\r\n        texture: Nullable<InternalTexture>,\r\n        creationOptions: FrameGraphTextureCreationOptions,\r\n        namespace: FrameGraphTextureNamespace,\r\n        handle?: FrameGraphTextureHandle,\r\n        textureIndex?: number\r\n    ): FrameGraphTextureHandle {\r\n        handle = handle ?? FrameGraphTextureManager._Counter++;\r\n        textureIndex = textureIndex || 0;\r\n\r\n        const textureName = creationOptions.isHistoryTexture ? `${name} ping` : name;\r\n\r\n        let label = creationOptions.options.labels?.[textureIndex] ?? \"\";\r\n        if (label === textureName) {\r\n            label = \"\";\r\n        }\r\n\r\n        const textureEntry: TextureEntry = {\r\n            texture,\r\n            name: `${textureName}${label ? \" \" + label : \"\"}`,\r\n            creationOptions: {\r\n                size: textureSizeIsObject(creationOptions.size) ? creationOptions.size : { width: creationOptions.size, height: creationOptions.size },\r\n                options: creationOptions.options,\r\n                sizeIsPercentage: creationOptions.sizeIsPercentage,\r\n                isHistoryTexture: creationOptions.isHistoryTexture,\r\n            },\r\n            namespace,\r\n            textureIndex,\r\n            textureDescriptionHash: this._createTextureDescriptionHash(creationOptions),\r\n            lifespan: {\r\n                firstTask: Number.MAX_VALUE,\r\n                lastTask: 0,\r\n            },\r\n            historyTexture: creationOptions.isHistoryTexture,\r\n        };\r\n\r\n        this._textures.set(handle, textureEntry);\r\n\r\n        if (namespace === FrameGraphTextureNamespace.External) {\r\n            return handle;\r\n        }\r\n\r\n        if (creationOptions.isHistoryTexture) {\r\n            const pongCreationOptions: FrameGraphTextureCreationOptions = {\r\n                size: { ...(textureEntry.creationOptions.size as { width: number; height: number }) },\r\n                options: { ...textureEntry.creationOptions.options },\r\n                sizeIsPercentage: textureEntry.creationOptions.sizeIsPercentage,\r\n                isHistoryTexture: false,\r\n            };\r\n\r\n            const pongTexture = this._createHandleForTexture(`${name} pong`, null, pongCreationOptions, namespace);\r\n\r\n            this._textures.get(pongTexture)!.historyTexture = true;\r\n            this._historyTextures.set(handle, { textures: [null, null], handles: [handle, pongTexture], index: 0, references: [] });\r\n\r\n            return handle;\r\n        }\r\n\r\n        if (creationOptions.options.types && creationOptions.options.types.length > 1 && textureIndex === 0) {\r\n            const textureCount = creationOptions.options.types.length;\r\n            const creationOptionsForTexture: FrameGraphTextureCreationOptions = {\r\n                size: textureSizeIsObject(creationOptions.size) ? creationOptions.size : { width: creationOptions.size, height: creationOptions.size },\r\n                options: creationOptions.options,\r\n                sizeIsPercentage: creationOptions.sizeIsPercentage,\r\n            };\r\n\r\n            for (let i = 1; i < textureCount; i++) {\r\n                this._createHandleForTexture(textureName, null, creationOptionsForTexture, namespace, handle + i, i);\r\n            }\r\n\r\n            FrameGraphTextureManager._Counter += textureCount - 1;\r\n        }\r\n\r\n        return handle;\r\n    }\r\n\r\n    private _createTextureDescriptionHash(options: FrameGraphTextureCreationOptions): string {\r\n        const hash: string[] = [];\r\n\r\n        hash.push(textureSizeIsObject(options.size) ? `${options.size.width}_${options.size.height}` : `${options.size}`);\r\n        hash.push(options.sizeIsPercentage ? \"%\" : \"A\");\r\n        hash.push(options.options.createMipMaps ? \"M\" : \"N\");\r\n        hash.push(options.options.samples ? `${options.options.samples}` : \"S1\");\r\n        hash.push(options.options.types ? options.options.types.join(\"_\") : `${Constants.TEXTURETYPE_UNSIGNED_BYTE}`);\r\n        hash.push(options.options.formats ? options.options.formats.join(\"_\") : `${Constants.TEXTUREFORMAT_RGBA}`);\r\n        hash.push(options.options.useSRGBBuffers ? options.options.useSRGBBuffers.join(\"_\") : \"false\");\r\n        hash.push(options.options.creationFlags ? options.options.creationFlags.join(\"_\") : \"0\");\r\n\r\n        return hash.join(\"_\");\r\n    }\r\n\r\n    private _optimizeTextureAllocation(tasks: FrameGraphTask[]): void {\r\n        this._computeTextureLifespan(tasks);\r\n\r\n        if (this.showDebugLogsForTextureAllcationOptimization) {\r\n            Logger.Log(`================== Optimization of texture allocation ==================`);\r\n        }\r\n\r\n        const cache: Map<string, Array<[FrameGraphTextureHandle, Array<TextureLifespan>]>> = new Map();\r\n\r\n        const iterator = this._textures.keys();\r\n        for (let key = iterator.next(); key.done !== true; key = iterator.next()) {\r\n            const textureHandle = key.value;\r\n            const textureEntry = this._textures.get(textureHandle)!;\r\n            if (textureEntry.refHandle !== undefined || textureEntry.namespace === FrameGraphTextureNamespace.External || this.isHistoryTexture(textureHandle, true)) {\r\n                continue;\r\n            }\r\n\r\n            const textureHash = textureEntry.textureDescriptionHash!;\r\n            const textureLifespan = textureEntry.lifespan!;\r\n\r\n            const cacheEntries = cache.get(textureHash);\r\n            if (cacheEntries) {\r\n                let cacheEntryFound = false;\r\n                for (const cacheEntry of cacheEntries) {\r\n                    const [sourceHandle, lifespanArray] = cacheEntry;\r\n\r\n                    let overlapped = false;\r\n                    for (const lifespan of lifespanArray) {\r\n                        if (lifespan.firstTask <= textureLifespan.lastTask && lifespan.lastTask >= textureLifespan.firstTask) {\r\n                            overlapped = true;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (!overlapped) {\r\n                        // No overlap between texture lifespan and all lifespans in the array, this texture can reuse the same entry cache\r\n                        if (this.showDebugLogsForTextureAllcationOptimization) {\r\n                            Logger.Log(`Texture ${textureHandle} (${textureEntry.name}) reuses cache entry ${sourceHandle}`);\r\n                        }\r\n\r\n                        lifespanArray.push(textureLifespan);\r\n                        textureEntry.aliasHandle = sourceHandle;\r\n                        cacheEntryFound = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!cacheEntryFound) {\r\n                    cacheEntries.push([textureHandle, [textureLifespan]]);\r\n                }\r\n            } else {\r\n                cache.set(textureHash, [[textureHandle, [textureLifespan]]]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Loop through all task/pass dependencies and compute the lifespan of each texture (that is, the first task/pass that uses it and the last task/pass that uses it)\r\n    private _computeTextureLifespan(tasks: FrameGraphTask[]): void {\r\n        if (this.showDebugLogsForTextureAllcationOptimization) {\r\n            Logger.Log(`================== Dump of texture dependencies for all tasks/passes ==================`);\r\n        }\r\n\r\n        for (let t = 0; t < tasks.length; ++t) {\r\n            const task = tasks[t];\r\n\r\n            if (task.passes.length > 0) {\r\n                this._computeTextureLifespanForPasses(task, t, task.passes);\r\n            }\r\n\r\n            if (task.passesDisabled.length > 0) {\r\n                this._computeTextureLifespanForPasses(task, t, task.passesDisabled);\r\n            }\r\n\r\n            if (task.dependencies) {\r\n                if (this.showDebugLogsForTextureAllcationOptimization) {\r\n                    Logger.Log(`task#${t} (${task.name}), global dependencies`);\r\n                }\r\n\r\n                this._updateLifespan(t * 100 + 99, task.dependencies);\r\n            }\r\n        }\r\n\r\n        if (this.showDebugLogsForTextureAllcationOptimization) {\r\n            Logger.Log(`================== Texture lifespans ==================`);\r\n            const iterator = this._textures.keys();\r\n            for (let key = iterator.next(); key.done !== true; key = iterator.next()) {\r\n                const textureHandle = key.value;\r\n                const textureEntry = this._textures.get(textureHandle)!;\r\n                if (textureEntry.refHandle !== undefined || textureEntry.namespace === FrameGraphTextureNamespace.External || this._historyTextures.has(textureHandle)) {\r\n                    continue;\r\n                }\r\n                Logger.Log(`${textureHandle} (${textureEntry.name}): ${textureEntry.lifespan!.firstTask} - ${textureEntry.lifespan!.lastTask}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _computeTextureLifespanForPasses(task: FrameGraphTask, taskIndex: number, passes: IFrameGraphPass[]): void {\r\n        for (let p = 0; p < passes.length; ++p) {\r\n            const dependencies = new Set<FrameGraphTextureHandle>();\r\n            const pass = passes[p];\r\n\r\n            if (!FrameGraphRenderPass.IsRenderPass(pass)) {\r\n                continue;\r\n            }\r\n\r\n            pass.collectDependencies(dependencies);\r\n\r\n            if (this.showDebugLogsForTextureAllcationOptimization) {\r\n                Logger.Log(`task#${taskIndex} (${task.name}), pass#${p} (${pass.name})`);\r\n            }\r\n\r\n            this._updateLifespan(taskIndex * 100 + p, dependencies);\r\n        }\r\n    }\r\n\r\n    private _updateLifespan(passOrderNum: number, dependencies: Set<FrameGraphTextureHandle>) {\r\n        const iterator = dependencies.keys();\r\n        for (let key = iterator.next(); key.done !== true; key = iterator.next()) {\r\n            const textureHandle = key.value;\r\n            if (this.isBackbuffer(textureHandle)) {\r\n                continue;\r\n            }\r\n            let textureEntry = this._textures.get(textureHandle);\r\n            if (!textureEntry) {\r\n                throw new Error(\r\n                    `FrameGraph._computeTextureLifespan: Texture handle \"${textureHandle}\" not found in the texture manager. Make sure you didn't forget to add a task in the frame graph.`\r\n                );\r\n            }\r\n            let handle = textureHandle;\r\n            while (textureEntry.refHandle !== undefined) {\r\n                handle = textureEntry.refHandle;\r\n                textureEntry = this._textures.get(handle);\r\n                if (!textureEntry) {\r\n                    throw new Error(\r\n                        `FrameGraph._computeTextureLifespan: Texture handle \"${handle}\" not found in the texture manager (source handle=\"${textureHandle}\"). Make sure you didn't forget to add a task in the frame graph.`\r\n                    );\r\n                }\r\n            }\r\n            if (textureEntry.namespace === FrameGraphTextureNamespace.External || this._historyTextures.has(handle)) {\r\n                continue;\r\n            }\r\n\r\n            if (this.showDebugLogsForTextureAllcationOptimization) {\r\n                Logger.Log(`    ${handle} (${textureEntry.name})`);\r\n            }\r\n\r\n            textureEntry.lifespan!.firstTask = Math.min(textureEntry.lifespan!.firstTask, passOrderNum);\r\n            textureEntry.lifespan!.lastTask = Math.max(textureEntry.lifespan!.lastTask, passOrderNum);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clones a texture options\r\n     * @param options The options to clone\r\n     * @param textureIndex The index of the texture in the types, formats, etc array of FrameGraphTextureOptions. If not provided, all options are cloned.\r\n     * @param preserveLabels True if the labels should be preserved (default: false)\r\n     * @returns The cloned options\r\n     */\r\n    public static CloneTextureOptions(options: FrameGraphTextureOptions, textureIndex?: number, preserveLabels?: boolean): FrameGraphTextureOptions {\r\n        return textureIndex !== undefined\r\n            ? {\r\n                  createMipMaps: options.createMipMaps,\r\n                  samples: options.samples,\r\n                  types: options.types ? [options.types[textureIndex]] : undefined,\r\n                  formats: options.formats ? [options.formats[textureIndex]] : undefined,\r\n                  useSRGBBuffers: options.useSRGBBuffers ? [options.useSRGBBuffers[textureIndex]] : undefined,\r\n                  creationFlags: options.creationFlags ? [options.creationFlags[textureIndex]] : undefined,\r\n                  labels: options.labels ? [options.labels[textureIndex]] : undefined,\r\n              }\r\n            : {\r\n                  createMipMaps: options.createMipMaps,\r\n                  samples: options.samples,\r\n                  types: options.types ? [...options.types] : undefined,\r\n                  formats: options.formats ? [...options.formats] : undefined,\r\n                  useSRGBBuffers: options.useSRGBBuffers ? [...options.useSRGBBuffers] : undefined,\r\n                  creationFlags: options.creationFlags ? [...options.creationFlags] : undefined,\r\n                  labels: options.labels && preserveLabels ? [...options.labels] : undefined,\r\n              };\r\n    }\r\n\r\n    /**\r\n     * Gets the texture block information.\r\n     * @param type Type of the texture.\r\n     * @param format Format of the texture.\r\n     * @returns The texture block information. You can calculate the byte size of the texture by doing: Math.ceil(width / blockInfo.width) * Math.ceil(height / blockInfo.height) * blockInfo.length\r\n     */\r\n    private static _GetTextureBlockInformation(type: number, format: number): { width: number; height: number; length: number } {\r\n        switch (format) {\r\n            case Constants.TEXTUREFORMAT_DEPTH16:\r\n                return { width: 1, height: 1, length: 2 };\r\n            case Constants.TEXTUREFORMAT_DEPTH24:\r\n                return { width: 1, height: 1, length: 3 };\r\n            case Constants.TEXTUREFORMAT_DEPTH24_STENCIL8:\r\n                return { width: 1, height: 1, length: 4 };\r\n            case Constants.TEXTUREFORMAT_DEPTH32_FLOAT:\r\n                return { width: 1, height: 1, length: 4 };\r\n            case Constants.TEXTUREFORMAT_DEPTH32FLOAT_STENCIL8:\r\n                return { width: 1, height: 1, length: 5 };\r\n            case Constants.TEXTUREFORMAT_STENCIL8:\r\n                return { width: 1, height: 1, length: 1 };\r\n\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA_BPTC_UNORM:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_SIGNED_FLOAT:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT5:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT3:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT1:\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGB_S3TC_DXT1:\r\n                return { width: 4, height: 4, length: 8 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA_ASTC_4x4:\r\n                return { width: 4, height: 4, length: 16 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGB_ETC1_WEBGL:\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGB8_ETC2:\r\n                return { width: 4, height: 4, length: 8 };\r\n            case Constants.TEXTUREFORMAT_COMPRESSED_RGBA8_ETC2_EAC:\r\n                return { width: 4, height: 4, length: 16 };\r\n        }\r\n\r\n        switch (type) {\r\n            case Constants.TEXTURETYPE_BYTE:\r\n            case Constants.TEXTURETYPE_UNSIGNED_BYTE:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_R:\r\n                    case Constants.TEXTUREFORMAT_R_INTEGER:\r\n                    case Constants.TEXTUREFORMAT_ALPHA:\r\n                    case Constants.TEXTUREFORMAT_LUMINANCE:\r\n                    case Constants.TEXTUREFORMAT_LUMINANCE_ALPHA:\r\n                        return { width: 1, height: 1, length: 1 };\r\n                    case Constants.TEXTUREFORMAT_RG:\r\n                    case Constants.TEXTUREFORMAT_RG_INTEGER:\r\n                        return { width: 1, height: 1, length: 2 };\r\n                    case Constants.TEXTUREFORMAT_RGB:\r\n                    case Constants.TEXTUREFORMAT_RGB_INTEGER:\r\n                        return { width: 1, height: 1, length: 3 };\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                }\r\n            case Constants.TEXTURETYPE_SHORT:\r\n            case Constants.TEXTURETYPE_UNSIGNED_SHORT:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RED_INTEGER:\r\n                        return { width: 1, height: 1, length: 2 };\r\n                    case Constants.TEXTUREFORMAT_RG_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    case Constants.TEXTUREFORMAT_RGB_INTEGER:\r\n                        return { width: 1, height: 1, length: 6 };\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                }\r\n            case Constants.TEXTURETYPE_INT:\r\n            case Constants.TEXTURETYPE_UNSIGNED_INTEGER: // Refers to UNSIGNED_INT\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RED_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    case Constants.TEXTUREFORMAT_RG_INTEGER:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                    case Constants.TEXTUREFORMAT_RGB_INTEGER:\r\n                        return { width: 1, height: 1, length: 12 };\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 16 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 16 };\r\n                }\r\n            case Constants.TEXTURETYPE_FLOAT:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RED:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    case Constants.TEXTUREFORMAT_RG:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                    case Constants.TEXTUREFORMAT_RGB:\r\n                        return { width: 1, height: 1, length: 12 };\r\n                    case Constants.TEXTUREFORMAT_RGBA:\r\n                        return { width: 1, height: 1, length: 16 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 16 };\r\n                }\r\n            case Constants.TEXTURETYPE_HALF_FLOAT:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RED:\r\n                        return { width: 1, height: 1, length: 2 };\r\n                    case Constants.TEXTUREFORMAT_RG:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    case Constants.TEXTUREFORMAT_RGB:\r\n                        return { width: 1, height: 1, length: 6 };\r\n                    case Constants.TEXTUREFORMAT_RGBA:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 8 };\r\n                }\r\n            case Constants.TEXTURETYPE_UNSIGNED_SHORT_5_6_5:\r\n                return { width: 1, height: 1, length: 2 };\r\n            case Constants.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RGBA:\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                }\r\n            case Constants.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RGBA:\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                }\r\n            case Constants.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4:\r\n                return { width: 1, height: 1, length: 2 };\r\n            case Constants.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1:\r\n                return { width: 1, height: 1, length: 2 };\r\n            case Constants.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV:\r\n                switch (format) {\r\n                    case Constants.TEXTUREFORMAT_RGBA:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    case Constants.TEXTUREFORMAT_RGBA_INTEGER:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                    default:\r\n                        return { width: 1, height: 1, length: 4 };\r\n                }\r\n        }\r\n\r\n        return { width: 1, height: 1, length: 4 };\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4605, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraph.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraph.ts"],"sourcesContent":["import type { Scene, AbstractEngine, FrameGraphTask, Nullable, NodeRenderGraph, IDisposable } from \"core/index\";\r\nimport { FrameGraphPass } from \"./Passes/pass\";\r\nimport { FrameGraphRenderPass } from \"./Passes/renderPass\";\r\nimport { FrameGraphObjectListPass } from \"./Passes/objectListPass\";\r\nimport { FrameGraphRenderContext } from \"./frameGraphRenderContext\";\r\nimport { FrameGraphContext } from \"./frameGraphContext\";\r\nimport { FrameGraphTextureManager } from \"./frameGraphTextureManager\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { _RetryWithInterval } from \"core/Misc/timingTools\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { UniqueIdGenerator } from \"core/Misc/uniqueIdGenerator\";\r\n\r\nimport \"core/Engines/Extensions/engine.multiRender\";\r\nimport \"core/Engines/WebGPU/Extensions/engine.multiRender\";\r\n\r\nenum FrameGraphPassType {\r\n    Normal = 0,\r\n    Render = 1,\r\n    ObjectList = 2,\r\n}\r\n\r\n/**\r\n * Class used to implement a frame graph\r\n * @experimental\r\n */\r\nexport class FrameGraph implements IDisposable {\r\n    /**\r\n     * Gets the texture manager used by the frame graph\r\n     */\r\n    public readonly textureManager: FrameGraphTextureManager;\r\n\r\n    private readonly _engine: AbstractEngine;\r\n    private readonly _scene: Scene;\r\n    private readonly _tasks: FrameGraphTask[] = [];\r\n    private readonly _passContext: FrameGraphContext;\r\n    private readonly _renderContext: FrameGraphRenderContext;\r\n    private readonly _initAsyncPromises: Promise<void>[] = [];\r\n    private _currentProcessedTask: FrameGraphTask | null = null;\r\n    private _whenReadyAsyncCancel: Nullable<() => void> = null;\r\n\r\n    /**\r\n     * Name of the frame graph\r\n     */\r\n    public name = \"Frame Graph\";\r\n\r\n    /**\r\n     * Gets the unique id of the frame graph\r\n     */\r\n    public readonly uniqueId = UniqueIdGenerator.UniqueId;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that texture allocation should be optimized (that is, reuse existing textures when possible to limit GPU memory usage) (default: true)\r\n     */\r\n    public optimizeTextureAllocation = true;\r\n\r\n    /**\r\n     * Observable raised when the node render graph is built\r\n     */\r\n    public onBuildObservable = new Observable<FrameGraph>();\r\n\r\n    /**\r\n     * Gets the engine used by the frame graph\r\n     */\r\n    public get engine() {\r\n        return this._engine;\r\n    }\r\n\r\n    /**\r\n     * Gets the scene used by the frame graph\r\n     */\r\n    public get scene() {\r\n        return this._scene;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of tasks in the frame graph\r\n     */\r\n    public get tasks() {\r\n        return this._tasks;\r\n    }\r\n\r\n    /**\r\n     * Indicates whether the execution of the frame graph is paused (default is false)\r\n     */\r\n    public pausedExecution = false;\r\n\r\n    /**\r\n     * Gets the node render graph linked to the frame graph (if any)\r\n     * @returns the linked node render graph or null if none\r\n     */\r\n    public getLinkedNodeRenderGraph(): Nullable<NodeRenderGraph> {\r\n        return this._linkedNodeRenderGraph;\r\n    }\r\n\r\n    /**\r\n     * Constructs the frame graph\r\n     * @param scene defines the scene the frame graph is associated with\r\n     * @param debugTextures defines a boolean indicating that textures created by the frame graph should be visible in the inspector (default is false)\r\n     * @param _linkedNodeRenderGraph defines the linked node render graph (if any)\r\n     */\r\n    constructor(\r\n        scene: Scene,\r\n        debugTextures = false,\r\n        private readonly _linkedNodeRenderGraph: Nullable<NodeRenderGraph> = null\r\n    ) {\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n        this.textureManager = new FrameGraphTextureManager(this._engine, debugTextures, scene);\r\n        this._passContext = new FrameGraphContext(this._engine, this.textureManager, scene);\r\n        this._renderContext = new FrameGraphRenderContext(this._engine, this.textureManager, scene);\r\n\r\n        this._scene.addFrameGraph(this);\r\n    }\r\n\r\n    /**\r\n     * Gets the class name of the frame graph\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"FrameGraph\";\r\n    }\r\n\r\n    /**\r\n     * Gets a task by name\r\n     * @param name Name of the task to get\r\n     * @returns The task or undefined if not found\r\n     */\r\n    public getTaskByName<T extends FrameGraphTask>(name: string): T | undefined {\r\n        return this._tasks.find((t) => t.name === name) as T;\r\n    }\r\n\r\n    /**\r\n     * Gets all tasks of a specific type\r\n     * @param taskType Type of the task(s) to get\r\n     * @returns The list of tasks of the specified type\r\n     */\r\n    public getTasksByType<T extends FrameGraphTask>(taskType: new (...args: any[]) => T): T[] {\r\n        return this._tasks.filter((t) => t instanceof taskType) as T[];\r\n    }\r\n\r\n    /**\r\n     * Adds a task to the frame graph\r\n     * @param task Task to add\r\n     */\r\n    public addTask(task: FrameGraphTask): void {\r\n        if (this._currentProcessedTask !== null) {\r\n            throw new Error(`FrameGraph.addTask: Can't add the task \"${task.name}\" while another task is currently building (task: ${this._currentProcessedTask.name}).`);\r\n        }\r\n\r\n        this._tasks.push(task);\r\n        this._initAsyncPromises.push(task.initAsync());\r\n    }\r\n\r\n    /**\r\n     * Adds a pass to a task. This method can only be called during a Task.record execution.\r\n     * @param name The name of the pass\r\n     * @param whenTaskDisabled If true, the pass will be added to the list of passes to execute when the task is disabled (default is false)\r\n     * @returns The render pass created\r\n     */\r\n    public addPass(name: string, whenTaskDisabled = false): FrameGraphPass<FrameGraphContext> {\r\n        return this._addPass(name, FrameGraphPassType.Normal, whenTaskDisabled) as FrameGraphPass<FrameGraphContext>;\r\n    }\r\n\r\n    /**\r\n     * Adds a render pass to a task. This method can only be called during a Task.record execution.\r\n     * @param name The name of the pass\r\n     * @param whenTaskDisabled If true, the pass will be added to the list of passes to execute when the task is disabled (default is false)\r\n     * @returns The render pass created\r\n     */\r\n    public addRenderPass(name: string, whenTaskDisabled = false): FrameGraphRenderPass {\r\n        return this._addPass(name, FrameGraphPassType.Render, whenTaskDisabled) as FrameGraphRenderPass;\r\n    }\r\n\r\n    /**\r\n     * Adds an object list pass to a task. This method can only be called during a Task.record execution.\r\n     * @param name The name of the pass\r\n     * @param whenTaskDisabled If true, the pass will be added to the list of passes to execute when the task is disabled (default is false)\r\n     * @returns The object list pass created\r\n     */\r\n    public addObjectListPass(name: string, whenTaskDisabled = false): FrameGraphObjectListPass {\r\n        return this._addPass(name, FrameGraphPassType.ObjectList, whenTaskDisabled) as FrameGraphObjectListPass;\r\n    }\r\n\r\n    private _addPass(name: string, passType: FrameGraphPassType, whenTaskDisabled = false): FrameGraphPass<FrameGraphContext> | FrameGraphRenderPass {\r\n        if (!this._currentProcessedTask) {\r\n            throw new Error(\"FrameGraph: A pass must be created during a Task.record execution only.\");\r\n        }\r\n\r\n        let pass: FrameGraphPass<FrameGraphContext> | FrameGraphRenderPass;\r\n\r\n        switch (passType) {\r\n            case FrameGraphPassType.Render:\r\n                pass = new FrameGraphRenderPass(name, this._currentProcessedTask, this._renderContext, this._engine);\r\n                break;\r\n            case FrameGraphPassType.ObjectList:\r\n                pass = new FrameGraphObjectListPass(name, this._currentProcessedTask, this._passContext, this._engine);\r\n                break;\r\n            default:\r\n                pass = new FrameGraphPass(name, this._currentProcessedTask, this._passContext);\r\n                break;\r\n        }\r\n\r\n        this._currentProcessedTask._addPass(pass, whenTaskDisabled);\r\n\r\n        return pass;\r\n    }\r\n\r\n    /** @internal */\r\n    public async _whenAsynchronousInitializationDoneAsync(): Promise<void> {\r\n        if (this._initAsyncPromises.length > 0) {\r\n            await Promise.all(this._initAsyncPromises);\r\n            this._initAsyncPromises.length = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use buildAsync instead\r\n     */\r\n    public build(): void {\r\n        void this.buildAsync(false);\r\n    }\r\n\r\n    private _built = false; // TODO: to be removed when build() is removed\r\n\r\n    /**\r\n     * Builds the frame graph.\r\n     * This method should be called after all tasks have been added to the frame graph (FrameGraph.addTask) and before the graph is executed (FrameGraph.execute).\r\n     * @param waitForReadiness If true, the method will wait for the frame graph to be ready before returning (default is true)\r\n     */\r\n    public async buildAsync(waitForReadiness = true): Promise<void> {\r\n        this.textureManager._releaseTextures(false);\r\n\r\n        this.pausedExecution = true;\r\n        this._built = false;\r\n\r\n        try {\r\n            await this._whenAsynchronousInitializationDoneAsync();\r\n\r\n            for (const task of this._tasks) {\r\n                task._reset();\r\n\r\n                this._currentProcessedTask = task;\r\n                this.textureManager._isRecordingTask = true;\r\n\r\n                task.record();\r\n\r\n                this.textureManager._isRecordingTask = false;\r\n                this._currentProcessedTask = null;\r\n            }\r\n\r\n            this.textureManager._allocateTextures(this.optimizeTextureAllocation ? this._tasks : undefined);\r\n\r\n            for (const task of this._tasks) {\r\n                task._checkTask();\r\n            }\r\n\r\n            for (const task of this._tasks) {\r\n                task.onTexturesAllocatedObservable.notifyObservers(this._renderContext);\r\n            }\r\n\r\n            this._built = true;\r\n\r\n            this.onBuildObservable.notifyObservers(this);\r\n\r\n            if (waitForReadiness) {\r\n                await this.whenReadyAsync();\r\n            }\r\n        } catch (e) {\r\n            this._tasks.length = 0;\r\n            this._currentProcessedTask = null;\r\n            this.textureManager._isRecordingTask = false;\r\n            throw e;\r\n        } finally {\r\n            this.pausedExecution = false;\r\n            this._built = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks if the frame graph is ready to be executed.\r\n     * Note that you can use the whenReadyAsync method to wait for the frame graph to be ready.\r\n     * @returns True if the frame graph is ready to be executed, else false\r\n     */\r\n    public isReady(): boolean {\r\n        let ready = this._renderContext._isReady();\r\n        for (const task of this._tasks) {\r\n            ready &&= task.isReady();\r\n        }\r\n        return ready;\r\n    }\r\n\r\n    /**\r\n     * Returns a promise that resolves when the frame graph is ready to be executed.\r\n     * In general, calling await buildAsync() should suffice, as this function also waits for readiness by default.\r\n     * @param timeStep Time step in ms between retries (default is 16)\r\n     * @param maxTimeout Maximum time in ms to wait for the graph to be ready (default is 10000)\r\n     * @returns The promise that resolves when the graph is ready\r\n     */\r\n    public async whenReadyAsync(timeStep = 16, maxTimeout = 10000): Promise<void> {\r\n        let firstNotReadyTask: FrameGraphTask | null = null;\r\n\r\n        // TODO: to be removed when build() is removed\r\n        await new Promise((resolve) => {\r\n            const checkBuilt = () => {\r\n                if (this._built) {\r\n                    resolve(void 0);\r\n                    return;\r\n                }\r\n                setTimeout(checkBuilt, 16);\r\n            };\r\n            checkBuilt();\r\n        });\r\n        // END TODO\r\n\r\n        return await new Promise((resolve, reject) => {\r\n            this._whenReadyAsyncCancel = _RetryWithInterval(\r\n                () => {\r\n                    let ready = this._renderContext._isReady();\r\n                    for (const task of this._tasks) {\r\n                        const taskIsReady = task.isReady();\r\n                        if (!taskIsReady && !firstNotReadyTask) {\r\n                            firstNotReadyTask = task;\r\n                        }\r\n                        ready &&= taskIsReady;\r\n                    }\r\n                    return ready;\r\n                },\r\n                () => {\r\n                    this._whenReadyAsyncCancel = null;\r\n                    resolve();\r\n                },\r\n                (err, isTimeout) => {\r\n                    this._whenReadyAsyncCancel = null;\r\n                    if (!isTimeout) {\r\n                        Logger.Error(\"FrameGraph: An unexpected error occurred while waiting for the frame graph to be ready.\");\r\n                        if (err) {\r\n                            Logger.Error(err);\r\n                            if (err.stack) {\r\n                                Logger.Error(err.stack);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        Logger.Error(\r\n                            `FrameGraph: Timeout while waiting for the frame graph to be ready.${firstNotReadyTask ? ` First task not ready: ${firstNotReadyTask.name}` : \"\"}`\r\n                        );\r\n                        if (err) {\r\n                            Logger.Error(err);\r\n                        }\r\n                    }\r\n                    reject(new Error(err));\r\n                },\r\n                timeStep,\r\n                maxTimeout\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Executes the frame graph.\r\n     */\r\n    public execute(): void {\r\n        if (this.pausedExecution) {\r\n            return;\r\n        }\r\n\r\n        this._renderContext.bindRenderTarget();\r\n\r\n        this.textureManager._updateHistoryTextures();\r\n\r\n        for (const task of this._tasks) {\r\n            task._execute();\r\n        }\r\n\r\n        this._renderContext.bindRenderTarget(undefined, undefined, true); // restore default framebuffer\r\n    }\r\n\r\n    /**\r\n     * Clears the frame graph (remove the tasks and release the textures).\r\n     * The frame graph can be built again after this method is called.\r\n     */\r\n    public clear(): void {\r\n        this._whenReadyAsyncCancel?.();\r\n        this._whenReadyAsyncCancel = null;\r\n\r\n        for (const task of this._tasks) {\r\n            task._reset();\r\n        }\r\n\r\n        this._tasks.length = 0;\r\n        this.textureManager._releaseTextures();\r\n        this._currentProcessedTask = null;\r\n    }\r\n\r\n    /**\r\n     * Disposes the frame graph\r\n     */\r\n    public dispose(): void {\r\n        this._whenReadyAsyncCancel?.();\r\n        this._whenReadyAsyncCancel = null;\r\n        this.clear();\r\n        this.textureManager._dispose();\r\n        this._renderContext._dispose();\r\n\r\n        this._scene.removeFrameGraph(this);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4925, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/inputBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/inputBlock.ts"],"sourcesContent":["import type {\r\n    NodeRenderGraphConnectionPoint,\r\n    Scene,\r\n    FrameGraph,\r\n    NodeRenderGraphBuildState,\r\n    Camera,\r\n    InternalTexture,\r\n    Nullable,\r\n    FrameGraphTextureCreationOptions,\r\n    FrameGraphTextureHandle,\r\n    FrameGraphObjectList,\r\n    IShadowLight,\r\n} from \"core/index\";\r\nimport { Observable } from \"../../../Misc/observable\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../Decorators/nodeDecorator\";\r\nimport { backbufferColorTextureHandle, backbufferDepthStencilTextureHandle } from \"../../../FrameGraph/frameGraphTypes\";\r\nimport { Constants } from \"../../../Engines/constants\";\r\n\r\nexport type NodeRenderGraphValueType = InternalTexture | Camera | FrameGraphObjectList | IShadowLight;\r\n\r\nexport type NodeRenderGraphInputCreationOptions = FrameGraphTextureCreationOptions;\r\n\r\n/**\r\n * Block used to expose an input value\r\n */\r\nexport class NodeRenderGraphInputBlock extends NodeRenderGraphBlock {\r\n    private _storedValue: Nullable<NodeRenderGraphValueType> = null;\r\n    private _type: NodeRenderGraphBlockConnectionPointTypes = NodeRenderGraphBlockConnectionPointTypes.Undefined;\r\n\r\n    /** Gets an observable raised when the value is changed */\r\n    public onValueChangedObservable = new Observable<NodeRenderGraphInputBlock>();\r\n\r\n    /** Indicates that the input is externally managed */\r\n    @editableInPropertyPage(\"Is external\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public isExternal = false;\r\n\r\n    /** Gets or sets the options to create the input value */\r\n    public creationOptions: NodeRenderGraphInputCreationOptions;\r\n\r\n    /**\r\n     * Gets or sets the connection point type (default is Undefined)\r\n     */\r\n    public get type(): NodeRenderGraphBlockConnectionPointTypes {\r\n        return this._type;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeRenderGraphInputBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param type defines the type of the input (can be set to NodeRenderGraphBlockConnectionPointTypes.Undefined)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, type: NodeRenderGraphBlockConnectionPointTypes = NodeRenderGraphBlockConnectionPointTypes.Undefined) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._type = type;\r\n        this._isInput = true;\r\n        this.registerOutput(\"output\", type);\r\n        this.setDefaultValue();\r\n    }\r\n\r\n    /**\r\n     * Set the input block to its default value (based on its type)\r\n     */\r\n    public setDefaultValue() {\r\n        switch (this.type) {\r\n            case NodeRenderGraphBlockConnectionPointTypes.Texture:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureNormalizedViewDepth:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureViewNormal:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureWorldNormal:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureAlbedo:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureReflectivity:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureLocalPosition:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureWorldPosition:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureVelocity:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureLinearVelocity:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureIrradiance:\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureAlbedoSqrt: {\r\n                const options: FrameGraphTextureCreationOptions = {\r\n                    size: { width: 100, height: 100 },\r\n                    options: {\r\n                        createMipMaps: false,\r\n                        types: [Constants.TEXTURETYPE_UNSIGNED_BYTE],\r\n                        formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                        samples: 1,\r\n                        useSRGBBuffers: [false],\r\n                        creationFlags: [0],\r\n                    },\r\n                    sizeIsPercentage: true,\r\n                    isHistoryTexture: false,\r\n                };\r\n                this.creationOptions = options;\r\n                break;\r\n            }\r\n            case NodeRenderGraphBlockConnectionPointTypes.TextureDepthStencilAttachment: {\r\n                const options: FrameGraphTextureCreationOptions = {\r\n                    size: { width: 100, height: 100 },\r\n                    options: {\r\n                        createMipMaps: false,\r\n                        types: [Constants.TEXTURETYPE_UNSIGNED_BYTE],\r\n                        formats: [Constants.TEXTUREFORMAT_DEPTH24_STENCIL8],\r\n                        useSRGBBuffers: [false],\r\n                        creationFlags: [0],\r\n                        labels: [this.name],\r\n                        samples: 1,\r\n                    },\r\n                    sizeIsPercentage: true,\r\n                    isHistoryTexture: false,\r\n                };\r\n                this.creationOptions = options;\r\n                break;\r\n            }\r\n            case NodeRenderGraphBlockConnectionPointTypes.ObjectList:\r\n                this.value = { meshes: null, particleSystems: null };\r\n                this.isExternal = true;\r\n                break;\r\n            case NodeRenderGraphBlockConnectionPointTypes.Camera:\r\n                this.value = this._scene.cameras[0];\r\n                this.isExternal = true;\r\n                break;\r\n            default:\r\n                this.isExternal = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the value of that point.\r\n     */\r\n    public get value(): Nullable<NodeRenderGraphValueType> {\r\n        return this._storedValue;\r\n    }\r\n\r\n    public set value(value: Nullable<NodeRenderGraphValueType>) {\r\n        this._storedValue = value;\r\n        this.output.value = undefined;\r\n        this.onValueChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets the value as a specific type\r\n     * @returns the value as a specific type\r\n     */\r\n    public getTypedValue<T extends NodeRenderGraphValueType>(): T {\r\n        return this._storedValue as T;\r\n    }\r\n\r\n    /**\r\n     * Gets the value as an internal texture\r\n     * @returns The internal texture stored in value if value is an internal texture, otherwise null\r\n     */\r\n    public getInternalTextureFromValue(): Nullable<InternalTexture> {\r\n        if ((this._storedValue as InternalTexture)._swapAndDie) {\r\n            return this._storedValue as InternalTexture;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphInputBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Check if the block is a texture of any type\r\n     * @returns true if the block is a texture\r\n     */\r\n    public isAnyTexture(): boolean {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.TextureAll) !== 0;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating that the connection point is the back buffer texture\r\n     * @returns true if the connection point is the back buffer texture\r\n     */\r\n    public isBackBuffer() {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.TextureBackBuffer) !== 0;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating that the connection point is a depth/stencil attachment texture\r\n     * @returns true if the connection point is a depth/stencil attachment texture\r\n     */\r\n    public isBackBufferDepthStencilAttachment() {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.TextureBackBufferDepthStencilAttachment) !== 0;\r\n    }\r\n\r\n    /**\r\n     * Check if the block is a camera\r\n     * @returns true if the block is a camera\r\n     */\r\n    public isCamera(): boolean {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.Camera) !== 0;\r\n    }\r\n\r\n    /**\r\n     * Check if the block is an object list\r\n     * @returns true if the block is an object list\r\n     */\r\n    public isObjectList(): boolean {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.ObjectList) !== 0;\r\n    }\r\n\r\n    /**\r\n     * Check if the block is a shadow light\r\n     * @returns true if the block is a shadow light\r\n     */\r\n    public isShadowLight(): boolean {\r\n        return (this.type & NodeRenderGraphBlockConnectionPointTypes.ShadowLight) !== 0;\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        if (this.isExternal) {\r\n            if (this.isBackBuffer()) {\r\n                this.output.value = backbufferColorTextureHandle;\r\n            } else if (this.isBackBufferDepthStencilAttachment()) {\r\n                this.output.value = backbufferDepthStencilTextureHandle;\r\n            } else if (this.isCamera()) {\r\n                this.output.value = this.getTypedValue<Camera>();\r\n            } else if (this.isObjectList()) {\r\n                this.output.value = this.getTypedValue<FrameGraphObjectList>();\r\n            } else if (this.isShadowLight()) {\r\n                this.output.value = this.getTypedValue<IShadowLight>();\r\n            } else {\r\n                if (this._storedValue === undefined || this._storedValue === null) {\r\n                    throw new Error(`NodeRenderGraphInputBlock: External input \"${this.name}\" is not set`);\r\n                }\r\n                const texture = this.getInternalTextureFromValue();\r\n                if (texture) {\r\n                    this.output.value = this._frameGraph.textureManager.importTexture(this.name, texture, this.output.value as FrameGraphTextureHandle);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        if ((this.type & NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer) !== 0) {\r\n            const textureCreateOptions = this.creationOptions;\r\n\r\n            if (!textureCreateOptions) {\r\n                throw new Error(`NodeRenderGraphInputBlock: Creation options are missing for texture \"${this.name}\"`);\r\n            }\r\n\r\n            this.output.value = this._frameGraph.textureManager.createRenderTargetTexture(this.name, textureCreateOptions);\r\n        }\r\n    }\r\n\r\n    public override dispose() {\r\n        this._storedValue = null;\r\n        this.onValueChangedObservable.clear();\r\n        super.dispose();\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.isExternal = ${this.isExternal};`);\r\n        if (this.isAnyTexture()) {\r\n            if (!this.isExternal) {\r\n                codes.push(`${this._codeVariableName}.creationOptions = ${JSON.stringify(this.creationOptions)};`);\r\n            } else {\r\n                codes.push(`${this._codeVariableName}.value = EXTERNAL_TEXTURE; // TODO: set the external texture`);\r\n            }\r\n        } else if (this.isCamera()) {\r\n            codes.push(`${this._codeVariableName}.value = EXTERNAL_CAMERA; // TODO: set the external camera`);\r\n        } else if (this.isObjectList()) {\r\n            codes.push(`${this._codeVariableName}.value = EXTERNAL_OBJECT_LIST; // TODO: set the external object list`);\r\n        } else if (this.isShadowLight()) {\r\n            codes.push(`${this._codeVariableName}.value = EXTERNAL_SHADOW_LIGHT; // TODO: set the external shadow light`);\r\n        }\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.type = this.type;\r\n        serializationObject.isExternal = this.isExternal;\r\n        if (this.creationOptions) {\r\n            serializationObject.creationOptions = this.creationOptions;\r\n        }\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this._type = serializationObject.type;\r\n        this.output.type = this._type;\r\n        this.isExternal = serializationObject.isExternal;\r\n        if (serializationObject.creationOptions) {\r\n            if (serializationObject.creationOptions.options.depthTextureFormat !== undefined) {\r\n                // Backward compatibility - remove this code in the future\r\n                serializationObject.creationOptions.options.formats = [serializationObject.creationOptions.options.depthTextureFormat];\r\n            }\r\n            this.creationOptions = serializationObject.creationOptions;\r\n        }\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphInputBlock\", NodeRenderGraphInputBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5219, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Texture/clearTextureTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Texture/clearTextureTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { Color4, TmpColors } from \"../../../Maths/math.color\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { backbufferColorTextureHandle } from \"../../frameGraphTypes\";\r\n\r\n/**\r\n * Task used to clear a texture.\r\n */\r\nexport class FrameGraphClearTextureTask extends FrameGraphTask {\r\n    /**\r\n     * The color to clear the texture with.\r\n     */\r\n    public color = new Color4(0.2, 0.2, 0.3, 1);\r\n\r\n    /**\r\n     * If the color should be cleared.\r\n     */\r\n    public clearColor = true;\r\n\r\n    /**\r\n     * If the color should be converted to linear space (default: false).\r\n     */\r\n    public convertColorToLinearSpace = false;\r\n\r\n    /**\r\n     * If the depth should be cleared.\r\n     */\r\n    public clearDepth = false;\r\n\r\n    /**\r\n     * If the stencil should be cleared.\r\n     */\r\n    public clearStencil = false;\r\n\r\n    /**\r\n     * The value to use to clear the stencil buffer (default: 0).\r\n     */\r\n    public stencilValue = 0;\r\n\r\n    /**\r\n     * The color texture to clear.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle | FrameGraphTextureHandle[];\r\n\r\n    /**\r\n     * The depth attachment texture to clear.\r\n     */\r\n    public depthTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture (same as targetTexture, but the handle will be different).\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output depth texture (same as depthTexture, but the handle will be different).\r\n     */\r\n    public readonly outputDepthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * Constructs a new clear task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n        this.outputDepthTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.targetTexture === undefined && this.depthTexture === undefined) {\r\n            throw new Error(`FrameGraphClearTextureTask ${this.name}: targetTexture and depthTexture can't both be undefined.`);\r\n        }\r\n\r\n        const targetTextures = this.targetTexture !== undefined ? (Array.isArray(this.targetTexture) ? this.targetTexture : [this.targetTexture]) : undefined;\r\n\r\n        let textureSamples = 0;\r\n        let depthSamples = 0;\r\n\r\n        if (this.targetTexture !== undefined) {\r\n            textureSamples = this._frameGraph.textureManager.getTextureDescription(targetTextures![0]).options.samples || 1;\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, targetTextures![0]);\r\n        }\r\n        if (this.depthTexture !== undefined) {\r\n            depthSamples = this._frameGraph.textureManager.getTextureDescription(this.depthTexture).options.samples || 1;\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputDepthTexture, this.depthTexture);\r\n        }\r\n\r\n        if (textureSamples !== depthSamples && textureSamples !== 0 && depthSamples !== 0) {\r\n            throw new Error(`FrameGraphClearTextureTask ${this.name}: the depth texture and the target texture must have the same number of samples.`);\r\n        }\r\n\r\n        const attachments = this._frameGraph.engine.buildTextureLayout(\r\n            targetTextures ? Array(targetTextures.length).fill(true) : [],\r\n            this.targetTexture === backbufferColorTextureHandle && !this._frameGraph.textureManager.backBufferTextureOverriden\r\n        );\r\n\r\n        const color = TmpColors.Color4[0];\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.setRenderTarget(targetTextures);\r\n        pass.setRenderTargetDepth(this.depthTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            color.copyFrom(this.color);\r\n            if (this.convertColorToLinearSpace) {\r\n                color.toLinearSpaceToRef(color);\r\n            }\r\n\r\n            context.clearAttachments(color, attachments, !!this.clearColor, !!this.clearDepth, !!this.clearStencil, this.stencilValue);\r\n        });\r\n\r\n        if (!skipCreationOfDisabledPasses) {\r\n            const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n            passDisabled.setRenderTarget(targetTextures);\r\n            passDisabled.setRenderTargetDepth(this.depthTexture);\r\n            passDisabled.setExecuteFunc((_context) => {});\r\n        }\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5302, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Textures/clearBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Textures/clearBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraphTextureHandle, FrameGraph, NodeRenderGraphBuildState } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { Color4 } from \"../../../../Maths/math.color\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphClearTextureTask } from \"../../../Tasks/Texture/clearTextureTask\";\r\n\r\n/**\r\n * Block used to clear a texture\r\n */\r\nexport class NodeRenderGraphClearBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphClearTextureTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphClearBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"depth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this._addDependenciesInput();\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n        this.registerOutput(\"outputDepth\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAll);\r\n        this.depth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureDepthStencilAttachment | NodeRenderGraphBlockConnectionPointTypes.TextureBackBufferDepthStencilAttachment\r\n        );\r\n\r\n        this.output._typeConnectionSource = this.target;\r\n        this.outputDepth._typeConnectionSource = this.depth;\r\n\r\n        this._frameGraphTask = new FrameGraphClearTextureTask(name, frameGraph);\r\n    }\r\n\r\n    /** Gets or sets the clear color */\r\n    @editableInPropertyPage(\"Color\", PropertyTypeForEdition.Color4)\r\n    public get color(): Color4 {\r\n        return this._frameGraphTask.color;\r\n    }\r\n\r\n    public set color(value: Color4) {\r\n        this._frameGraphTask.color = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating whether the color part of the texture should be cleared. */\r\n    @editableInPropertyPage(\"Clear color\", PropertyTypeForEdition.Boolean, undefined, { embedded: true })\r\n    public get clearColor(): boolean {\r\n        return !!this._frameGraphTask.clearColor;\r\n    }\r\n\r\n    public set clearColor(value: boolean) {\r\n        this._frameGraphTask.clearColor = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating whether the color should be converted to linear space. */\r\n    @editableInPropertyPage(\"Convert color to linear space\", PropertyTypeForEdition.Boolean)\r\n    public get convertColorToLinearSpace(): boolean {\r\n        return !!this._frameGraphTask.convertColorToLinearSpace;\r\n    }\r\n\r\n    public set convertColorToLinearSpace(value: boolean) {\r\n        this._frameGraphTask.convertColorToLinearSpace = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating whether the depth part of the texture should be cleared. */\r\n    @editableInPropertyPage(\"Clear depth\", PropertyTypeForEdition.Boolean, undefined, { embedded: true })\r\n    public get clearDepth(): boolean {\r\n        return !!this._frameGraphTask.clearDepth;\r\n    }\r\n\r\n    public set clearDepth(value: boolean) {\r\n        this._frameGraphTask.clearDepth = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating whether the stencil part of the texture should be cleared. */\r\n    @editableInPropertyPage(\"Clear stencil\", PropertyTypeForEdition.Boolean, undefined, { embedded: true })\r\n    public get clearStencil(): boolean {\r\n        return !!this._frameGraphTask.clearStencil;\r\n    }\r\n\r\n    public set clearStencil(value: boolean) {\r\n        this._frameGraphTask.clearStencil = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphClearBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the target input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the depth texture input component\r\n     */\r\n    public get depth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output depth component\r\n     */\r\n    public get outputDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n        this.outputDepth.value = this._frameGraphTask.outputDepthTexture;\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.depthTexture = this.depth.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.color = new BABYLON.Color4(${this.color.r}, ${this.color.g}, ${this.color.b}, ${this.color.a});`);\r\n        codes.push(`${this._codeVariableName}.clearColor = ${this.clearColor};`);\r\n        codes.push(`${this._codeVariableName}.convertColorToLinearSpace = ${this.convertColorToLinearSpace};`);\r\n        codes.push(`${this._codeVariableName}.clearDepth = ${this.clearDepth};`);\r\n        codes.push(`${this._codeVariableName}.clearStencil = ${this.clearStencil};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.color = this.color.asArray();\r\n        serializationObject.clearColor = this.clearColor;\r\n        serializationObject.convertColorToLinearSpace = this.convertColorToLinearSpace;\r\n        serializationObject.clearDepth = this.clearDepth;\r\n        serializationObject.clearStencil = this.clearStencil;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.color = Color4.FromArray(serializationObject.color);\r\n        this.clearColor = serializationObject.clearColor;\r\n        this.convertColorToLinearSpace = !!serializationObject.convertColorToLinearSpace;\r\n        this.clearDepth = serializationObject.clearDepth;\r\n        this.clearStencil = serializationObject.clearStencil;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphClearBlock\", NodeRenderGraphClearBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5460, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/nodeRenderGraphConnectionPointCustomObject.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/nodeRenderGraphConnectionPointCustomObject.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPointDirection, NodeRenderGraphBlock, Nullable } from \"core/index\";\r\nimport { NodeRenderGraphConnectionPoint } from \"./nodeRenderGraphBlockConnectionPoint\";\r\nimport { NodeRenderGraphConnectionPointCompatibilityStates } from \"./Types/nodeRenderGraphTypes\";\r\n\r\n/**\r\n * Defines a connection point to be used for points with a custom object type\r\n */\r\nexport class NodeRenderGraphConnectionPointCustomObject<T extends NodeRenderGraphBlock> extends NodeRenderGraphConnectionPoint {\r\n    /**\r\n     * Creates a new connection point\r\n     * @param name defines the connection point name\r\n     * @param ownerBlock defines the block hosting this connection point\r\n     * @param direction defines the direction of the connection point\r\n     * @param _blockType\r\n     * @param _blockName\r\n     */\r\n    public constructor(\r\n        name: string,\r\n        ownerBlock: NodeRenderGraphBlock,\r\n        direction: NodeRenderGraphConnectionPointDirection,\r\n        // @internal\r\n        public _blockType: new (...args: any[]) => T,\r\n        private _blockName: string\r\n    ) {\r\n        super(name, ownerBlock, direction);\r\n\r\n        this.needDualDirectionValidation = true;\r\n    }\r\n\r\n    public override checkCompatibilityState(connectionPoint: NodeRenderGraphConnectionPoint): NodeRenderGraphConnectionPointCompatibilityStates {\r\n        return connectionPoint instanceof NodeRenderGraphConnectionPointCustomObject && connectionPoint._blockName === this._blockName\r\n            ? NodeRenderGraphConnectionPointCompatibilityStates.Compatible\r\n            : NodeRenderGraphConnectionPointCompatibilityStates.TypeIncompatible;\r\n    }\r\n\r\n    public override createCustomInputBlock(): Nullable<[NodeRenderGraphBlock, string]> {\r\n        return [new this._blockType(this._blockName), this.name];\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,8BAA8B,EAAE,MAAM,uCAAuC,CAAC;;AAMjF,MAAO,0CAA2E,SAAQ,sSAA8B;IAC1H;;;;;;;OAOG,CACH,YACI,IAAY,EACZ,UAAgC,EAChC,SAAkD,EAClD,YAAY;IACL,UAAqC,EACpC,UAAkB,CAAA;QAE1B,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;QAH5B,IAAA,CAAA,UAAU,GAAV,UAAU,CAA2B;QACpC,IAAA,CAAA,UAAU,GAAV,UAAU,CAAQ;QAI1B,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;IAC5C,CAAC;IAEe,uBAAuB,CAAC,eAA+C,EAAA;QACnF,OAAO,eAAe,YAAY,0CAA0C,IAAI,eAAe,CAAC,UAAU,KAAK,IAAI,CAAC,UAAU,GACzH,EAAA,gEAAA,MACA,EAAA,sEAAA,EAAmE,CAAC;IAC7E,CAAC;IAEe,sBAAsB,GAAA;QAClC,OAAO;YAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,IAAI,CAAC,IAAI;SAAC,CAAC;IAC7D,CAAC;CACJ"}},
    {"offset": {"line": 5495, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/baseObjectRendererBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/baseObjectRendererBlock.ts"],"sourcesContent":["import type {\r\n    Scene,\r\n    NodeRenderGraphBuildState,\r\n    FrameGraph,\r\n    FrameGraphTextureHandle,\r\n    FrameGraphObjectList,\r\n    Camera,\r\n    NodeRenderGraphResourceContainerBlock,\r\n    FrameGraphShadowGeneratorTask,\r\n} from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointDirection } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { NodeRenderGraphConnectionPoint } from \"../../nodeRenderGraphBlockConnectionPoint\";\r\nimport { NodeRenderGraphConnectionPointCustomObject } from \"../../nodeRenderGraphConnectionPointCustomObject\";\r\nimport { FrameGraphObjectRendererTask } from \"core/FrameGraph/Tasks/Rendering/objectRendererTask\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class NodeRenderGraphBaseObjectRendererBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphObjectRendererTask;\r\n\r\n    public override _additionalConstructionParameters: [boolean, boolean];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphBaseObjectRendererBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param doNotChangeAspectRatio True (default) to not change the aspect ratio of the scene in the RTT\r\n     * @param enableClusteredLights True (default) to enable clustered lights\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, doNotChangeAspectRatio = true, enableClusteredLights = true) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [doNotChangeAspectRatio, enableClusteredLights];\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"depth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this.registerInput(\"objects\", NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n        this._addDependenciesInput();\r\n        this.registerInput(\"shadowGenerators\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n        this.registerOutput(\"outputDepth\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n        this.registerOutput(\r\n            \"objectRenderer\",\r\n            NodeRenderGraphBlockConnectionPointTypes.Object,\r\n            new NodeRenderGraphConnectionPointCustomObject(\r\n                \"objectRenderer\",\r\n                this,\r\n                NodeRenderGraphConnectionPointDirection.Output,\r\n                NodeRenderGraphBaseObjectRendererBlock,\r\n                \"NodeRenderGraphBaseObjectRendererBlock\"\r\n            )\r\n        );\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBufferDepthStencil);\r\n        this.depth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureDepthStencilAttachment | NodeRenderGraphBlockConnectionPointTypes.TextureBackBufferDepthStencilAttachment\r\n        );\r\n        this.shadowGenerators.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator | NodeRenderGraphBlockConnectionPointTypes.ResourceContainer\r\n        );\r\n\r\n        this.output._typeConnectionSource = this.target;\r\n        this.outputDepth._typeConnectionSource = this.depth;\r\n\r\n        this._createFrameGraphObject();\r\n    }\r\n\r\n    protected _createFrameGraphObject(): void {\r\n        this._frameGraphTask?.dispose();\r\n        this._frameGraphTask = new FrameGraphObjectRendererTask(this.name, this._frameGraph, this._scene, {\r\n            doNotChangeAspectRatio: this._additionalConstructionParameters![0] as boolean,\r\n            enableClusteredLights: this._additionalConstructionParameters![1] as boolean,\r\n        });\r\n    }\r\n\r\n    protected _saveState(state: { [key: string]: any }) {\r\n        state.disabled = this._frameGraphTask.disabled;\r\n        state.isMainObjectRenderer = this.isMainObjectRenderer;\r\n        state.depthTest = this.depthTest;\r\n        state.depthWrite = this.depthWrite;\r\n        state.disableShadows = this.disableShadows;\r\n        state.renderInLinearSpace = this.renderInLinearSpace;\r\n        state.renderParticles = this.renderParticles;\r\n        state.renderSprites = this.renderSprites;\r\n        state.forceLayerMaskCheck = this.forceLayerMaskCheck;\r\n        state.enableBoundingBoxRendering = this.enableBoundingBoxRendering;\r\n        state.enableOutlineRendering = this.enableOutlineRendering;\r\n    }\r\n\r\n    protected _restoreState(state: { [key: string]: any }) {\r\n        this._frameGraphTask.disabled = state.disabled;\r\n        this.isMainObjectRenderer = state.isMainObjectRenderer;\r\n        this.depthTest = state.depthTest;\r\n        this.depthWrite = state.depthWrite;\r\n        this.disableShadows = state.disableShadows;\r\n        this.renderInLinearSpace = state.renderInLinearSpace;\r\n        this.renderParticles = state.renderParticles;\r\n        this.renderSprites = state.renderSprites;\r\n        this.forceLayerMaskCheck = state.forceLayerMaskCheck;\r\n        this.enableBoundingBoxRendering = state.enableBoundingBoxRendering;\r\n        this.enableOutlineRendering = state.enableOutlineRendering;\r\n    }\r\n\r\n    protected _createFrameGraphObjectWithState(doNotChangeAspectRatio: boolean, enableClusteredLights: boolean): void {\r\n        const state: { [key: string]: any } = {};\r\n\r\n        this._saveState(state);\r\n\r\n        this._additionalConstructionParameters = [doNotChangeAspectRatio, enableClusteredLights];\r\n\r\n        this._createFrameGraphObject();\r\n\r\n        this._restoreState(state);\r\n    }\r\n\r\n    /** Indicates that this object renderer is the main object renderer of the frame graph. */\r\n    @editableInPropertyPage(\"Is main object renderer\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get isMainObjectRenderer() {\r\n        return this._frameGraphTask.isMainObjectRenderer;\r\n    }\r\n\r\n    public set isMainObjectRenderer(value: boolean) {\r\n        this._frameGraphTask.isMainObjectRenderer = value;\r\n    }\r\n\r\n    /** Indicates if depth testing must be enabled or disabled */\r\n    @editableInPropertyPage(\"Depth test\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get depthTest() {\r\n        return this._frameGraphTask.depthTest;\r\n    }\r\n\r\n    public set depthTest(value: boolean) {\r\n        this._frameGraphTask.depthTest = value;\r\n    }\r\n\r\n    /** Indicates if depth writing must be enabled or disabled */\r\n    @editableInPropertyPage(\"Depth write\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get depthWrite() {\r\n        return this._frameGraphTask.depthWrite;\r\n    }\r\n\r\n    public set depthWrite(value: boolean) {\r\n        this._frameGraphTask.depthWrite = value;\r\n    }\r\n\r\n    /** Indicates if particles should be rendered */\r\n    @editableInPropertyPage(\"Render particles\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get renderParticles() {\r\n        return this._frameGraphTask.renderParticles;\r\n    }\r\n\r\n    public set renderParticles(value: boolean) {\r\n        this._frameGraphTask.renderParticles = value;\r\n    }\r\n\r\n    /** Indicates if sprites should be rendered */\r\n    @editableInPropertyPage(\"Render sprites\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get renderSprites() {\r\n        return this._frameGraphTask.renderSprites;\r\n    }\r\n\r\n    public set renderSprites(value: boolean) {\r\n        this._frameGraphTask.renderSprites = value;\r\n    }\r\n\r\n    /** Indicates if layer mask check must be forced */\r\n    @editableInPropertyPage(\"Force layer mask check\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get forceLayerMaskCheck() {\r\n        return this._frameGraphTask.forceLayerMaskCheck;\r\n    }\r\n\r\n    public set forceLayerMaskCheck(value: boolean) {\r\n        this._frameGraphTask.forceLayerMaskCheck = value;\r\n    }\r\n\r\n    /** Indicates if bounding boxes should be rendered */\r\n    @editableInPropertyPage(\"Enable bounding box rendering\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get enableBoundingBoxRendering() {\r\n        return this._frameGraphTask.enableBoundingBoxRendering;\r\n    }\r\n\r\n    public set enableBoundingBoxRendering(value: boolean) {\r\n        this._frameGraphTask.enableBoundingBoxRendering = value;\r\n    }\r\n\r\n    /** Indicates if outlines/overlays should be rendered */\r\n    @editableInPropertyPage(\"Enable outline/overlay rendering\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get enableOutlineRendering() {\r\n        return this._frameGraphTask.enableOutlineRendering;\r\n    }\r\n\r\n    public set enableOutlineRendering(value: boolean) {\r\n        this._frameGraphTask.enableOutlineRendering = value;\r\n    }\r\n\r\n    /** Indicates if shadows must be enabled or disabled */\r\n    @editableInPropertyPage(\"Disable shadows\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get disableShadows() {\r\n        return this._frameGraphTask.disableShadows;\r\n    }\r\n\r\n    public set disableShadows(value: boolean) {\r\n        this._frameGraphTask.disableShadows = value;\r\n    }\r\n\r\n    /** If image processing should be disabled */\r\n    @editableInPropertyPage(\"Disable image processing\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get renderInLinearSpace() {\r\n        return this._frameGraphTask.disableImageProcessing;\r\n    }\r\n\r\n    public set renderInLinearSpace(value: boolean) {\r\n        this._frameGraphTask.disableImageProcessing = value;\r\n    }\r\n\r\n    /** True (default) to not change the aspect ratio of the scene in the RTT */\r\n    @editableInPropertyPage(\"Do not change aspect ratio\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get doNotChangeAspectRatio() {\r\n        return this._frameGraphTask.objectRenderer.options.doNotChangeAspectRatio;\r\n    }\r\n\r\n    public set doNotChangeAspectRatio(value: boolean) {\r\n        this._createFrameGraphObjectWithState(value, this.enableClusteredLights);\r\n    }\r\n\r\n    /** True (default) to enable clustered lights */\r\n    @editableInPropertyPage(\"Enable clustered lights\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get enableClusteredLights() {\r\n        return this._frameGraphTask.objectRenderer.options.enableClusteredLights;\r\n    }\r\n\r\n    public set enableClusteredLights(value: boolean) {\r\n        this._createFrameGraphObjectWithState(this.doNotChangeAspectRatio, value);\r\n    }\r\n\r\n    /** If true, MSAA color textures will be resolved at the end of the render pass (default: true) */\r\n    @editableInPropertyPage(\"Resolve MSAA colors\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get resolveMSAAColors() {\r\n        return this._frameGraphTask.resolveMSAAColors;\r\n    }\r\n\r\n    public set resolveMSAAColors(value: boolean) {\r\n        this._frameGraphTask.resolveMSAAColors = value;\r\n    }\r\n\r\n    /** If true, MSAA depth texture will be resolved at the end of the render pass (default: false) */\r\n    @editableInPropertyPage(\"Resolve MSAA depth\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get resolveMSAADepth() {\r\n        return this._frameGraphTask.resolveMSAADepth;\r\n    }\r\n\r\n    public set resolveMSAADepth(value: boolean) {\r\n        this._frameGraphTask.resolveMSAADepth = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBaseObjectRendererBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the target texture input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the depth texture input component\r\n     */\r\n    public get depth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the objects input component\r\n     */\r\n    public get objects(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the dependencies input component\r\n     */\r\n    public get dependencies(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the shadowGenerators input component\r\n     */\r\n    public get shadowGenerators(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output depth component\r\n     */\r\n    public get outputDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the objectRenderer component\r\n     */\r\n    public get objectRenderer(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[2];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture; // the value of the output connection point is the \"output\" texture of the task\r\n        this.outputDepth.value = this._frameGraphTask.outputDepthTexture; // the value of the outputDepth connection point is the \"outputDepth\" texture of the task\r\n        this.objectRenderer.value = this._frameGraphTask; // the value of the objectRenderer connection point is the task itself\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.depthTexture = this.depth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n        this._frameGraphTask.objectList = this.objects.connectedPoint?.value as FrameGraphObjectList;\r\n\r\n        this._frameGraphTask.shadowGenerators = [];\r\n\r\n        const shadowGeneratorsConnectedPoint = this.shadowGenerators.connectedPoint;\r\n        if (shadowGeneratorsConnectedPoint) {\r\n            if (shadowGeneratorsConnectedPoint.type === NodeRenderGraphBlockConnectionPointTypes.ResourceContainer) {\r\n                const container = shadowGeneratorsConnectedPoint.ownerBlock as NodeRenderGraphResourceContainerBlock;\r\n                for (const input of container.inputs) {\r\n                    if (input.connectedPoint && input.connectedPoint.value !== undefined && NodeRenderGraphConnectionPoint.IsShadowGenerator(input.connectedPoint.value)) {\r\n                        this._frameGraphTask.shadowGenerators.push(input.connectedPoint.value as FrameGraphShadowGeneratorTask);\r\n                    }\r\n                }\r\n            } else if (NodeRenderGraphConnectionPoint.IsShadowGenerator(shadowGeneratorsConnectedPoint.value)) {\r\n                this._frameGraphTask.shadowGenerators[0] = shadowGeneratorsConnectedPoint.value as FrameGraphShadowGeneratorTask;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.isMainObjectRenderer = ${this.isMainObjectRenderer};`);\r\n        codes.push(`${this._codeVariableName}.depthTest = ${this.depthTest};`);\r\n        codes.push(`${this._codeVariableName}.depthWrite = ${this.depthWrite};`);\r\n        codes.push(`${this._codeVariableName}.renderParticles = ${this.renderParticles};`);\r\n        codes.push(`${this._codeVariableName}.renderSprites = ${this.renderSprites};`);\r\n        codes.push(`${this._codeVariableName}.forceLayerMaskCheck = ${this.forceLayerMaskCheck};`);\r\n        codes.push(`${this._codeVariableName}.enableBoundingBoxRendering = ${this.enableBoundingBoxRendering};`);\r\n        codes.push(`${this._codeVariableName}.enableOutlineRendering = ${this.enableOutlineRendering};`);\r\n        codes.push(`${this._codeVariableName}.disableShadows = ${this.disableShadows};`);\r\n        codes.push(`${this._codeVariableName}.renderInLinearSpace = ${this.renderInLinearSpace};`);\r\n        codes.push(`${this._codeVariableName}.resolveMSAAColors = ${this.resolveMSAAColors};`);\r\n        codes.push(`${this._codeVariableName}.resolveMSAADepth = ${this.resolveMSAADepth};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.isMainObjectRenderer = this.isMainObjectRenderer;\r\n        serializationObject.depthTest = this.depthTest;\r\n        serializationObject.depthWrite = this.depthWrite;\r\n        serializationObject.renderParticles = this.renderParticles;\r\n        serializationObject.renderSprites = this.renderSprites;\r\n        serializationObject.forceLayerMaskCheck = this.forceLayerMaskCheck;\r\n        serializationObject.enableBoundingBoxRendering = this.enableBoundingBoxRendering;\r\n        serializationObject.enableOutlineRendering = this.enableOutlineRendering;\r\n        serializationObject.disableShadows = this.disableShadows;\r\n        serializationObject.renderInLinearSpace = this.renderInLinearSpace;\r\n        serializationObject.resolveMSAAColors = this.resolveMSAAColors;\r\n        serializationObject.resolveMSAADepth = this.resolveMSAADepth;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.isMainObjectRenderer = !!serializationObject.isMainObjectRenderer;\r\n        this.depthTest = serializationObject.depthTest;\r\n        this.depthWrite = serializationObject.depthWrite;\r\n        this.renderParticles = serializationObject.renderParticles ?? true;\r\n        this.renderSprites = serializationObject.renderSprites ?? true;\r\n        this.forceLayerMaskCheck = serializationObject.forceLayerMaskCheck ?? true;\r\n        this.enableBoundingBoxRendering = serializationObject.enableBoundingBoxRendering ?? true;\r\n        this.enableOutlineRendering = serializationObject.enableOutlineRendering ?? true;\r\n        this.disableShadows = serializationObject.disableShadows;\r\n        this.renderInLinearSpace = !!serializationObject.renderInLinearSpace;\r\n        this.resolveMSAAColors = serializationObject.resolveMSAAColors ?? true;\r\n        this.resolveMSAADepth = serializationObject.resolveMSAADepth ?? false;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5844, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/objectRendererBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/objectRendererBlock.ts"],"sourcesContent":["import { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBaseObjectRendererBlock } from \"./baseObjectRendererBlock\";\r\n\r\n/**\r\n * Block that render objects to a render target\r\n */\r\nexport class NodeRenderGraphObjectRendererBlock extends NodeRenderGraphBaseObjectRendererBlock {\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphObjectRendererBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphObjectRendererBlock\", NodeRenderGraphObjectRendererBlock);\r\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sCAAsC,EAAE,MAAM,2BAA2B,CAAC;;;AAK7E,MAAO,kCAAmC,SAAQ,yTAAsC;IAC1F;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,oCAAoC,CAAC;IAChD,CAAC;CACJ;IAED,6OAAa,EAAC,4CAA4C,EAAE,kCAAkC,CAAC,CAAC"}},
    {"offset": {"line": 5865, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/nodeRenderGraphBuildState.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/nodeRenderGraphBuildState.ts"],"sourcesContent":["import type { Nullable, NodeRenderGraphConnectionPoint, Observable } from \"core/index\";\r\nimport { Logger } from \"../../Misc/logger\";\r\n\r\n/**\r\n * Class used to store node based render graph build state\r\n */\r\nexport class NodeRenderGraphBuildState {\r\n    /** Gets or sets the build identifier */\r\n    public buildId: number;\r\n\r\n    /** Gets or sets a boolean indicating that verbose mode is on */\r\n    public verbose = false;\r\n\r\n    /**\r\n     * Gets or sets the list of non connected mandatory inputs\r\n     * @internal\r\n     */\r\n    public _notConnectedNonOptionalInputs: NodeRenderGraphConnectionPoint[] = [];\r\n\r\n    /**\r\n     * Emits console errors and exceptions if there is a failing check\r\n     * @param errorObservable defines an Observable to send the error message\r\n     * @returns true if all checks pass\r\n     */\r\n    public emitErrors(errorObservable: Nullable<Observable<string>> = null): boolean {\r\n        let errorMessage = \"\";\r\n        for (const notConnectedInput of this._notConnectedNonOptionalInputs) {\r\n            errorMessage += `input \"${notConnectedInput.name}\" from block \"${\r\n                notConnectedInput.ownerBlock.name\r\n            }\"[${notConnectedInput.ownerBlock.getClassName()}] is not connected and is not optional.\\n`;\r\n        }\r\n        if (errorMessage) {\r\n            if (errorObservable) {\r\n                errorObservable.notifyObservers(errorMessage);\r\n            }\r\n            Logger.Error(\"Build of node render graph failed:\\n\" + errorMessage);\r\n\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;;AAKrC,MAAO,yBAAyB;IAAtC,aAAA;QAII,8DAAA,EAAgE,CACzD,IAAA,CAAA,OAAO,GAAG,KAAK,CAAC;QAEvB;;;WAGG,CACI,IAAA,CAAA,8BAA8B,GAAqC,EAAE,CAAC;IAwBjF,CAAC;IAtBG;;;;OAIG,CACI,UAAU,CAAC,kBAAgD,IAAI,EAAA;QAClE,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,KAAK,MAAM,iBAAiB,IAAI,IAAI,CAAC,8BAA8B,CAAE,CAAC;YAClE,YAAY,IAAI,CAAA,OAAA,EAAU,iBAAiB,CAAC,IAAI,CAAA,cAAA,EAC5C,iBAAiB,CAAC,UAAU,CAAC,IACjC,CAAA,EAAA,EAAK,iBAAiB,CAAC,UAAU,CAAC,YAAY,EAAE,CAAA,yCAAA,CAA2C,CAAC;QAChG,CAAC;QACD,IAAI,YAAY,EAAE,CAAC;YACf,IAAI,eAAe,EAAE,CAAC;gBAClB,eAAe,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YAClD,CAAC;YACD,mOAAM,CAAC,KAAK,CAAC,sCAAsC,GAAG,YAAY,CAAC,CAAC;YAEpE,OAAO,KAAK,CAAC;QACjB,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 5902, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Misc/cullObjectsTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Misc/cullObjectsTask.ts"],"sourcesContent":["import type { Scene, Camera, FrameGraph, FrameGraphObjectList } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\n\r\n/**\r\n * Task used to cull objects that are not visible.\r\n */\r\nexport class FrameGraphCullObjectsTask extends FrameGraphTask {\r\n    /**\r\n     * The object list to cull.\r\n     */\r\n    public objectList: FrameGraphObjectList;\r\n\r\n    /**\r\n     * The camera to use for culling.\r\n     */\r\n    public camera: Camera;\r\n\r\n    /**\r\n     * The output object list containing the culled objects.\r\n     */\r\n    public readonly outputObjectList: FrameGraphObjectList;\r\n\r\n    private readonly _scene: Scene;\r\n\r\n    /**\r\n     * Creates a new cull objects task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param scene The scene to cull objects from.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph);\r\n        this._scene = scene;\r\n        this.outputObjectList = {\r\n            meshes: null,\r\n            particleSystems: null,\r\n        };\r\n    }\r\n\r\n    public record() {\r\n        if (this.objectList === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphCullObjectsTask ${this.name}: objectList and camera are required`);\r\n        }\r\n\r\n        // Initial output values\r\n        this.outputObjectList.meshes = this.objectList.meshes;\r\n        this.outputObjectList.particleSystems = this.objectList.particleSystems;\r\n\r\n        const pass = this._frameGraph.addObjectListPass(this.name);\r\n\r\n        pass.setObjectList(this.outputObjectList);\r\n        pass.setExecuteFunc((_context) => {\r\n            // No culling on particle systems\r\n            this.outputObjectList.particleSystems = this.objectList.particleSystems;\r\n\r\n            if (this._scene._activeMeshesFrozen) {\r\n                // If active meshes are frozen, we don't need culling: we keep the last list created before freezing\r\n                return;\r\n            }\r\n\r\n            this.outputObjectList.meshes = [];\r\n\r\n            this.camera._updateFrustumPlanes();\r\n\r\n            const frustumPlanes = this.camera._frustumPlanes;\r\n\r\n            const meshes = this.objectList.meshes || this._scene.meshes;\r\n            for (let i = 0; i < meshes.length; i++) {\r\n                const mesh = meshes[i];\r\n                if (mesh.isBlocked || !mesh.isReady() || !mesh.isEnabled() || mesh.scaling.hasAZeroComponent) {\r\n                    continue;\r\n                }\r\n\r\n                if (\r\n                    mesh.isVisible &&\r\n                    mesh.visibility > 0 &&\r\n                    (mesh.layerMask & this.camera.layerMask) !== 0 &&\r\n                    (this._scene.skipFrustumClipping || mesh.alwaysSelectAsActiveMesh || mesh.isInFrustum(frustumPlanes))\r\n                ) {\r\n                    this.outputObjectList.meshes.push(mesh);\r\n                }\r\n            }\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addObjectListPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setObjectList(this.outputObjectList);\r\n        passDisabled.setExecuteFunc((_context) => {\r\n            this.outputObjectList.meshes = this.objectList.meshes;\r\n            this.outputObjectList.particleSystems = this.objectList.particleSystems;\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5964, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/cullObjectsBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/cullObjectsBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraph } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { FrameGraphCullObjectsTask } from \"../../Tasks/Misc/cullObjectsTask\";\r\nimport type { Camera } from \"../../../Cameras/camera\";\r\nimport type { FrameGraphObjectList } from \"core/FrameGraph/frameGraphObjectList\";\r\n\r\n/**\r\n * Block that culls a list of objects\r\n */\r\nexport class NodeRenderGraphCullObjectsBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphCullObjectsTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphCullObjectsBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this.registerInput(\"objects\", NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n        this._addDependenciesInput();\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n\r\n        this._frameGraphTask = new FrameGraphCullObjectsTask(this.name, frameGraph, scene);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphCullObjectsBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the objects input component\r\n     */\r\n    public get objects(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputObjectList;\r\n\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n        this._frameGraphTask.objectList = this.objects.connectedPoint?.value as FrameGraphObjectList;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphCullObjectsBlock\", NodeRenderGraphCullObjectsBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,wCAAwC,EAAE,MAAM,+BAA+B,CAAC;AACzF,OAAO,EAAE,yBAAyB,EAAE,MAAM,kCAAkC,CAAC;;;;;AAOvE,MAAO,+BAAgC,SAAQ,6QAAoB;IAGrE;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,0SAAwC,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,0SAAwC,CAAC,UAAU,CAAC,CAAC;QACnF,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,0SAAwC,CAAC,UAAU,CAAC,CAAC;QAEnF,IAAI,CAAC,eAAe,GAAG,IAAI,sRAAyB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;IACvF,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,iCAAiC,CAAC;IAC7C,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC;QAE1D,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,KAAe,CAAC;QAC1E,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,KAA6B,CAAC;IACjG,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;IAC5C,CAAC;CACJ;IAED,6OAAa,EAAC,yCAAyC,EAAE,+BAA+B,CAAC,CAAC"}},
    {"offset": {"line": 6039, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/nodeRenderGraph.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/nodeRenderGraph.ts"],"sourcesContent":["import type {\r\n    Observer,\r\n    Nullable,\r\n    NodeRenderGraphBlock,\r\n    NodeRenderGraphTeleportOutBlock,\r\n    NodeRenderGraphTeleportInBlock,\r\n    AbstractEngine,\r\n    INodeRenderGraphCreateOptions,\r\n    INodeRenderGraphEditorOptions,\r\n    Scene,\r\n    WritableObject,\r\n    IShadowLight,\r\n    INodeRenderGraphCustomBlockDescription,\r\n    Immutable,\r\n} from \"core/index\";\r\nimport { Observable } from \"../../Misc/observable\";\r\nimport { NodeRenderGraphOutputBlock } from \"./Blocks/outputBlock\";\r\nimport { FrameGraph } from \"../frameGraph\";\r\nimport { GetClass } from \"../../Misc/typeStore\";\r\nimport { serialize } from \"../../Misc/decorators\";\r\nimport { SerializationHelper } from \"../../Misc/decorators.serialization\";\r\nimport { Constants } from \"../../Engines/constants\";\r\nimport { WebRequest } from \"../../Misc/webRequest\";\r\nimport { NodeRenderGraphInputBlock } from \"./Blocks/inputBlock\";\r\nimport { Tools } from \"../../Misc/tools\";\r\nimport { Engine } from \"../../Engines/engine\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"./Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphClearBlock } from \"./Blocks/Textures/clearBlock\";\r\nimport { NodeRenderGraphBaseObjectRendererBlock } from \"./Blocks/Rendering/baseObjectRendererBlock\";\r\nimport { NodeRenderGraphObjectRendererBlock } from \"./Blocks/Rendering/objectRendererBlock\";\r\nimport { NodeRenderGraphBuildState } from \"./nodeRenderGraphBuildState\";\r\nimport { NodeRenderGraphCullObjectsBlock } from \"./Blocks/cullObjectsBlock\";\r\n\r\n// declare NODERENDERGRAPHEDITOR namespace for compilation issue\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\ndeclare let NODERENDERGRAPHEDITOR: any;\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\ndeclare let BABYLON: any;\r\n\r\n/**\r\n * Defines a node render graph\r\n */\r\nexport class NodeRenderGraph {\r\n    private static _BuildIdGenerator: number = 0;\r\n\r\n    private _buildId: number = NodeRenderGraph._BuildIdGenerator++;\r\n\r\n    /** Define the Url to load node editor script */\r\n    public static EditorURL = `${Tools._DefaultCdnUrl}/v${Engine.Version}/NodeRenderGraph/babylon.nodeRenderGraph.js`;\r\n\r\n    /** Define the Url to load snippets */\r\n    public static SnippetUrl = Constants.SnippetUrl;\r\n\r\n    /** Description of custom blocks to use in the node render graph editor */\r\n    public static CustomBlockDescriptions: INodeRenderGraphCustomBlockDescription[] = [];\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    private BJSNODERENDERGRAPHEDITOR = this._getGlobalNodeRenderGraphEditor();\r\n\r\n    /** @returns the inspector from bundle or global */\r\n    private _getGlobalNodeRenderGraphEditor(): any {\r\n        // UMD Global name detection from Webpack Bundle UMD Name.\r\n        if (typeof NODERENDERGRAPHEDITOR !== \"undefined\") {\r\n            return NODERENDERGRAPHEDITOR;\r\n        }\r\n\r\n        // In case of module let's check the global emitted from the editor entry point.\r\n        if (typeof BABYLON !== \"undefined\" && typeof BABYLON.NodeRenderGraphEditor !== \"undefined\") {\r\n            return BABYLON;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets data used by visual editor\r\n     * @see https://nrge.babylonjs.com\r\n     */\r\n    public editorData: any = null;\r\n\r\n    /**\r\n     * Gets an array of blocks that needs to be serialized even if they are not yet connected\r\n     */\r\n    public attachedBlocks: NodeRenderGraphBlock[] = [];\r\n\r\n    /**\r\n     * Observable raised before the node render graph is built\r\n     */\r\n    public onBeforeBuildObservable = new Observable<FrameGraph>();\r\n\r\n    /**\r\n     * Observable raised after the node render graph is built\r\n     * Note that this is the same observable as the one in the underlying FrameGraph!\r\n     */\r\n    public get onBuildObservable() {\r\n        return this._frameGraph.onBuildObservable;\r\n    }\r\n\r\n    /**\r\n     * Observable raised when an error is detected\r\n     */\r\n    public onBuildErrorObservable = new Observable<string>();\r\n\r\n    /** Gets or sets the RenderGraphOutputBlock used to gather the final node render graph data */\r\n    public outputBlock: Nullable<NodeRenderGraphOutputBlock> = null;\r\n\r\n    /**\r\n     * Snippet ID if the graph was created from the snippet server\r\n     */\r\n    public snippetId: string;\r\n\r\n    /**\r\n     * The name of the node render graph\r\n     */\r\n    @serialize()\r\n    public name: string;\r\n\r\n    /**\r\n     * A free comment about the graph\r\n     */\r\n    @serialize(\"comment\")\r\n    public comment: string;\r\n\r\n    private readonly _engine: AbstractEngine;\r\n    private readonly _scene: Scene;\r\n    private readonly _resizeObserver: Nullable<Observer<AbstractEngine>> = null;\r\n    private readonly _frameGraph: FrameGraph;\r\n    private readonly _options: INodeRenderGraphCreateOptions;\r\n\r\n    /**\r\n     * Gets the frame graph used by this node render graph\r\n     */\r\n    public get frameGraph() {\r\n        return this._frameGraph;\r\n    }\r\n\r\n    /**\r\n     * Gets the scene used by this node render graph\r\n     * @returns the scene used by this node render graph\r\n     */\r\n    public getScene() {\r\n        return this._scene;\r\n    }\r\n\r\n    /**\r\n     * Gets the options used to create this node render graph\r\n     */\r\n    public get options(): Immutable<INodeRenderGraphCreateOptions> {\r\n        return this._options;\r\n    }\r\n\r\n    /**\r\n     * Creates a new node render graph\r\n     * @param name defines the name of the node render graph\r\n     * @param scene defines the scene to use to execute the graph\r\n     * @param options defines the options to use when creating the graph\r\n     */\r\n    public constructor(name: string, scene: Scene, options?: INodeRenderGraphCreateOptions) {\r\n        this.name = name;\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n\r\n        options = {\r\n            debugTextures: false,\r\n            autoConfigure: false,\r\n            verbose: false,\r\n            rebuildGraphOnEngineResize: true,\r\n            autoFillExternalInputs: true,\r\n            ...options,\r\n        };\r\n\r\n        this._options = options;\r\n\r\n        this._frameGraph = new FrameGraph(this._scene, options.debugTextures, this);\r\n        this._frameGraph.name = name;\r\n\r\n        if (options.rebuildGraphOnEngineResize) {\r\n            this._resizeObserver = this._engine.onResizeObservable.add(async () => {\r\n                await this.buildAsync(false, true, false);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name (\"NodeRenderGraph\")\r\n     * @returns the class name\r\n     */\r\n    public getClassName(): string {\r\n        return \"NodeRenderGraph\";\r\n    }\r\n\r\n    /**\r\n     * Gets a block by its name\r\n     * @param name defines the name of the block to retrieve\r\n     * @returns the required block or null if not found\r\n     */\r\n    public getBlockByName<T extends NodeRenderGraphBlock>(name: string): Nullable<T> {\r\n        let result: Nullable<T> = null;\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.name === name) {\r\n                if (!result) {\r\n                    result = block as T;\r\n                } else {\r\n                    Tools.Warn(\"More than one block was found with the name `\" + name + \"`\");\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get a block using a predicate\r\n     * @param predicate defines the predicate used to find the good candidate\r\n     * @returns the required block or null if not found\r\n     */\r\n    public getBlockByPredicate<T extends NodeRenderGraphBlock>(predicate: (block: NodeRenderGraphBlock) => boolean): Nullable<T> {\r\n        for (const block of this.attachedBlocks) {\r\n            if (predicate(block)) {\r\n                return block as T;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Get all blocks that match a predicate\r\n     * @param predicate defines the predicate used to find the good candidate(s)\r\n     * @returns the list of blocks found\r\n     */\r\n    public getBlocksByPredicate<T extends NodeRenderGraphBlock>(predicate: (block: NodeRenderGraphBlock) => boolean): T[] {\r\n        const blocks: T[] = [];\r\n        for (const block of this.attachedBlocks) {\r\n            if (predicate(block)) {\r\n                blocks.push(block as T);\r\n            }\r\n        }\r\n\r\n        return blocks;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of input blocks attached to this material\r\n     * @returns an array of InputBlocks\r\n     */\r\n    public getInputBlocks() {\r\n        const blocks: NodeRenderGraphInputBlock[] = [];\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.isInput) {\r\n                blocks.push(block as NodeRenderGraphInputBlock);\r\n            }\r\n        }\r\n\r\n        return blocks;\r\n    }\r\n\r\n    /**\r\n     * Launch the node render graph editor\r\n     * @param config Define the configuration of the editor\r\n     * @returns a promise fulfilled when the node editor is visible\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public async edit(config?: INodeRenderGraphEditorOptions): Promise<void> {\r\n        return await new Promise((resolve) => {\r\n            this.BJSNODERENDERGRAPHEDITOR = this.BJSNODERENDERGRAPHEDITOR || this._getGlobalNodeRenderGraphEditor();\r\n            if (typeof this.BJSNODERENDERGRAPHEDITOR == \"undefined\") {\r\n                const editorUrl = config && config.editorURL ? config.editorURL : NodeRenderGraph.EditorURL;\r\n\r\n                // Load editor and add it to the DOM\r\n                Tools.LoadBabylonScript(editorUrl, () => {\r\n                    this.BJSNODERENDERGRAPHEDITOR = this.BJSNODERENDERGRAPHEDITOR || this._getGlobalNodeRenderGraphEditor();\r\n                    this._createNodeEditor(config?.nodeRenderGraphEditorConfig);\r\n                    resolve();\r\n                });\r\n            } else {\r\n                // Otherwise creates the editor\r\n                this._createNodeEditor(config?.nodeRenderGraphEditorConfig);\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates the node editor window.\r\n     * @param additionalConfig Additional configuration for the FGE\r\n     */\r\n    private _createNodeEditor(additionalConfig?: any) {\r\n        const nodeEditorConfig: any = {\r\n            nodeRenderGraph: this,\r\n            customBlockDescriptions: NodeRenderGraph.CustomBlockDescriptions,\r\n            ...additionalConfig,\r\n        };\r\n        this.BJSNODERENDERGRAPHEDITOR.NodeRenderGraphEditor.Show(nodeEditorConfig);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use buildAsync instead\r\n     * @param dontBuildFrameGraph If the underlying frame graph should not be built (default: false)\r\n     */\r\n    public build(dontBuildFrameGraph = false): void {\r\n        void this.buildAsync(dontBuildFrameGraph, false, false);\r\n    }\r\n\r\n    /**\r\n     * Build the final list of blocks that will be executed by the \"execute\" method.\r\n     * It also builds the underlying frame graph unless specified otherwise.\r\n     * @param dontBuildFrameGraph If the underlying frame graph should not be built (default: false)\r\n     * @param waitForReadiness If the method should wait for the frame graph to be ready before resolving (default: true). Note that this parameter has no effect if \"dontBuildFrameGraph\" is true.\r\n     * @param setAsSceneFrameGraph If the built frame graph must be set as the scene's frame graph (default: true)\r\n     */\r\n    public async buildAsync(dontBuildFrameGraph = false, waitForReadiness = true, setAsSceneFrameGraph = true): Promise<void> {\r\n        if (!this.outputBlock) {\r\n            throw new Error(\"You must define the outputBlock property before building the node render graph\");\r\n        }\r\n\r\n        if (setAsSceneFrameGraph) {\r\n            this._scene.frameGraph = this._frameGraph;\r\n        }\r\n\r\n        this._initializeBlock(this.outputBlock);\r\n\r\n        this._frameGraph.clear();\r\n\r\n        const state = new NodeRenderGraphBuildState();\r\n\r\n        state.buildId = this._buildId;\r\n        state.verbose = this._options.verbose!;\r\n\r\n        if (this._options.autoFillExternalInputs) {\r\n            this._autoFillExternalInputs();\r\n        }\r\n\r\n        this.onBeforeBuildObservable.notifyObservers(this._frameGraph);\r\n\r\n        // Make sure that one of the object renderer is flagged as the main object renderer\r\n        const objectRendererBlocks = this.getBlocksByPredicate<NodeRenderGraphBaseObjectRendererBlock>((block) => block instanceof NodeRenderGraphBaseObjectRendererBlock);\r\n        if (objectRendererBlocks.length > 0 && !objectRendererBlocks.find((block) => block.isMainObjectRenderer)) {\r\n            objectRendererBlocks[0].isMainObjectRenderer = true;\r\n        }\r\n\r\n        try {\r\n            this.outputBlock.build(state);\r\n\r\n            if (!dontBuildFrameGraph) {\r\n                await this._frameGraph.buildAsync(waitForReadiness);\r\n            }\r\n        } finally {\r\n            this._buildId = NodeRenderGraph._BuildIdGenerator++;\r\n\r\n            state.emitErrors(this.onBuildErrorObservable);\r\n        }\r\n    }\r\n\r\n    private _autoFillExternalInputs() {\r\n        const allInputs = this.getInputBlocks();\r\n\r\n        const shadowLights: IShadowLight[] = [];\r\n        for (const light of this._scene.lights) {\r\n            if ((light as IShadowLight).setShadowProjectionMatrix !== undefined) {\r\n                shadowLights.push(light as IShadowLight);\r\n            }\r\n        }\r\n\r\n        let cameraIndex = 0;\r\n        let lightIndex = 0;\r\n        for (const input of allInputs) {\r\n            if (!input.isExternal) {\r\n                continue;\r\n            }\r\n            if (!input.isAnAncestorOfType(\"NodeRenderGraphOutputBlock\")) {\r\n                continue;\r\n            }\r\n            if ((input.type & NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer) !== 0) {\r\n                // nothing to do\r\n            } else if (input.isCamera()) {\r\n                const camera = this._scene.cameras[cameraIndex++] || this._scene.cameras[0];\r\n                if (!this._scene.cameraToUseForPointers) {\r\n                    this._scene.cameraToUseForPointers = camera;\r\n                }\r\n\r\n                input.value = camera;\r\n            } else if (input.isObjectList()) {\r\n                input.value = { meshes: this._scene.meshes, particleSystems: this._scene.particleSystems };\r\n            } else if (input.isShadowLight()) {\r\n                if (lightIndex < shadowLights.length) {\r\n                    input.value = shadowLights[lightIndex++];\r\n                    lightIndex = lightIndex % shadowLights.length;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns a promise that resolves when the node render graph is ready to be executed\r\n     * This method must be called after the graph has been built (NodeRenderGraph.build called)!\r\n     * @param timeStep Time step in ms between retries (default is 16)\r\n     * @param maxTimeout Maximum time in ms to wait for the graph to be ready (default is 10000)\r\n     * @returns The promise that resolves when the graph is ready\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\r\n    public async whenReadyAsync(timeStep = 16, maxTimeout = 10000): Promise<void> {\r\n        this._frameGraph.pausedExecution = true;\r\n        await this._frameGraph.whenReadyAsync(timeStep, maxTimeout);\r\n        this._frameGraph.pausedExecution = false;\r\n    }\r\n\r\n    /**\r\n     * Execute the graph (the graph must have been built before!)\r\n     */\r\n    public execute() {\r\n        this._frameGraph.execute();\r\n    }\r\n\r\n    private _initializeBlock(node: NodeRenderGraphBlock) {\r\n        node.initialize();\r\n        if (this._options.autoConfigure) {\r\n            node.autoConfigure();\r\n        }\r\n\r\n        if (this.attachedBlocks.indexOf(node) === -1) {\r\n            this.attachedBlocks.push(node);\r\n        }\r\n\r\n        for (const input of node.inputs) {\r\n            const connectedPoint = input.connectedPoint;\r\n            if (connectedPoint) {\r\n                const block = connectedPoint.ownerBlock;\r\n                if (block !== node) {\r\n                    this._initializeBlock(block);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the current graph\r\n     */\r\n    public clear() {\r\n        this.outputBlock = null;\r\n        this.attachedBlocks.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Remove a block from the current graph\r\n     * @param block defines the block to remove\r\n     */\r\n    public removeBlock(block: NodeRenderGraphBlock) {\r\n        const attachedBlockIndex = this.attachedBlocks.indexOf(block);\r\n        if (attachedBlockIndex > -1) {\r\n            this.attachedBlocks.splice(attachedBlockIndex, 1);\r\n        }\r\n\r\n        if (block === this.outputBlock) {\r\n            this.outputBlock = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the current graph and load a new one from a serialization object\r\n     * @param source defines the JSON representation of the graph\r\n     * @param merge defines whether or not the source must be merged or replace the current content\r\n     */\r\n    public parseSerializedObject(source: any, merge = false) {\r\n        if (!merge) {\r\n            this.clear();\r\n        }\r\n\r\n        const map: { [key: number]: NodeRenderGraphBlock } = {};\r\n\r\n        // Create blocks\r\n        for (const parsedBlock of source.blocks) {\r\n            const blockType: typeof NodeRenderGraphBlock = GetClass(parsedBlock.customType);\r\n            if (blockType) {\r\n                const additionalConstructionParameters = parsedBlock.additionalConstructionParameters;\r\n                const block: NodeRenderGraphBlock = additionalConstructionParameters\r\n                    ? new blockType(\"\", this._frameGraph, this._scene, ...additionalConstructionParameters)\r\n                    : new blockType(\"\", this._frameGraph, this._scene);\r\n                block._deserialize(parsedBlock);\r\n                map[parsedBlock.id] = block;\r\n\r\n                this.attachedBlocks.push(block);\r\n            }\r\n        }\r\n\r\n        // Reconnect teleportation\r\n        for (const block of this.attachedBlocks) {\r\n            if (block.isTeleportOut) {\r\n                const teleportOut = block as NodeRenderGraphTeleportOutBlock;\r\n                const id = teleportOut._tempEntryPointUniqueId;\r\n                if (id) {\r\n                    const source = map[id] as NodeRenderGraphTeleportInBlock;\r\n                    if (source) {\r\n                        source.attachToEndpoint(teleportOut);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Connections - Starts with input blocks only (except if in \"merge\" mode where we scan all blocks)\r\n        for (let blockIndex = 0; blockIndex < source.blocks.length; blockIndex++) {\r\n            const parsedBlock = source.blocks[blockIndex];\r\n            const block = map[parsedBlock.id];\r\n\r\n            if (!block) {\r\n                continue;\r\n            }\r\n\r\n            if (block.inputs.length && parsedBlock.inputs.some((i: any) => i.targetConnectionName) && !merge) {\r\n                continue;\r\n            }\r\n            this._restoreConnections(block, source, map);\r\n        }\r\n\r\n        // Outputs\r\n        if (source.outputNodeId) {\r\n            this.outputBlock = map[source.outputNodeId] as NodeRenderGraphOutputBlock;\r\n        }\r\n\r\n        // UI related info\r\n        if (source.locations || (source.editorData && source.editorData.locations)) {\r\n            const locations: {\r\n                blockId: number;\r\n                x: number;\r\n                y: number;\r\n                isCollapsed: boolean;\r\n            }[] = source.locations || source.editorData.locations;\r\n\r\n            for (const location of locations) {\r\n                if (map[location.blockId]) {\r\n                    location.blockId = map[location.blockId].uniqueId;\r\n                }\r\n            }\r\n\r\n            if (merge && this.editorData && this.editorData.locations) {\r\n                locations.concat(this.editorData.locations);\r\n            }\r\n\r\n            if (source.locations) {\r\n                this.editorData = {\r\n                    locations: locations,\r\n                };\r\n            } else {\r\n                this.editorData = source.editorData;\r\n                this.editorData.locations = locations;\r\n            }\r\n\r\n            const blockMap: { [key: number]: number } = {};\r\n\r\n            for (const key in map) {\r\n                blockMap[key] = map[key].uniqueId;\r\n            }\r\n\r\n            this.editorData.map = blockMap;\r\n        }\r\n\r\n        this.comment = source.comment;\r\n    }\r\n\r\n    private _restoreConnections(block: NodeRenderGraphBlock, source: any, map: { [key: number]: NodeRenderGraphBlock }) {\r\n        for (const outputPoint of block.outputs) {\r\n            for (const candidate of source.blocks) {\r\n                const target = map[candidate.id];\r\n\r\n                if (!target) {\r\n                    continue;\r\n                }\r\n\r\n                for (const input of candidate.inputs) {\r\n                    if (map[input.targetBlockId] === block && input.targetConnectionName === outputPoint.name) {\r\n                        const inputPoint = target.getInputByName(input.inputName);\r\n                        if (!inputPoint || inputPoint.isConnected) {\r\n                            continue;\r\n                        }\r\n\r\n                        outputPoint.connectTo(inputPoint, true);\r\n                        this._restoreConnections(target, source, map);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generate a string containing the code declaration required to create an equivalent of this node render graph\r\n     * @returns a string\r\n     */\r\n    public generateCode() {\r\n        let alreadyDumped: NodeRenderGraphBlock[] = [];\r\n        const blocks: NodeRenderGraphBlock[] = [];\r\n        const uniqueNames: string[] = [\"const\", \"var\", \"let\"];\r\n        // Gets active blocks\r\n        if (this.outputBlock) {\r\n            this._gatherBlocks(this.outputBlock, blocks);\r\n        }\r\n\r\n        // Generate\r\n        const options = JSON.stringify(this._options);\r\n        let codeString = `let nodeRenderGraph = new BABYLON.NodeRenderGraph(\"${this.name || \"render graph\"}\", scene, ${options});\\n`;\r\n        for (const node of blocks) {\r\n            if (node.isInput && alreadyDumped.indexOf(node) === -1) {\r\n                codeString += node._dumpCode(uniqueNames, alreadyDumped) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        if (this.outputBlock) {\r\n            // Connections\r\n            alreadyDumped = [];\r\n            codeString += \"// Connections\\n\";\r\n            codeString += this.outputBlock._dumpCodeForOutputConnections(alreadyDumped);\r\n\r\n            // Output nodes\r\n            codeString += \"// Output nodes\\n\";\r\n            codeString += `nodeRenderGraph.outputBlock = ${this.outputBlock._codeVariableName};\\n`;\r\n            codeString += `nodeRenderGraph.build();\\n`;\r\n        }\r\n\r\n        return codeString;\r\n    }\r\n\r\n    private _gatherBlocks(rootNode: NodeRenderGraphBlock, list: NodeRenderGraphBlock[]) {\r\n        if (list.indexOf(rootNode) !== -1) {\r\n            return;\r\n        }\r\n        list.push(rootNode);\r\n\r\n        for (const input of rootNode.inputs) {\r\n            const connectedPoint = input.connectedPoint;\r\n            if (connectedPoint) {\r\n                const block = connectedPoint.ownerBlock;\r\n                if (block !== rootNode) {\r\n                    this._gatherBlocks(block, list);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Teleportation\r\n        if (rootNode.isTeleportOut) {\r\n            const block = rootNode as NodeRenderGraphTeleportOutBlock;\r\n            if (block.entryPoint) {\r\n                this._gatherBlocks(block.entryPoint, list);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the current graph and set it to a default state\r\n     */\r\n    public setToDefault() {\r\n        this.clear();\r\n\r\n        this.editorData = null;\r\n\r\n        // Source textures\r\n        const colorTexture = new NodeRenderGraphInputBlock(\"Color Texture\", this._frameGraph, this._scene, NodeRenderGraphBlockConnectionPointTypes.Texture);\r\n        colorTexture.creationOptions.options.samples = 4;\r\n\r\n        const depthTexture = new NodeRenderGraphInputBlock(\"Depth Texture\", this._frameGraph, this._scene, NodeRenderGraphBlockConnectionPointTypes.TextureDepthStencilAttachment);\r\n        depthTexture.creationOptions.options.samples = 4;\r\n\r\n        // Clear texture\r\n        const clear = new NodeRenderGraphClearBlock(\"Clear\", this._frameGraph, this._scene);\r\n        clear.clearDepth = true;\r\n        clear.clearStencil = true;\r\n\r\n        colorTexture.output.connectTo(clear.target);\r\n        depthTexture.output.connectTo(clear.depth);\r\n\r\n        // Object list and culling\r\n        const camera = new NodeRenderGraphInputBlock(\"Camera\", this._frameGraph, this._scene, NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        const objectList = new NodeRenderGraphInputBlock(\"Object List\", this._frameGraph, this._scene, NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n        const cull = new NodeRenderGraphCullObjectsBlock(\"Cull\", this._frameGraph, this._scene);\r\n\r\n        camera.output.connectTo(cull.camera);\r\n        objectList.output.connectTo(cull.objects);\r\n\r\n        // Render objects\r\n        const mainRendering = new NodeRenderGraphObjectRendererBlock(\"Main Rendering\", this._frameGraph, this._scene);\r\n\r\n        camera.output.connectTo(mainRendering.camera);\r\n        cull.output.connectTo(mainRendering.objects);\r\n        clear.output.connectTo(mainRendering.target);\r\n        clear.outputDepth.connectTo(mainRendering.depth);\r\n\r\n        // Final output\r\n        const output = new NodeRenderGraphOutputBlock(\"Output\", this._frameGraph, this._scene);\r\n        mainRendering.output.connectTo(output.texture);\r\n\r\n        this.outputBlock = output;\r\n    }\r\n\r\n    /**\r\n     * Makes a duplicate of the current node render graph.\r\n     * Note that you should call buildAsync() on the returned graph to make it usable.\r\n     * @param name defines the name to use for the new node render graph\r\n     * @returns the new node render graph\r\n     */\r\n    public clone(name: string): NodeRenderGraph {\r\n        const serializationObject = this.serialize();\r\n\r\n        const clone = SerializationHelper.Clone(() => new NodeRenderGraph(name, this._scene), this);\r\n        clone.name = name;\r\n\r\n        clone.parseSerializedObject(serializationObject);\r\n        clone._buildId = this._buildId;\r\n\r\n        return clone;\r\n    }\r\n\r\n    /**\r\n     * Serializes this node render graph in a JSON representation\r\n     * @param selectedBlocks defines the list of blocks to save (if null the whole node render graph will be saved)\r\n     * @returns the serialized node render graph object\r\n     */\r\n    public serialize(selectedBlocks?: NodeRenderGraphBlock[]): any {\r\n        const serializationObject = selectedBlocks ? {} : SerializationHelper.Serialize(this);\r\n        serializationObject.editorData = JSON.parse(JSON.stringify(this.editorData)); // Copy\r\n\r\n        let blocks: NodeRenderGraphBlock[] = [];\r\n\r\n        if (selectedBlocks) {\r\n            blocks = selectedBlocks;\r\n        } else {\r\n            serializationObject.customType = \"BABYLON.NodeRenderGraph\";\r\n            if (this.outputBlock) {\r\n                serializationObject.outputNodeId = this.outputBlock.uniqueId;\r\n            }\r\n        }\r\n\r\n        // Blocks\r\n        serializationObject.blocks = [];\r\n\r\n        for (const block of blocks) {\r\n            serializationObject.blocks.push(block.serialize());\r\n        }\r\n\r\n        if (!selectedBlocks) {\r\n            for (const block of this.attachedBlocks) {\r\n                if (blocks.indexOf(block) !== -1) {\r\n                    continue;\r\n                }\r\n                serializationObject.blocks.push(block.serialize());\r\n            }\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Disposes the resources\r\n     */\r\n    public dispose(): void {\r\n        for (const block of this.attachedBlocks) {\r\n            block.dispose();\r\n        }\r\n\r\n        this._frameGraph.dispose();\r\n        (this._frameGraph as WritableObject<FrameGraph>) = undefined as any;\r\n\r\n        this._engine.onResizeObservable.remove(this._resizeObserver);\r\n        (this._resizeObserver as WritableObject<Nullable<Observer<AbstractEngine>>>) = null;\r\n\r\n        this.attachedBlocks.length = 0;\r\n        this.onBuildErrorObservable.clear();\r\n    }\r\n\r\n    /**\r\n     * Creates a new node render graph set to default basic configuration\r\n     * @param name defines the name of the node render graph\r\n     * @param scene defines the scene to use\r\n     * @param nodeRenderGraphOptions defines options to use when creating the node render graph\r\n     * @returns a new NodeRenderGraph\r\n     */\r\n    public static async CreateDefaultAsync(name: string, scene: Scene, nodeRenderGraphOptions?: INodeRenderGraphCreateOptions): Promise<NodeRenderGraph> {\r\n        const renderGraph = new NodeRenderGraph(name, scene, nodeRenderGraphOptions);\r\n\r\n        renderGraph.setToDefault();\r\n        await renderGraph.buildAsync(false, true, false);\r\n\r\n        return renderGraph;\r\n    }\r\n\r\n    /**\r\n     * Creates a node render graph from parsed graph data\r\n     * @param source defines the JSON representation of the node render graph\r\n     * @param scene defines the scene to use\r\n     * @param nodeRenderGraphOptions defines options to use when creating the node render\r\n     * @param skipBuild defines whether to skip building the node render graph (default is true)\r\n     * @returns a new node render graph\r\n     */\r\n    public static Parse(source: any, scene: Scene, nodeRenderGraphOptions?: INodeRenderGraphCreateOptions, skipBuild: boolean = true): NodeRenderGraph {\r\n        const renderGraph = SerializationHelper.Parse(() => new NodeRenderGraph(source.name, scene, nodeRenderGraphOptions), source, null);\r\n\r\n        renderGraph.parseSerializedObject(source);\r\n        if (!skipBuild) {\r\n            void renderGraph.buildAsync();\r\n        }\r\n\r\n        return renderGraph;\r\n    }\r\n\r\n    /**\r\n     * Creates a node render graph from a snippet saved by the node render graph editor\r\n     * @param snippetId defines the snippet to load\r\n     * @param scene defines the scene to use\r\n     * @param nodeRenderGraphOptions defines options to use when creating the node render graph\r\n     * @param nodeRenderGraph defines a node render graph to update (instead of creating a new one)\r\n     * @param skipBuild defines whether to skip building the node render graph (default is true)\r\n     * @returns a promise that will resolve to the new node render graph\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\r\n    public static ParseFromSnippetAsync(\r\n        snippetId: string,\r\n        scene: Scene,\r\n        nodeRenderGraphOptions?: INodeRenderGraphCreateOptions,\r\n        nodeRenderGraph?: NodeRenderGraph,\r\n        skipBuild: boolean = true\r\n    ): Promise<NodeRenderGraph> {\r\n        if (snippetId === \"_BLANK\") {\r\n            return NodeRenderGraph.CreateDefaultAsync(\"blank\", scene, nodeRenderGraphOptions);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const request = new WebRequest();\r\n            request.addEventListener(\"readystatechange\", async () => {\r\n                if (request.readyState == 4) {\r\n                    if (request.status == 200) {\r\n                        const snippet = JSON.parse(JSON.parse(request.responseText).jsonPayload);\r\n                        const serializationObject = JSON.parse(snippet.nodeRenderGraph);\r\n\r\n                        if (!nodeRenderGraph) {\r\n                            nodeRenderGraph = SerializationHelper.Parse(() => new NodeRenderGraph(snippetId, scene, nodeRenderGraphOptions), serializationObject, null);\r\n                        }\r\n\r\n                        nodeRenderGraph.parseSerializedObject(serializationObject);\r\n                        nodeRenderGraph.snippetId = snippetId;\r\n\r\n                        try {\r\n                            if (!skipBuild) {\r\n                                await nodeRenderGraph.buildAsync();\r\n                            }\r\n                            resolve(nodeRenderGraph);\r\n                        } catch (err) {\r\n                            // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                            reject(err);\r\n                        }\r\n                    } else {\r\n                        // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors\r\n                        reject(\"Unable to load the snippet \" + snippetId);\r\n                    }\r\n                }\r\n            });\r\n\r\n            request.open(\"GET\", this.SnippetUrl + \"/\" + snippetId.replace(/#/g, \"/\"));\r\n            request.send();\r\n        });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6714, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Misc/computeShaderTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Misc/computeShaderTask.ts"],"sourcesContent":["import type {\r\n    BaseTexture,\r\n    DataBuffer,\r\n    ExternalTexture,\r\n    FrameGraph,\r\n    FrameGraphContext,\r\n    FrameGraphPass,\r\n    IComputeShaderOptions,\r\n    IComputeShaderPath,\r\n    InternalTexture,\r\n    StorageBuffer,\r\n    TextureSampler,\r\n    VideoTexture,\r\n} from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ComputeShader } from \"core/Compute/computeShader\";\r\nimport { Vector3 } from \"core/Maths/math.vector\";\r\nimport { UniformBuffer } from \"core/Materials/uniformBuffer\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\n/**\r\n * Task used to execute a compute shader (WebGPU only)\r\n */\r\nexport class FrameGraphComputeShaderTask extends FrameGraphTask {\r\n    private readonly _notSupported: boolean;\r\n    private readonly _cs: ComputeShader;\r\n    private readonly _ubo: { [name: string]: { ubo: UniformBuffer; autoUpdate: boolean } };\r\n\r\n    /**\r\n     * Defines the dispatch size for the compute shader\r\n     */\r\n    public dispatchSize = new Vector3(1, 1, 1);\r\n\r\n    /**\r\n     * Defines an indirect dispatch buffer and offset.\r\n     * If set, this will be used instead of the dispatchSize property and an indirect dispatch will be performed.\r\n     * \"offset\" is the offset in the buffer where the workgroup counts are stored (default: 0)\r\n     */\r\n    public indirectDispatch?: { buffer: StorageBuffer | DataBuffer; offset?: number };\r\n\r\n    /**\r\n     * An optional execute function that will be called at the beginning of the task execution\r\n     */\r\n    public execute?: (context: FrameGraphContext) => void;\r\n\r\n    /**\r\n     * Gets the compute shader used by the task\r\n     */\r\n    public get computeShader(): ComputeShader {\r\n        return this._cs;\r\n    }\r\n\r\n    /**\r\n     * Gets a uniform buffer created by a call to createUniformBuffer()\r\n     * @param name Name of the uniform buffer\r\n     * @returns The uniform buffer\r\n     */\r\n    public getUniformBuffer(name: string): UniformBuffer {\r\n        return this._ubo[name]?.ubo;\r\n    }\r\n\r\n    /**\r\n     * Creates a new compute shader task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param shaderPath Defines the route to the shader code in one of three ways:\r\n     *  * object: \\{ compute: \"custom\" \\}, used with ShaderStore.ShadersStoreWGSL[\"customComputeShader\"]\r\n     *  * object: \\{ computeElement: \"HTMLElementId\" \\}, used with shader code in script tags\r\n     *  * object: \\{ computeSource: \"compute shader code string\" \\}, where the string contains the shader code\r\n     *  * string: try first to find the code in ShaderStore.ShadersStoreWGSL[shaderPath + \"ComputeShader\"]. If not, assumes it is a file with name shaderPath.compute.fx in index.html folder.\r\n     * @param options Define the options used to create the shader\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, shaderPath: IComputeShaderPath | string, options: Partial<IComputeShaderOptions> = {}) {\r\n        super(name, frameGraph);\r\n\r\n        if (!frameGraph.engine.getCaps().supportComputeShaders) {\r\n            this._notSupported = true;\r\n            Logger.Error(\"This engine does not support compute shaders!\");\r\n            return;\r\n        }\r\n\r\n        this._notSupported = false;\r\n        this._cs = new ComputeShader(name + \"_cs\", frameGraph.engine, shaderPath, options);\r\n        this._ubo = {};\r\n    }\r\n\r\n    public override isReady(): boolean {\r\n        return this._notSupported ? true : this._cs.isReady();\r\n    }\r\n\r\n    /**\r\n     * Creates a uniform buffer and binds it to the shader\r\n     * @param name Name of the uniform buffer\r\n     * @param description Description of the uniform buffer: names and sizes (in floats) of the uniforms\r\n     * @param autoUpdate If the UBO must be updated automatically before each dispatch (default: true)\r\n     * @returns The created uniform buffer\r\n     */\r\n    public createUniformBuffer(name: string, description: { [name: string]: number }, autoUpdate = true): UniformBuffer {\r\n        const uBuffer = new UniformBuffer(this._frameGraph.engine);\r\n\r\n        this._ubo[name] = { ubo: uBuffer, autoUpdate };\r\n\r\n        for (const key in description) {\r\n            uBuffer.addUniform(key, description[key]);\r\n        }\r\n\r\n        this._cs.setUniformBuffer(name, uBuffer);\r\n\r\n        return uBuffer;\r\n    }\r\n\r\n    /**\r\n     * Binds a texture to the shader\r\n     * @param name Binding name of the texture\r\n     * @param texture Texture to bind\r\n     * @param bindSampler Bind the sampler corresponding to the texture (default: true). The sampler will be bound just before the binding index of the texture\r\n     */\r\n    public setTexture(name: string, texture: BaseTexture, bindSampler = true): void {\r\n        this._cs.setTexture(name, texture, bindSampler);\r\n    }\r\n\r\n    /**\r\n     * Binds an internal texture to the shader\r\n     * @param name Binding name of the texture\r\n     * @param texture Texture to bind\r\n     */\r\n    public setInternalTexture(name: string, texture: InternalTexture): void {\r\n        this._cs.setInternalTexture(name, texture);\r\n    }\r\n\r\n    /**\r\n     * Binds a storage texture to the shader\r\n     * @param name Binding name of the texture\r\n     * @param texture Texture to bind\r\n     */\r\n    public setStorageTexture(name: string, texture: BaseTexture): void {\r\n        this._cs.setStorageTexture(name, texture);\r\n    }\r\n\r\n    /**\r\n     * Binds an external texture to the shader\r\n     * @param name Binding name of the texture\r\n     * @param texture Texture to bind\r\n     */\r\n    public setExternalTexture(name: string, texture: ExternalTexture): void {\r\n        this._cs.setExternalTexture(name, texture);\r\n    }\r\n\r\n    /**\r\n     * Binds a video texture to the shader (by binding the external texture attached to this video)\r\n     * @param name Binding name of the texture\r\n     * @param texture Texture to bind\r\n     * @returns true if the video texture was successfully bound, else false. false will be returned if the current engine does not support external textures\r\n     */\r\n    public setVideoTexture(name: string, texture: VideoTexture) {\r\n        return this._cs.setVideoTexture(name, texture);\r\n    }\r\n\r\n    /**\r\n     * Binds a uniform buffer to the shader\r\n     * @param name Binding name of the buffer\r\n     * @param buffer Buffer to bind\r\n     */\r\n    public setUniformBuffer(name: string, buffer: UniformBuffer | DataBuffer): void {\r\n        this._cs.setUniformBuffer(name, buffer);\r\n    }\r\n\r\n    /**\r\n     * Binds a storage buffer to the shader\r\n     * @param name Binding name of the buffer\r\n     * @param buffer Buffer to bind\r\n     */\r\n    public setStorageBuffer(name: string, buffer: StorageBuffer | DataBuffer): void {\r\n        this._cs.setStorageBuffer(name, buffer);\r\n    }\r\n\r\n    /**\r\n     * Binds a texture sampler to the shader\r\n     * @param name Binding name of the sampler\r\n     * @param sampler Sampler to bind\r\n     */\r\n    public setTextureSampler(name: string, sampler: TextureSampler): void {\r\n        this._cs.setTextureSampler(name, sampler);\r\n    }\r\n\r\n    public record(skipCreationOfDisabledPasses?: boolean): FrameGraphPass<FrameGraphContext> {\r\n        const pass = this._frameGraph.addPass(this.name);\r\n\r\n        if (this._notSupported) {\r\n            pass.setExecuteFunc(() => {});\r\n        } else {\r\n            pass.setExecuteFunc((context) => {\r\n                this.execute?.(context);\r\n\r\n                for (const key in this._ubo) {\r\n                    const uboEntry = this._ubo[key];\r\n                    if (uboEntry.autoUpdate) {\r\n                        uboEntry.ubo.update();\r\n                    }\r\n                }\r\n\r\n                if (this.indirectDispatch) {\r\n                    context.pushDebugGroup(`Indirect dispatch compute shader (${this.name})`);\r\n                    this._cs.dispatchIndirect(this.indirectDispatch.buffer, this.indirectDispatch.offset);\r\n                    context.popDebugGroup();\r\n                } else {\r\n                    context.pushDebugGroup(`Dispatch compute shader (${this.name})`);\r\n                    this._cs.dispatch(this.dispatchSize.x, this.dispatchSize.y, this.dispatchSize.z);\r\n                    context.popDebugGroup();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!skipCreationOfDisabledPasses) {\r\n            const passDisabled = this._frameGraph.addPass(this.name + \"_disabled\", true);\r\n\r\n            passDisabled.setExecuteFunc(() => {});\r\n        }\r\n\r\n        return pass;\r\n    }\r\n\r\n    public override dispose(): void {\r\n        for (const key in this._ubo) {\r\n            this._ubo[key].ubo.dispose();\r\n        }\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6885, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/computeShaderBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/computeShaderBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph, IComputeShaderPath, IComputeShaderOptions } from \"core/index\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\nimport { FrameGraphComputeShaderTask } from \"../../Tasks/Misc/computeShaderTask\";\r\n\r\n/**\r\n * Block used to execute a compute shader in the frame graph\r\n */\r\nexport class NodeRenderGraphComputeShaderBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphComputeShaderTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeRenderGraphComputeShaderBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param computeShaderPath defines the compute shader path or source\r\n     * @param computeShaderOptions defines the compute shader options\r\n     */\r\n    public constructor(\r\n        name: string,\r\n        frameGraph: FrameGraph,\r\n        scene: Scene,\r\n        computeShaderPath: string | IComputeShaderPath = \"@compute @workgroup_size(1, 1, 1)\\nfn main() {}\",\r\n        computeShaderOptions: IComputeShaderOptions = { bindingsMapping: {} }\r\n    ) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [computeShaderPath, computeShaderOptions];\r\n\r\n        this._addDependenciesInput(\r\n            NodeRenderGraphBlockConnectionPointTypes.Camera | NodeRenderGraphBlockConnectionPointTypes.ShadowLight | NodeRenderGraphBlockConnectionPointTypes.ObjectList\r\n        );\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.ResourceContainer);\r\n\r\n        this._frameGraphTask = new FrameGraphComputeShaderTask(name, frameGraph, computeShaderPath, computeShaderOptions);\r\n    }\r\n\r\n    private _createTask(shaderPath: string | IComputeShaderPath, shaderOptions?: IComputeShaderOptions) {\r\n        const dispatchSize = this._frameGraphTask.dispatchSize;\r\n        const indirectDispatch = this._frameGraphTask.indirectDispatch;\r\n        const execute = this._frameGraphTask.execute;\r\n\r\n        this._frameGraphTask.dispose();\r\n        this._frameGraphTask = new FrameGraphComputeShaderTask(this.name, this._frameGraph, shaderPath, shaderOptions);\r\n\r\n        this._frameGraphTask.dispatchSize = dispatchSize;\r\n        this._frameGraphTask.indirectDispatch = indirectDispatch;\r\n        this._frameGraphTask.execute = execute;\r\n\r\n        this._additionalConstructionParameters = [shaderPath, shaderOptions];\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the execute function\r\n     */\r\n    public get shaderPath(): string | IComputeShaderPath {\r\n        return this._frameGraphTask.computeShader.shaderPath;\r\n    }\r\n\r\n    public set shaderPath(path: string | IComputeShaderPath) {\r\n        this._createTask(path, this.shaderOptions);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the execute when task disabled function\r\n     */\r\n    public get shaderOptions(): IComputeShaderOptions {\r\n        return this._frameGraphTask.computeShader.options;\r\n    }\r\n\r\n    public set shaderOptions(options: IComputeShaderOptions) {\r\n        this._createTask(this.shaderPath, options);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphComputeShaderBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphComputeShaderBlock\", NodeRenderGraphComputeShaderBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,wCAAwC,EAAE,MAAM,+BAA+B,CAAC;AACzF,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,2BAA2B,EAAE,MAAM,oCAAoC,CAAC;;;;;AAK3E,MAAO,iCAAkC,SAAQ,6QAAoB;IAGvE;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;;;OAOG,CACH,YACI,IAAY,EACZ,UAAsB,EACtB,KAAY,EACZ,oBAAiD,iDAAiD,EAClG,uBAA8C;QAAE,eAAe,EAAE,CAAA,CAAE;IAAA,CAAE,CAAA;QAErE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,iCAAiC,GAAG;YAAC,iBAAiB;YAAE,oBAAoB;SAAC,CAAC;QAEnF,IAAI,CAAC,qBAAqB,CACtB,0SAAwC,CAAC,MAAM,GAAG,0SAAwC,CAAC,WAAW,GAAG,0SAAwC,CAAC,UAAU,CAC/J,CAAC;QAEF,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,0SAAwC,CAAC,iBAAiB,CAAC,CAAC;QAE1F,IAAI,CAAC,eAAe,GAAG,IAAI,0RAA2B,CAAC,IAAI,EAAE,UAAU,EAAE,iBAAiB,EAAE,oBAAoB,CAAC,CAAC;IACtH,CAAC;IAEO,WAAW,CAAC,UAAuC,EAAE,aAAqC,EAAA;QAC9F,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;QACvD,MAAM,gBAAgB,GAAG,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC;QAC/D,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QAE7C,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,GAAG,IAAI,0RAA2B,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,aAAa,CAAC,CAAC;QAE/G,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,YAAY,CAAC;QACjD,IAAI,CAAC,eAAe,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzD,IAAI,CAAC,eAAe,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvC,IAAI,CAAC,iCAAiC,GAAG;YAAC,UAAU;YAAE,aAAa;SAAC,CAAC;IACzE,CAAC;IAED;;OAEG,CACH,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,UAAU,CAAC;IACzD,CAAC;IAED,IAAW,UAAU,CAAC,IAAiC,EAAA;QACnD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAC/C,CAAC;IAED;;OAEG,CACH,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,OAAO,CAAC;IACtD,CAAC;IAED,IAAW,aAAa,CAAC,OAA8B,EAAA;QACnD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IAC/C,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,mCAAmC,CAAC;IAC/C,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;CACJ;IAED,6OAAa,EAAC,2CAA2C,EAAE,iCAAiC,CAAC,CAAC"}},
    {"offset": {"line": 6969, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/elbowBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/elbowBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph, NodeRenderGraphBuildState } from \"core/index\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\n\r\n/**\r\n * Block used as a pass through\r\n */\r\nexport class NodeRenderGraphElbowBlock extends NodeRenderGraphBlock {\r\n    /**\r\n     * Creates a new NodeRenderGraphElbowBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"input\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this._outputs[0]._typeConnectionSource = this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphElbowBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        const output = this._outputs[0];\r\n        const input = this._inputs[0];\r\n\r\n        this._propagateInputValueToOutput(input, output);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphElbowBlock\", NodeRenderGraphElbowBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,wCAAwC,EAAE,MAAM,+BAA+B,CAAC;AACzF,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;;;;AAKzD,MAAO,yBAA0B,SAAQ,6QAAoB;IAC/D;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,0SAAwC,CAAC,UAAU,CAAC,CAAC;QACjF,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,0SAAwC,CAAC,YAAY,CAAC,CAAC;QAErF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7D,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,2BAA2B,CAAC;IACvC,CAAC;IAED;;OAEG,CACH,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAChC,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAE9B,IAAI,CAAC,4BAA4B,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACrD,CAAC;CACJ;IAED,6OAAa,EAAC,mCAAmC,EAAE,yBAAyB,CAAC,CAAC"}},
    {"offset": {"line": 7019, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Misc/executeTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Misc/executeTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphContext, FrameGraphPass } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\n\r\n/**\r\n * Task used to execute a custom function.\r\n */\r\nexport class FrameGraphExecuteTask extends FrameGraphTask {\r\n    /**\r\n     * The function to execute.\r\n     */\r\n    public func: (context: FrameGraphContext) => void;\r\n\r\n    /**\r\n     * The function to execute when the task is disabled (optional).\r\n     */\r\n    public funcDisabled?: (context: FrameGraphContext) => void;\r\n\r\n    /**\r\n     * Custom readiness check (optional).\r\n     */\r\n    public customIsReady?: () => boolean;\r\n\r\n    public override isReady(): boolean {\r\n        return !this.customIsReady || this.customIsReady();\r\n    }\r\n\r\n    /**\r\n     * Creates a new execute task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n    }\r\n\r\n    public record(): FrameGraphPass<FrameGraphContext> {\r\n        if (!this.func) {\r\n            throw new Error(\"FrameGraphExecuteTask: Execute task must have a function.\");\r\n        }\r\n\r\n        const pass = this._frameGraph.addPass(this.name);\r\n\r\n        pass.setExecuteFunc((context) => {\r\n            this.func(context);\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setExecuteFunc((context) => {\r\n            this.funcDisabled?.(context);\r\n        });\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;;AAKhD,MAAO,qBAAsB,SAAQ,yPAAc;IAgBrC,OAAO,GAAA;QACnB,OAAO,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;IACvD,CAAC;IAED;;;;OAIG,CACH,YAAY,IAAY,EAAE,UAAsB,CAAA;QAC5C,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IAC5B,CAAC;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;QACjF,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEjD,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;QAE7E,YAAY,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YACpC,IAAI,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 7055, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/executeBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/executeBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph, FrameGraphContext } from \"core/index\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\nimport { FrameGraphExecuteTask } from \"../../Tasks/Misc/executeTask\";\r\n\r\n/**\r\n * Block used to execute a custom function in the frame graph\r\n */\r\nexport class NodeRenderGraphExecuteBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphExecuteTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeRenderGraphExecuteBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._addDependenciesInput(\r\n            NodeRenderGraphBlockConnectionPointTypes.Camera | NodeRenderGraphBlockConnectionPointTypes.ShadowLight | NodeRenderGraphBlockConnectionPointTypes.ObjectList\r\n        );\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.ResourceContainer);\r\n\r\n        this._frameGraphTask = new FrameGraphExecuteTask(name, frameGraph);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the execute function\r\n     */\r\n    public get func(): (context: FrameGraphContext) => void {\r\n        return this._frameGraphTask.func;\r\n    }\r\n\r\n    public set func(func: (context: FrameGraphContext) => void) {\r\n        this._frameGraphTask.func = func;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the execute when task disabled function\r\n     */\r\n    public get funcDisabled(): ((context: FrameGraphContext) => void) | undefined {\r\n        return this._frameGraphTask.funcDisabled;\r\n    }\r\n\r\n    public set funcDisabled(func: ((context: FrameGraphContext) => void) | undefined) {\r\n        this._frameGraphTask.funcDisabled = func;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphExecuteBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphExecuteBlock\", NodeRenderGraphExecuteBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,wCAAwC,EAAE,MAAM,+BAA+B,CAAC;AACzF,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,qBAAqB,EAAE,MAAM,8BAA8B,CAAC;;;;;AAK/D,MAAO,2BAA4B,SAAQ,6QAAoB;IAGjE;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,qBAAqB,CACtB,0SAAwC,CAAC,MAAM,GAAG,0SAAwC,CAAC,WAAW,GAAG,0SAAwC,CAAC,UAAU,CAC/J,CAAC;QAEF,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,0SAAwC,CAAC,iBAAiB,CAAC,CAAC;QAE1F,IAAI,CAAC,eAAe,GAAG,IAAI,8QAAqB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACvE,CAAC;IAED;;OAEG,CACH,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;IACrC,CAAC;IAED,IAAW,IAAI,CAAC,IAA0C,EAAA;QACtD,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC;IACrC,CAAC;IAED;;OAEG,CACH,IAAW,YAAY,GAAA;QACnB,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;IAC7C,CAAC;IAED,IAAW,YAAY,CAAC,IAAwD,EAAA;QAC5E,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC;IAC7C,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,6BAA6B,CAAC;IACzC,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;CACJ;IAED,6OAAa,EAAC,qCAAqC,EAAE,2BAA2B,CAAC,CAAC"}},
    {"offset": {"line": 7117, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/resourceContainerBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/resourceContainerBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../nodeRenderGraphBlock\";\r\n\r\n/**\r\n * Block used as a resource (textures, buffers) container\r\n */\r\nexport class NodeRenderGraphResourceContainerBlock extends NodeRenderGraphBlock {\r\n    /**\r\n     * Creates a new NodeRenderGraphResourceContainerBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"resource0\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource1\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource2\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource3\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource4\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource5\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource6\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"resource7\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.ResourceContainer);\r\n\r\n        this.resource0.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource1.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource2.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource3.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource4.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource5.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource6.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n        this.resource7.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer | NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphResourceContainerBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the resource0 component\r\n     */\r\n    public get resource0(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource1 component\r\n     */\r\n    public get resource1(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource2 component\r\n     */\r\n    public get resource2(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource3 component\r\n     */\r\n    public get resource3(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource4 component\r\n     */\r\n    public get resource4(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource5 component\r\n     */\r\n    public get resource5(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource6 component\r\n     */\r\n    public get resource6(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the resource7 component\r\n     */\r\n    public get resource7(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[7];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphResourceContainerBlock\", NodeRenderGraphResourceContainerBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7210, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/blurTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/blurTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderContext, FrameGraphRenderPass } from \"core/index\";\r\nimport { ThinBlurPostProcess } from \"core/PostProcesses/thinBlurPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * Task which applies a blur post process.\r\n */\r\nexport class FrameGraphBlurTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinBlurPostProcess;\r\n\r\n    /**\r\n     * Constructs a new blur task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph Frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the blur effect.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinBlurPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinBlurPostProcess(name, frameGraph.engine, new Vector2(1, 0), 10));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.textureWidth = this._outputWidth; // should be _sourceWidth, but to avoid a breaking change, we use _outputWidth (BlurPostProcess uses _outputTexture to get width/height)\r\n        this.postProcess.textureHeight = this._outputHeight; // same as above for height\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,mBAAmB,EAAE,sDAA+C;AAC7E,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,OAAO,EAAE,sCAA+B;;;;AAK3C,MAAO,kBAAmB,SAAQ,+RAAyB;IAG7D;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAqC,CAAA;QACnF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,sQAAmB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACxH,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,wIAAwI;QAC3L,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,2BAA2B;QAEhF,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 7240, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Layers/baseLayerTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Layers/baseLayerTask.ts"],"sourcesContent":["import type {\r\n    FrameGraph,\r\n    FrameGraphTextureHandle,\r\n    Scene,\r\n    FrameGraphTextureCreationOptions,\r\n    Effect,\r\n    ThinBlurPostProcess,\r\n    AbstractEngine,\r\n    Nullable,\r\n    Observer,\r\n    RenderingGroupInfo,\r\n    ThinEffectLayer,\r\n    FrameGraphRenderPass,\r\n    FrameGraphRenderContext,\r\n} from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { FrameGraphObjectRendererTask } from \"../Rendering/objectRendererTask\";\r\nimport { FrameGraphClearTextureTask } from \"../Texture/clearTextureTask\";\r\nimport { FrameGraphBlurTask } from \"../PostProcesses/blurTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTextureManager } from \"../../frameGraphTextureManager\";\r\nimport { getDimensionsFromTextureSize } from \"../../../Materials/Textures/textureCreationOptions\";\r\nimport { FrameGraphPostProcessTask } from \"../PostProcesses/postProcessTask\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { ThinGlowBlurPostProcess } from \"../../../Layers/thinEffectLayer\";\r\nimport { FrameGraphExecuteTask } from \"../Misc/executeTask\";\r\n\r\nclass FrameGraphGlowBlurTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinGlowBlurPostProcess;\r\n\r\n    /**\r\n     * Constructs a new glow blur task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the glow blur effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinGlowBlurPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinGlowBlurPostProcess(name, frameGraph.engine, new Vector2(1, 0), 1));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.textureWidth = this._outputWidth;\r\n        this.postProcess.textureHeight = this._outputHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphBaseLayerTask extends FrameGraphTask {\r\n    /**\r\n     * The target texture to apply the effect layer to.\r\n     * The effect will be blended with the contents of this texture.\r\n     */\r\n    public targetTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The object renderer task used to render the objects in the texture to which the layer will be applied.\r\n     * This is needed because the layer may have to inject code in the rendering manager used by object renderer task.\r\n     */\r\n    public objectRendererTask: FrameGraphObjectRendererTask;\r\n\r\n    /**\r\n     * The layer texture to render the effect into.\r\n     * If not provided, a default texture will be created.\r\n     */\r\n    public layerTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture of the task (same as targetTexture, but the handle will be different).\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The layer object. Use this object to update the layer properties.\r\n     */\r\n    public readonly layer: ThinEffectLayer;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(name: string) {\r\n        this._name = name;\r\n        if (this._blurX) {\r\n            for (let i = 0; i < this._blurX.length; i++) {\r\n                this._blurX[i].name = `${name} Blur X${i}`;\r\n                this._blurY[i].name = `${name} Blur Y${i}`;\r\n            }\r\n        }\r\n\r\n        if (this._clearLayerTextures) {\r\n            this._clearLayerTextures.name = name + \" Clear Layer\";\r\n        }\r\n\r\n        if (this._objectRendererForLayer) {\r\n            this._objectRendererForLayer.name = name + \" Render to Layer\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the object renderer used to render the layer.\r\n     */\r\n    public get objectRendererForLayer() {\r\n        return this._objectRendererForLayer;\r\n    }\r\n\r\n    protected readonly _scene: Scene;\r\n    protected readonly _engine: AbstractEngine;\r\n    protected readonly _clearLayerTextures: FrameGraphClearTextureTask;\r\n    protected readonly _objectRendererForLayer: FrameGraphObjectRendererTask;\r\n    protected readonly _blurX: Array<FrameGraphBlurTask | FrameGraphGlowBlurTask> = [];\r\n    protected readonly _blurY: Array<FrameGraphBlurTask | FrameGraphGlowBlurTask> = [];\r\n    private readonly _onBeforeBlurTask: Nullable<FrameGraphExecuteTask> = null;\r\n    private readonly _onAfterBlurTask: Nullable<FrameGraphExecuteTask> = null;\r\n    private _onBeforeObservableObserver: Nullable<Observer<number>> = null;\r\n    private _onAfterObservableObserver: Nullable<Observer<number>> = null;\r\n    private _onAfterRenderingGroupObserver: Nullable<Observer<RenderingGroupInfo>> = null;\r\n\r\n    /**\r\n     * Constructs a new layer task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param scene The scene to render the layer in.\r\n     * @param layer The layer.\r\n     * @param numBlurPasses The number of blur passes applied by the layer.\r\n     * @param useCustomBlur If true, the layer will use a custom blur post process instead of the default one.\r\n     * @param _setRenderTargetDepth If true, the task will set the render target depth.\r\n     * @param _notifyBlurObservable If true, the task will notify before and after blurring occurs.\r\n     */\r\n    constructor(\r\n        name: string,\r\n        frameGraph: FrameGraph,\r\n        scene: Scene,\r\n        layer: ThinEffectLayer,\r\n        numBlurPasses: number,\r\n        useCustomBlur = false,\r\n        private _setRenderTargetDepth = false,\r\n        private _notifyBlurObservable = false\r\n    ) {\r\n        super(name, frameGraph);\r\n\r\n        this._scene = scene;\r\n        this._engine = scene.getEngine();\r\n\r\n        this.layer = layer;\r\n        for (let i = 0; i < numBlurPasses; i++) {\r\n            if (useCustomBlur) {\r\n                this._blurX.push(new FrameGraphGlowBlurTask(`${name} Blur X${i}`, this._frameGraph, this.layer._postProcesses[1 + i * 2 + 0] as ThinGlowBlurPostProcess));\r\n                this._blurY.push(new FrameGraphGlowBlurTask(`${name} Blur Y${i}`, this._frameGraph, this.layer._postProcesses[1 + i * 2 + 1] as ThinGlowBlurPostProcess));\r\n            } else {\r\n                this._blurX.push(new FrameGraphBlurTask(`${name} Blur X${i}`, this._frameGraph, this.layer._postProcesses[i * 2 + 0] as ThinBlurPostProcess));\r\n                this._blurY.push(new FrameGraphBlurTask(`${name} Blur Y${i}`, this._frameGraph, this.layer._postProcesses[i * 2 + 1] as ThinBlurPostProcess));\r\n            }\r\n        }\r\n\r\n        this._clearLayerTextures = new FrameGraphClearTextureTask(name + \" Clear Layer\", frameGraph);\r\n        this._clearLayerTextures.clearColor = true;\r\n        this._clearLayerTextures.clearDepth = true;\r\n\r\n        this._objectRendererForLayer = new FrameGraphObjectRendererTask(name + \" Render to Layer\", frameGraph, scene, undefined, this.layer.objectRenderer);\r\n\r\n        if (this._notifyBlurObservable) {\r\n            this._onBeforeBlurTask = new FrameGraphExecuteTask(name + \" On Before Blur\", frameGraph);\r\n            this._onAfterBlurTask = new FrameGraphExecuteTask(name + \" On After Blur\", frameGraph);\r\n\r\n            this._onBeforeBlurTask.func = () => {\r\n                if (this.layer.onBeforeBlurObservable.hasObservers()) {\r\n                    this.layer.onBeforeBlurObservable.notifyObservers(this.layer);\r\n                }\r\n            };\r\n            this._onAfterBlurTask.func = () => {\r\n                if (this.layer.onAfterBlurObservable.hasObservers()) {\r\n                    this.layer.onAfterBlurObservable.notifyObservers(this.layer);\r\n                }\r\n            };\r\n        }\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this._objectRendererForLayer.isReady() && this.layer.isLayerReady();\r\n    }\r\n\r\n    public record() {\r\n        if (this.targetTexture === undefined || this.objectRendererTask === undefined) {\r\n            throw new Error(`${this.constructor.name} \"${this.name}\": targetTexture and objectRendererTask are required`);\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture);\r\n\r\n        // Uses the layerTexture or creates a color texture to render the layer to\r\n        let textureSize: {\r\n            width: number;\r\n            height: number;\r\n        };\r\n        let textureCreationOptions: FrameGraphTextureCreationOptions;\r\n\r\n        let colorLayerOutput: FrameGraphTextureHandle;\r\n\r\n        if (this.layerTexture) {\r\n            colorLayerOutput = this.layerTexture;\r\n            textureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.layerTexture);\r\n            textureSize = getDimensionsFromTextureSize(textureCreationOptions.size);\r\n            textureCreationOptions.size = textureSize;\r\n        } else {\r\n            const targetTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.targetTexture);\r\n            const fixedTextureSize = this.layer._options.mainTextureFixedSize ? Math.max(2, this.layer._options.mainTextureFixedSize) : 0;\r\n\r\n            textureSize = getDimensionsFromTextureSize(targetTextureCreationOptions.size);\r\n            textureSize.width = fixedTextureSize || Math.floor(textureSize.width * (this.layer._options.mainTextureRatio || 0.1)) || 1;\r\n            textureSize.height = fixedTextureSize || Math.floor(textureSize.height * (this.layer._options.mainTextureRatio || 0.1)) || 1;\r\n\r\n            textureCreationOptions = {\r\n                size: textureSize,\r\n                options: {\r\n                    createMipMaps: false,\r\n                    types: [this.layer._options.mainTextureType],\r\n                    formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                    samples: 1,\r\n                    useSRGBBuffers: [false],\r\n                    creationFlags: [0],\r\n                },\r\n                sizeIsPercentage: this.layer._options.mainTextureFixedSize ? false : targetTextureCreationOptions.sizeIsPercentage,\r\n            };\r\n            colorLayerOutput = this._frameGraph.textureManager.createRenderTargetTexture(`${this.name} Color`, textureCreationOptions);\r\n        }\r\n\r\n        // Creates a depth texture, used to render objects to the layer\r\n        // We don't reuse the depth texture of the objectRendererTask, as the size of the layer texture will generally be different (smaller).\r\n        const textureDepthCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: textureSize,\r\n            options: FrameGraphTextureManager.CloneTextureOptions(textureCreationOptions.options),\r\n            sizeIsPercentage: textureCreationOptions.sizeIsPercentage,\r\n        };\r\n\r\n        textureDepthCreationOptions.options.formats![0] = Constants.TEXTUREFORMAT_DEPTH32_FLOAT;\r\n\r\n        const depthLayerOutput = this._frameGraph.textureManager.createRenderTargetTexture(`${this.name} Depth`, textureDepthCreationOptions);\r\n\r\n        // Clears the textures\r\n        this._clearLayerTextures.targetTexture = colorLayerOutput;\r\n        this._clearLayerTextures.depthTexture = depthLayerOutput;\r\n        this._clearLayerTextures.color = this.layer.neutralColor;\r\n        this._clearLayerTextures.clearDepth = true;\r\n\r\n        const clearTaskPass = this._clearLayerTextures.record();\r\n\r\n        // Renders the objects to the layer texture\r\n        this._objectRendererForLayer.targetTexture = this._clearLayerTextures.outputTexture;\r\n        this._objectRendererForLayer.depthTexture = this._clearLayerTextures.outputDepthTexture;\r\n        this._objectRendererForLayer.camera = this.objectRendererTask.camera;\r\n        this._objectRendererForLayer.objectList = this.objectRendererTask.objectList;\r\n        this._objectRendererForLayer.disableShadows = true;\r\n\r\n        const objectRendererForLayerTaskPass = this._objectRendererForLayer.record();\r\n\r\n        // Blurs the layer color texture\r\n        let blurTextureType = 0;\r\n        if (this._engine.getCaps().textureHalfFloatRender) {\r\n            blurTextureType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n        } else {\r\n            blurTextureType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n        }\r\n\r\n        textureCreationOptions.options.types![0] = blurTextureType;\r\n\r\n        const blurTextureSizeRatio = (this.layer._options as any).blurTextureSizeRatio !== undefined ? (this.layer._options as any).blurTextureSizeRatio || 0.1 : undefined;\r\n        if (blurTextureSizeRatio !== undefined) {\r\n            textureSize.width = Math.floor(textureSize.width * blurTextureSizeRatio) || 1;\r\n            textureSize.height = Math.floor(textureSize.height * blurTextureSizeRatio) || 1;\r\n        }\r\n\r\n        const onBeforeBlurPass = this._onBeforeBlurTask?.record();\r\n\r\n        const blurPasses: FrameGraphRenderPass[] = [];\r\n\r\n        for (let i = 0; i < this._blurX.length; i++) {\r\n            const blurXTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurX[i].name, textureCreationOptions);\r\n\r\n            this._blurX[i].sourceTexture = i === 0 ? this._objectRendererForLayer.outputTexture : this._blurY[i - 1].outputTexture;\r\n            this._blurX[i].sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._blurX[i].targetTexture = blurXTextureHandle;\r\n            blurPasses.push(this._blurX[i].record(true));\r\n\r\n            const blurYTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurY[i].name, textureCreationOptions);\r\n\r\n            this._blurY[i].sourceTexture = this._blurX[i].outputTexture;\r\n            this._blurY[i].sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._blurY[i].targetTexture = blurYTextureHandle;\r\n            blurPasses.push(this._blurY[i].record(true));\r\n\r\n            textureSize.width = textureSize.width >> 1;\r\n            textureSize.height = textureSize.height >> 1;\r\n        }\r\n\r\n        const onAfterBlurPass = this._onAfterBlurTask?.record();\r\n\r\n        // Enables stencil (if stencil is needed) when rendering objects to the main texture\r\n        // We also disable the internal passes if the layer should not render\r\n        this.objectRendererTask.objectRenderer.onBeforeRenderObservable.remove(this._onBeforeObservableObserver);\r\n        this._onBeforeObservableObserver = this.objectRendererTask.objectRenderer.onBeforeRenderObservable.add(() => {\r\n            const shouldRender = this.layer.shouldRender();\r\n\r\n            clearTaskPass.disabled = !shouldRender;\r\n            objectRendererForLayerTaskPass.disabled = !shouldRender;\r\n            if (onBeforeBlurPass) {\r\n                onBeforeBlurPass.disabled = !shouldRender;\r\n            }\r\n            for (let i = 0; i < blurPasses.length; i++) {\r\n                blurPasses[i].disabled = !shouldRender;\r\n            }\r\n            if (onAfterBlurPass) {\r\n                onAfterBlurPass.disabled = !shouldRender;\r\n            }\r\n\r\n            if (shouldRender && this.layer.needStencil()) {\r\n                this._engine.setStencilBuffer(true);\r\n                this._engine.setStencilFunctionReference(1);\r\n            }\r\n        });\r\n\r\n        this.objectRendererTask.objectRenderer.onAfterRenderObservable.remove(this._onAfterObservableObserver);\r\n        this._onAfterObservableObserver = this.objectRendererTask.objectRenderer.onAfterRenderObservable.add(() => {\r\n            if (this.layer.shouldRender() && this.layer.needStencil()) {\r\n                this._engine.setStencilBuffer(false);\r\n            }\r\n        });\r\n\r\n        // Composes the layer with the target texture\r\n        this.layer.bindTexturesForCompose = undefined as any;\r\n\r\n        this._clearAfterRenderingGroupObserver();\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        for (let i = 0; i < this._blurY.length; i++) {\r\n            pass.addDependencies(this._blurY[i].outputTexture);\r\n        }\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        if (this._setRenderTargetDepth) {\r\n            pass.setRenderTargetDepth(this.objectRendererTask.depthTexture);\r\n        }\r\n        pass.setExecuteFunc((context) => {\r\n            context.setTextureSamplingMode(this._blurY[this._blurY.length - 1].targetTexture!, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n\r\n            if (!this.layer.bindTexturesForCompose) {\r\n                this.layer.bindTexturesForCompose = (effect: Effect) => {\r\n                    for (let i = 0; i < this._blurY.length; i++) {\r\n                        context.bindTextureHandle(effect, `textureSampler${i > 0 ? i + 1 : \"\"}`, this._blurY[i].outputTexture);\r\n                    }\r\n                };\r\n            }\r\n\r\n            if (this.layer._options.renderingGroupId !== -1) {\r\n                if (!this._onAfterRenderingGroupObserver) {\r\n                    this._onAfterRenderingGroupObserver = this._scene.onAfterRenderingGroupObservable.add((info) => {\r\n                        if (\r\n                            !this.layer.shouldRender() ||\r\n                            info.renderingGroupId !== this.layer._options.renderingGroupId ||\r\n                            info.renderingManager !== this.objectRendererTask.objectRenderer.renderingManager\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        this._objectRendererForLayer.objectList = this.objectRendererTask.objectList;\r\n                        context.saveDepthStates();\r\n                        context.setDepthStates(false, false);\r\n                        context._applyRenderTarget();\r\n                        this.layer.compose();\r\n                        context.restoreDepthStates();\r\n                    });\r\n                }\r\n            } else {\r\n                this._clearAfterRenderingGroupObserver();\r\n                if (this.layer.shouldRender()) {\r\n                    this._objectRendererForLayer.objectList = this.objectRendererTask.objectList; // in case the object list has changed in objectRendererTask\r\n\r\n                    context.setDepthStates(false, false);\r\n                    context._applyRenderTarget();\r\n\r\n                    this.layer.compose();\r\n                }\r\n            }\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        if (this._setRenderTargetDepth) {\r\n            passDisabled.setRenderTargetDepth(this.objectRendererTask.depthTexture);\r\n        }\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n\r\n    private _clearAfterRenderingGroupObserver() {\r\n        this._scene.onAfterRenderingGroupObservable.remove(this._onAfterRenderingGroupObserver);\r\n        this._onAfterRenderingGroupObserver = null;\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._clearAfterRenderingGroupObserver();\r\n        this._clearLayerTextures.dispose();\r\n        this._objectRendererForLayer.dispose();\r\n        this._onBeforeBlurTask?.dispose();\r\n        this._onAfterBlurTask?.dispose();\r\n        this.layer.dispose();\r\n        for (let i = 0; i < this._blurX.length; i++) {\r\n            this._blurX[i].dispose();\r\n            this._blurY[i].dispose();\r\n        }\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7556, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Layers/glowLayerTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Layers/glowLayerTask.ts"],"sourcesContent":["import type { FrameGraph, Scene, IThinGlowLayerOptions } from \"core/index\";\r\nimport { ThinGlowLayer } from \"core/Layers/thinGlowLayer\";\r\nimport { FrameGraphBaseLayerTask } from \"./baseLayerTask\";\r\n\r\n/**\r\n * Task which applies a glowing effect to a texture.\r\n */\r\nexport class FrameGraphGlowLayerTask extends FrameGraphBaseLayerTask {\r\n    /**\r\n     * The glow layer object. Use this object to update the glow layer properties (e.g. intensity, blur kernel size).\r\n     */\r\n    public override readonly layer: ThinGlowLayer;\r\n\r\n    /**\r\n     * Constructs a new glow layer task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param scene The scene to render the glow layer in.\r\n     * @param options Options for the glow layer.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene, options?: IThinGlowLayerOptions) {\r\n        super(name, frameGraph, scene, new ThinGlowLayer(name, scene, options, true), 2);\r\n\r\n        this.layer._renderPassId = this._objectRendererForLayer.objectRenderer.renderPassId;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,yCAAkC;AAC1D,OAAO,EAAE,uBAAuB,EAAE,MAAM,iBAAiB,CAAC;;;AAKpD,MAAO,uBAAwB,SAAQ,oRAAuB;IAMhE;;;;;;OAMG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,OAA+B,CAAA;QAC3F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,mPAAa,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QAEjF,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,YAAY,CAAC;IACxF,CAAC;CACJ"}},
    {"offset": {"line": 7580, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Layers/glowLayerBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Layers/glowLayerBlock.ts"],"sourcesContent":["import type { Scene, NodeRenderGraphBuildState, FrameGraph, FrameGraphTextureHandle, NodeRenderGraphConnectionPoint, FrameGraphObjectRendererTask } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointDirection } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphGlowLayerTask } from \"core/FrameGraph/Tasks/Layers/glowLayerTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { NodeRenderGraphConnectionPointCustomObject } from \"../../nodeRenderGraphConnectionPointCustomObject\";\r\nimport { NodeRenderGraphBaseObjectRendererBlock } from \"../Rendering/baseObjectRendererBlock\";\r\n\r\n/**\r\n * Block that implements the glow layer\r\n */\r\nexport class NodeRenderGraphGlowLayerBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphGlowLayerTask;\r\n\r\n    public override _additionalConstructionParameters: [boolean, number, number | undefined, number];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphGlowLayerBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param ldrMerge Forces the merge step to be done in ldr (clamp values &gt; 1). Default: false\r\n     * @param layerTextureRatio multiplication factor applied to the main texture size to compute the size of the layer render target texture (default: 0.5)\r\n     * @param layerTextureFixedSize defines the fixed size of the layer render target texture. Takes precedence over layerTextureRatio if provided (default: undefined)\r\n     * @param layerTextureType defines the type of the layer texture (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    public constructor(\r\n        name: string,\r\n        frameGraph: FrameGraph,\r\n        scene: Scene,\r\n        ldrMerge = false,\r\n        layerTextureRatio = 0.5,\r\n        layerTextureFixedSize?: number,\r\n        layerTextureType = Constants.TEXTURETYPE_UNSIGNED_BYTE\r\n    ) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [ldrMerge, layerTextureRatio, layerTextureFixedSize, layerTextureType];\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"layer\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\r\n            \"objectRenderer\",\r\n            NodeRenderGraphBlockConnectionPointTypes.Object,\r\n            false,\r\n            new NodeRenderGraphConnectionPointCustomObject(\r\n                \"objectRenderer\",\r\n                this,\r\n                NodeRenderGraphConnectionPointDirection.Input,\r\n                NodeRenderGraphBaseObjectRendererBlock,\r\n                \"NodeRenderGraphBaseObjectRendererBlock\"\r\n            )\r\n        );\r\n        this._addDependenciesInput();\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBufferDepthStencil);\r\n        this.layer.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n\r\n        this.output._typeConnectionSource = this.target;\r\n\r\n        this._frameGraphTask = new FrameGraphGlowLayerTask(this.name, this._frameGraph, this._scene, {\r\n            ldrMerge,\r\n            mainTextureRatio: layerTextureRatio,\r\n            mainTextureFixedSize: layerTextureFixedSize,\r\n            mainTextureType: layerTextureType,\r\n        });\r\n    }\r\n\r\n    private _createTask(ldrMerge: boolean, layerTextureRatio: number, layerTextureFixedSize: number, layerTextureType: number) {\r\n        const blurKernelSize = this.blurKernelSize;\r\n        const intensity = this.intensity;\r\n\r\n        this._frameGraphTask?.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphGlowLayerTask(this.name, this._frameGraph, this._scene, {\r\n            ldrMerge,\r\n            mainTextureRatio: layerTextureRatio,\r\n            mainTextureFixedSize: layerTextureFixedSize,\r\n            mainTextureType: layerTextureType,\r\n        });\r\n\r\n        this.blurKernelSize = blurKernelSize;\r\n        this.intensity = intensity;\r\n\r\n        this._additionalConstructionParameters = [ldrMerge, layerTextureRatio, layerTextureFixedSize, layerTextureType];\r\n    }\r\n\r\n    /** Forces the merge step to be done in ldr (clamp values &gt; 1). Default: false */\r\n    @editableInPropertyPage(\"LDR merge\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get ldrMerge() {\r\n        return this._frameGraphTask.layer.ldrMerge;\r\n    }\r\n\r\n    public set ldrMerge(value: boolean) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(value, options.mainTextureRatio, options.mainTextureFixedSize, options.mainTextureType);\r\n    }\r\n\r\n    /** Multiplication factor applied to the main texture size to compute the size of the layer render target texture */\r\n    @editableInPropertyPage(\"Layer texture ratio\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get layerTextureRatio() {\r\n        return this._frameGraphTask.layer._options.mainTextureRatio;\r\n    }\r\n\r\n    public set layerTextureRatio(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.ldrMerge, value, options.mainTextureFixedSize, options.mainTextureType);\r\n    }\r\n\r\n    /** Defines the fixed size of the layer render target texture. Takes precedence over layerTextureRatio if provided */\r\n    @editableInPropertyPage(\"Layer texture fixed size\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get layerTextureFixedSize() {\r\n        return this._frameGraphTask.layer._options.mainTextureFixedSize;\r\n    }\r\n\r\n    public set layerTextureFixedSize(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.ldrMerge, options.mainTextureRatio, value, options.mainTextureType);\r\n    }\r\n\r\n    /** Defines the type of the layer texture */\r\n    @editableInPropertyPage(\"Layer texture type\", PropertyTypeForEdition.TextureType, \"PROPERTIES\")\r\n    public get layerTextureType() {\r\n        return this._frameGraphTask.layer._options.mainTextureType;\r\n    }\r\n\r\n    public set layerTextureType(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.ldrMerge, options.mainTextureRatio, options.mainTextureFixedSize, value);\r\n    }\r\n\r\n    /** How big is the kernel of the blur texture */\r\n    @editableInPropertyPage(\"Blur kernel size\", PropertyTypeForEdition.Int, \"PROPERTIES\", { min: 1, max: 256 })\r\n    public get blurKernelSize() {\r\n        return this._frameGraphTask.layer.blurKernelSize;\r\n    }\r\n\r\n    public set blurKernelSize(value: number) {\r\n        this._frameGraphTask.layer.blurKernelSize = value;\r\n    }\r\n\r\n    /** The intensity of the glow */\r\n    @editableInPropertyPage(\"Intensity\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 5 })\r\n    public get intensity() {\r\n        return this._frameGraphTask.layer.intensity;\r\n    }\r\n\r\n    public set intensity(value: number) {\r\n        this._frameGraphTask.layer.intensity = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphGlowLayerBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the target texture input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the layer texture input component\r\n     */\r\n    public get layer(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the objectRenderer input component\r\n     */\r\n    public get objectRenderer(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.layerTexture = this.layer.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.objectRendererTask = this.objectRenderer.connectedPoint?.value as FrameGraphObjectRendererTask;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.blurKernelSize = ${this.blurKernelSize};`);\r\n        codes.push(`${this._codeVariableName}.intensity = ${this.intensity};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.blurKernelSize = this.blurKernelSize;\r\n        serializationObject.intensity = this.intensity;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.blurKernelSize = serializationObject.blurKernelSize;\r\n        this.intensity = serializationObject.intensity;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphGlowLayerBlock\", NodeRenderGraphGlowLayerBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7777, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Layers/highlightLayerTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Layers/highlightLayerTask.ts"],"sourcesContent":["import type { FrameGraph, Scene, IThinHighlightLayerOptions } from \"core/index\";\r\nimport { ThinHighlightLayer } from \"core/Layers/thinHighlightLayer\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphBaseLayerTask } from \"./baseLayerTask\";\r\nimport { HasStencilAspect } from \"core/Materials/Textures/textureHelper.functions\";\r\n\r\n/**\r\n * Task which applies a highlight effect to a texture.\r\n */\r\nexport class FrameGraphHighlightLayerTask extends FrameGraphBaseLayerTask {\r\n    /**\r\n     * The highlight layer object. Use this object to update the highlight layer properties.\r\n     */\r\n    public override readonly layer: ThinHighlightLayer;\r\n\r\n    /**\r\n     * Constructs a new highlight layer task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param scene The scene to render the highlight layer in.\r\n     * @param options Options for the highlight layer.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, scene: Scene, options?: IThinHighlightLayerOptions) {\r\n        const alphaBlendingMode = options?.alphaBlendingMode ?? Constants.ALPHA_COMBINE;\r\n\r\n        super(name, frameGraph, scene, new ThinHighlightLayer(name, scene, options, true), 1, alphaBlendingMode === Constants.ALPHA_COMBINE, true, true);\r\n    }\r\n\r\n    public override record() {\r\n        if (!this.objectRendererTask.depthTexture) {\r\n            throw new Error(`FrameGraphHighlightLayerTask \"${this.name}\": objectRendererTask must have a depthTexture input`);\r\n        }\r\n\r\n        const depthTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.objectRendererTask.depthTexture);\r\n        if (!depthTextureCreationOptions.options.formats || !HasStencilAspect(depthTextureCreationOptions.options.formats[0])) {\r\n            throw new Error(`FrameGraphHighlightLayerTask \"${this.name}\": objectRendererTask depthTexture must have a stencil aspect`);\r\n        }\r\n\r\n        super.record();\r\n\r\n        this.layer._mainObjectRendererRenderPassId = this.objectRendererTask.objectRenderer.renderPassId;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,kBAAkB,EAAE,8CAAuC;AAEpE,OAAO,EAAE,uBAAuB,EAAE,MAAM,iBAAiB,CAAC;AAC1D,OAAO,EAAE,gBAAgB,EAAE,+DAAwD;;;;AAK7E,MAAO,4BAA6B,SAAQ,oRAAuB;IAMrE;;;;;;OAMG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,OAAoC,CAAA;QAChG,MAAM,iBAAiB,GAAG,OAAO,EAAE,iBAAiB,IAAI,SAAS,CAAC,aAAa,CAAC;QAEhF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,6PAAkB,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,iBAAiB,KAAK,GAAA,MAAS,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACrJ,CAAC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;YACxC,MAAM,IAAI,KAAK,CAAC,CAAA,8BAAA,EAAiC,IAAI,CAAC,IAAI,CAAA,oDAAA,CAAsD,CAAC,CAAC;QACtH,CAAC;QAED,MAAM,2BAA2B,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;QACpI,IAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,OAAO,IAAI,KAAC,kRAAgB,EAAC,2BAA2B,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACpH,MAAM,IAAI,KAAK,CAAC,CAAA,8BAAA,EAAiC,IAAI,CAAC,IAAI,CAAA,6DAAA,CAA+D,CAAC,CAAC;QAC/H,CAAC;QAED,KAAK,CAAC,MAAM,EAAE,CAAC;QAEf,IAAI,CAAC,KAAK,CAAC,+BAA+B,GAAG,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,YAAY,CAAC;IACrG,CAAC;CACJ"}},
    {"offset": {"line": 7814, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Layers/highlightLayerBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Layers/highlightLayerBlock.ts"],"sourcesContent":["import type { Scene, NodeRenderGraphBuildState, FrameGraph, FrameGraphTextureHandle, NodeRenderGraphConnectionPoint, FrameGraphObjectRendererTask } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointDirection } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphHighlightLayerTask } from \"core/FrameGraph/Tasks/Layers/highlightLayerTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { NodeRenderGraphConnectionPointCustomObject } from \"../../nodeRenderGraphConnectionPointCustomObject\";\r\nimport { NodeRenderGraphBaseObjectRendererBlock } from \"../Rendering/baseObjectRendererBlock\";\r\n\r\n/**\r\n * Block that implements the highlight layer\r\n */\r\nexport class NodeRenderGraphHighlightLayerBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphHighlightLayerTask;\r\n\r\n    public override _additionalConstructionParameters: [number, number | undefined, number, boolean, number];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphHighlightLayerBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param layerTextureRatio multiplication factor applied to the main texture size to compute the size of the layer render target texture (default: 0.5)\r\n     * @param layerTextureFixedSize defines the fixed size of the layer render target texture. Takes precedence over layerTextureRatio if provided (default: undefined)\r\n     * @param blurTextureSizeRatio defines the factor to apply to the layer texture size to create the blur textures (default: 0.5)\r\n     * @param isStroke should we display highlight as a solid stroke? (default: false)\r\n     * @param layerTextureType defines the type of the layer texture (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    public constructor(\r\n        name: string,\r\n        frameGraph: FrameGraph,\r\n        scene: Scene,\r\n        layerTextureRatio = 0.5,\r\n        layerTextureFixedSize?: number,\r\n        blurTextureSizeRatio = 0.5,\r\n        isStroke = false,\r\n        layerTextureType = Constants.TEXTURETYPE_UNSIGNED_BYTE\r\n    ) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [layerTextureRatio, layerTextureFixedSize, blurTextureSizeRatio, isStroke, layerTextureType];\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"layer\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\r\n            \"objectRenderer\",\r\n            NodeRenderGraphBlockConnectionPointTypes.Object,\r\n            true,\r\n            new NodeRenderGraphConnectionPointCustomObject(\r\n                \"objectRenderer\",\r\n                this,\r\n                NodeRenderGraphConnectionPointDirection.Input,\r\n                NodeRenderGraphBaseObjectRendererBlock,\r\n                \"NodeRenderGraphBaseObjectRendererBlock\"\r\n            )\r\n        );\r\n        this._addDependenciesInput();\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBufferDepthStencil);\r\n        this.layer.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n\r\n        this.output._typeConnectionSource = this.target;\r\n\r\n        this._frameGraphTask = new FrameGraphHighlightLayerTask(this.name, this._frameGraph, this._scene, {\r\n            mainTextureRatio: layerTextureRatio,\r\n            mainTextureFixedSize: layerTextureFixedSize,\r\n            blurTextureSizeRatio,\r\n            isStroke,\r\n            mainTextureType: layerTextureType,\r\n        });\r\n    }\r\n\r\n    private _createTask(layerTextureRatio: number, layerTextureFixedSize: number, blurTextureSizeRatio: number, isStroke: boolean, layerTextureType: number) {\r\n        const blurHorizontalSize = this.blurHorizontalSize;\r\n        const blurVerticalSize = this.blurVerticalSize;\r\n\r\n        this._frameGraphTask?.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphHighlightLayerTask(this.name, this._frameGraph, this._scene, {\r\n            mainTextureRatio: layerTextureRatio,\r\n            mainTextureFixedSize: layerTextureFixedSize,\r\n            blurTextureSizeRatio,\r\n            isStroke,\r\n            mainTextureType: layerTextureType,\r\n        });\r\n\r\n        this.blurHorizontalSize = blurHorizontalSize;\r\n        this.blurVerticalSize = blurVerticalSize;\r\n\r\n        this._additionalConstructionParameters = [layerTextureRatio, layerTextureFixedSize, blurTextureSizeRatio, isStroke, layerTextureType];\r\n    }\r\n\r\n    /** Multiplication factor applied to the main texture size to compute the size of the layer render target texture */\r\n    @editableInPropertyPage(\"Layer texture ratio\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get layerTextureRatio() {\r\n        return this._frameGraphTask.layer._options.mainTextureRatio;\r\n    }\r\n\r\n    public set layerTextureRatio(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(value, options.mainTextureFixedSize, options.blurTextureSizeRatio, options.isStroke, options.mainTextureType);\r\n    }\r\n\r\n    /** Defines the fixed size of the layer render target texture. Takes precedence over layerTextureRatio if provided */\r\n    @editableInPropertyPage(\"Layer texture fixed size\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get layerTextureFixedSize() {\r\n        return this._frameGraphTask.layer._options.mainTextureFixedSize;\r\n    }\r\n\r\n    public set layerTextureFixedSize(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.mainTextureRatio, value, options.blurTextureSizeRatio, options.isStroke, options.mainTextureType);\r\n    }\r\n\r\n    /** Defines the factor to apply to the layer texture size to create the blur textures */\r\n    @editableInPropertyPage(\"Blur texture size ratio\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get blurTextureSizeRatio() {\r\n        return this._frameGraphTask.layer._options.blurTextureSizeRatio;\r\n    }\r\n\r\n    public set blurTextureSizeRatio(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.mainTextureRatio, options.mainTextureFixedSize, value, options.isStroke, options.mainTextureType);\r\n    }\r\n\r\n    /** Should we display highlight as a solid stroke? */\r\n    @editableInPropertyPage(\"Is stroke\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get isStroke() {\r\n        return this._frameGraphTask.layer._options.isStroke;\r\n    }\r\n\r\n    public set isStroke(value: boolean) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.mainTextureRatio, options.mainTextureFixedSize, options.blurTextureSizeRatio, value, options.mainTextureType);\r\n    }\r\n\r\n    /** Defines the type of the layer texture */\r\n    @editableInPropertyPage(\"Layer texture type\", PropertyTypeForEdition.TextureType, \"PROPERTIES\")\r\n    public get layerTextureType() {\r\n        return this._frameGraphTask.layer._options.mainTextureType;\r\n    }\r\n\r\n    public set layerTextureType(value: number) {\r\n        const options = this._frameGraphTask.layer._options;\r\n\r\n        this._createTask(options.mainTextureRatio, options.mainTextureFixedSize, options.blurTextureSizeRatio, options.isStroke, value);\r\n    }\r\n\r\n    /** How big is the horizontal kernel of the blur texture */\r\n    @editableInPropertyPage(\"Blur horizontal size\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 4 })\r\n    public get blurHorizontalSize() {\r\n        return this._frameGraphTask.layer.blurHorizontalSize;\r\n    }\r\n\r\n    public set blurHorizontalSize(value: number) {\r\n        this._frameGraphTask.layer.blurHorizontalSize = value;\r\n    }\r\n\r\n    /** How big is the vertical kernel of the blur texture */\r\n    @editableInPropertyPage(\"Blur vertical size\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 4 })\r\n    public get blurVerticalSize() {\r\n        return this._frameGraphTask.layer.blurVerticalSize;\r\n    }\r\n\r\n    public set blurVerticalSize(value: number) {\r\n        this._frameGraphTask.layer.blurVerticalSize = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphHighlightLayerBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the target texture input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the layer input component\r\n     */\r\n    public get layer(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the objectRenderer input component\r\n     */\r\n    public get objectRenderer(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.layerTexture = this.layer.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.objectRendererTask = this.objectRenderer.connectedPoint?.value as FrameGraphObjectRendererTask;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.blurHorizontalSize = ${this.blurHorizontalSize};`);\r\n        codes.push(`${this._codeVariableName}.blurVerticalSize = ${this.blurVerticalSize};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.blurHorizontalSize = this.blurHorizontalSize;\r\n        serializationObject.blurVerticalSize = this.blurVerticalSize;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.blurHorizontalSize = serializationObject.blurHorizontalSize;\r\n        this.blurVerticalSize = serializationObject.blurVerticalSize;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphHighlightLayerBlock\", NodeRenderGraphHighlightLayerBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8026, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/anaglyphTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/anaglyphTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, FrameGraphTextureHandle } from \"core/index\";\r\nimport { ThinAnaglyphPostProcess } from \"core/PostProcesses/thinAnaglyphPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies an anaglyph post process.\r\n */\r\nexport class FrameGraphAnaglyphTask extends FrameGraphPostProcessTask {\r\n    /**\r\n     * The texture to use as the left texture.\r\n     */\r\n    public leftTexture: FrameGraphTextureHandle;\r\n\r\n    public override readonly postProcess: ThinAnaglyphPostProcess;\r\n\r\n    /**\r\n     * Constructs a new anaglyph task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the anaglyph effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinAnaglyphPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinAnaglyphPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.leftTexture === undefined) {\r\n            throw new Error(`FrameGraphAnaglyphTask \"${this.name}\": sourceTexture and leftTexture are required`);\r\n        }\r\n\r\n        const pass = super.record(skipCreationOfDisabledPasses, undefined, (context) => {\r\n            context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"leftSampler\", this.leftTexture);\r\n        });\r\n\r\n        pass.addDependencies(this.leftTexture);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,uBAAuB,EAAE,0DAAmD;AACrF,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,sBAAuB,SAAQ,+RAAyB;IAQjE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAyC,CAAA;QACvF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,8QAAuB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACrG,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE,CAAC;YACrE,MAAM,IAAI,KAAK,CAAC,CAAA,wBAAA,EAA2B,IAAI,CAAC,IAAI,CAAA,6CAAA,CAA+C,CAAC,CAAC;QACzG,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YAC3E,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACrG,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEvC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 8058, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/basePostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/basePostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph, FrameGraphTask } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\n\r\ninterface IPostProcessLike {\r\n    sourceSamplingMode: number;\r\n    sourceTexture?: FrameGraphTextureHandle;\r\n    targetTexture?: FrameGraphTextureHandle;\r\n    outputTexture: FrameGraphTextureHandle;\r\n}\r\n\r\n/**\r\n * Base class for post process like blocks.\r\n */\r\nexport class NodeRenderGraphBasePostProcessBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: IPostProcessLike & FrameGraphTask;\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphBasePostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"source\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        this.source.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAll);\r\n    }\r\n\r\n    protected _finalizeInputOutputRegistering() {\r\n        this._addDependenciesInput();\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.output._typeConnectionSource = () => {\r\n            return this.target.isConnected ? this.target : this.source;\r\n        };\r\n    }\r\n\r\n    /** Sampling mode used to sample from the source texture */\r\n    @editableInPropertyPage(\"Source sampling mode\", PropertyTypeForEdition.SamplingMode, \"BASE PROPERTIES\")\r\n    public get sourceSamplingMode() {\r\n        return this._frameGraphTask.sourceSamplingMode;\r\n    }\r\n\r\n    public set sourceSamplingMode(value: number) {\r\n        this._frameGraphTask.sourceSamplingMode = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBasePostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the source input component\r\n     */\r\n    public get source(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the target input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.sourceTexture = this.source.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.sourceSamplingMode = ${this.sourceSamplingMode};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.sourceSamplingMode = this.sourceSamplingMode;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.sourceSamplingMode = serializationObject.sourceSamplingMode;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8145, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/baseWithPropertiesPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/baseWithPropertiesPostProcessBlock.ts"],"sourcesContent":["import type { FrameGraphPostProcessTask, IViewportLike } from \"core/index\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\n\r\n/**\r\n * Base class for post process blocks.\r\n */\r\nexport class NodeRenderGraphBaseWithPropertiesPostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphPostProcessTask;\r\n\r\n    protected _useCurrentViewport = false;\r\n    protected _useFullScreenViewport = true;\r\n    protected _viewport: IViewportLike = { x: 0, y: 0, width: 1, height: 1 };\r\n\r\n    /** If true, the depth attachment will be read-only. */\r\n    @editableInPropertyPage(\"Depth Read Only\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get depthReadOnly(): boolean {\r\n        return this._frameGraphTask.depthReadOnly;\r\n    }\r\n\r\n    public set depthReadOnly(value: boolean) {\r\n        this._frameGraphTask.depthReadOnly = value;\r\n    }\r\n\r\n    /** If true, the stencil attachment will be read-only. */\r\n    @editableInPropertyPage(\"Stencil Read Only\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get stencilReadOnly(): boolean {\r\n        return this._frameGraphTask.stencilReadOnly;\r\n    }\r\n\r\n    public set stencilReadOnly(value: boolean) {\r\n        this._frameGraphTask.stencilReadOnly = value;\r\n    }\r\n\r\n    /** If true, color write will be disabled when applying the post process. */\r\n    @editableInPropertyPage(\"Disable Color Write\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get disableColorWrite(): boolean {\r\n        return this._frameGraphTask.disableColorWrite;\r\n    }\r\n\r\n    public set disableColorWrite(value: boolean) {\r\n        this._frameGraphTask.disableColorWrite = value;\r\n    }\r\n\r\n    /** If true, the post process will be generated by a back face full-screen quad (CW order). */\r\n    @editableInPropertyPage(\"Draw Back Face\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get drawBackFace(): boolean {\r\n        return this._frameGraphTask.drawBackFace;\r\n    }\r\n\r\n    public set drawBackFace(value: boolean) {\r\n        this._frameGraphTask.drawBackFace = value;\r\n    }\r\n\r\n    /** If depth testing should be enabled (default is true). */\r\n    @editableInPropertyPage(\"Depth Test\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get depthTest(): boolean {\r\n        return this._frameGraphTask.depthTest;\r\n    }\r\n\r\n    public set depthTest(value: boolean) {\r\n        this._frameGraphTask.depthTest = value;\r\n    }\r\n\r\n    private _setViewport() {\r\n        if (this._useCurrentViewport) {\r\n            this._frameGraphTask.viewport = null;\r\n        } else if (this._useFullScreenViewport) {\r\n            this._frameGraphTask.viewport = undefined;\r\n        } else {\r\n            this._frameGraphTask.viewport = this._viewport;\r\n        }\r\n    }\r\n\r\n    /** If true, the current viewport will be left unchanged. */\r\n    @editableInPropertyPage(\"Use currently active viewport\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get useCurrentViewport(): boolean {\r\n        return this._useCurrentViewport;\r\n    }\r\n\r\n    public set useCurrentViewport(value: boolean) {\r\n        this._useCurrentViewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /** If true, a full screen viewport will be used. */\r\n    @editableInPropertyPage(\"Use full screen viewport\", PropertyTypeForEdition.Boolean, \"BASE PROPERTIES\")\r\n    public get useFullScreenViewport(): boolean {\r\n        return this._useFullScreenViewport;\r\n    }\r\n\r\n    public set useFullScreenViewport(value: boolean) {\r\n        this._useFullScreenViewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /** The viewport to use. */\r\n    @editableInPropertyPage(\"Viewport\", PropertyTypeForEdition.Viewport, \"BASE PROPERTIES\")\r\n    public get viewport(): IViewportLike {\r\n        return this._viewport;\r\n    }\r\n\r\n    public set viewport(value: IViewportLike) {\r\n        this._viewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBaseWithPropertiesPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.depthReadOnly = ${this.depthReadOnly};`);\r\n        codes.push(`${this._codeVariableName}.stencilReadOnly = ${this.stencilReadOnly};`);\r\n        codes.push(`${this._codeVariableName}.disableColorWrite = ${this.disableColorWrite};`);\r\n        codes.push(`${this._codeVariableName}.drawBackFace = ${this.drawBackFace};`);\r\n        codes.push(`${this._codeVariableName}.depthTest = ${this.depthTest};`);\r\n        codes.push(`${this._codeVariableName}.viewport = ${this._useCurrentViewport ? \"null\" : this._useFullScreenViewport ? \"undefined\" : JSON.stringify(this._viewport)};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.depthReadOnly = this.depthReadOnly;\r\n        serializationObject.stencilReadOnly = this.stencilReadOnly;\r\n        serializationObject.disableColorWrite = this.disableColorWrite;\r\n        serializationObject.drawBackFace = this.drawBackFace;\r\n        serializationObject.depthTest = this.depthTest;\r\n        serializationObject.useCurrentViewport = this._useCurrentViewport;\r\n        serializationObject.useFullScreenViewport = this._useFullScreenViewport;\r\n        serializationObject.viewport = this._viewport;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.depthReadOnly = !!serializationObject.depthReadOnly;\r\n        this.stencilReadOnly = !!serializationObject.stencilReadOnly;\r\n        this.disableColorWrite = !!serializationObject.disableColorWrite;\r\n        this.drawBackFace = !!serializationObject.drawBackFace;\r\n        this.depthTest = serializationObject.depthTest ?? true;\r\n        if (serializationObject.useCurrentViewport !== undefined) {\r\n            this._useCurrentViewport = serializationObject.useCurrentViewport;\r\n            this._useFullScreenViewport = serializationObject.useFullScreenViewport;\r\n            this._viewport = serializationObject.viewport;\r\n        }\r\n        this._setViewport();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8298, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/anaglyphPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/anaglyphPostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { FrameGraphAnaglyphTask } from \"core/FrameGraph/Tasks/PostProcesses/anaglyphTask\";\r\nimport { ThinAnaglyphPostProcess } from \"core/PostProcesses/thinAnaglyphPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the anaglyph post process\r\n */\r\nexport class NodeRenderGraphAnaglyphPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphAnaglyphTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderAnaglyphPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"leftTexture\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n\r\n        this.leftTexture.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphAnaglyphTask(this.name, frameGraph, new ThinAnaglyphPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphAnaglyphPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the left texture input component\r\n     */\r\n    public get leftTexture(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.leftTexture = this.leftTexture.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphAnaglyphPostProcessBlock\", NodeRenderGraphAnaglyphPostProcessBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,wCAAwC,EAAE,MAAM,kCAAkC,CAAC;AAC5F,OAAO,EAAE,sBAAsB,EAAE,qDAAyD;AAC1F,OAAO,EAAE,uBAAuB,EAAE,6DAAmD;AACrF,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;AAKnG,MAAO,uCAAwC,SAAQ,mVAAiD;IAG1G;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,0SAAwC,CAAC,UAAU,CAAC,CAAC;QAEvF,IAAI,CAAC,WAAW,CAAC,0CAA0C,CAAC,0SAAwC,CAAC,uBAAuB,CAAC,CAAC;QAE9H,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,yRAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,8QAAuB,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACnI,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,yCAAyC,CAAC;IACrD,CAAC;IAED;;OAEG,CACH,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,eAAe,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,KAAgC,CAAC;IACzG,CAAC;CACJ;IAED,6OAAa,EAAC,iDAAiD,EAAE,uCAAuC,CAAC,CAAC"}},
    {"offset": {"line": 8351, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/blackAndWhiteTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/blackAndWhiteTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { ThinBlackAndWhitePostProcess } from \"core/PostProcesses/thinBlackAndWhitePostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a black and white post process.\r\n */\r\nexport class FrameGraphBlackAndWhiteTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinBlackAndWhitePostProcess;\r\n\r\n    /**\r\n     * Constructs a new black and white task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the black and white effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinBlackAndWhitePostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinBlackAndWhitePostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,4BAA4B,EAAE,+DAAwD;AAC/F,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,2BAA4B,SAAQ,+RAAyB;IAGtE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAA8C,CAAA;QAC5F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,wRAA4B,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1G,CAAC;CACJ"}},
    {"offset": {"line": 8373, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/blackAndWhitePostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/blackAndWhitePostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphBlackAndWhiteTask } from \"core/FrameGraph/Tasks/PostProcesses/blackAndWhiteTask\";\r\nimport { ThinBlackAndWhitePostProcess } from \"core/PostProcesses/thinBlackAndWhitePostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the black and white post process\r\n */\r\nexport class NodeRenderGraphBlackAndWhitePostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphBlackAndWhiteTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new BlackAndWhitePostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphBlackAndWhiteTask(this.name, frameGraph, new ThinBlackAndWhitePostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** Degree of conversion to black and white (default: 1 - full b&w conversion) */\r\n    @editableInPropertyPage(\"Degree\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get degree(): number {\r\n        return this._frameGraphTask.postProcess.degree;\r\n    }\r\n\r\n    public set degree(value: number) {\r\n        this._frameGraphTask.postProcess.degree = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBlackAndWhitePostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.degree = ${this.degree};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.degree = this.degree;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.degree = serializationObject.degree;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphBlackAndWhitePostProcessBlock\", NodeRenderGraphBlackAndWhitePostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,2BAA2B,EAAE,0DAA8D;AACpG,OAAO,EAAE,4BAA4B,EAAE,kEAAwD;AAC/F,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;;AAKnG,MAAO,4CAA6C,SAAQ,mVAAiD;IAG/G;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,mSAA2B,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,wRAA4B,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IAC7I,CAAC;IAED,+EAAA,EAAiF,CAEjF,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,MAAM,CAAC;IACnD,CAAC;IAED,IAAW,MAAM,CAAC,KAAa,EAAA;QAC3B,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;IACpD,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,8CAA8C,CAAC;IAC1D,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,UAAA,EAAa,IAAI,CAAC,MAAM,CAAA,CAAA,CAAG,CAAC,CAAC;QACjE,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,mBAAmB,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACzC,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC,MAAM,CAAC;IAC7C,CAAC;CACJ;IAhCG,qOAAA,EAAA;QADC,gQAAsB,EAAC,QAAQ,EAAA,EAAA,gCAAA,KAAgC,YAAY,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;0EAGhG;IAgCL,6OAAa,EAAC,sDAAsD,EAAE,4CAA4C,CAAC,CAAC"}},
    {"offset": {"line": 8443, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/bloomMergeTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/bloomMergeTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { ThinBloomMergePostProcess } from \"core/PostProcesses/thinBloomMergePostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphBloomMergeTask extends FrameGraphPostProcessTask {\r\n    public blurTexture: FrameGraphTextureHandle;\r\n\r\n    public override readonly postProcess: ThinBloomMergePostProcess;\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinBloomMergePostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinBloomMergePostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.blurTexture === undefined) {\r\n            throw new Error(`FrameGraphBloomMergeTask \"${this.name}\": sourceTexture and blurTexture are required`);\r\n        }\r\n\r\n        const pass = super.record(skipCreationOfDisabledPasses, undefined, (context) => {\r\n            context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"bloomBlur\", this.blurTexture);\r\n        });\r\n\r\n        pass.addDependencies(this.blurTexture);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,4DAAqD;AACzF,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,wBAAyB,SAAQ,+RAAyB;IAKnE,YAAY,IAAY,EAAE,UAAsB,EAAE,eAA2C,CAAA;QACzF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,kRAAyB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACvG,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE,CAAC;YACrE,MAAM,IAAI,KAAK,CAAC,CAAA,0BAAA,EAA6B,IAAI,CAAC,IAAI,CAAA,6CAAA,CAA+C,CAAC,CAAC;QAC3G,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YAC3E,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACnG,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEvC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 8470, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/extractHighlightsTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/extractHighlightsTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/index\";\r\nimport { ThinExtractHighlightsPostProcess } from \"core/PostProcesses/thinExtractHighlightsPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task used to extract highlights from a scene.\r\n */\r\nexport class FrameGraphExtractHighlightsTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinExtractHighlightsPostProcess;\r\n\r\n    /**\r\n     * Constructs a new extract highlights task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinExtractHighlightsPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinExtractHighlightsPostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,gCAAgC,EAAE,mEAA4D;AACvG,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,+BAAgC,SAAQ,+RAAyB;IAG1E;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAkD,CAAA;QAChG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,gSAAgC,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IAC9G,CAAC;CACJ"}},
    {"offset": {"line": 8492, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/bloomTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/bloomTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureCreationOptions, FrameGraphTextureHandle } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphBloomMergeTask } from \"./bloomMergeTask\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ThinBloomEffect } from \"core/PostProcesses/thinBloomEffect\";\r\nimport { FrameGraphExtractHighlightsTask } from \"./extractHighlightsTask\";\r\nimport { FrameGraphBlurTask } from \"./blurTask\";\r\n\r\n/**\r\n * Task which applies a bloom render effect.\r\n */\r\nexport class FrameGraphBloomTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to apply the bloom effect on.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the source texture.\r\n     */\r\n    public sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The target texture to render the bloom effect to.\r\n     * If not supplied, a texture with the same configuration as the source texture will be created.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture of the bloom effect.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The bloom effect to apply.\r\n     */\r\n    public readonly bloom: ThinBloomEffect;\r\n\r\n    /**\r\n     * Whether the bloom effect is HDR.\r\n     * When true, the bloom effect will use a higher precision texture format (half float or float). Else, it will use unsigned byte.\r\n     */\r\n    public readonly hdr: boolean;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(name: string) {\r\n        this._name = name;\r\n        if (this._downscale) {\r\n            this._downscale.name = `${name} Downscale`;\r\n        }\r\n\r\n        if (this._blurX) {\r\n            this._blurX.name = `${name} Blur X`;\r\n        }\r\n\r\n        if (this._blurY) {\r\n            this._blurY.name = `${name} Blur Y`;\r\n        }\r\n\r\n        if (this._merge) {\r\n            this._merge.name = `${name} Merge`;\r\n        }\r\n    }\r\n\r\n    private readonly _downscale: FrameGraphExtractHighlightsTask;\r\n    private readonly _blurX: FrameGraphBlurTask;\r\n    private readonly _blurY: FrameGraphBlurTask;\r\n    private readonly _merge: FrameGraphBloomMergeTask;\r\n    private readonly _defaultPipelineTextureType: number;\r\n\r\n    /**\r\n     * Constructs a new bloom task.\r\n     * @param name Name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param weight Weight of the bloom effect.\r\n     * @param kernel Kernel size of the bloom effect.\r\n     * @param threshold Threshold of the bloom effect.\r\n     * @param hdr Whether the bloom effect is HDR.\r\n     * @param bloomScale The scale of the bloom effect. This value is multiplied by the source texture size to determine the bloom texture size.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, weight = 0.25, kernel = 64, threshold = 0.2, hdr = false, bloomScale = 0.5) {\r\n        super(name, frameGraph);\r\n\r\n        this.hdr = hdr;\r\n\r\n        this._defaultPipelineTextureType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n        if (hdr) {\r\n            const caps = frameGraph.engine.getCaps();\r\n            if (caps.textureHalfFloatRender) {\r\n                this._defaultPipelineTextureType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n            } else if (caps.textureFloatRender) {\r\n                this._defaultPipelineTextureType = Constants.TEXTURETYPE_FLOAT;\r\n            }\r\n        }\r\n\r\n        this.bloom = new ThinBloomEffect(name, frameGraph.engine, bloomScale);\r\n        this.bloom.threshold = threshold;\r\n        this.bloom.kernel = kernel;\r\n        this.bloom.weight = weight;\r\n\r\n        this._downscale = new FrameGraphExtractHighlightsTask(`${name} Downscale`, this._frameGraph, this.bloom._downscale);\r\n        this._blurX = new FrameGraphBlurTask(`${name} Blur X`, this._frameGraph, this.bloom._blurX);\r\n        this._blurY = new FrameGraphBlurTask(`${name} Blur Y`, this._frameGraph, this.bloom._blurY);\r\n        this._merge = new FrameGraphBloomMergeTask(`${name} Merge`, this._frameGraph, this.bloom._merge);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this.bloom.isReady();\r\n    }\r\n\r\n    public record(): void {\r\n        if (this.sourceTexture === undefined) {\r\n            throw new Error(\"FrameGraphBloomTask: sourceTexture is required\");\r\n        }\r\n\r\n        const sourceTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.sourceTexture);\r\n\r\n        const textureCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: {\r\n                width: Math.floor(sourceTextureDescription.size.width * this.bloom.scale) || 1,\r\n                height: Math.floor(sourceTextureDescription.size.height * this.bloom.scale) || 1,\r\n            },\r\n            options: {\r\n                createMipMaps: false,\r\n                types: [this._defaultPipelineTextureType],\r\n                formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                samples: 1,\r\n                useSRGBBuffers: [false],\r\n                labels: [\"\"],\r\n            },\r\n            sizeIsPercentage: false,\r\n        };\r\n\r\n        const downscaleTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._downscale.name, textureCreationOptions);\r\n\r\n        this._downscale.sourceTexture = this.sourceTexture;\r\n        this._downscale.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n        this._downscale.targetTexture = downscaleTextureHandle;\r\n        this._downscale.record(true);\r\n\r\n        const blurXTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurX.name, textureCreationOptions);\r\n\r\n        this._blurX.sourceTexture = downscaleTextureHandle;\r\n        this._blurX.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n        this._blurX.targetTexture = blurXTextureHandle;\r\n        this._blurX.record(true);\r\n\r\n        const blurYTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurY.name, textureCreationOptions);\r\n\r\n        this._blurY.sourceTexture = blurXTextureHandle;\r\n        this._blurY.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n        this._blurY.targetTexture = blurYTextureHandle;\r\n        this._blurY.record(true);\r\n\r\n        const sourceTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.sourceTexture);\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture, this._merge.name, sourceTextureCreationOptions);\r\n\r\n        this._merge.sourceTexture = this.sourceTexture;\r\n        this._merge.sourceSamplingMode = this.sourceSamplingMode;\r\n        this._merge.blurTexture = blurYTextureHandle;\r\n        this._merge.targetTexture = this.outputTexture;\r\n        this._merge.record(true);\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.addDependencies(this.sourceTexture);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((context) => {\r\n            context.copyTexture(this.sourceTexture);\r\n        });\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._downscale.dispose();\r\n        this._blurX.dispose();\r\n        this._blurY.dispose();\r\n        this._merge.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8633, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/bloomPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/bloomPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphBloomTask } from \"../../../Tasks/PostProcesses/bloomTask\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the bloom post process\r\n */\r\nexport class NodeRenderGraphBloomPostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphBloomTask;\r\n\r\n    public override _additionalConstructionParameters: [boolean, number];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphBloomPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param hdr If high dynamic range textures should be used (default: false)\r\n     * @param bloomScale The scale of the bloom effect (default: 0.5)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, hdr = false, bloomScale = 0.5) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [hdr, bloomScale];\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphBloomTask(this.name, frameGraph, 0.75, 64, 0.2, hdr, bloomScale);\r\n    }\r\n\r\n    private _createTask(bloomScale: number, hdr: boolean) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n        const threshold = this._frameGraphTask.bloom.threshold;\r\n        const weight = this._frameGraphTask.bloom.weight;\r\n        const kernel = this._frameGraphTask.bloom.kernel;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphBloomTask(this.name, this._frameGraph, weight, kernel, threshold, hdr, bloomScale);\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n\r\n        this._additionalConstructionParameters = [hdr, bloomScale];\r\n    }\r\n\r\n    /** The quality of the blur effect */\r\n    @editableInPropertyPage(\"Bloom scale\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get bloomScale() {\r\n        return this._frameGraphTask.bloom.scale;\r\n    }\r\n\r\n    public set bloomScale(value: number) {\r\n        this._createTask(value, this._frameGraphTask.hdr);\r\n    }\r\n\r\n    /** If high dynamic range textures should be used */\r\n    @editableInPropertyPage(\"HDR\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get hdr(): boolean {\r\n        return this._frameGraphTask.hdr;\r\n    }\r\n\r\n    public set hdr(value: boolean) {\r\n        this._createTask(this._frameGraphTask.bloom.scale, value);\r\n    }\r\n\r\n    /** The luminance threshold to find bright areas of the image to bloom. */\r\n    @editableInPropertyPage(\"Threshold\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get threshold(): number {\r\n        return this._frameGraphTask.bloom.threshold;\r\n    }\r\n\r\n    public set threshold(value: number) {\r\n        this._frameGraphTask.bloom.threshold = value;\r\n    }\r\n\r\n    /** The strength of the bloom. */\r\n    @editableInPropertyPage(\"Weight\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 3 })\r\n    public get weight(): number {\r\n        return this._frameGraphTask.bloom.weight;\r\n    }\r\n\r\n    public set weight(value: number) {\r\n        this._frameGraphTask.bloom.weight = value;\r\n    }\r\n\r\n    /** Specifies the size of the bloom blur kernel, relative to the final output size */\r\n    @editableInPropertyPage(\"Kernel\", PropertyTypeForEdition.Int, \"PROPERTIES\", { min: 1, max: 128 })\r\n    public get kernel(): number {\r\n        return this._frameGraphTask.bloom.kernel;\r\n    }\r\n\r\n    public set kernel(value: number) {\r\n        this._frameGraphTask.bloom.kernel = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBloomPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.threshold = ${this.threshold};`);\r\n        codes.push(`${this._codeVariableName}.weight = ${this.weight};`);\r\n        codes.push(`${this._codeVariableName}.kernel = ${this.kernel};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.threshold = this.threshold;\r\n        serializationObject.weight = this.weight;\r\n        serializationObject.kernel = this.kernel;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.threshold = serializationObject.threshold;\r\n        this.weight = serializationObject.weight;\r\n        this.kernel = serializationObject.kernel;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphBloomPostProcessBlock\", NodeRenderGraphBloomPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8768, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/blurPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/blurPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphBlurTask } from \"core/FrameGraph/Tasks/PostProcesses/blurTask\";\r\nimport { ThinBlurPostProcess } from \"core/PostProcesses/thinBlurPostProcess\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the blur post process\r\n */\r\nexport class NodeRenderGraphBlurPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphBlurTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphBlurPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphBlurTask(this.name, frameGraph, new ThinBlurPostProcess(name, scene.getEngine(), new Vector2(1, 0), 32));\r\n    }\r\n\r\n    /** The direction in which to blur the image */\r\n    @editableInPropertyPage(\"Direction\", PropertyTypeForEdition.Vector2, \"PROPERTIES\")\r\n    public get direction(): Vector2 {\r\n        return this._frameGraphTask.postProcess.direction;\r\n    }\r\n\r\n    public set direction(value: Vector2) {\r\n        this._frameGraphTask.postProcess.direction = value;\r\n    }\r\n\r\n    /** Length in pixels of the blur sample region */\r\n    @editableInPropertyPage(\"Kernel\", PropertyTypeForEdition.Int, \"PROPERTIES\", { min: 1, max: 256 })\r\n    public get kernel(): number {\r\n        return this._frameGraphTask.postProcess.kernel;\r\n    }\r\n\r\n    public set kernel(value: number) {\r\n        this._frameGraphTask.postProcess.kernel = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBlurPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.direction = new BABYLON.Vector2(${this.direction.x}, ${this.direction.y});`);\r\n        codes.push(`${this._codeVariableName}.kernel = ${this.kernel};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.direction = this.direction.asArray();\r\n        serializationObject.kernel = this.kernel;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.direction.fromArray(serializationObject.direction);\r\n        this.kernel = serializationObject.kernel;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphBlurPostProcessBlock\", NodeRenderGraphBlurPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8852, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/chromaticAberrationTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/chromaticAberrationTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderContext, FrameGraphRenderPass } from \"core/index\";\r\nimport { ThinChromaticAberrationPostProcess } from \"core/PostProcesses/thinChromaticAberrationPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a chromatic aberration post process.\r\n */\r\nexport class FrameGraphChromaticAberrationTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinChromaticAberrationPostProcess;\r\n\r\n    /**\r\n     * Constructs a new chromatic aberration task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the chromatic aberration effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinChromaticAberrationPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinChromaticAberrationPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.screenWidth = this._sourceWidth;\r\n        this.postProcess.screenHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,kCAAkC,EAAE,qEAA8D;AAC3G,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,iCAAkC,SAAQ,+RAAyB;IAG5E;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAoD,CAAA;QAClG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,oSAAkC,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IAChH,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC;QAEnD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 8880, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/chromaticAberrationPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/chromaticAberrationPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphChromaticAberrationTask } from \"core/FrameGraph/Tasks/PostProcesses/chromaticAberrationTask\";\r\nimport { ThinChromaticAberrationPostProcess } from \"core/PostProcesses/thinChromaticAberrationPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the chromatic aberration post process\r\n */\r\nexport class NodeRenderGraphChromaticAberrationPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphChromaticAberrationTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new chromatic aberration post process block\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphChromaticAberrationTask(this.name, frameGraph, new ThinChromaticAberrationPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** The amount of separation of rgb channels */\r\n    @editableInPropertyPage(\"Amount\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: -1000, max: 1000 })\r\n    public get aberrationAmount(): number {\r\n        return this._frameGraphTask.postProcess.aberrationAmount;\r\n    }\r\n\r\n    public set aberrationAmount(value: number) {\r\n        this._frameGraphTask.postProcess.aberrationAmount = value;\r\n    }\r\n\r\n    /** The amount the effect will increase for pixels closer to the edge of the screen */\r\n    @editableInPropertyPage(\"Radial intensity\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: -1, max: 5 })\r\n    public get radialIntensity(): number {\r\n        return this._frameGraphTask.postProcess.radialIntensity;\r\n    }\r\n\r\n    public set radialIntensity(value: number) {\r\n        this._frameGraphTask.postProcess.radialIntensity = value;\r\n    }\r\n\r\n    /** The normalized direction in which the rgb channels should be separated. If set to 0,0 radial direction will be used. */\r\n    @editableInPropertyPage(\"Direction\", PropertyTypeForEdition.Vector2, \"PROPERTIES\")\r\n    public get direction(): Vector2 {\r\n        return this._frameGraphTask.postProcess.direction;\r\n    }\r\n\r\n    public set direction(value: Vector2) {\r\n        this._frameGraphTask.postProcess.direction = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphChromaticAberrationPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.aberrationAmount = ${this.aberrationAmount};`);\r\n        codes.push(`${this._codeVariableName}.radialIntensity = ${this.radialIntensity};`);\r\n        codes.push(`${this._codeVariableName}.direction = new BABYLON.Vector2(${this.direction.x}, ${this.direction.y});`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.aberrationAmount = this.aberrationAmount;\r\n        serializationObject.radialIntensity = this.radialIntensity;\r\n        serializationObject.direction = this.direction.asArray();\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.aberrationAmount = serializationObject.aberrationAmount;\r\n        this.radialIntensity = serializationObject.radialIntensity;\r\n        this.direction = Vector2.FromArray(serializationObject.direction);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphChromaticAberrationPostProcessBlock\", NodeRenderGraphChromaticAberrationPostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,OAAO,EAAE,yCAA+B;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,iCAAiC,EAAE,gEAAoE;AAChH,OAAO,EAAE,kCAAkC,EAAE,wEAA8D;AAC3G,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;;;AAKnG,MAAO,kDAAmD,SAAQ,mVAAiD;IAGrH;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,+SAAiC,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,oSAAkC,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACzJ,CAAC;IAED,6CAAA,EAA+C,CAE/C,IAAW,gBAAgB,GAAA;QACvB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,gBAAgB,CAAC;IAC7D,CAAC;IAED,IAAW,gBAAgB,CAAC,KAAa,EAAA;QACrC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAC9D,CAAC;IAED,oFAAA,EAAsF,CAEtF,IAAW,eAAe,GAAA;QACtB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,eAAe,CAAC;IAC5D,CAAC;IAED,IAAW,eAAe,CAAC,KAAa,EAAA;QACpC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,eAAe,GAAG,KAAK,CAAC;IAC7D,CAAC;IAED,yHAAA,EAA2H,CAE3H,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,CAAC;IACtD,CAAC;IAED,IAAW,SAAS,CAAC,KAAc,EAAA;QAC/B,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;IACvD,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,oDAAoD,CAAC;IAChE,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,oBAAA,EAAuB,IAAI,CAAC,gBAAgB,CAAA,CAAA,CAAG,CAAC,CAAC;QACrF,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,mBAAA,EAAsB,IAAI,CAAC,eAAe,CAAA,CAAA,CAAG,CAAC,CAAC;QACnF,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,iCAAA,EAAoC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAA,EAAA,EAAK,IAAI,CAAC,SAAS,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;QACnH,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC7D,mBAAmB,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC3D,mBAAmB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QACzD,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACxC,IAAI,CAAC,gBAAgB,GAAG,mBAAmB,CAAC,gBAAgB,CAAC;QAC7D,IAAI,CAAC,eAAe,GAAG,mBAAmB,CAAC,eAAe,CAAC;QAC3D,IAAI,CAAC,SAAS,GAAG,6OAAO,CAAC,SAAS,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;IACtE,CAAC;CACJ;IA1DG,qOAAA,EAAA;QADC,gQAAsB,EAAC,QAAQ,EAAA,EAAA,gCAAA,KAAgC,YAAY,EAAE;QAAE,GAAG,EAAE,CAAC,IAAI;QAAE,GAAG,EAAE,IAAI;IAAA,CAAE,CAAC;0FAGvG;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,kBAAkB,EAAA,EAAA,gCAAA,KAAgC,YAAY,EAAE;QAAE,GAAG,EAAE,CAAC,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;yFAG3G;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,WAAW,EAAA,EAAA,kCAAA,KAAkC,YAAY,CAAC;mFAGjF;IAsCL,6OAAa,EAAC,4DAA4D,EAAE,kDAAkD,CAAC,CAAC"}},
    {"offset": {"line": 8979, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/circleOfConfusionTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/circleOfConfusionTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass, Camera } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { ThinCircleOfConfusionPostProcess } from \"core/PostProcesses/thinCircleOfConfusionPostProcess\";\r\n\r\n/**\r\n * Task which applies a circle of confusion post process.\r\n */\r\nexport class FrameGraphCircleOfConfusionTask extends FrameGraphPostProcessTask {\r\n    /**\r\n     * The depth texture to use for the circle of confusion effect.\r\n     * It must store camera space depth (Z coordinate)\r\n     */\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the depth texture.\r\n     */\r\n    public depthSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The camera to use for the circle of confusion effect.\r\n     */\r\n    public camera: Camera;\r\n\r\n    public override readonly postProcess: ThinCircleOfConfusionPostProcess;\r\n\r\n    /**\r\n     * Constructs a new circle of confusion task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinCircleOfConfusionPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinCircleOfConfusionPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.depthTexture === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphCircleOfConfusionTask \"${this.name}\": sourceTexture, depthTexture and camera are required`);\r\n        }\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                this.postProcess.camera = this.camera;\r\n                context.setTextureSamplingMode(this.depthTexture, this.depthSamplingMode);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n            }\r\n        );\r\n\r\n        pass.addDependencies(this.depthTexture);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAE9D,OAAO,EAAE,gCAAgC,EAAE,mEAA4D;;;AAKjG,MAAO,+BAAgC,SAAQ,+RAAyB;IAmB1E;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAkD,CAAA;QAChG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,gSAAgC,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;QAnB9G;;WAEG,CACI,IAAA,CAAA,iBAAiB,GAAG,SAAS,CAAC,6BAA6B,CAAC;IAiBnE,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;YACnG,MAAM,IAAI,KAAK,CAAC,CAAA,iCAAA,EAAoC,IAAI,CAAC,IAAI,CAAA,sDAAA,CAAwD,CAAC,CAAC;QAC3H,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YACtC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC9E,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACvG,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAExC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 9017, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/circleOfConfusionPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/circleOfConfusionPostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph, Camera } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphCircleOfConfusionTask } from \"core/FrameGraph/Tasks/PostProcesses/circleOfConfusionTask\";\r\nimport { ThinCircleOfConfusionPostProcess } from \"core/PostProcesses/thinCircleOfConfusionPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the circle of confusion post process\r\n */\r\nexport class NodeRenderGraphCircleOfConfusionPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphCircleOfConfusionTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphCircleOfConfusionPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"geomViewDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphCircleOfConfusionTask(\r\n            this.name,\r\n            frameGraph,\r\n            new ThinCircleOfConfusionPostProcess(name, scene.getEngine(), { depthNotNormalized: true })\r\n        );\r\n    }\r\n\r\n    /** Sampling mode used to sample from the depth texture */\r\n    @editableInPropertyPage(\"Depth sampling mode\", PropertyTypeForEdition.SamplingMode, \"PROPERTIES\")\r\n    public get depthSamplingMode() {\r\n        return this._frameGraphTask.depthSamplingMode;\r\n    }\r\n\r\n    public set depthSamplingMode(value: number) {\r\n        this._frameGraphTask.depthSamplingMode = value;\r\n    }\r\n\r\n    /** Max lens size in scene units/1000 (eg. millimeter). Standard cameras are 50mm. The diameter of the resulting aperture can be computed by lensSize/fStop. */\r\n    @editableInPropertyPage(\"Lens size\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get lensSize(): number {\r\n        return this._frameGraphTask.postProcess.lensSize;\r\n    }\r\n\r\n    public set lensSize(value: number) {\r\n        this._frameGraphTask.postProcess.lensSize = value;\r\n    }\r\n\r\n    /** F-Stop of the effect's camera. The diameter of the resulting aperture can be computed by lensSize/fStop */\r\n    @editableInPropertyPage(\"F-Stop\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get fStop(): number {\r\n        return this._frameGraphTask.postProcess.fStop;\r\n    }\r\n\r\n    public set fStop(value: number) {\r\n        this._frameGraphTask.postProcess.fStop = value;\r\n    }\r\n\r\n    /** Distance away from the camera to focus on in scene units/1000 (eg. millimeter) */\r\n    @editableInPropertyPage(\"Focus distance\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get focusDistance(): number {\r\n        return this._frameGraphTask.postProcess.focusDistance;\r\n    }\r\n\r\n    public set focusDistance(value: number) {\r\n        this._frameGraphTask.postProcess.focusDistance = value;\r\n    }\r\n\r\n    /** Focal length of the effect's camera in scene units/1000 (eg. millimeter) */\r\n    @editableInPropertyPage(\"Focal length\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get focalLength(): number {\r\n        return this._frameGraphTask.postProcess.focalLength;\r\n    }\r\n\r\n    public set focalLength(value: number) {\r\n        this._frameGraphTask.postProcess.focalLength = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphCircleOfConfusionPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view depth input component\r\n     */\r\n    public get geomViewDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.depthTexture = this.geomViewDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.lensSize = ${this.lensSize};`);\r\n        codes.push(`${this._codeVariableName}.fStop = ${this.fStop};`);\r\n        codes.push(`${this._codeVariableName}.focusDistance = ${this.focusDistance};`);\r\n        codes.push(`${this._codeVariableName}.focalLength = ${this.focalLength};`);\r\n        codes.push(`${this._codeVariableName}.depthSamplingMode = ${this.depthSamplingMode};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.lensSize = this.lensSize;\r\n        serializationObject.fStop = this.fStop;\r\n        serializationObject.focusDistance = this.focusDistance;\r\n        serializationObject.focalLength = this.focalLength;\r\n        serializationObject.depthSamplingMode = this.depthSamplingMode;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.lensSize = serializationObject.lensSize;\r\n        this.fStop = serializationObject.fStop;\r\n        this.focusDistance = serializationObject.focusDistance;\r\n        this.focalLength = serializationObject.focalLength;\r\n        this.depthSamplingMode = serializationObject.depthSamplingMode;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphCircleOfConfusionPostProcessBlock\", NodeRenderGraphCircleOfConfusionPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9153, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/colorCorrectionTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/colorCorrectionTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { ThinColorCorrectionPostProcess } from \"core/PostProcesses/thinColorCorrectionPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a color correction post process.\r\n */\r\nexport class FrameGraphColorCorrectionTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinColorCorrectionPostProcess;\r\n\r\n    /**\r\n     * Constructs a new color correction task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param colorTableUrl The URL of the color table to use for the color correction effect.\r\n     * @param thinPostProcess The thin post process to use for the color correction effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, colorTableUrl: string, thinPostProcess?: ThinColorCorrectionPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinColorCorrectionPostProcess(name, frameGraph.scene, colorTableUrl));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,8BAA8B,EAAE,iEAA0D;AACnG,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,6BAA8B,SAAQ,+RAAyB;IAGxE;;;;;;OAMG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,aAAqB,EAAE,eAAgD,CAAA;QACrH,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,4RAA8B,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;IAC1H,CAAC;CACJ"}},
    {"offset": {"line": 9176, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/colorCorrectionPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/colorCorrectionPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphColorCorrectionTask } from \"../../../Tasks/PostProcesses/colorCorrectionTask\";\r\nimport { ThinColorCorrectionPostProcess } from \"../../../../PostProcesses/thinColorCorrectionPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the color correction post process\r\n */\r\nexport class NodeRenderGraphColorCorrectionPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphColorCorrectionTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphColorCorrectionPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param colorTableUrl defines the URL of the color table\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, colorTableUrl: string = \"\") {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [colorTableUrl];\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphColorCorrectionTask(this.name, frameGraph, colorTableUrl, new ThinColorCorrectionPostProcess(name, frameGraph.scene, colorTableUrl));\r\n    }\r\n\r\n    private _createTask(colorTableUrl: string) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphColorCorrectionTask(\r\n            this.name,\r\n            this._frameGraph,\r\n            colorTableUrl,\r\n            new ThinColorCorrectionPostProcess(this.name, this._frameGraph.scene, colorTableUrl)\r\n        );\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n\r\n        this._additionalConstructionParameters = [colorTableUrl];\r\n    }\r\n\r\n    /** The color table URL */\r\n    @editableInPropertyPage(\"Color Table URL\", PropertyTypeForEdition.String, \"PROPERTIES\")\r\n    public get colorTableUrl(): string {\r\n        return this._frameGraphTask.postProcess.colorTableUrl;\r\n    }\r\n\r\n    public set colorTableUrl(value: string) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphColorCorrectionPostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphColorCorrectionPostProcessBlock\", NodeRenderGraphColorCorrectionPostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,6BAA6B,EAAE,MAAM,kDAAkD,CAAC;AACjG,OAAO,EAAE,8BAA8B,EAAE,MAAM,0DAA0D,CAAC;AAC1G,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;;AAKnG,MAAO,8CAA+C,SAAQ,mVAAiD;IAGjH;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;;OAMG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,gBAAwB,EAAE,CAAA;QAC7F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,iCAAiC,GAAG;YAAC,aAAa;SAAC,CAAC;QAEzD,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,uSAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,aAAa,EAAE,IAAI,4RAA8B,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;IAC9K,CAAC;IAEO,WAAW,CAAC,aAAqB,EAAA;QACrC,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC;QAEnE,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QAE/B,IAAI,CAAC,eAAe,GAAG,IAAI,uSAA6B,CACpD,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,WAAW,EAChB,aAAa,EACb,IAAI,4RAA8B,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CACvF,CAAC;QACF,IAAI,CAAC,eAAe,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAE7D,IAAI,CAAC,iCAAiC,GAAG;YAAC,aAAa;SAAC,CAAC;IAC7D,CAAC;IAED,wBAAA,EAA0B,CAE1B,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,aAAa,CAAC;IAC1D,CAAC;IAED,IAAW,aAAa,CAAC,KAAa,EAAA;QAClC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,gDAAgD,CAAC;IAC5D,CAAC;CACJ;IAfG,qOAAA,EAAA;QADC,gQAAsB,EAAC,iBAAiB,EAAA,GAAA,iCAAA,KAAiC,YAAY,CAAC;mFAGtF;IAeL,6OAAa,EAAC,wDAAwD,EAAE,8CAA8C,CAAC,CAAC"}},
    {"offset": {"line": 9242, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/convolutionTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/convolutionTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderContext, FrameGraphRenderPass } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinConvolutionPostProcess } from \"core/PostProcesses/thinConvolutionPostProcess\";\r\n\r\n/**\r\n * Task which applies a convolution post process.\r\n */\r\nexport class FrameGraphConvolutionTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinConvolutionPostProcess;\r\n\r\n    /**\r\n     * Constructs a new convolution task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinConvolutionPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinConvolutionPostProcess(name, frameGraph.engine, ThinConvolutionPostProcess.EmbossKernel));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,0BAA0B,EAAE,6DAAsD;;;AAKrF,MAAO,yBAA0B,SAAQ,+RAAyB;IAGpE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAA4C,CAAA;QAC1F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,oRAA0B,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,oRAA0B,CAAC,YAAY,CAAC,CAAC,CAAC;IACjJ,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 9270, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/convolutionPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/convolutionPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphConvolutionTask } from \"../../../Tasks/PostProcesses/convolutionTask\";\r\nimport { ThinConvolutionPostProcess } from \"../../../../PostProcesses/thinConvolutionPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the convolution post process\r\n */\r\nexport class NodeRenderGraphConvolutionPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphConvolutionTask;\r\n\r\n    public override _additionalConstructionParameters: [number[]];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphConvolutionPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param kernel Array of 9 values corresponding to the 3x3 kernel to be applied\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, kernel: number[] = ThinConvolutionPostProcess.EmbossKernel) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [kernel];\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphConvolutionTask(this.name, frameGraph, new ThinConvolutionPostProcess(name, frameGraph.engine, kernel));\r\n    }\r\n\r\n    private _createTask(kernelIndex: number) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        let kernel = ThinConvolutionPostProcess.EmbossKernel;\r\n        switch (kernelIndex) {\r\n            case 0:\r\n                kernel = ThinConvolutionPostProcess.EdgeDetect0Kernel;\r\n                break;\r\n            case 1:\r\n                kernel = ThinConvolutionPostProcess.EdgeDetect1Kernel;\r\n                break;\r\n            case 2:\r\n                kernel = ThinConvolutionPostProcess.EdgeDetect2Kernel;\r\n                break;\r\n            case 3:\r\n                kernel = ThinConvolutionPostProcess.SharpenKernel;\r\n                break;\r\n            case 4:\r\n                kernel = ThinConvolutionPostProcess.EmbossKernel;\r\n                break;\r\n            case 5:\r\n                kernel = ThinConvolutionPostProcess.GaussianKernel;\r\n                break;\r\n        }\r\n\r\n        this._frameGraphTask = new FrameGraphConvolutionTask(this.name, this._frameGraph, new ThinConvolutionPostProcess(this.name, this._frameGraph.engine, kernel));\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n\r\n        this._additionalConstructionParameters = [kernel];\r\n    }\r\n\r\n    /** The quality of the blur effect */\r\n    @editableInPropertyPage(\"Kernel\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"EdgeDetect0\", value: 0 },\r\n            { label: \"EdgeDetect1\", value: 1 },\r\n            { label: \"EdgeDetect2\", value: 2 },\r\n            { label: \"Sharpen\", value: 3 },\r\n            { label: \"Emboss\", value: 4 },\r\n            { label: \"Gaussian\", value: 5 },\r\n        ],\r\n    })\r\n    public get kernel(): number {\r\n        const kernel = this._frameGraphTask.postProcess.kernel;\r\n\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.EdgeDetect0Kernel[index])) {\r\n            return 0;\r\n        }\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.EdgeDetect1Kernel[index])) {\r\n            return 1;\r\n        }\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.EdgeDetect2Kernel[index])) {\r\n            return 2;\r\n        }\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.SharpenKernel[index])) {\r\n            return 3;\r\n        }\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.EmbossKernel[index])) {\r\n            return 4;\r\n        }\r\n        if (kernel.every((value, index) => value === ThinConvolutionPostProcess.GaussianKernel[index])) {\r\n            return 5;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    public set kernel(value: number) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphConvolutionPostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphConvolutionPostProcessBlock\", NodeRenderGraphConvolutionPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9403, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/depthOfFieldMergeTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/depthOfFieldMergeTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { ThinDepthOfFieldMergePostProcess } from \"core/PostProcesses/thinDepthOfFieldMergePostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { Constants } from \"../../../Engines/constants\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphDepthOfFieldMergeTask extends FrameGraphPostProcessTask {\r\n    public circleOfConfusionTexture: FrameGraphTextureHandle;\r\n\r\n    public blurSteps: FrameGraphTextureHandle[] = [];\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinDepthOfFieldMergePostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinDepthOfFieldMergePostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.circleOfConfusionTexture === undefined || this.blurSteps.length === 0) {\r\n            throw new Error(`FrameGraphBloomMergeTask \"${this.name}\": sourceTexture, circleOfConfusionTexture and blurSteps are required`);\r\n        }\r\n\r\n        this.postProcess.updateEffect(\"#define BLUR_LEVEL \" + (this.blurSteps.length - 1) + \"\\n\");\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                context.setTextureSamplingMode(this.blurSteps[this.blurSteps.length - 1], Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"circleOfConfusionSampler\", this.circleOfConfusionTexture);\r\n                for (let i = 0; i < this.blurSteps.length; i++) {\r\n                    const handle = this.blurSteps[i];\r\n                    context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"blurStep\" + (this.blurSteps.length - i - 1), handle);\r\n                }\r\n            }\r\n        );\r\n\r\n        pass.addDependencies(this.circleOfConfusionTexture);\r\n        pass.addDependencies(this.blurSteps);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,gCAAgC,EAAE,mEAA4D;AACvG,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAMxD,MAAO,+BAAgC,SAAQ,+RAAyB;IAK1E,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAkD,CAAA;QAChG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,gSAAgC,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;QAHvG,IAAA,CAAA,SAAS,GAA8B,EAAE,CAAC;IAIjD,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,wBAAwB,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACjH,MAAM,IAAI,KAAK,CAAC,CAAA,0BAAA,EAA6B,IAAI,CAAC,IAAI,CAAA,qEAAA,CAAuE,CAAC,CAAC;QACnI,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,qBAAqB,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;QAE1F,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;QACvH,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,0BAA0B,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;YAC3H,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE,CAAC;gBAC7C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,UAAU,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;YAC1H,CAAC;QACL,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QACpD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAErC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 9439, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/depthOfFieldBlurTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/depthOfFieldBlurTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphBlurTask } from \"./blurTask\";\r\nimport { ThinDepthOfFieldBlurPostProcess } from \"core/PostProcesses/thinDepthOfFieldBlurPostProcess\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphDepthOfFieldBlurTask extends FrameGraphBlurTask {\r\n    public circleOfConfusionTexture: FrameGraphTextureHandle;\r\n\r\n    public circleOfConfusionSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinDepthOfFieldBlurPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinDepthOfFieldBlurPostProcess(name, frameGraph.engine, new Vector2(1, 0), 10));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.circleOfConfusionTexture === undefined) {\r\n            throw new Error(`FrameGraphDepthOfFieldBlurTask \"${this.name}\": sourceTexture and circleOfConfusionTexture are required`);\r\n        }\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                context.setTextureSamplingMode(this.circleOfConfusionTexture, this.circleOfConfusionSamplingMode);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"circleOfConfusionSampler\", this.circleOfConfusionTexture);\r\n            }\r\n        );\r\n\r\n        pass.addDependencies(this.circleOfConfusionTexture);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,kBAAkB,EAAE,MAAM,YAAY,CAAC;AAChD,OAAO,EAAE,+BAA+B,EAAE,kEAA2D;AACrG,OAAO,EAAE,OAAO,EAAE,sCAA+B;;;;AAK3C,MAAO,8BAA+B,SAAQ,iRAAkB;IAKlE,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAiD,CAAA;QAC/F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,8RAA+B,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAH7H,IAAA,CAAA,6BAA6B,GAAG,SAAS,CAAC,6BAA6B,CAAC;IAI/E,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,wBAAwB,KAAK,SAAS,EAAE,CAAC;YAClF,MAAM,IAAI,KAAK,CAAC,CAAA,gCAAA,EAAmC,IAAI,CAAC,IAAI,CAAA,0DAAA,CAA4D,CAAC,CAAC;QAC9H,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,6BAA6B,CAAC,CAAC;QACtG,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,0BAA0B,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC/H,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 9471, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/depthOfFieldTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/depthOfFieldTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureCreationOptions, FrameGraphTextureHandle, AbstractEngine, Camera } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ThinDepthOfFieldEffectBlurLevel } from \"core/PostProcesses/thinDepthOfFieldEffect\";\r\nimport { FrameGraphDepthOfFieldMergeTask } from \"./depthOfFieldMergeTask\";\r\nimport { FrameGraphCircleOfConfusionTask } from \"./circleOfConfusionTask\";\r\nimport { FrameGraphDepthOfFieldBlurTask } from \"./depthOfFieldBlurTask\";\r\nimport { ThinDepthOfFieldEffect } from \"core/PostProcesses/thinDepthOfFieldEffect\";\r\n\r\n/**\r\n * Task which applies a depth of field effect.\r\n */\r\nexport class FrameGraphDepthOfFieldTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to apply the depth of field effect on.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the source texture.\r\n     */\r\n    public sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The depth texture to use for the depth of field effect.\r\n     * Should store camera space depth (Z coordinate).\r\n     */\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the depth texture.\r\n     */\r\n    public depthSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The camera used to render the scene.\r\n     */\r\n    public camera: Camera;\r\n\r\n    /**\r\n     * The target texture to render the depth of field effect to.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture of the depth of field effect.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The depth of field effect.\r\n     */\r\n    public readonly depthOfField: ThinDepthOfFieldEffect;\r\n\r\n    /**\r\n     * Whether the depth of field effect is applied on HDR textures.\r\n     * When true, the depth of field effect will use a higher precision texture format (half float or float). Else, it will use unsigned byte.\r\n     */\r\n    public readonly hdr: boolean;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(name: string) {\r\n        this._name = name;\r\n        if (this._circleOfConfusion) {\r\n            this._circleOfConfusion.name = `${name} Circle of Confusion`;\r\n        }\r\n\r\n        if (this._blurX) {\r\n            for (let i = 0; i < this._blurX.length; i++) {\r\n                this._blurX[i].name = `${name} Blur X${i}`;\r\n                this._blurY[i].name = `${name} Blur Y${i}`;\r\n            }\r\n        }\r\n\r\n        if (this._merge) {\r\n            this._merge.name = `${name} Merge`;\r\n        }\r\n    }\r\n\r\n    private readonly _engine: AbstractEngine;\r\n    private readonly _circleOfConfusion: FrameGraphCircleOfConfusionTask;\r\n    private readonly _blurX: FrameGraphDepthOfFieldBlurTask[] = [];\r\n    private readonly _blurY: FrameGraphDepthOfFieldBlurTask[] = [];\r\n    private readonly _merge: FrameGraphDepthOfFieldMergeTask;\r\n    private readonly _defaultPipelineTextureType: number;\r\n\r\n    /**\r\n     * Constructs a depth of field task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param blurLevel The blur level of the depth of field effect (default: ThinDepthOfFieldEffectBlurLevel.Low).\r\n     * @param hdr Whether the depth of field effect is HDR.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, blurLevel: ThinDepthOfFieldEffectBlurLevel = ThinDepthOfFieldEffectBlurLevel.Low, hdr = false) {\r\n        super(name, frameGraph);\r\n\r\n        this._engine = frameGraph.engine;\r\n        this.hdr = hdr;\r\n\r\n        this._defaultPipelineTextureType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n        if (hdr) {\r\n            const caps = frameGraph.engine.getCaps();\r\n            if (caps.textureHalfFloatRender) {\r\n                this._defaultPipelineTextureType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n            } else if (caps.textureFloatRender) {\r\n                this._defaultPipelineTextureType = Constants.TEXTURETYPE_FLOAT;\r\n            }\r\n        }\r\n\r\n        this.depthOfField = new ThinDepthOfFieldEffect(name, frameGraph.engine, blurLevel, true);\r\n\r\n        this._circleOfConfusion = new FrameGraphCircleOfConfusionTask(`${name} Circle of Confusion`, this._frameGraph, this.depthOfField._circleOfConfusion);\r\n\r\n        const blurCount = this.depthOfField._depthOfFieldBlurX.length;\r\n\r\n        for (let i = 0; i < blurCount; i++) {\r\n            this._blurX.push(new FrameGraphDepthOfFieldBlurTask(`${name} Blur X${i}`, this._frameGraph, this.depthOfField._depthOfFieldBlurX[i][0]));\r\n            this._blurY.push(new FrameGraphDepthOfFieldBlurTask(`${name} Blur Y${i}`, this._frameGraph, this.depthOfField._depthOfFieldBlurY[i][0]));\r\n        }\r\n\r\n        this._merge = new FrameGraphDepthOfFieldMergeTask(`${name} Merge`, this._frameGraph, this.depthOfField._dofMerge);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this.depthOfField.isReady();\r\n    }\r\n\r\n    public record(): void {\r\n        if (this.sourceTexture === undefined || this.depthTexture === undefined || this.camera === undefined) {\r\n            throw new Error(\"FrameGraphDepthOfFieldTask: sourceTexture, depthTexture and camera are required\");\r\n        }\r\n\r\n        const sourceTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.sourceTexture);\r\n\r\n        const textureSize = {\r\n            width: sourceTextureDescription.size.width,\r\n            height: sourceTextureDescription.size.height,\r\n        };\r\n        const circleOfConfusionTextureFormat = this._engine.isWebGPU || this._engine.version > 1 ? Constants.TEXTUREFORMAT_RED : Constants.TEXTUREFORMAT_RGBA;\r\n        const textureCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: textureSize,\r\n            options: {\r\n                createMipMaps: false,\r\n                types: [this._defaultPipelineTextureType],\r\n                formats: [circleOfConfusionTextureFormat],\r\n                samples: 1,\r\n                useSRGBBuffers: [false],\r\n                labels: [\"\"],\r\n            },\r\n            sizeIsPercentage: false,\r\n        };\r\n\r\n        const circleOfConfusionTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._circleOfConfusion.name, textureCreationOptions);\r\n\r\n        this._circleOfConfusion.sourceTexture = this.sourceTexture; // texture not used by the CoC shader\r\n        this._circleOfConfusion.depthTexture = this.depthTexture;\r\n        this._circleOfConfusion.depthSamplingMode = this.depthSamplingMode;\r\n        this._circleOfConfusion.camera = this.camera;\r\n        this._circleOfConfusion.targetTexture = circleOfConfusionTextureHandle;\r\n        this._circleOfConfusion.record(true);\r\n\r\n        textureCreationOptions.options.formats = [Constants.TEXTUREFORMAT_RGBA];\r\n\r\n        const blurSteps: FrameGraphTextureHandle[] = [];\r\n\r\n        for (let i = 0; i < this._blurX.length; i++) {\r\n            const ratio = this.depthOfField._depthOfFieldBlurX[i][1];\r\n\r\n            textureSize.width = Math.floor(sourceTextureDescription.size.width * ratio) || 1;\r\n            textureSize.height = Math.floor(sourceTextureDescription.size.height * ratio) || 1;\r\n\r\n            textureCreationOptions.options.labels![0] = \"step \" + (i + 1);\r\n\r\n            const blurYTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurY[i].name, textureCreationOptions);\r\n\r\n            this._blurY[i].sourceTexture = i === 0 ? this.sourceTexture : this._blurX[i - 1].outputTexture;\r\n            this._blurY[i].sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._blurY[i].circleOfConfusionTexture = circleOfConfusionTextureHandle;\r\n            this._blurY[i].targetTexture = blurYTextureHandle;\r\n            this._blurY[i].record(true);\r\n\r\n            const blurXTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._blurX[i].name, textureCreationOptions);\r\n\r\n            this._blurX[i].sourceTexture = this._blurY[i].outputTexture;\r\n            this._blurX[i].sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._blurX[i].circleOfConfusionTexture = circleOfConfusionTextureHandle;\r\n            this._blurX[i].targetTexture = blurXTextureHandle;\r\n            this._blurX[i].record(true);\r\n\r\n            blurSteps.push(blurXTextureHandle);\r\n        }\r\n\r\n        const sourceTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.sourceTexture);\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture, this._merge.name, sourceTextureCreationOptions);\r\n\r\n        this._merge.sourceTexture = this.sourceTexture;\r\n        this._merge.sourceSamplingMode = this.sourceSamplingMode;\r\n        this._merge.circleOfConfusionTexture = circleOfConfusionTextureHandle;\r\n        this._merge.blurSteps = blurSteps;\r\n        this._merge.targetTexture = this.outputTexture;\r\n        this._merge.record(true);\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.addDependencies(this.sourceTexture);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((context) => {\r\n            context.copyTexture(this.sourceTexture);\r\n        });\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._circleOfConfusion.dispose();\r\n        for (let i = 0; i < this._blurX.length; i++) {\r\n            this._blurX[i].dispose();\r\n            this._blurY[i].dispose();\r\n        }\r\n        this._merge.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9635, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/depthOfFieldPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/depthOfFieldPostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph, Camera } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphDepthOfFieldTask } from \"../../../Tasks/PostProcesses/depthOfFieldTask\";\r\nimport { ThinDepthOfFieldEffectBlurLevel } from \"core/PostProcesses/thinDepthOfFieldEffect\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the depth of field post process\r\n */\r\nexport class NodeRenderGraphDepthOfFieldPostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphDepthOfFieldTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphDepthOfFieldPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param blurLevel The quality of the depth of field effect (default: ThinDepthOfFieldEffectBlurLevel.Low)\r\n     * @param hdr If high dynamic range textures should be used (default: false)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, blurLevel: ThinDepthOfFieldEffectBlurLevel = ThinDepthOfFieldEffectBlurLevel.Low, hdr = false) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [blurLevel, hdr];\r\n\r\n        this.registerInput(\"geomViewDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphDepthOfFieldTask(this.name, frameGraph, blurLevel, hdr);\r\n    }\r\n\r\n    private _createTask(blurLevel: ThinDepthOfFieldEffectBlurLevel, hdr: boolean) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n        const depthSamplingMode = this._frameGraphTask.depthSamplingMode;\r\n        const focalLength = this._frameGraphTask.depthOfField.focalLength;\r\n        const fStop = this._frameGraphTask.depthOfField.fStop;\r\n        const focusDistance = this._frameGraphTask.depthOfField.focusDistance;\r\n        const lensSize = this._frameGraphTask.depthOfField.lensSize;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphDepthOfFieldTask(this.name, this._frameGraph, blurLevel, hdr);\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n        this._frameGraphTask.depthSamplingMode = depthSamplingMode;\r\n        this._frameGraphTask.depthOfField.focalLength = focalLength;\r\n        this._frameGraphTask.depthOfField.fStop = fStop;\r\n        this._frameGraphTask.depthOfField.focusDistance = focusDistance;\r\n        this._frameGraphTask.depthOfField.lensSize = lensSize;\r\n\r\n        this._additionalConstructionParameters = [blurLevel, hdr];\r\n    }\r\n\r\n    /** The quality of the blur effect */\r\n    @editableInPropertyPage(\"Blur level\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"Low\", value: ThinDepthOfFieldEffectBlurLevel.Low },\r\n            { label: \"Medium\", value: ThinDepthOfFieldEffectBlurLevel.Medium },\r\n            { label: \"High\", value: ThinDepthOfFieldEffectBlurLevel.High },\r\n        ],\r\n    })\r\n    public get blurLevel(): ThinDepthOfFieldEffectBlurLevel {\r\n        return this._frameGraphTask.depthOfField.blurLevel;\r\n    }\r\n\r\n    public set blurLevel(value: ThinDepthOfFieldEffectBlurLevel) {\r\n        this._createTask(value, this._frameGraphTask.hdr);\r\n    }\r\n\r\n    /** If high dynamic range textures should be used */\r\n    @editableInPropertyPage(\"HDR\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get hdr(): boolean {\r\n        return this._frameGraphTask.hdr;\r\n    }\r\n\r\n    public set hdr(value: boolean) {\r\n        this._createTask(this._frameGraphTask.depthOfField.blurLevel, value);\r\n    }\r\n\r\n    /** Sampling mode used to sample from the depth texture */\r\n    @editableInPropertyPage(\"Depth sampling mode\", PropertyTypeForEdition.SamplingMode, \"PROPERTIES\")\r\n    public get depthSamplingMode() {\r\n        return this._frameGraphTask.depthSamplingMode;\r\n    }\r\n\r\n    public set depthSamplingMode(value: number) {\r\n        this._frameGraphTask.depthSamplingMode = value;\r\n    }\r\n\r\n    /** The focal the length of the camera used in the effect in scene units/1000 (eg. millimeter). */\r\n    @editableInPropertyPage(\"Focal length\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get focalLength(): number {\r\n        return this._frameGraphTask.depthOfField.focalLength;\r\n    }\r\n\r\n    public set focalLength(value: number) {\r\n        this._frameGraphTask.depthOfField.focalLength = value;\r\n    }\r\n\r\n    /** F-Stop of the effect's camera. The diameter of the resulting aperture can be computed by lensSize/fStop. */\r\n    @editableInPropertyPage(\"F-Stop\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get fStop(): number {\r\n        return this._frameGraphTask.depthOfField.fStop;\r\n    }\r\n\r\n    public set fStop(value: number) {\r\n        this._frameGraphTask.depthOfField.fStop = value;\r\n    }\r\n\r\n    /** Distance away from the camera to focus on in scene units/1000 (eg. millimeter). */\r\n    @editableInPropertyPage(\"Focus distance\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get focusDistance(): number {\r\n        return this._frameGraphTask.depthOfField.focusDistance;\r\n    }\r\n\r\n    public set focusDistance(value: number) {\r\n        this._frameGraphTask.depthOfField.focusDistance = value;\r\n    }\r\n\r\n    /** Max lens size in scene units/1000 (eg. millimeter). Standard cameras are 50mm. The diameter of the resulting aperture can be computed by lensSize/fStop. */\r\n    @editableInPropertyPage(\"Lens size\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get lensSize(): number {\r\n        return this._frameGraphTask.depthOfField.lensSize;\r\n    }\r\n\r\n    public set lensSize(value: number) {\r\n        this._frameGraphTask.depthOfField.lensSize = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphDepthOfFieldPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view depth input component\r\n     */\r\n    public get geomViewDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.depthTexture = this.geomViewDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.lensSize = ${this.lensSize};`);\r\n        codes.push(`${this._codeVariableName}.fStop = ${this.fStop};`);\r\n        codes.push(`${this._codeVariableName}.focusDistance = ${this.focusDistance};`);\r\n        codes.push(`${this._codeVariableName}.focalLength = ${this.focalLength};`);\r\n        codes.push(`${this._codeVariableName}.depthSamplingMode = ${this.depthSamplingMode};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.lensSize = this.lensSize;\r\n        serializationObject.fStop = this.fStop;\r\n        serializationObject.focusDistance = this.focusDistance;\r\n        serializationObject.focalLength = this.focalLength;\r\n        serializationObject.depthSamplingMode = this.depthSamplingMode;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.lensSize = serializationObject.lensSize;\r\n        this.fStop = serializationObject.fStop;\r\n        this.focusDistance = serializationObject.focusDistance;\r\n        this.focalLength = serializationObject.focalLength;\r\n        this.depthSamplingMode = serializationObject.depthSamplingMode;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphDepthOfFieldPostProcessBlock\", NodeRenderGraphDepthOfFieldPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9827, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/extractHighlightsPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/extractHighlightsPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphExtractHighlightsTask } from \"core/FrameGraph/Tasks/PostProcesses/extractHighlightsTask\";\r\nimport { ThinExtractHighlightsPostProcess } from \"core/PostProcesses/thinExtractHighlightsPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the extract highlights post process\r\n */\r\nexport class NodeRenderGraphExtractHighlightsPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphExtractHighlightsTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new ExtractHighlightsPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphExtractHighlightsTask(this.name, frameGraph, new ThinExtractHighlightsPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** The luminance threshold, pixels below this value will be set to black. */\r\n    @editableInPropertyPage(\"Threshold\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get threshold(): number {\r\n        return this._frameGraphTask.postProcess.threshold;\r\n    }\r\n\r\n    public set threshold(value: number) {\r\n        this._frameGraphTask.postProcess.threshold = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphExtractHighlightsPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.threshold = ${this.threshold};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.threshold = this.threshold;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.threshold = serializationObject.threshold;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphExtractHighlightsPostProcessBlock\", NodeRenderGraphExtractHighlightsPostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,+BAA+B,EAAE,8DAAkE;AAC5G,OAAO,EAAE,gCAAgC,EAAE,sEAA4D;AACvG,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;;AAKnG,MAAO,gDAAiD,SAAQ,mVAAiD;IAGnH;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,2SAA+B,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,gSAAgC,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACrJ,CAAC;IAED,2EAAA,EAA6E,CAE7E,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,CAAC;IACtD,CAAC;IAED,IAAW,SAAS,CAAC,KAAa,EAAA;QAC9B,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC;IACvD,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,kDAAkD,CAAC;IAC9D,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,aAAA,EAAgB,IAAI,CAAC,SAAS,CAAA,CAAA,CAAG,CAAC,CAAC;QACvE,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,mBAAmB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAC/C,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACxC,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,CAAC;IACnD,CAAC;CACJ;IAhCG,qOAAA,EAAA;QADC,gQAAsB,EAAC,WAAW,EAAA,EAAA,gCAAA,KAAgC,YAAY,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;iFAGnG;IAgCL,6OAAa,EAAC,0DAA0D,EAAE,gDAAgD,CAAC,CAAC"}},
    {"offset": {"line": 9897, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/filterTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/filterTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { ThinFilterPostProcess } from \"core/PostProcesses/thinFilterPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a kernel filter post process.\r\n */\r\nexport class FrameGraphFilterTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinFilterPostProcess;\r\n\r\n    /**\r\n     * Constructs a new filter task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the filter effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinFilterPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinFilterPostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,qBAAqB,EAAE,wDAAiD;AACjF,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,oBAAqB,SAAQ,+RAAyB;IAG/D;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAuC,CAAA;QACrF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,0QAAqB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACnG,CAAC;CACJ"}},
    {"offset": {"line": 9919, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/filterPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/filterPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphFilterTask } from \"core/FrameGraph/Tasks/PostProcesses/filterTask\";\r\nimport { ThinFilterPostProcess } from \"core/PostProcesses/thinFilterPostProcess\";\r\nimport { Matrix } from \"../../../../Maths/math.vector\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the kernel filter post process\r\n */\r\nexport class NodeRenderGraphFilterPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphFilterTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphFilterPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphFilterTask(this.name, frameGraph, new ThinFilterPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** The matrix to be applied to the image */\r\n    @editableInPropertyPage(\"Matrix\", PropertyTypeForEdition.Matrix, \"PROPERTIES\")\r\n    public get kernelMatrix(): Matrix {\r\n        return this._frameGraphTask.postProcess.kernelMatrix;\r\n    }\r\n\r\n    public set kernelMatrix(value: Matrix) {\r\n        this._frameGraphTask.postProcess.kernelMatrix = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphFilterPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.kernelMatrix = ${this.kernelMatrix};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.kernelMatrix = this.kernelMatrix.asArray();\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.kernelMatrix = Matrix.FromArray(serializationObject.kernelMatrix);\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphFilterPostProcessBlock\", NodeRenderGraphFilterPostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,oBAAoB,EAAE,mDAAuD;AACtF,OAAO,EAAE,qBAAqB,EAAE,2DAAiD;AACjF,OAAO,EAAE,MAAM,EAAE,MAAM,+BAA+B,CAAC;AACvD,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;;;;AAKnG,MAAO,qCAAsC,SAAQ,mVAAiD;IAGxG;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,qRAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,0QAAqB,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IAC/H,CAAC;IAED,0CAAA,EAA4C,CAE5C,IAAW,YAAY,GAAA;QACnB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC;IACzD,CAAC;IAED,IAAW,YAAY,CAAC,KAAa,EAAA;QACjC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,GAAG,KAAK,CAAC;IAC1D,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,uCAAuC,CAAC;IACnD,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,gBAAA,EAAmB,IAAI,CAAC,YAAY,CAAA,CAAA,CAAG,CAAC,CAAC;QAC7E,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,mBAAmB,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC/D,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,4OAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;IAC3E,CAAC;CACJ;IAhCG,qOAAA,EAAA;QADC,gQAAsB,EAAC,QAAQ,EAAA,GAAA,iCAAA,KAAiC,YAAY,CAAC;yEAG7E;IAgCL,6OAAa,EAAC,+CAA+C,EAAE,qCAAqC,CAAC,CAAC"}},
    {"offset": {"line": 9988, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/fxaaTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/fxaaTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderContext, FrameGraphRenderPass } from \"core/index\";\r\nimport { ThinFXAAPostProcess } from \"core/PostProcesses/thinFXAAPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a FXAA post process.\r\n */\r\nexport class FrameGraphFXAATask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinFXAAPostProcess;\r\n\r\n    /**\r\n     * Constructs a new FXAA task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the FXAA effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinFXAAPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinFXAAPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.texelSize.x = 1 / this._sourceWidth;\r\n        this.postProcess.texelSize.y = 1 / this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,mBAAmB,EAAE,sDAA+C;AAC7E,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,kBAAmB,SAAQ,+RAAyB;IAG7D;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAqC,CAAA;QACnF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,sQAAmB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACjG,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QACrD,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;QAEtD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 10016, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/fxaaPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/fxaaPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { FrameGraphFXAATask } from \"core/FrameGraph/Tasks/PostProcesses/fxaaTask\";\r\nimport { ThinFXAAPostProcess } from \"core/PostProcesses/thinFXAAPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the FXAA post process\r\n */\r\nexport class NodeRenderGraphFXAAPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphFXAATask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new FXAA post-process block\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphFXAATask(this.name, frameGraph, new ThinFXAAPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphFXAAPostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphFXAAPostProcessBlock\", NodeRenderGraphFXAAPostProcessBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,kBAAkB,EAAE,iDAAqD;AAClF,OAAO,EAAE,mBAAmB,EAAE,yDAA+C;AAC7E,OAAO,EAAE,iDAAiD,EAAE,MAAM,sCAAsC,CAAC;;;;;AAKnG,MAAO,mCAAoC,SAAQ,mVAAiD;IAGtG;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,iRAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,sQAAmB,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IAC3H,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,qCAAqC,CAAC;IACjD,CAAC;CACJ;IAED,6OAAa,EAAC,6CAA6C,EAAE,mCAAmC,CAAC,CAAC"}},
    {"offset": {"line": 10056, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/grainTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/grainTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { ThinGrainPostProcess } from \"core/PostProcesses/thinGrainPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a grain post process.\r\n */\r\nexport class FrameGraphGrainTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinGrainPostProcess;\r\n\r\n    /**\r\n     * Constructs a new grain task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the grain effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinGrainPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinGrainPostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,oBAAoB,EAAE,uDAAgD;AAC/E,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,mBAAoB,SAAQ,+RAAyB;IAG9D;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAsC,CAAA;QACpF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,wQAAoB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IAClG,CAAC;CACJ"}},
    {"offset": {"line": 10078, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/grainPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/grainPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphGrainTask } from \"core/FrameGraph/Tasks/PostProcesses/grainTask\";\r\nimport { ThinGrainPostProcess } from \"core/PostProcesses/thinGrainPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the grain post process\r\n */\r\nexport class NodeRenderGraphGrainPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphGrainTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new grain post process block\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphGrainTask(this.name, frameGraph, new ThinGrainPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** The intensity of the grain added */\r\n    @editableInPropertyPage(\"Intensity\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 200 })\r\n    public get intensity(): number {\r\n        return this._frameGraphTask.postProcess.intensity;\r\n    }\r\n\r\n    public set intensity(value: number) {\r\n        this._frameGraphTask.postProcess.intensity = value;\r\n    }\r\n\r\n    /** If the grain should be randomized on every frame */\r\n    @editableInPropertyPage(\"Animated\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get animated(): boolean {\r\n        return this._frameGraphTask.postProcess.animated;\r\n    }\r\n\r\n    public set animated(value: boolean) {\r\n        this._frameGraphTask.postProcess.animated = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphGrainPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.intensity = ${this.intensity};`);\r\n        codes.push(`${this._codeVariableName}.animated = ${this.animated};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.intensity = this.intensity;\r\n        serializationObject.animated = this.animated;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.intensity = serializationObject.intensity;\r\n        this.animated = serializationObject.animated;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphGrainPostProcessBlock\", NodeRenderGraphGrainPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10160, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/imageProcessingTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/imageProcessingTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, FrameGraphRenderContext } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinImageProcessingPostProcess } from \"core/PostProcesses/thinImageProcessingPostProcess\";\r\n\r\n/**\r\n * Task which applies an image processing post process.\r\n */\r\nexport class FrameGraphImageProcessingTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinImageProcessingPostProcess;\r\n\r\n    /**\r\n     * Constructs a new image processing task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinImageProcessingPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinImageProcessingPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.outputTextureWidth = this._outputWidth;\r\n        this.postProcess.outputTextureHeight = this._outputHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,8BAA8B,EAAE,iEAA0D;;;AAK7F,MAAO,6BAA8B,SAAQ,+RAAyB;IAGxE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAgD,CAAA;QAC9F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,4RAA8B,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IAC5G,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC;QACxD,IAAI,CAAC,WAAW,CAAC,mBAAmB,GAAG,IAAI,CAAC,aAAa,CAAC;QAE1D,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 10188, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/imageProcessingPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/imageProcessingPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphImageProcessingTask } from \"core/FrameGraph/Tasks/PostProcesses/imageProcessingTask\";\r\nimport { ThinImageProcessingPostProcess } from \"core/PostProcesses/thinImageProcessingPostProcess\";\r\nimport { ImageProcessingConfiguration } from \"core/Materials/imageProcessingConfiguration\";\r\nimport { Color4 } from \"../../../../Maths/math.color\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the image processing post process\r\n */\r\nexport class NodeRenderGraphImageProcessingPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphImageProcessingTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new image processing post process block\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphImageProcessingTask(\r\n            this.name,\r\n            frameGraph,\r\n            new ThinImageProcessingPostProcess(name, scene.getEngine(), {\r\n                scene,\r\n                imageProcessingConfiguration: new ImageProcessingConfiguration(),\r\n            })\r\n        );\r\n    }\r\n\r\n    /** Contrast used in the effect */\r\n    @editableInPropertyPage(\"Contrast\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 4 })\r\n    public get contrast(): number {\r\n        return this._frameGraphTask.postProcess.contrast;\r\n    }\r\n\r\n    public set contrast(value: number) {\r\n        this._frameGraphTask.postProcess.contrast = value;\r\n    }\r\n\r\n    /** Exposure used in the effect */\r\n    @editableInPropertyPage(\"Exposure\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 4 })\r\n    public get exposure(): number {\r\n        return this._frameGraphTask.postProcess.exposure;\r\n    }\r\n\r\n    public set exposure(value: number) {\r\n        this._frameGraphTask.postProcess.exposure = value;\r\n    }\r\n\r\n    /** Whether the tone mapping effect is enabled. */\r\n    @editableInPropertyPage(\"Enabled\", PropertyTypeForEdition.Boolean, \"TONE MAPPING\")\r\n    public get toneMappingEnabled(): boolean {\r\n        return this._frameGraphTask.postProcess.toneMappingEnabled;\r\n    }\r\n\r\n    public set toneMappingEnabled(value: boolean) {\r\n        this._frameGraphTask.postProcess.toneMappingEnabled = value;\r\n    }\r\n\r\n    /** Type of tone mapping effect. */\r\n    @editableInPropertyPage(\"Type\", PropertyTypeForEdition.List, \"TONE MAPPING\", {\r\n        options: [\r\n            { value: ImageProcessingConfiguration.TONEMAPPING_STANDARD, label: \"Standard\" },\r\n            { value: ImageProcessingConfiguration.TONEMAPPING_ACES, label: \"ACES\" },\r\n            { value: ImageProcessingConfiguration.TONEMAPPING_KHR_PBR_NEUTRAL, label: \"KHR PBR Neutral\" },\r\n        ],\r\n    })\r\n    public get toneMappingType(): number {\r\n        return this._frameGraphTask.postProcess.toneMappingType;\r\n    }\r\n\r\n    public set toneMappingType(value: number) {\r\n        this._frameGraphTask.postProcess.toneMappingType = value;\r\n    }\r\n\r\n    /** Whether the vignette effect is enabled. */\r\n    @editableInPropertyPage(\"Enabled\", PropertyTypeForEdition.Boolean, \"VIGNETTE\")\r\n    public get vignetteEnabled(): boolean {\r\n        return this._frameGraphTask.postProcess.vignetteEnabled;\r\n    }\r\n\r\n    public set vignetteEnabled(value: boolean) {\r\n        this._frameGraphTask.postProcess.vignetteEnabled = value;\r\n    }\r\n\r\n    /** Vignette weight or intensity of the vignette effect. */\r\n    @editableInPropertyPage(\"Weight\", PropertyTypeForEdition.Float, \"VIGNETTE\", { min: 0, max: 200 })\r\n    public get vignetteWeight(): number {\r\n        return this._frameGraphTask.postProcess.vignetteWeight;\r\n    }\r\n\r\n    public set vignetteWeight(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteWeight = value;\r\n    }\r\n\r\n    /** Vignette stretch size. */\r\n    @editableInPropertyPage(\"Stretch\", PropertyTypeForEdition.Float, \"VIGNETTE\", { min: 0, max: 1 })\r\n    public get vignetteStretch(): number {\r\n        return this._frameGraphTask.postProcess.vignetteStretch;\r\n    }\r\n\r\n    public set vignetteStretch(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteStretch = value;\r\n    }\r\n\r\n    /** Camera field of view used by the Vignette effect. */\r\n    @editableInPropertyPage(\"FOV\", PropertyTypeForEdition.Float, \"VIGNETTE\", { min: 0, max: 3.14159 })\r\n    public get vignetteCameraFov(): number {\r\n        return this._frameGraphTask.postProcess.vignetteCameraFov;\r\n    }\r\n\r\n    public set vignetteCameraFov(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteCameraFov = value;\r\n    }\r\n\r\n    /** Vignette center X Offset. */\r\n    @editableInPropertyPage(\"Center X\", PropertyTypeForEdition.Float, \"VIGNETTE\", { min: 0, max: 1 })\r\n    public get vignetteCenterX(): number {\r\n        return this._frameGraphTask.postProcess.vignetteCenterX;\r\n    }\r\n\r\n    public set vignetteCenterX(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteCenterX = value;\r\n    }\r\n\r\n    /** Vignette center Y Offset. */\r\n    @editableInPropertyPage(\"Center Y\", PropertyTypeForEdition.Float, \"VIGNETTE\", { min: 0, max: 1 })\r\n    public get vignetteCenterY(): number {\r\n        return this._frameGraphTask.postProcess.vignetteCenterY;\r\n    }\r\n\r\n    public set vignetteCenterY(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteCenterY = value;\r\n    }\r\n\r\n    /** Color of the vignette applied on the screen through the chosen blend mode (vignetteBlendMode) */\r\n    @editableInPropertyPage(\"Color\", PropertyTypeForEdition.Color4, \"VIGNETTE\")\r\n    public get vignetteColor(): Color4 {\r\n        return this._frameGraphTask.postProcess.vignetteColor;\r\n    }\r\n\r\n    public set vignetteColor(value: Color4) {\r\n        this._frameGraphTask.postProcess.vignetteColor = value;\r\n    }\r\n\r\n    /** Vignette blend mode allowing different kind of effect. */\r\n    @editableInPropertyPage(\"Blend mode\", PropertyTypeForEdition.List, \"VIGNETTE\", {\r\n        options: [\r\n            { value: ImageProcessingConfiguration.VIGNETTEMODE_MULTIPLY, label: \"Multiply\" },\r\n            { value: ImageProcessingConfiguration.VIGNETTEMODE_OPAQUE, label: \"Opaque\" },\r\n        ],\r\n    })\r\n    public get vignetteBlendMode(): number {\r\n        return this._frameGraphTask.postProcess.vignetteBlendMode;\r\n    }\r\n\r\n    public set vignetteBlendMode(value: number) {\r\n        this._frameGraphTask.postProcess.vignetteBlendMode = value;\r\n    }\r\n\r\n    /** Whether the dithering effect is enabled. */\r\n    @editableInPropertyPage(\"Enabed\", PropertyTypeForEdition.Boolean, \"DITHERING\")\r\n    public get ditheringEnabled(): boolean {\r\n        return this._frameGraphTask.postProcess.ditheringEnabled;\r\n    }\r\n\r\n    public set ditheringEnabled(value: boolean) {\r\n        this._frameGraphTask.postProcess.ditheringEnabled = value;\r\n    }\r\n\r\n    /** Sets whether the dithering effect is enabled. */\r\n    @editableInPropertyPage(\"Intensity\", PropertyTypeForEdition.Float, \"DITHERING\", { min: 0, max: 1 })\r\n    public get ditheringIntensity(): number {\r\n        return this._frameGraphTask.postProcess.ditheringIntensity;\r\n    }\r\n\r\n    public set ditheringIntensity(value: number) {\r\n        this._frameGraphTask.postProcess.ditheringIntensity = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphImageProcessingPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.contrast = ${this.contrast};`);\r\n        codes.push(`${this._codeVariableName}.exposure = ${this.exposure};`);\r\n        codes.push(`${this._codeVariableName}.toneMappingEnabled = ${this.toneMappingEnabled};`);\r\n        codes.push(`${this._codeVariableName}.toneMappingType = ${this.toneMappingType};`);\r\n        codes.push(`${this._codeVariableName}.vignetteEnabled = ${this.vignetteEnabled};`);\r\n        codes.push(`${this._codeVariableName}.vignetteWeight = ${this.vignetteWeight};`);\r\n        codes.push(`${this._codeVariableName}.vignetteStretch = ${this.vignetteStretch};`);\r\n        codes.push(`${this._codeVariableName}.vignetteCameraFov = ${this.vignetteCameraFov};`);\r\n        codes.push(`${this._codeVariableName}.vignetteCenterX = ${this.vignetteCenterX};`);\r\n        codes.push(`${this._codeVariableName}.vignetteCenterY = ${this.vignetteCenterY};`);\r\n        codes.push(`${this._codeVariableName}.vignetteColor = new BABYLON.Color4(${this.vignetteColor.r}, ${this.vignetteColor.g}, ${this.vignetteColor.b}, 1);`);\r\n        codes.push(`${this._codeVariableName}.vignetteBlendMode = ${this.vignetteBlendMode};`);\r\n        codes.push(`${this._codeVariableName}.ditheringEnabled = ${this.ditheringEnabled};`);\r\n        codes.push(`${this._codeVariableName}.ditheringIntensity = ${this.ditheringIntensity};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.contrast = this.contrast;\r\n        serializationObject.exposure = this.exposure;\r\n        serializationObject.toneMappingEnabled = this.toneMappingEnabled;\r\n        serializationObject.toneMappingType = this.toneMappingType;\r\n        serializationObject.vignetteEnabled = this.vignetteEnabled;\r\n        serializationObject.vignetteWeight = this.vignetteWeight;\r\n        serializationObject.vignetteStretch = this.vignetteStretch;\r\n        serializationObject.vignetteCameraFov = this.vignetteCameraFov;\r\n        serializationObject.vignetteCenterX = this.vignetteCenterX;\r\n        serializationObject.vignetteCenterY = this.vignetteCenterY;\r\n        serializationObject.vignetteColor = this.vignetteColor.asArray();\r\n        serializationObject.vignetteBlendMode = this.vignetteBlendMode;\r\n        serializationObject.ditheringEnabled = this.ditheringEnabled;\r\n        serializationObject.ditheringIntensity = this.ditheringIntensity;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.contrast = serializationObject.contrast;\r\n        this.exposure = serializationObject.exposure;\r\n        this.toneMappingEnabled = serializationObject.toneMappingEnabled;\r\n        this.toneMappingType = serializationObject.toneMappingType;\r\n        this.vignetteEnabled = serializationObject.vignetteEnabled;\r\n        this.vignetteWeight = serializationObject.vignetteWeight;\r\n        this.vignetteStretch = serializationObject.vignetteStretch;\r\n        this.vignetteCameraFov = serializationObject.vignetteCameraFov;\r\n        this.vignetteCenterX = serializationObject.vignetteCenterX;\r\n        this.vignetteCenterY = serializationObject.vignetteCenterY;\r\n        this.vignetteColor = Color4.FromArray(serializationObject.vignetteColor);\r\n        this.vignetteBlendMode = serializationObject.vignetteBlendMode;\r\n        this.ditheringEnabled = serializationObject.ditheringEnabled;\r\n        this.ditheringIntensity = serializationObject.ditheringIntensity;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphImageProcessingPostProcessBlock\", NodeRenderGraphImageProcessingPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10468, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/motionBlurTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/motionBlurTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinMotionBlurPostProcess } from \"core/PostProcesses/thinMotionBlurPostProcess\";\r\n\r\n/**\r\n * Task which applies a motion blur post process.\r\n */\r\nexport class FrameGraphMotionBlurTask extends FrameGraphPostProcessTask {\r\n    /**\r\n     * The velocity texture to use for the motion blur effect.\r\n     * Needed for object-based motion blur.\r\n     */\r\n    public velocityTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The (view) depth texture to use for the motion blur effect.\r\n     * Needed for screen-based motion blur.\r\n     */\r\n    public depthTexture?: FrameGraphTextureHandle;\r\n\r\n    public override readonly postProcess: ThinMotionBlurPostProcess;\r\n\r\n    /**\r\n     * Constructs a new motion blur task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinMotionBlurPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinMotionBlurPostProcess(name, frameGraph.scene));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined) {\r\n            throw new Error(`FrameGraphMotionBlurTask \"${this.name}\": sourceTexture is required`);\r\n        }\r\n\r\n        const pass = super.record(skipCreationOfDisabledPasses, undefined, (context) => {\r\n            if (this.velocityTexture) {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"velocitySampler\", this.velocityTexture);\r\n            } else if (this.postProcess.isObjectBased) {\r\n                throw new Error(`FrameGraphMotionBlurTask \"${this.name}\": velocityTexture is required for object-based motion blur`);\r\n            }\r\n\r\n            if (this.depthTexture) {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n            } else if (!this.postProcess.isObjectBased) {\r\n                throw new Error(`FrameGraphMotionBlurTask \"${this.name}\": depthTexture is required for screen-based motion blur`);\r\n            }\r\n        });\r\n\r\n        pass.addDependencies(this.velocityTexture);\r\n        pass.addDependencies(this.depthTexture);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,yBAAyB,EAAE,4DAAqD;;;AAKnF,MAAO,wBAAyB,SAAQ,+RAAyB;IAenE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAA2C,CAAA;QACzF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,kRAAyB,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACtG,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;YACnC,MAAM,IAAI,KAAK,CAAC,CAAA,0BAAA,EAA6B,IAAI,CAAC,IAAI,CAAA,4BAAA,CAA8B,CAAC,CAAC;QAC1F,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YAC3E,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,iBAAiB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAC7G,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;gBACxC,MAAM,IAAI,KAAK,CAAC,CAAA,0BAAA,EAA6B,IAAI,CAAC,IAAI,CAAA,2DAAA,CAA6D,CAAC,CAAC;YACzH,CAAC;YAED,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACvG,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;gBACzC,MAAM,IAAI,KAAK,CAAC,CAAA,0BAAA,EAA6B,IAAI,CAAC,IAAI,CAAA,wDAAA,CAA0D,CAAC,CAAC;YACtH,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAExC,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 10512, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/motionBlurPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/motionBlurPostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphMotionBlurTask } from \"core/FrameGraph/Tasks/PostProcesses/motionBlurTask\";\r\nimport { ThinMotionBlurPostProcess } from \"core/PostProcesses/thinMotionBlurPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the motion blur post process\r\n */\r\nexport class NodeRenderGraphMotionBlurPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphMotionBlurTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphMotionBlurPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"geomVelocity\", NodeRenderGraphBlockConnectionPointTypes.TextureVelocity, true);\r\n        this.registerInput(\"geomViewDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth, true);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphMotionBlurTask(this.name, frameGraph, new ThinMotionBlurPostProcess(name, frameGraph.scene));\r\n    }\r\n\r\n    /** Defines how much the image is blurred by the movement. */\r\n    @editableInPropertyPage(\"Strength\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get motionStrength(): number {\r\n        return this._frameGraphTask.postProcess.motionStrength;\r\n    }\r\n\r\n    public set motionStrength(value: number) {\r\n        this._frameGraphTask.postProcess.motionStrength = value;\r\n    }\r\n\r\n    /** Gets the number of iterations that are used for motion blur quality. */\r\n    @editableInPropertyPage(\"Samples\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get motionBlurSamples(): number {\r\n        return this._frameGraphTask.postProcess.motionBlurSamples;\r\n    }\r\n\r\n    public set motionBlurSamples(value: number) {\r\n        this._frameGraphTask.postProcess.motionBlurSamples = value;\r\n    }\r\n\r\n    /** Gets whether or not the motion blur post-process is in object based mode. */\r\n    @editableInPropertyPage(\"Object based\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get isObjectBased(): boolean {\r\n        return this._frameGraphTask.postProcess.isObjectBased;\r\n    }\r\n\r\n    public set isObjectBased(value: boolean) {\r\n        this._frameGraphTask.postProcess.isObjectBased = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphMotionBlurPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry velocity input component\r\n     */\r\n    public get geomVelocity(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view depth input component\r\n     */\r\n    public get geomViewDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.velocityTexture = this.geomVelocity.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.depthTexture = this.geomViewDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.motionStrength = ${this.motionStrength};`);\r\n        codes.push(`${this._codeVariableName}.motionBlurSamples = ${this.motionBlurSamples};`);\r\n        codes.push(`${this._codeVariableName}.isObjectBased = ${this.isObjectBased};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.motionStrength = this.motionStrength;\r\n        serializationObject.motionBlurSamples = this.motionBlurSamples;\r\n        serializationObject.isObjectBased = this.isObjectBased;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.motionStrength = serializationObject.motionStrength;\r\n        this.motionBlurSamples = serializationObject.motionBlurSamples;\r\n        this.isObjectBased = serializationObject.isObjectBased;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphMotionBlurPostProcessBlock\", NodeRenderGraphMotionBlurPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10622, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/passTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/passTask.ts"],"sourcesContent":["// eslint-disable-next-line import/no-internal-modules\r\nimport type { FrameGraph } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinPassCubePostProcess, ThinPassPostProcess } from \"core/PostProcesses/thinPassPostProcess\";\r\n\r\n/**\r\n * Task which applies a pass post process.\r\n */\r\nexport class FrameGraphPassTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinPassPostProcess;\r\n\r\n    /**\r\n     * Constructs a new pass task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the pass effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinPassPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinPassPostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n\r\n/**\r\n * Task which applies a pass cube post process.\r\n */\r\nexport class FrameGraphPassCubeTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinPassCubePostProcess;\r\n\r\n    /**\r\n     * Constructs a new pass cube task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the pass cube effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinPassCubePostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinPassCubePostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,uBAAuB,EAAE,mBAAmB,EAAE,sDAA+C;;;AAKhG,MAAO,kBAAmB,SAAQ,+RAAyB;IAG7D;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAqC,CAAA;QACnF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,sQAAmB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACjG,CAAC;CACJ;AAKK,MAAO,sBAAuB,SAAQ,+RAAyB;IAGjE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAyC,CAAA;QACvF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,0QAAuB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACrG,CAAC;CACJ"}},
    {"offset": {"line": 10656, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/passPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/passPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { FrameGraphPassCubeTask, FrameGraphPassTask } from \"core/FrameGraph/Tasks/PostProcesses/passTask\";\r\nimport { ThinPassCubePostProcess, ThinPassPostProcess } from \"core/PostProcesses/thinPassPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"././baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the pass post process\r\n */\r\nexport class NodeRenderGraphPassPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphPassTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphPassPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphPassTask(this.name, frameGraph, new ThinPassPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphPassPostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphPassPostProcessBlock\", NodeRenderGraphPassPostProcessBlock);\r\n\r\n/**\r\n * Block that implements the pass cube post process\r\n */\r\nexport class NodeRenderGraphPassCubePostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphPassCubeTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphPassCubePostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphPassCubeTask(this.name, frameGraph, new ThinPassCubePostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphPassCubePostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphPassCubePostProcessBlock\", NodeRenderGraphPassCubePostProcessBlock);\r\n"],"names":[],"mappings":";;;;;;AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,iDAAqD;AAC1G,OAAO,EAAE,uBAAuB,EAAE,mBAAmB,EAAE,yDAA+C;AACtG,OAAO,EAAE,iDAAiD,EAAE,MAAM,wCAAwC,CAAC;;;;;AAKrG,MAAO,mCAAoC,SAAQ,mVAAiD;IAGtG;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,iRAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,sQAAmB,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IAC3H,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,qCAAqC,CAAC;IACjD,CAAC;CACJ;IAED,6OAAa,EAAC,6CAA6C,EAAE,mCAAmC,CAAC,CAAC;AAK5F,MAAO,uCAAwC,SAAQ,mVAAiD;IAG1G;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,qRAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,0QAAuB,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACnI,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,yCAAyC,CAAC;IACrD,CAAC;CACJ;IAED,6OAAa,EAAC,iDAAiD,EAAE,uCAAuC,CAAC,CAAC"}},
    {"offset": {"line": 10722, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/sharpenTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/sharpenTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderContext, FrameGraphRenderPass } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinSharpenPostProcess } from \"core/PostProcesses/thinSharpenPostProcess\";\r\n\r\n/**\r\n * Task which applies a sharpen post process.\r\n */\r\nexport class FrameGraphSharpenTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinSharpenPostProcess;\r\n\r\n    /**\r\n     * Constructs a new sharpen task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinSharpenPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinSharpenPostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,sBAAsB,EAAE,yDAAkD;;;AAK7E,MAAO,qBAAsB,SAAQ,+RAAyB;IAGhE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAwC,CAAA;QACtF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,4QAAsB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACpG,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 10750, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/sharpenPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/sharpenPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphSharpenTask } from \"core/FrameGraph/Tasks/PostProcesses/sharpenTask\";\r\nimport { ThinSharpenPostProcess } from \"core/PostProcesses/thinSharpenPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the sharpen post process\r\n */\r\nexport class NodeRenderGraphSharpenPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphSharpenTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new sharpen post process block\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphSharpenTask(this.name, frameGraph, new ThinSharpenPostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** How much of the original color should be applied. Setting this to 0 will display edge detection. */\r\n    @editableInPropertyPage(\"Color Amount\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 3 })\r\n    public get colorAmount(): number {\r\n        return this._frameGraphTask.postProcess.colorAmount;\r\n    }\r\n\r\n    public set colorAmount(value: number) {\r\n        this._frameGraphTask.postProcess.colorAmount = value;\r\n    }\r\n\r\n    /** How much sharpness should be applied. */\r\n    @editableInPropertyPage(\"Edge Amount\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 5 })\r\n    public get edgeAmount(): number {\r\n        return this._frameGraphTask.postProcess.edgeAmount;\r\n    }\r\n\r\n    public set edgeAmount(value: number) {\r\n        this._frameGraphTask.postProcess.edgeAmount = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphSharpenPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.colorAmount = ${this.colorAmount};`);\r\n        codes.push(`${this._codeVariableName}.edgeAmount = ${this.edgeAmount};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.colorAmount = this.colorAmount;\r\n        serializationObject.edgeAmount = this.edgeAmount;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.colorAmount = serializationObject.colorAmount;\r\n        this.edgeAmount = serializationObject.edgeAmount;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphSharpenPostProcessBlock\", NodeRenderGraphSharpenPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10835, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/screenSpaceCurvatureTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/screenSpaceCurvatureTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, FrameGraphRenderPass } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinScreenSpaceCurvaturePostProcess } from \"core/PostProcesses/thinScreenSpaceCurvaturePostProcess\";\r\n\r\n/**\r\n * Task which applies a screen space curvature post process.\r\n */\r\nexport class FrameGraphScreenSpaceCurvatureTask extends FrameGraphPostProcessTask {\r\n    /**\r\n     * The normal texture to use for the screen space curvature effect.\r\n     * It must store normals in camera view space.\r\n     */\r\n    public normalTexture: FrameGraphTextureHandle;\r\n\r\n    public override readonly postProcess: ThinScreenSpaceCurvaturePostProcess;\r\n\r\n    /**\r\n     * Constructs a new circle of confusion task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param thinPostProcess The thin post process to use for the task. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinScreenSpaceCurvaturePostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinScreenSpaceCurvaturePostProcess(name, frameGraph.engine));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.normalTexture === undefined) {\r\n            throw new Error(`FrameGraphScreenSpaceCurvatureTask \"${this.name}\": sourceTexture and normalTexture are required`);\r\n        }\r\n\r\n        const pass = super.record(skipCreationOfDisabledPasses, undefined, (context) => {\r\n            context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"normalSampler\", this.normalTexture);\r\n        });\r\n\r\n        pass.addDependencies(this.normalTexture);\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,mCAAmC,EAAE,sEAA+D;;;AAKvG,MAAO,kCAAmC,SAAQ,+RAAyB;IAS7E;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAqD,CAAA;QACnG,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,sSAAmC,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACjH,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;YACvE,MAAM,IAAI,KAAK,CAAC,CAAA,oCAAA,EAAuC,IAAI,CAAC,IAAI,CAAA,+CAAA,CAAiD,CAAC,CAAC;QACvH,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YAC3E,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzG,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAEzC,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 10867, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/screenSpaceCurvaturePostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/screenSpaceCurvaturePostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraphTextureHandle, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphScreenSpaceCurvatureTask } from \"core/FrameGraph/Tasks/PostProcesses/screenSpaceCurvatureTask\";\r\nimport { ThinScreenSpaceCurvaturePostProcess } from \"core/PostProcesses/thinScreenSpaceCurvaturePostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the screen space curvature post process\r\n */\r\nexport class NodeRenderGraphScreenSpaceCurvaturePostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphScreenSpaceCurvatureTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphScreenSpaceCurvaturePostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"geomViewNormal\", NodeRenderGraphBlockConnectionPointTypes.TextureViewNormal);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphScreenSpaceCurvatureTask(this.name, frameGraph, new ThinScreenSpaceCurvaturePostProcess(name, scene.getEngine()));\r\n    }\r\n\r\n    /** Defines how much ridge the curvature effect displays. */\r\n    @editableInPropertyPage(\"Ridge\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get ridge(): number {\r\n        return this._frameGraphTask.postProcess.ridge;\r\n    }\r\n\r\n    public set ridge(value: number) {\r\n        this._frameGraphTask.postProcess.ridge = value;\r\n    }\r\n\r\n    /** Defines how much valley the curvature effect displays. */\r\n    @editableInPropertyPage(\"Valley\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get valley(): number {\r\n        return this._frameGraphTask.postProcess.valley;\r\n    }\r\n\r\n    public set valley(value: number) {\r\n        this._frameGraphTask.postProcess.valley = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphScreenSpaceCurvaturePostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view normal input component\r\n     */\r\n    public get geomViewNormal(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.normalTexture = this.geomViewNormal.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.ridge = ${this.ridge};`);\r\n        codes.push(`${this._codeVariableName}.valley = ${this.valley};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.ridge = this.ridge;\r\n        serializationObject.valley = this.valley;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.ridge = serializationObject.ridge;\r\n        this.valley = serializationObject.valley;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphScreenSpaceCurvaturePostProcessBlock\", NodeRenderGraphScreenSpaceCurvaturePostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10964, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssao2Task.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssao2Task.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, Camera, FrameGraphTextureHandle } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinSSAO2PostProcess } from \"core/PostProcesses/thinSSAO2PostProcess\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphSSAO2Task extends FrameGraphPostProcessTask {\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    public normalTexture: FrameGraphTextureHandle;\r\n\r\n    public camera: Camera;\r\n\r\n    public override readonly postProcess: ThinSSAO2PostProcess;\r\n\r\n    private _currentCameraMode = -1;\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinSSAO2PostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinSSAO2PostProcess(name, frameGraph.scene));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.depthTexture === undefined || this.normalTexture === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphSSAO2Task \"${this.name}\": sourceTexture, depthTexture, normalTexture and camera are required`);\r\n        }\r\n\r\n        this._currentCameraMode = this.camera.mode;\r\n        this.postProcess.updateEffect();\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                this.postProcess.camera = this.camera;\r\n\r\n                if (this._currentCameraMode !== this.camera.mode) {\r\n                    this._currentCameraMode = this.camera.mode;\r\n                    this.postProcess.updateEffect();\r\n                }\r\n\r\n                context.setTextureSamplingMode(this.depthTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n                context.setTextureSamplingMode(this.normalTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"normalSampler\", this.normalTexture);\r\n            }\r\n        );\r\n\r\n        pass.addDependencies([this.depthTexture]);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,oBAAoB,EAAE,uDAAgD;;;AAKzE,MAAO,mBAAoB,SAAQ,+RAAyB;IAW9D,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAsC,CAAA;QACpF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,wQAAoB,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QAHzF,IAAA,CAAA,kBAAkB,GAAG,CAAC,CAAC,CAAC;IAIhC,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;YACvI,MAAM,IAAI,KAAK,CAAC,CAAA,qBAAA,EAAwB,IAAI,CAAC,IAAI,CAAA,qEAAA,CAAuE,CAAC,CAAC;QAC9H,CAAC;QAED,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAEhC,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAEtC,IAAI,IAAI,CAAC,kBAAkB,KAAK,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;gBAC/C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBAC3C,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;YACpC,CAAC;YAED,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;YAC3F,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;QAChG,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACnG,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzG,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC;YAAC,IAAI,CAAC,YAAY;SAAC,CAAC,CAAC;QAE1C,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 11007, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssao2BlurTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssao2BlurTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, FrameGraphTextureHandle } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinSSAO2BlurPostProcess } from \"core/PostProcesses/thinSSAO2BlurPostProcess\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphSSAO2BlurTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinSSAO2BlurPostProcess;\r\n\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    constructor(\r\n        name: string,\r\n        frameGraph: FrameGraph,\r\n        private _isHorizontal: boolean,\r\n        thinPostProcess?: ThinSSAO2BlurPostProcess\r\n    ) {\r\n        super(name, frameGraph, thinPostProcess || new ThinSSAO2BlurPostProcess(name, frameGraph.engine, _isHorizontal));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.depthTexture === undefined) {\r\n            throw new Error(`FrameGraphSSAO2BlurTask \"${this.name}\": sourceTexture and depthTexture are required`);\r\n        }\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                context.setTextureSamplingMode(this.depthTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n            }\r\n        );\r\n\r\n        this.postProcess.textureSize = this._isHorizontal ? this._outputWidth : this._outputHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,wBAAwB,EAAE,2DAAoD;;;AAKjF,MAAO,uBAAwB,SAAQ,+RAAyB;IAKlE,YACI,IAAY,EACZ,UAAsB,EACd,aAAsB,EAC9B,eAA0C,CAAA;QAE1C,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,gRAAwB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,CAAC;QAHzG,IAAA,CAAA,aAAa,GAAb,aAAa,CAAS;IAIlC,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YACtE,MAAM,IAAI,KAAK,CAAC,CAAA,yBAAA,EAA4B,IAAI,CAAC,IAAI,CAAA,8CAAA,CAAgD,CAAC,CAAC;QAC3G,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;QAC/F,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACvG,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC;QAE3F,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 11037, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssao2RenderingPipelineTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssao2RenderingPipelineTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, Camera, FrameGraphTextureCreationOptions } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ThinSSAO2RenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/thinSSAO2RenderingPipeline\";\r\nimport { FrameGraphSSAO2Task } from \"./ssao2Task\";\r\nimport { FrameGraphSSAO2BlurTask } from \"./ssao2BlurTask\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a SSAO2 post process.\r\n */\r\nexport class FrameGraphSSAO2RenderingPipelineTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to apply the SSAO2 effect on.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the source texture.\r\n     */\r\n    public sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The depth texture used by the SSAO2 effect (Z coordinate in camera view space).\r\n     */\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The normal texture used by the SSAO2 effect (normal vector in camera view space).\r\n     */\r\n    public normalTexture: FrameGraphTextureHandle;\r\n\r\n    private _camera: Camera;\r\n\r\n    /**\r\n     * The camera used to render the scene.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(camera: Camera) {\r\n        if (camera === this._camera) {\r\n            return;\r\n        }\r\n\r\n        this._camera = camera;\r\n\r\n        this.ssao.camera = camera;\r\n    }\r\n\r\n    /**\r\n     * The target texture to render the SSAO2 effect to.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture of the SSAO2 effect.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The SSAO2 Rendering pipeline.\r\n     */\r\n    public readonly ssao: ThinSSAO2RenderingPipeline;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(name: string) {\r\n        this._name = name;\r\n        if (this._ssao) {\r\n            this._ssao.name = `${name} SSAO2 main`;\r\n        }\r\n        if (this._ssaoBlurX) {\r\n            this._ssaoBlurX.name = `${name} SSAO2 Blur X`;\r\n        }\r\n        if (this._ssaoBlurY) {\r\n            this._ssaoBlurY.name = `${name} SSAO2 Blur Y`;\r\n        }\r\n        if (this._ssaoCombine) {\r\n            this._ssaoCombine.name = `${name} SSAO2 Combine`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The ratio between the SSAO texture size and the source texture size\r\n     */\r\n    public readonly ratioSSAO: number;\r\n\r\n    /**\r\n     * The ratio between the SSAO blur texture size and the source texture size\r\n     */\r\n    public readonly ratioBlur: number;\r\n\r\n    /**\r\n     * The texture type used by the different post processes created by SSAO2.\r\n     * It's a read-only property. If you want to change it, you must recreate the task and pass the appropriate texture type to the constructor.\r\n     */\r\n    public readonly textureType: number;\r\n\r\n    private readonly _ssao: FrameGraphSSAO2Task;\r\n    private readonly _ssaoBlurX: FrameGraphSSAO2BlurTask;\r\n    private readonly _ssaoBlurY: FrameGraphSSAO2BlurTask;\r\n    private readonly _ssaoCombine: FrameGraphPostProcessTask;\r\n\r\n    /**\r\n     * Constructs a SSAO2 rendering pipeline task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param ratioSSAO The ratio between the SSAO texture size and the source texture size\r\n     * @param ratioBlur The ratio between the SSAO blur texture size and the source texture size\r\n     * @param textureType The texture type used by the different post processes created by SSAO2 (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, ratioSSAO: number, ratioBlur: number, textureType = Constants.TEXTURETYPE_UNSIGNED_BYTE) {\r\n        super(name, frameGraph);\r\n\r\n        this.ratioSSAO = ratioSSAO;\r\n        this.ratioBlur = ratioBlur;\r\n        this.textureType = textureType;\r\n\r\n        this.ssao = new ThinSSAO2RenderingPipeline(name, frameGraph.scene);\r\n\r\n        this._ssao = new FrameGraphSSAO2Task(`${name} SSAO2 main`, this._frameGraph, this.ssao._ssaoPostProcess);\r\n        this._ssaoBlurX = new FrameGraphSSAO2BlurTask(`${name} SSAO2 Blur X`, this._frameGraph, true, this.ssao._ssaoBlurXPostProcess);\r\n        this._ssaoBlurY = new FrameGraphSSAO2BlurTask(`${name} SSAO2 Blur Y`, this._frameGraph, false, this.ssao._ssaoBlurYPostProcess);\r\n        this._ssaoCombine = new FrameGraphPostProcessTask(`${name} SSAO2 Combine`, this._frameGraph, this.ssao._ssaoCombinePostProcess);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this.ssao.isReady();\r\n    }\r\n\r\n    public record(): void {\r\n        if (this.sourceTexture === undefined || this.depthTexture === undefined || this.normalTexture === undefined || this.camera === undefined) {\r\n            throw new Error(`FrameGraphSSAO2RenderingPipelineTask \"${this.name}\": sourceTexture, depthTexture, normalTexture and camera are required`);\r\n        }\r\n\r\n        const sourceTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.sourceTexture);\r\n\r\n        this._ssao.sourceTexture = this.sourceTexture;\r\n        this._ssao.sourceSamplingMode = this.sourceSamplingMode;\r\n        this._ssao.camera = this.camera;\r\n        this._ssao.depthTexture = this.depthTexture;\r\n        this._ssao.normalTexture = this.normalTexture;\r\n\r\n        const textureSize = {\r\n            width: Math.floor(sourceTextureDescription.size.width * this.ratioSSAO) || 1,\r\n            height: Math.floor(sourceTextureDescription.size.height * this.ratioSSAO) || 1,\r\n        };\r\n        const textureCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: textureSize,\r\n            options: {\r\n                createMipMaps: false,\r\n                types: [this.textureType],\r\n                formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                samples: 1,\r\n                useSRGBBuffers: [false],\r\n                labels: [\"\"],\r\n            },\r\n            sizeIsPercentage: false,\r\n        };\r\n\r\n        const ssaoTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssao.name, textureCreationOptions);\r\n\r\n        // SSAO main post process\r\n        this._ssao.targetTexture = ssaoTextureHandle;\r\n        this._ssao.record(true);\r\n\r\n        // SSAO Blur X & Y\r\n        textureSize.width = Math.floor(sourceTextureDescription.size.width * this.ratioBlur) || 1;\r\n        textureSize.height = Math.floor(sourceTextureDescription.size.height * this.ratioBlur) || 1;\r\n\r\n        const sourceTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.sourceTexture);\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture, this.name + \" Output\", sourceTextureCreationOptions);\r\n\r\n        const blurXTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssaoBlurX.name, textureCreationOptions);\r\n\r\n        this._ssaoBlurX.sourceTexture = ssaoTextureHandle!;\r\n        this._ssaoBlurX.depthTexture = this.depthTexture;\r\n        this._ssaoBlurX.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n        this._ssaoBlurX.targetTexture = blurXTextureHandle;\r\n        this._ssaoBlurX.record(true);\r\n\r\n        const blurYTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssaoBlurY.name, textureCreationOptions);\r\n\r\n        this._ssaoBlurY.sourceTexture = blurXTextureHandle;\r\n        this._ssaoBlurY.depthTexture = this.depthTexture;\r\n        this._ssaoBlurY.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n        this._ssaoBlurY.targetTexture = blurYTextureHandle;\r\n        this._ssaoBlurY.record(true);\r\n\r\n        // SSAO Combine\r\n        this._ssaoCombine.sourceTexture = this.sourceTexture;\r\n        this._ssaoCombine.sourceSamplingMode = this.sourceSamplingMode;\r\n        this._ssaoCombine.targetTexture = this.outputTexture;\r\n        const combinerPass = this._ssaoCombine.record(\r\n            true,\r\n            (context) => {\r\n                context.setTextureSamplingMode(this.sourceTexture, this.sourceSamplingMode);\r\n                context.setTextureSamplingMode(blurYTextureHandle, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._ssaoCombine.drawWrapper.effect!, \"textureSampler\", blurYTextureHandle);\r\n                context.bindTextureHandle(this._ssaoCombine.drawWrapper.effect!, \"originalColor\", this.sourceTexture);\r\n            }\r\n        );\r\n\r\n        combinerPass.addDependencies(blurYTextureHandle);\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.addDependencies(this.sourceTexture);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((context) => {\r\n            context.copyTexture(this.sourceTexture);\r\n        });\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._ssao.dispose();\r\n        this._ssaoBlurX.dispose();\r\n        this._ssaoBlurY.dispose();\r\n        this._ssaoCombine.dispose();\r\n        this.ssao.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11196, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/ssao2PostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/ssao2PostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph, NodeRenderGraphConnectionPoint, NodeRenderGraphBuildState, FrameGraphTextureHandle, Camera } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphSSAO2RenderingPipelineTask } from \"../../../Tasks/PostProcesses/ssao2RenderingPipelineTask\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the SSAO2 post process\r\n */\r\nexport class NodeRenderGraphSSAO2PostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphSSAO2RenderingPipelineTask;\r\n\r\n    public override _additionalConstructionParameters: [number, number, number];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphSSAO2PostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param ratioSSAO The ratio between the SSAO texture size and the source texture size (default: 1)\r\n     * @param ratioBlur The ratio between the SSAO blur texture size and the source texture size (default: 1)\r\n     * @param textureType The texture type used by the different post processes created by SSAO2 (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, ratioSSAO = 1, ratioBlur = 1, textureType = Constants.TEXTURETYPE_UNSIGNED_BYTE) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [ratioSSAO, ratioBlur, textureType];\r\n\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this.registerInput(\"geomDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth);\r\n        this.registerInput(\"geomNormal\", NodeRenderGraphBlockConnectionPointTypes.TextureViewNormal);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphSSAO2RenderingPipelineTask(this.name, frameGraph, ratioSSAO, ratioBlur, textureType);\r\n    }\r\n\r\n    private _createTask(ratioSSAO: number, ratioBlur: number, textureType: number) {\r\n        const sourceSamplingMode = this.sourceSamplingMode;\r\n        const samples = this.samples;\r\n        const totalStrength = this.totalStrength;\r\n        const base = this.base;\r\n        const maxZ = this.maxZ;\r\n        const minZAspect = this.minZAspect;\r\n        const radius = this.radius;\r\n        const epsilon = this.epsilon;\r\n        const useViewportInCombineStage = this.useViewportInCombineStage;\r\n        const bypassBlur = this.bypassBlur;\r\n        const expensiveBlur = this.expensiveBlur;\r\n        const bilateralSoften = this.bilateralSoften;\r\n        const bilateralSamples = this.bilateralSamples;\r\n        const bilateralTolerance = this.bilateralTolerance;\r\n\r\n        this._frameGraphTask.dispose();\r\n        this._frameGraphTask = new FrameGraphSSAO2RenderingPipelineTask(this.name, this._frameGraph, ratioSSAO, ratioBlur, textureType);\r\n\r\n        this.sourceSamplingMode = sourceSamplingMode;\r\n        this.samples = samples;\r\n        this.totalStrength = totalStrength;\r\n        this.base = base;\r\n        this.maxZ = maxZ;\r\n        this.minZAspect = minZAspect;\r\n        this.radius = radius;\r\n        this.epsilon = epsilon;\r\n        this.useViewportInCombineStage = useViewportInCombineStage;\r\n        this.bypassBlur = bypassBlur;\r\n        this.expensiveBlur = expensiveBlur;\r\n        this.bilateralSoften = bilateralSoften;\r\n        this.bilateralSamples = bilateralSamples;\r\n        this.bilateralTolerance = bilateralTolerance;\r\n\r\n        this._additionalConstructionParameters = [ratioSSAO, ratioBlur, textureType];\r\n    }\r\n\r\n    /** The texture type used by the different post processes created by SSAO2 */\r\n    @editableInPropertyPage(\"Texture type\", PropertyTypeForEdition.TextureType, \"TEXTURE\")\r\n    public get textureType() {\r\n        return this._frameGraphTask.textureType;\r\n    }\r\n\r\n    public set textureType(value: number) {\r\n        this._createTask(this._frameGraphTask.ratioSSAO, this._frameGraphTask.ratioBlur, value);\r\n    }\r\n\r\n    /** The ratio between the SSAO texture size and the source texture size */\r\n    @editableInPropertyPage(\"SSAO texture ratio\", PropertyTypeForEdition.Float, \"TEXTURE\", { min: 0.1, max: 1 })\r\n    public get ratioSSAO() {\r\n        return this._frameGraphTask.ratioSSAO;\r\n    }\r\n\r\n    public set ratioSSAO(value: number) {\r\n        this._createTask(value, this._frameGraphTask.ratioBlur, this._frameGraphTask.textureType);\r\n    }\r\n\r\n    /** The ratio between the SSAO blur texture size and the source texture size */\r\n    @editableInPropertyPage(\"SSAO blur texture ratio\", PropertyTypeForEdition.Float, \"TEXTURE\", { min: 0.1, max: 1 })\r\n    public get ratioBlur() {\r\n        return this._frameGraphTask.ratioBlur;\r\n    }\r\n\r\n    public set ratioBlur(value: number) {\r\n        this._createTask(this._frameGraphTask.ratioSSAO, value, this._frameGraphTask.textureType);\r\n    }\r\n\r\n    /** Number of samples used for the SSAO calculations. Default value is 8. */\r\n    @editableInPropertyPage(\"Samples\", PropertyTypeForEdition.Int, \"SSAO\", { min: 1, max: 128 })\r\n    public get samples() {\r\n        return this._frameGraphTask.ssao.samples;\r\n    }\r\n\r\n    public set samples(value: number) {\r\n        this._frameGraphTask.ssao.samples = value;\r\n    }\r\n\r\n    /** The strength of the SSAO post-process. Default value is 1.0. */\r\n    @editableInPropertyPage(\"Strength\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 3 })\r\n    public get totalStrength() {\r\n        return this._frameGraphTask.ssao.totalStrength;\r\n    }\r\n\r\n    public set totalStrength(value: number) {\r\n        this._frameGraphTask.ssao.totalStrength = value;\r\n    }\r\n\r\n    /** The base color of the SSAO post-process. The final result is \"base + ssao\" between [0, 1] */\r\n    @editableInPropertyPage(\"Base\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 1 })\r\n    public get base() {\r\n        return this._frameGraphTask.ssao.base;\r\n    }\r\n\r\n    public set base(value: number) {\r\n        this._frameGraphTask.ssao.base = value;\r\n    }\r\n\r\n    /** Maximum depth value to still render AO. A smooth falloff makes the dimming more natural, so there will be no abrupt shading change. */\r\n    @editableInPropertyPage(\"Max Z\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 10000 })\r\n    public get maxZ() {\r\n        return this._frameGraphTask.ssao.maxZ;\r\n    }\r\n\r\n    public set maxZ(value: number) {\r\n        this._frameGraphTask.ssao.maxZ = value;\r\n    }\r\n\r\n    /** In order to save performances, SSAO radius is clamped on close geometry. This ratio changes by how much. */\r\n    @editableInPropertyPage(\"Min Z aspect\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 0.5 })\r\n    public get minZAspect() {\r\n        return this._frameGraphTask.ssao.minZAspect;\r\n    }\r\n\r\n    public set minZAspect(value: number) {\r\n        this._frameGraphTask.ssao.minZAspect = value;\r\n    }\r\n\r\n    /** The radius around the analyzed pixel used by the SSAO post-process. */\r\n    @editableInPropertyPage(\"Radius\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 10 })\r\n    public get radius() {\r\n        return this._frameGraphTask.ssao.radius;\r\n    }\r\n\r\n    public set radius(value: number) {\r\n        this._frameGraphTask.ssao.radius = value;\r\n    }\r\n\r\n    /** Used in SSAO calculations to compensate for accuracy issues with depth values. */\r\n    @editableInPropertyPage(\"Epsilon\", PropertyTypeForEdition.Float, \"SSAO\", { min: 0, max: 1 })\r\n    public get epsilon() {\r\n        return this._frameGraphTask.ssao.epsilon;\r\n    }\r\n\r\n    public set epsilon(value: number) {\r\n        this._frameGraphTask.ssao.epsilon = value;\r\n    }\r\n\r\n    /** Indicates that the combine stage should use the current camera viewport to render the SSAO result on only a portion of the output texture. */\r\n    @editableInPropertyPage(\"Use viewport in combine stage\", PropertyTypeForEdition.Boolean, \"SSAO\")\r\n    public get useViewportInCombineStage() {\r\n        return this._frameGraphTask.ssao.useViewportInCombineStage;\r\n    }\r\n\r\n    public set useViewportInCombineStage(value: boolean) {\r\n        this._frameGraphTask.ssao.useViewportInCombineStage = value;\r\n    }\r\n\r\n    /** Skips the denoising (blur) stage of the SSAO calculations. */\r\n    @editableInPropertyPage(\"Bypass blur\", PropertyTypeForEdition.Boolean, \"Blur\")\r\n    public get bypassBlur() {\r\n        return this._frameGraphTask.ssao.bypassBlur;\r\n    }\r\n\r\n    public set bypassBlur(value: boolean) {\r\n        this._frameGraphTask.ssao.bypassBlur = value;\r\n    }\r\n\r\n    /** Enables the configurable bilateral denoising (blurring) filter. */\r\n    @editableInPropertyPage(\"Expensive blur\", PropertyTypeForEdition.Boolean, \"Blur\")\r\n    public get expensiveBlur() {\r\n        return this._frameGraphTask.ssao.expensiveBlur;\r\n    }\r\n\r\n    public set expensiveBlur(value: boolean) {\r\n        this._frameGraphTask.ssao.expensiveBlur = value;\r\n    }\r\n\r\n    /** The number of samples the bilateral filter uses in both dimensions when denoising the SSAO calculations. */\r\n    @editableInPropertyPage(\"Samples\", PropertyTypeForEdition.Int, \"Blur\", { min: 1, max: 128 })\r\n    public get bilateralSamples() {\r\n        return this._frameGraphTask.ssao.bilateralSamples;\r\n    }\r\n\r\n    public set bilateralSamples(value: number) {\r\n        this._frameGraphTask.ssao.bilateralSamples = value;\r\n    }\r\n\r\n    /** Controls the shape of the denoising kernel used by the bilateral filter. */\r\n    @editableInPropertyPage(\"Soften\", PropertyTypeForEdition.Float, \"Blur\", { min: 0, max: 1 })\r\n    public get bilateralSoften() {\r\n        return this._frameGraphTask.ssao.bilateralSoften;\r\n    }\r\n\r\n    public set bilateralSoften(value: number) {\r\n        this._frameGraphTask.ssao.bilateralSoften = value;\r\n    }\r\n\r\n    /** How forgiving the bilateral denoiser should be when rejecting samples. */\r\n    @editableInPropertyPage(\"Tolerance\", PropertyTypeForEdition.Float, \"Blur\", { min: 0, max: 1 })\r\n    public get bilateralTolerance() {\r\n        return this._frameGraphTask.ssao.bilateralTolerance;\r\n    }\r\n\r\n    public set bilateralTolerance(value: number) {\r\n        this._frameGraphTask.ssao.bilateralTolerance = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphSSAO2PostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry depth input component\r\n     */\r\n    public get geomDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry normal input component\r\n     */\r\n    public get geomNormal(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.normalTexture = this.geomNormal.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.depthTexture = this.geomDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.samples = ${this.samples};`);\r\n        codes.push(`${this._codeVariableName}.totalStrength = ${this.totalStrength};`);\r\n        codes.push(`${this._codeVariableName}.base = ${this.base};`);\r\n        codes.push(`${this._codeVariableName}.maxZ = ${this.maxZ};`);\r\n        codes.push(`${this._codeVariableName}.minZAspect = ${this.minZAspect};`);\r\n        codes.push(`${this._codeVariableName}.radius = ${this.radius};`);\r\n        codes.push(`${this._codeVariableName}.epsilon = ${this.epsilon};`);\r\n        codes.push(`${this._codeVariableName}.useViewportInCombineStage = ${this.useViewportInCombineStage};`);\r\n        codes.push(`${this._codeVariableName}.bypassBlur = ${this.bypassBlur};`);\r\n        codes.push(`${this._codeVariableName}.expensiveBlur = ${this.expensiveBlur};`);\r\n        codes.push(`${this._codeVariableName}.bilateralSamples = ${this.bilateralSamples};`);\r\n        codes.push(`${this._codeVariableName}.bilateralSoften = ${this.bilateralSoften};`);\r\n        codes.push(`${this._codeVariableName}.bilateralTolerance = ${this.bilateralTolerance};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.samples = this.samples;\r\n        serializationObject.totalStrength = this.totalStrength;\r\n        serializationObject.base = this.base;\r\n        serializationObject.maxZ = this.maxZ;\r\n        serializationObject.minZAspect = this.minZAspect;\r\n        serializationObject.radius = this.radius;\r\n        serializationObject.epsilon = this.epsilon;\r\n        serializationObject.useViewportInCombineStage = this.useViewportInCombineStage;\r\n        serializationObject.bypassBlur = this.bypassBlur;\r\n        serializationObject.expensiveBlur = this.expensiveBlur;\r\n        serializationObject.bilateralSoften = this.bilateralSoften;\r\n        serializationObject.bilateralSamples = this.bilateralSamples;\r\n        serializationObject.bilateralTolerance = this.bilateralTolerance;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.samples = serializationObject.samples;\r\n        this.totalStrength = serializationObject.totalStrength;\r\n        this.base = serializationObject.base;\r\n        this.maxZ = serializationObject.maxZ;\r\n        this.minZAspect = serializationObject.minZAspect;\r\n        this.radius = serializationObject.radius;\r\n        this.epsilon = serializationObject.epsilon;\r\n        this.useViewportInCombineStage = serializationObject.useViewportInCombineStage;\r\n        this.bypassBlur = serializationObject.bypassBlur;\r\n        this.expensiveBlur = serializationObject.expensiveBlur;\r\n        this.bilateralSoften = serializationObject.bilateralSoften;\r\n        this.bilateralSamples = serializationObject.bilateralSamples;\r\n        this.bilateralTolerance = serializationObject.bilateralTolerance;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphSSAO2PostProcessBlock\", NodeRenderGraphSSAO2PostProcessBlock);\r\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,wCAAwC,EAAE,MAAM,kCAAkC,CAAC;AAC5F,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,oCAAoC,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,mCAAmC,EAAE,MAAM,wBAAwB,CAAC;;;;;;;AAKvE,MAAO,oCAAqC,SAAQ,uTAAmC;IAKzF;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;;;;OAQG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,WAAW,GAAG,CAAA,CAAA,MAAS,CAAC,yBAAyB;QAClJ,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,iCAAiC,GAAG;YAAC,SAAS;YAAE,SAAS;YAAE,WAAW;SAAC,CAAC;QAE7E,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,0SAAwC,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,0SAAwC,CAAC,gBAAgB,CAAC,CAAC;QAC3F,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,0SAAwC,CAAC,iBAAiB,CAAC,CAAC;QAE7F,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,qTAAoC,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;IAC9H,CAAC;IAEO,WAAW,CAAC,SAAiB,EAAE,SAAiB,EAAE,WAAmB,EAAA;QACzE,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACnD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QACzC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,MAAM,yBAAyB,GAAG,IAAI,CAAC,yBAAyB,CAAC;QACjE,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QACzC,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC7C,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAEnD,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,GAAG,IAAI,qTAAoC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;QAEhI,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,yBAAyB,GAAG,yBAAyB,CAAC;QAC3D,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAE7C,IAAI,CAAC,iCAAiC,GAAG;YAAC,SAAS;YAAE,SAAS;YAAE,WAAW;SAAC,CAAC;IACjF,CAAC;IAED,2EAAA,EAA6E,CAE7E,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC;IAC5C,CAAC;IAED,IAAW,WAAW,CAAC,KAAa,EAAA;QAChC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IAC5F,CAAC;IAED,wEAAA,EAA0E,CAE1E,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC;IAC1C,CAAC;IAED,IAAW,SAAS,CAAC,KAAa,EAAA;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;IAC9F,CAAC;IAED,6EAAA,EAA+E,CAE/E,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC;IAC1C,CAAC;IAED,IAAW,SAAS,CAAC,KAAa,EAAA;QAC9B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;IAC9F,CAAC;IAED,0EAAA,EAA4E,CAE5E,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC;IAC7C,CAAC;IAED,IAAW,OAAO,CAAC,KAAa,EAAA;QAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IAC9C,CAAC;IAED,iEAAA,EAAmE,CAEnE,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC;IACnD,CAAC;IAED,IAAW,aAAa,CAAC,KAAa,EAAA;QAClC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IACpD,CAAC;IAED,8FAAA,EAAgG,CAEhG,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;IAC1C,CAAC;IAED,IAAW,IAAI,CAAC,KAAa,EAAA;QACzB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IAC3C,CAAC;IAED,wIAAA,EAA0I,CAE1I,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;IAC1C,CAAC;IAED,IAAW,IAAI,CAAC,KAAa,EAAA;QACzB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IAC3C,CAAC;IAED,6GAAA,EAA+G,CAE/G,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC;IAChD,CAAC;IAED,IAAW,UAAU,CAAC,KAAa,EAAA;QAC/B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IACjD,CAAC;IAED,wEAAA,EAA0E,CAE1E,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC;IAC5C,CAAC;IAED,IAAW,MAAM,CAAC,KAAa,EAAA;QAC3B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7C,CAAC;IAED,mFAAA,EAAqF,CAErF,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC;IAC7C,CAAC;IAED,IAAW,OAAO,CAAC,KAAa,EAAA;QAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IAC9C,CAAC;IAED,+IAAA,EAAiJ,CAEjJ,IAAW,yBAAyB,GAAA;QAChC,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,yBAAyB,CAAC;IAC/D,CAAC;IAED,IAAW,yBAAyB,CAAC,KAAc,EAAA;QAC/C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;IAChE,CAAC;IAED,+DAAA,EAAiE,CAEjE,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC;IAChD,CAAC;IAED,IAAW,UAAU,CAAC,KAAc,EAAA;QAChC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IACjD,CAAC;IAED,oEAAA,EAAsE,CAEtE,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC;IACnD,CAAC;IAED,IAAW,aAAa,CAAC,KAAc,EAAA;QACnC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IACpD,CAAC;IAED,6GAAA,EAA+G,CAE/G,IAAW,gBAAgB,GAAA;QACvB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACtD,CAAC;IAED,IAAW,gBAAgB,CAAC,KAAa,EAAA;QACrC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IACvD,CAAC;IAED,6EAAA,EAA+E,CAE/E,IAAW,eAAe,GAAA;QACtB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC;IACrD,CAAC;IAED,IAAW,eAAe,CAAC,KAAa,EAAA;QACpC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IACtD,CAAC;IAED,2EAAA,EAA6E,CAE7E,IAAW,kBAAkB,GAAA;QACzB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACxD,CAAC;IAED,IAAW,kBAAkB,CAAC,KAAa,EAAA;QACvC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;IACzD,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,sCAAsC,CAAC;IAClD,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,KAAgC,CAAC;QACtG,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,KAAgC,CAAC;QACpG,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,KAAe,CAAC;IAC9E,CAAC;IAEkB,mBAAmB,GAAA;QAClC,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,WAAA,EAAc,IAAI,CAAC,OAAO,CAAA,CAAA,CAAG,CAAC,CAAC;QACnE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,iBAAA,EAAoB,IAAI,CAAC,aAAa,CAAA,CAAA,CAAG,CAAC,CAAC;QAC/E,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,QAAA,EAAW,IAAI,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC,CAAC;QAC7D,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,QAAA,EAAW,IAAI,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC,CAAC;QAC7D,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,cAAA,EAAiB,IAAI,CAAC,UAAU,CAAA,CAAA,CAAG,CAAC,CAAC;QACzE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,UAAA,EAAa,IAAI,CAAC,MAAM,CAAA,CAAA,CAAG,CAAC,CAAC;QACjE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,WAAA,EAAc,IAAI,CAAC,OAAO,CAAA,CAAA,CAAG,CAAC,CAAC;QACnE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,6BAAA,EAAgC,IAAI,CAAC,yBAAyB,CAAA,CAAA,CAAG,CAAC,CAAC;QACvG,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,cAAA,EAAiB,IAAI,CAAC,UAAU,CAAA,CAAA,CAAG,CAAC,CAAC;QACzE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,iBAAA,EAAoB,IAAI,CAAC,aAAa,CAAA,CAAA,CAAG,CAAC,CAAC;QAC/E,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,oBAAA,EAAuB,IAAI,CAAC,gBAAgB,CAAA,CAAA,CAAG,CAAC,CAAC;QACrF,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,mBAAA,EAAsB,IAAI,CAAC,eAAe,CAAA,CAAA,CAAG,CAAC,CAAC;QACnF,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAA,sBAAA,EAAyB,IAAI,CAAC,kBAAkB,CAAA,CAAA,CAAG,CAAC,CAAC;QACzF,OAAO,KAAK,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEe,SAAS,GAAA;QACrB,MAAM,mBAAmB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC9C,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3C,mBAAmB,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QACvD,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrC,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrC,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjD,mBAAmB,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACzC,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3C,mBAAmB,CAAC,yBAAyB,GAAG,IAAI,CAAC,yBAAyB,CAAC;QAC/E,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjD,mBAAmB,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QACvD,mBAAmB,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC3D,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC7D,mBAAmB,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACjE,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAEe,YAAY,CAAC,mBAAwB,EAAA;QACjD,KAAK,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,GAAG,mBAAmB,CAAC,OAAO,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,mBAAmB,CAAC,aAAa,CAAC;QACvD,IAAI,CAAC,IAAI,GAAG,mBAAmB,CAAC,IAAI,CAAC;QACrC,IAAI,CAAC,IAAI,GAAG,mBAAmB,CAAC,IAAI,CAAC;QACrC,IAAI,CAAC,UAAU,GAAG,mBAAmB,CAAC,UAAU,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC,MAAM,CAAC;QACzC,IAAI,CAAC,OAAO,GAAG,mBAAmB,CAAC,OAAO,CAAC;QAC3C,IAAI,CAAC,yBAAyB,GAAG,mBAAmB,CAAC,yBAAyB,CAAC;QAC/E,IAAI,CAAC,UAAU,GAAG,mBAAmB,CAAC,UAAU,CAAC;QACjD,IAAI,CAAC,aAAa,GAAG,mBAAmB,CAAC,aAAa,CAAC;QACvD,IAAI,CAAC,eAAe,GAAG,mBAAmB,CAAC,eAAe,CAAC;QAC3D,IAAI,CAAC,gBAAgB,GAAG,mBAAmB,CAAC,gBAAgB,CAAC;QAC7D,IAAI,CAAC,kBAAkB,GAAG,mBAAmB,CAAC,kBAAkB,CAAC;IACrE,CAAC;CACJ;IAvPG,qOAAA,EAAA;QADC,gQAAsB,EAAC,cAAc,EAAA,GAAA,sCAAA,KAAsC,SAAS,CAAC;uEAGrF;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,oBAAoB,EAAA,EAAA,gCAAA,KAAgC,SAAS,EAAE;QAAE,GAAG,EAAE,GAAG;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;qEAG3G;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,yBAAyB,EAAA,EAAA,gCAAA,KAAgC,SAAS,EAAE;QAAE,GAAG,EAAE,GAAG;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;qEAGhH;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,SAAS,EAAA,EAAA,8BAAA,KAA8B,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,GAAG;IAAA,CAAE,CAAC;mEAG3F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,UAAU,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;yEAG5F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,MAAM,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;gEAGxF;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,OAAO,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,KAAK;IAAA,CAAE,CAAC;gEAG7F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,cAAc,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,GAAG;IAAA,CAAE,CAAC;sEAGlG;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,QAAQ,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,EAAE;IAAA,CAAE,CAAC;kEAG3F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,SAAS,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;mEAG3F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,+BAA+B,EAAA,EAAA,kCAAA,KAAkC,MAAM,CAAC;qFAG/F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,aAAa,EAAA,EAAA,kCAAA,KAAkC,MAAM,CAAC;sEAG7E;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,gBAAgB,EAAA,EAAA,kCAAA,KAAkC,MAAM,CAAC;yEAGhF;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,SAAS,EAAA,EAAA,8BAAA,KAA8B,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,GAAG;IAAA,CAAE,CAAC;4EAG3F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,QAAQ,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;2EAG1F;IAQD,qOAAA,EAAA;QADC,gQAAsB,EAAC,WAAW,EAAA,EAAA,gCAAA,KAAgC,MAAM,EAAE;QAAE,GAAG,EAAE,CAAC;QAAE,GAAG,EAAE,CAAC;IAAA,CAAE,CAAC;8EAG7F;IAiGL,6OAAa,EAAC,8CAA8C,EAAE,oCAAoC,CAAC,CAAC"}},
    {"offset": {"line": 11539, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssrTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssrTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, Camera, FrameGraphTextureHandle } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinSSRPostProcess } from \"core/PostProcesses/thinSSRPostProcess\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphSSRTask extends FrameGraphPostProcessTask {\r\n    public normalTexture: FrameGraphTextureHandle;\r\n\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    public reflectivityTexture: FrameGraphTextureHandle;\r\n\r\n    public backDepthTexture?: FrameGraphTextureHandle;\r\n\r\n    public camera: Camera;\r\n\r\n    public override readonly postProcess: ThinSSRPostProcess;\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinSSRPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinSSRPostProcess(name, frameGraph.scene));\r\n    }\r\n\r\n    public override record(skipCreationOfDisabledPasses = false): FrameGraphRenderPass {\r\n        if (\r\n            this.sourceTexture === undefined ||\r\n            this.normalTexture === undefined ||\r\n            this.depthTexture === undefined ||\r\n            this.reflectivityTexture === undefined ||\r\n            this.camera === undefined\r\n        ) {\r\n            throw new Error(`FrameGraphSSRTask \"${this.name}\": sourceTexture, normalTexture, depthTexture, reflectivityTexture and camera are required`);\r\n        }\r\n\r\n        const pass = super.record(\r\n            skipCreationOfDisabledPasses,\r\n            (context) => {\r\n                this.postProcess.camera = this.camera;\r\n\r\n                context.setTextureSamplingMode(this.normalTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n                context.setTextureSamplingMode(this.depthTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n                context.setTextureSamplingMode(this.reflectivityTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n                if (this.backDepthTexture) {\r\n                    context.setTextureSamplingMode(this.backDepthTexture, Constants.TEXTURE_NEAREST_SAMPLINGMODE);\r\n                }\r\n            },\r\n            (context) => {\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"normalSampler\", this.normalTexture);\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n                context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"reflectivitySampler\", this.reflectivityTexture);\r\n                if (this.backDepthTexture) {\r\n                    context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"backDepthSampler\", this.backDepthTexture);\r\n                }\r\n                if (this.postProcess.enableAutomaticThicknessComputation) {\r\n                    this._postProcessDrawWrapper.effect!.setFloat(\"backSizeFactor\", 1);\r\n                }\r\n            }\r\n        );\r\n\r\n        pass.addDependencies([this.normalTexture, this.depthTexture, this.reflectivityTexture]);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,kBAAkB,EAAE,qDAA8C;;;AAKrE,MAAO,iBAAkB,SAAQ,+RAAyB;IAa5D,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAoC,CAAA;QAClF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,oQAAkB,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IAC/F,CAAC;IAEe,MAAM,CAAC,4BAA4B,GAAG,KAAK,EAAA;QACvD,IACI,IAAI,CAAC,aAAa,KAAK,SAAS,IAChC,IAAI,CAAC,aAAa,KAAK,SAAS,IAChC,IAAI,CAAC,YAAY,KAAK,SAAS,IAC/B,IAAI,CAAC,mBAAmB,KAAK,SAAS,IACtC,IAAI,CAAC,MAAM,KAAK,SAAS,EAC3B,CAAC;YACC,MAAM,IAAI,KAAK,CAAC,CAAA,mBAAA,EAAsB,IAAI,CAAC,IAAI,CAAA,0FAAA,CAA4F,CAAC,CAAC;QACjJ,CAAC;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CACrB,4BAA4B,EAC5B,CAAC,OAAO,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAEtC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;YAC5F,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;YAC3F,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,mBAAmB,EAAE,SAAS,CAAC,6BAA6B,CAAC,CAAC;YAClG,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,gBAAgB,EAAE,SAAS,CAAC,4BAA4B,CAAC,CAAC;YAClG,CAAC;QACL,CAAC,EACD,CAAC,OAAO,EAAE,EAAE;YACR,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YACrG,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACnG,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,qBAAqB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;YACjH,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAO,EAAE,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC/G,CAAC;YACD,IAAI,IAAI,CAAC,WAAW,CAAC,mCAAmC,EAAE,CAAC;gBACvD,IAAI,CAAC,uBAAuB,CAAC,MAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;YACvE,CAAC;QACL,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC;YAAC,IAAI,CAAC,aAAa;YAAE,IAAI,CAAC,YAAY;YAAE,IAAI,CAAC,mBAAmB;SAAC,CAAC,CAAC;QAExF,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 11588, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssrBlurTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssrBlurTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphRenderPass, FrameGraphRenderContext } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinSSRBlurPostProcess } from \"core/PostProcesses/thinSSRBlurPostProcess\";\r\nimport { Vector2 } from \"core/Maths/math.vector\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class FrameGraphSSRBlurTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinSSRBlurPostProcess;\r\n\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinSSRBlurPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinSSRBlurPostProcess(name, frameGraph.engine, new Vector2(1, 0), 0.03));\r\n    }\r\n\r\n    public override record(\r\n        skipCreationOfDisabledPasses = false,\r\n        additionalExecute?: (context: FrameGraphRenderContext) => void,\r\n        additionalBindings?: (context: FrameGraphRenderContext) => void\r\n    ): FrameGraphRenderPass {\r\n        const pass = super.record(skipCreationOfDisabledPasses, additionalExecute, additionalBindings);\r\n\r\n        this.postProcess.textureWidth = this._sourceWidth;\r\n        this.postProcess.textureHeight = this._sourceHeight;\r\n\r\n        return pass;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,sBAAsB,EAAE,yDAAkD;AACnF,OAAO,EAAE,OAAO,EAAE,sCAA+B;;;;AAK3C,MAAO,qBAAsB,SAAQ,+RAAyB;IAGhE,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAwC,CAAA;QACtF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,4QAAsB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,6OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAC7H,CAAC;IAEe,MAAM,CAClB,4BAA4B,GAAG,KAAK,EACpC,iBAA8D,EAC9D,kBAA+D,EAAA;QAE/D,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,4BAA4B,EAAE,iBAAiB,EAAE,kBAAkB,CAAC,CAAC;QAE/F,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;QAEpD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ"}},
    {"offset": {"line": 11613, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/ssrRenderingPipelineTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/ssrRenderingPipelineTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, Camera, FrameGraphTextureCreationOptions } from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { ThinSSRRenderingPipeline } from \"core/PostProcesses/RenderPipeline/Pipelines/thinSSRRenderingPipeline\";\r\nimport { FrameGraphSSRTask } from \"./ssrTask\";\r\nimport { FrameGraphSSRBlurTask } from \"./ssrBlurTask\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a SSR post process.\r\n */\r\nexport class FrameGraphSSRRenderingPipelineTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to apply the SSR effect on.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The sampling mode to use for the source texture.\r\n     */\r\n    public sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n\r\n    /**\r\n     * The normal texture used by the SSR effect.\r\n     */\r\n    public normalTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The depth texture used by the SSR effect.\r\n     */\r\n    public depthTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The back depth texture used by the SSR effect (optional).\r\n     * This is used when automatic thickness computation is enabled.\r\n     * The back depth texture is the depth texture of the scene rendered for the back side of the objects (that is, front faces are culled).\r\n     */\r\n    public backDepthTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The reflectivity texture used by the SSR effect\r\n     */\r\n    public reflectivityTexture: FrameGraphTextureHandle;\r\n\r\n    private _camera: Camera;\r\n\r\n    /**\r\n     * The camera used to render the scene.\r\n     */\r\n    public get camera() {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(camera: Camera) {\r\n        if (camera === this._camera) {\r\n            return;\r\n        }\r\n\r\n        this._camera = camera;\r\n\r\n        this.ssr.camera = camera;\r\n    }\r\n\r\n    /**\r\n     * The target texture to render the SSR effect to.\r\n     */\r\n    public targetTexture?: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture of the SSR effect.\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The SSR Rendering pipeline.\r\n     */\r\n    public readonly ssr: ThinSSRRenderingPipeline;\r\n\r\n    /**\r\n     * The name of the task.\r\n     */\r\n    public override get name() {\r\n        return this._name;\r\n    }\r\n\r\n    public override set name(name: string) {\r\n        this._name = name;\r\n        if (this._ssr) {\r\n            this._ssr.name = `${name} SSR main`;\r\n        }\r\n        if (this._ssrBlurX) {\r\n            this._ssrBlurX.name = `${name} SSR Blur X`;\r\n        }\r\n        if (this._ssrBlurY) {\r\n            this._ssrBlurY.name = `${name} SSR Blur Y`;\r\n        }\r\n        if (this._ssrBlurCombiner) {\r\n            this._ssrBlurCombiner.name = `${name} SSR Blur Combiner`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The texture type used by the different post processes created by SSR.\r\n     * It's a read-only property. If you want to change it, you must recreate the task and pass the appropriate texture type to the constructor.\r\n     */\r\n    public readonly textureType: number;\r\n\r\n    private readonly _ssr: FrameGraphSSRTask;\r\n    private readonly _ssrBlurX: FrameGraphSSRBlurTask;\r\n    private readonly _ssrBlurY: FrameGraphSSRBlurTask;\r\n    private readonly _ssrBlurCombiner: FrameGraphPostProcessTask;\r\n\r\n    /**\r\n     * Constructs a SSR rendering pipeline task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task belongs to.\r\n     * @param textureType The texture type used by the different post processes created by SSR (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, textureType = Constants.TEXTURETYPE_UNSIGNED_BYTE) {\r\n        super(name, frameGraph);\r\n\r\n        this.textureType = textureType;\r\n\r\n        this.ssr = new ThinSSRRenderingPipeline(name, frameGraph.scene);\r\n\r\n        this._ssr = new FrameGraphSSRTask(`${name} SSR main`, this._frameGraph, this.ssr._ssrPostProcess);\r\n        this._ssrBlurX = new FrameGraphSSRBlurTask(`${name} SSR Blur X`, this._frameGraph, this.ssr._ssrBlurXPostProcess);\r\n        this._ssrBlurY = new FrameGraphSSRBlurTask(`${name} SSR Blur Y`, this._frameGraph, this.ssr._ssrBlurYPostProcess);\r\n        this._ssrBlurCombiner = new FrameGraphPostProcessTask(`${name} SSR Blur Combiner`, this._frameGraph, this.ssr._ssrBlurCombinerPostProcess);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public override isReady() {\r\n        return this.ssr.isReady();\r\n    }\r\n\r\n    public record(): void {\r\n        if (\r\n            this.sourceTexture === undefined ||\r\n            this.normalTexture === undefined ||\r\n            this.depthTexture === undefined ||\r\n            this.reflectivityTexture === undefined ||\r\n            this.camera === undefined\r\n        ) {\r\n            throw new Error(`FrameGraphSSRRenderingPipelineTask \"${this.name}\": sourceTexture, normalTexture, depthTexture, reflectivityTexture and camera are required`);\r\n        }\r\n\r\n        const sourceTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.sourceTexture);\r\n\r\n        this._ssr.sourceTexture = this.sourceTexture;\r\n        this._ssr.sourceSamplingMode = this.sourceSamplingMode;\r\n        this._ssr.camera = this.camera;\r\n        this._ssr.normalTexture = this.normalTexture;\r\n        this._ssr.depthTexture = this.depthTexture;\r\n        this._ssr.backDepthTexture = this.backDepthTexture;\r\n        this._ssr.reflectivityTexture = this.reflectivityTexture;\r\n\r\n        let ssrTextureHandle: FrameGraphTextureHandle | undefined;\r\n\r\n        const textureSize = {\r\n            width: Math.floor(sourceTextureDescription.size.width / (this.ssr.ssrDownsample + 1)) || 1,\r\n            height: Math.floor(sourceTextureDescription.size.height / (this.ssr.ssrDownsample + 1)) || 1,\r\n        };\r\n        const textureCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: textureSize,\r\n            options: {\r\n                createMipMaps: false,\r\n                types: [this.textureType],\r\n                formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                samples: 1,\r\n                useSRGBBuffers: [false],\r\n                labels: [\"\"],\r\n            },\r\n            sizeIsPercentage: false,\r\n        };\r\n\r\n        if (this.ssr.blurDispersionStrength > 0 || !this.targetTexture) {\r\n            ssrTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssr.name, textureCreationOptions);\r\n        }\r\n\r\n        if (this.ssr.blurDispersionStrength === 0) {\r\n            this._ssr.targetTexture = this.outputTexture;\r\n\r\n            if (ssrTextureHandle !== undefined) {\r\n                this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, ssrTextureHandle);\r\n            } else {\r\n                this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture);\r\n            }\r\n\r\n            this._ssr.record(true);\r\n        } else {\r\n            this._ssr.targetTexture = ssrTextureHandle;\r\n            this._ssr.record(true);\r\n\r\n            textureSize.width = Math.floor(sourceTextureDescription.size.width / (this.ssr.blurDownsample + 1)) || 1;\r\n            textureSize.height = Math.floor(sourceTextureDescription.size.height / (this.ssr.blurDownsample + 1)) || 1;\r\n\r\n            const sourceTextureCreationOptions = this._frameGraph.textureManager.getTextureCreationOptions(this.sourceTexture);\r\n\r\n            this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture, this.name + \" Output\", sourceTextureCreationOptions);\r\n\r\n            const blurXTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssrBlurX.name, textureCreationOptions);\r\n\r\n            this._ssrBlurX.sourceTexture = ssrTextureHandle!;\r\n            this._ssrBlurX.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._ssrBlurX.targetTexture = blurXTextureHandle;\r\n            this._ssrBlurX.record(true);\r\n\r\n            const blurYTextureHandle = this._frameGraph.textureManager.createRenderTargetTexture(this._ssrBlurY.name, textureCreationOptions);\r\n\r\n            this._ssrBlurY.sourceTexture = blurXTextureHandle;\r\n            this._ssrBlurY.sourceSamplingMode = Constants.TEXTURE_BILINEAR_SAMPLINGMODE;\r\n            this._ssrBlurY.targetTexture = blurYTextureHandle;\r\n            this._ssrBlurY.record(true);\r\n\r\n            this._ssrBlurCombiner.sourceTexture = this.sourceTexture;\r\n            this._ssrBlurCombiner.sourceSamplingMode = this.sourceSamplingMode;\r\n            this._ssrBlurCombiner.targetTexture = this.outputTexture;\r\n            const combinerPass = this._ssrBlurCombiner.record(true, undefined, (context) => {\r\n                context.bindTextureHandle(this._ssrBlurCombiner.drawWrapper.effect!, \"mainSampler\", this.sourceTexture);\r\n                context.bindTextureHandle(this._ssrBlurCombiner.drawWrapper.effect!, \"textureSampler\", blurYTextureHandle);\r\n                context.bindTextureHandle(this._ssrBlurCombiner.drawWrapper.effect!, \"reflectivitySampler\", this.reflectivityTexture);\r\n                if (this.ssr.useFresnel) {\r\n                    context.bindTextureHandle(this._ssrBlurCombiner.drawWrapper.effect!, \"normalSampler\", this.normalTexture);\r\n                    context.bindTextureHandle(this._ssrBlurCombiner.drawWrapper.effect!, \"depthSampler\", this.depthTexture);\r\n                }\r\n            });\r\n\r\n            combinerPass.addDependencies(blurYTextureHandle);\r\n        }\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.addDependencies(this.sourceTexture);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((context) => {\r\n            context.copyTexture(this.sourceTexture);\r\n        });\r\n    }\r\n\r\n    public override dispose(): void {\r\n        this._ssr.dispose();\r\n        this._ssrBlurX.dispose();\r\n        this._ssrBlurY.dispose();\r\n        this._ssrBlurCombiner.dispose();\r\n        this.ssr.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11780, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/ssrPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/ssrPostProcessBlock.ts"],"sourcesContent":["import type {\r\n    Scene,\r\n    FrameGraph,\r\n    NodeRenderGraphConnectionPoint,\r\n    NodeRenderGraphBuildState,\r\n    FrameGraphTextureHandle,\r\n    Camera,\r\n    NodeRenderGraphGeometryRendererBlock,\r\n} from \"core/index\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphSSRRenderingPipelineTask } from \"../../../Tasks/PostProcesses/ssrRenderingPipelineTask\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the SSR post process\r\n */\r\nexport class NodeRenderGraphSSRPostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphSSRRenderingPipelineTask;\r\n\r\n    public override _additionalConstructionParameters: [number];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphSSRPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param textureType The texture type used by the different post processes created by SSR (default: Constants.TEXTURETYPE_UNSIGNED_BYTE)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, textureType = Constants.TEXTURETYPE_UNSIGNED_BYTE) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [textureType];\r\n\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this.registerInput(\"geomDepth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"geomNormal\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"geomReflectivity\", NodeRenderGraphBlockConnectionPointTypes.TextureReflectivity);\r\n        this.registerInput(\"geomBackDepth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        this.geomNormal.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureWorldNormal | NodeRenderGraphBlockConnectionPointTypes.TextureViewNormal\r\n        );\r\n        this.geomDepth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth | NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth\r\n        );\r\n        this.geomBackDepth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth | NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth\r\n        );\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphSSRRenderingPipelineTask(this.name, frameGraph, textureType);\r\n    }\r\n\r\n    private _createTask(textureType: number) {\r\n        const sourceSamplingMode = this.sourceSamplingMode;\r\n        const maxDistance = this.maxDistance;\r\n        const step = this.step;\r\n        const thickness = this.thickness;\r\n        const strength = this.strength;\r\n        const reflectionSpecularFalloffExponent = this.reflectionSpecularFalloffExponent;\r\n        const maxSteps = this.maxSteps;\r\n        const roughnessFactor = this.roughnessFactor;\r\n        const selfCollisionNumSkip = this.selfCollisionNumSkip;\r\n        const reflectivityThreshold = this.reflectivityThreshold;\r\n        const ssrDownsample = this.ssrDownsample;\r\n        const blurDispersionStrength = this.blurDispersionStrength;\r\n        const blurDownsample = this.blurDownsample;\r\n        const enableSmoothReflections = this.enableSmoothReflections;\r\n        const attenuateScreenBorders = this.attenuateScreenBorders;\r\n        const attenuateIntersectionDistance = this.attenuateIntersectionDistance;\r\n        const attenuateIntersectionIterations = this.attenuateIntersectionIterations;\r\n        const attenuateFacingCamera = this.attenuateFacingCamera;\r\n        const attenuateBackfaceReflection = this.attenuateBackfaceReflection;\r\n        const clipToFrustum = this.clipToFrustum;\r\n        const enableAutomaticThicknessComputation = this.enableAutomaticThicknessComputation;\r\n        const useFresnel = this.useFresnel;\r\n        const inputTextureColorIsInGammaSpace = this.inputTextureColorIsInGammaSpace;\r\n        const generateOutputInGammaSpace = this.generateOutputInGammaSpace;\r\n        const debug = this.debug;\r\n\r\n        this._frameGraphTask.dispose();\r\n        this._frameGraphTask = new FrameGraphSSRRenderingPipelineTask(this.name, this._frameGraph, textureType);\r\n\r\n        this.sourceSamplingMode = sourceSamplingMode;\r\n        this.maxDistance = maxDistance;\r\n        this.step = step;\r\n        this.thickness = thickness;\r\n        this.strength = strength;\r\n        this.reflectionSpecularFalloffExponent = reflectionSpecularFalloffExponent;\r\n        this.maxSteps = maxSteps;\r\n        this.roughnessFactor = roughnessFactor;\r\n        this.selfCollisionNumSkip = selfCollisionNumSkip;\r\n        this.reflectivityThreshold = reflectivityThreshold;\r\n        this.ssrDownsample = ssrDownsample;\r\n        this.blurDispersionStrength = blurDispersionStrength;\r\n        this.blurDownsample = blurDownsample;\r\n        this.enableSmoothReflections = enableSmoothReflections;\r\n        this.attenuateScreenBorders = attenuateScreenBorders;\r\n        this.attenuateIntersectionDistance = attenuateIntersectionDistance;\r\n        this.attenuateIntersectionIterations = attenuateIntersectionIterations;\r\n        this.attenuateFacingCamera = attenuateFacingCamera;\r\n        this.attenuateBackfaceReflection = attenuateBackfaceReflection;\r\n        this.clipToFrustum = clipToFrustum;\r\n        this.useFresnel = useFresnel;\r\n        this.enableAutomaticThicknessComputation = enableAutomaticThicknessComputation;\r\n        this.inputTextureColorIsInGammaSpace = inputTextureColorIsInGammaSpace;\r\n        this.generateOutputInGammaSpace = generateOutputInGammaSpace;\r\n        this.debug = debug;\r\n\r\n        this._additionalConstructionParameters = [textureType];\r\n    }\r\n\r\n    /** The texture type used by the different post processes created by SSR */\r\n    @editableInPropertyPage(\"Texture type\", PropertyTypeForEdition.TextureType, \"SSR\")\r\n    public get textureType() {\r\n        return this._frameGraphTask.textureType;\r\n    }\r\n\r\n    public set textureType(value: number) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the effect should be rendered in debug mode */\r\n    @editableInPropertyPage(\"Debug\", PropertyTypeForEdition.Boolean, \"SSR\")\r\n    public get debug() {\r\n        return this._frameGraphTask.ssr.debug;\r\n    }\r\n\r\n    public set debug(value: boolean) {\r\n        this._frameGraphTask.ssr.debug = value;\r\n    }\r\n\r\n    /** Gets or sets the current reflection strength. 1.0 is an ideal value but can be increased/decreased for particular results */\r\n    @editableInPropertyPage(\"Strength\", PropertyTypeForEdition.Float, \"SSR\", { min: 0, max: 5 })\r\n    public get strength() {\r\n        return this._frameGraphTask.ssr.strength;\r\n    }\r\n\r\n    public set strength(value: number) {\r\n        this._frameGraphTask.ssr.strength = value;\r\n    }\r\n\r\n    /** Gets or sets the falloff exponent used to compute the reflection strength. Higher values lead to fainter reflections */\r\n    @editableInPropertyPage(\"Reflection exponent\", PropertyTypeForEdition.Float, \"SSR\", { min: 0, max: 5 })\r\n    public get reflectionSpecularFalloffExponent() {\r\n        return this._frameGraphTask.ssr.reflectionSpecularFalloffExponent;\r\n    }\r\n\r\n    public set reflectionSpecularFalloffExponent(value: number) {\r\n        this._frameGraphTask.ssr.reflectionSpecularFalloffExponent = value;\r\n    }\r\n\r\n    /** Gets or sets the minimum value for one of the reflectivity component of the material to consider it for SSR */\r\n    @editableInPropertyPage(\"Reflectivity threshold\", PropertyTypeForEdition.Float, \"SSR\", { min: 0, max: 1 })\r\n    public get reflectivityThreshold() {\r\n        return this._frameGraphTask.ssr.reflectivityThreshold;\r\n    }\r\n\r\n    public set reflectivityThreshold(value: number) {\r\n        this._frameGraphTask.ssr.reflectivityThreshold = value;\r\n    }\r\n\r\n    /** Gets or sets the thickness value used as tolerance when computing the intersection between the reflected ray and the scene */\r\n    @editableInPropertyPage(\"Thickness\", PropertyTypeForEdition.Float, \"SSR\", { min: 0, max: 10 })\r\n    public get thickness() {\r\n        return this._frameGraphTask.ssr.thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        this._frameGraphTask.ssr.thickness = value;\r\n    }\r\n\r\n    /** Gets or sets the step size used to iterate until the effect finds the color of the reflection's pixel */\r\n    @editableInPropertyPage(\"Step\", PropertyTypeForEdition.Int, \"SSR\", { min: 1, max: 50 })\r\n    public get step() {\r\n        return this._frameGraphTask.ssr.step;\r\n    }\r\n\r\n    public set step(value: number) {\r\n        this._frameGraphTask.ssr.step = value;\r\n    }\r\n\r\n    /** Gets or sets whether or not smoothing reflections is enabled */\r\n    @editableInPropertyPage(\"Smooth reflections\", PropertyTypeForEdition.Boolean, \"SSR\")\r\n    public get enableSmoothReflections() {\r\n        return this._frameGraphTask.ssr.enableSmoothReflections;\r\n    }\r\n\r\n    public set enableSmoothReflections(value: boolean) {\r\n        this._frameGraphTask.ssr.enableSmoothReflections = value;\r\n    }\r\n\r\n    /** Maximum number of steps during the ray marching process after which we consider an intersection could not be found */\r\n    @editableInPropertyPage(\"Max steps\", PropertyTypeForEdition.Int, \"SSR\", { min: 1, max: 3000 })\r\n    public get maxSteps() {\r\n        return this._frameGraphTask.ssr.maxSteps;\r\n    }\r\n\r\n    public set maxSteps(value: number) {\r\n        this._frameGraphTask.ssr.maxSteps = value;\r\n    }\r\n\r\n    /** Gets or sets the max distance used to define how far we look for reflection during the ray-marching on the reflected ray */\r\n    @editableInPropertyPage(\"Max distance\", PropertyTypeForEdition.Float, \"SSR\", { min: 1, max: 3000 })\r\n    public get maxDistance() {\r\n        return this._frameGraphTask.ssr.maxDistance;\r\n    }\r\n\r\n    public set maxDistance(value: number) {\r\n        this._frameGraphTask.ssr.maxDistance = value;\r\n    }\r\n\r\n    /** Gets or sets the factor applied when computing roughness */\r\n    @editableInPropertyPage(\"Roughness factor\", PropertyTypeForEdition.Float, \"SSR\", { min: 0, max: 1 })\r\n    public get roughnessFactor() {\r\n        return this._frameGraphTask.ssr.roughnessFactor;\r\n    }\r\n\r\n    public set roughnessFactor(value: number) {\r\n        this._frameGraphTask.ssr.roughnessFactor = value;\r\n    }\r\n\r\n    /** Number of steps to skip at start when marching the ray to avoid self collisions */\r\n    @editableInPropertyPage(\"Self collision skips\", PropertyTypeForEdition.Int, \"SSR\", { min: 1, max: 10 })\r\n    public get selfCollisionNumSkip() {\r\n        return this._frameGraphTask.ssr.selfCollisionNumSkip;\r\n    }\r\n\r\n    public set selfCollisionNumSkip(value: number) {\r\n        this._frameGraphTask.ssr.selfCollisionNumSkip = value;\r\n    }\r\n\r\n    /** Gets or sets the downsample factor used to reduce the size of the texture used to compute the SSR contribution */\r\n    @editableInPropertyPage(\"SSR downsample\", PropertyTypeForEdition.Int, \"SSR\", { min: 0, max: 5 })\r\n    public get ssrDownsample() {\r\n        return this._frameGraphTask.ssr.ssrDownsample;\r\n    }\r\n\r\n    public set ssrDownsample(value: number) {\r\n        this._frameGraphTask.ssr.ssrDownsample = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the ray should be clipped to the frustum */\r\n    @editableInPropertyPage(\"Clip to frustum\", PropertyTypeForEdition.Boolean, \"SSR\")\r\n    public get clipToFrustum() {\r\n        return this._frameGraphTask.ssr.clipToFrustum;\r\n    }\r\n\r\n    public set clipToFrustum(value: boolean) {\r\n        this._frameGraphTask.ssr.clipToFrustum = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean defining if geometry thickness should be computed automatically */\r\n    @editableInPropertyPage(\"Automatic thickness computation\", PropertyTypeForEdition.Boolean, \"SSR\")\r\n    public get enableAutomaticThicknessComputation() {\r\n        return this._frameGraphTask.ssr.enableAutomaticThicknessComputation;\r\n    }\r\n\r\n    public set enableAutomaticThicknessComputation(value: boolean) {\r\n        this._frameGraphTask.ssr.enableAutomaticThicknessComputation = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating whether the blending between the current color pixel and the reflection color should be done with a Fresnel coefficient */\r\n    @editableInPropertyPage(\"Use Fresnel\", PropertyTypeForEdition.Boolean, \"SSR\")\r\n    public get useFresnel() {\r\n        return this._frameGraphTask.ssr.useFresnel;\r\n    }\r\n\r\n    public set useFresnel(value: boolean) {\r\n        this._frameGraphTask.ssr.useFresnel = value;\r\n    }\r\n\r\n    /** Gets or sets the blur dispersion strength. Set this value to 0 to disable blurring */\r\n    @editableInPropertyPage(\"Strength\", PropertyTypeForEdition.Float, \"Blur\", { min: 0, max: 0.15 })\r\n    public get blurDispersionStrength() {\r\n        return this._frameGraphTask.ssr.blurDispersionStrength;\r\n    }\r\n\r\n    public set blurDispersionStrength(value: number) {\r\n        this._frameGraphTask.ssr.blurDispersionStrength = value;\r\n    }\r\n\r\n    /** Gets or sets the downsample factor used to reduce the size of the textures used to blur the reflection effect */\r\n    @editableInPropertyPage(\"Blur downsample\", PropertyTypeForEdition.Int, \"Blur\", { min: 0, max: 5 })\r\n    public get blurDownsample() {\r\n        return this._frameGraphTask.ssr.blurDownsample;\r\n    }\r\n\r\n    public set blurDownsample(value: number) {\r\n        this._frameGraphTask.ssr.blurDownsample = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the reflections should be attenuated at the screen borders */\r\n    @editableInPropertyPage(\"Screen borders\", PropertyTypeForEdition.Boolean, \"Attenuations\")\r\n    public get attenuateScreenBorders() {\r\n        return this._frameGraphTask.ssr.attenuateScreenBorders;\r\n    }\r\n\r\n    public set attenuateScreenBorders(value: boolean) {\r\n        this._frameGraphTask.ssr.attenuateScreenBorders = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the reflections should be attenuated according to the distance of the intersection */\r\n    @editableInPropertyPage(\"Distance\", PropertyTypeForEdition.Boolean, \"Attenuations\")\r\n    public get attenuateIntersectionDistance() {\r\n        return this._frameGraphTask.ssr.attenuateIntersectionDistance;\r\n    }\r\n\r\n    public set attenuateIntersectionDistance(value: boolean) {\r\n        this._frameGraphTask.ssr.attenuateIntersectionDistance = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the reflections should be attenuated according to the number of iterations performed to find the intersection */\r\n    @editableInPropertyPage(\"Step iterations\", PropertyTypeForEdition.Boolean, \"Attenuations\")\r\n    public get attenuateIntersectionIterations() {\r\n        return this._frameGraphTask.ssr.attenuateIntersectionIterations;\r\n    }\r\n\r\n    public set attenuateIntersectionIterations(value: boolean) {\r\n        this._frameGraphTask.ssr.attenuateIntersectionIterations = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the reflections should be attenuated when the reflection ray is facing the camera (the view direction) */\r\n    @editableInPropertyPage(\"Facing camera\", PropertyTypeForEdition.Boolean, \"Attenuations\")\r\n    public get attenuateFacingCamera() {\r\n        return this._frameGraphTask.ssr.attenuateFacingCamera;\r\n    }\r\n\r\n    public set attenuateFacingCamera(value: boolean) {\r\n        this._frameGraphTask.ssr.attenuateFacingCamera = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the backface reflections should be attenuated */\r\n    @editableInPropertyPage(\"Backface reflections\", PropertyTypeForEdition.Boolean, \"Attenuations\")\r\n    public get attenuateBackfaceReflection() {\r\n        return this._frameGraphTask.ssr.attenuateBackfaceReflection;\r\n    }\r\n\r\n    public set attenuateBackfaceReflection(value: boolean) {\r\n        this._frameGraphTask.ssr.attenuateBackfaceReflection = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean defining if the input color texture is in gamma space */\r\n    @editableInPropertyPage(\"Input is in gamma space\", PropertyTypeForEdition.Boolean, \"Color space\")\r\n    public get inputTextureColorIsInGammaSpace() {\r\n        return this._frameGraphTask.ssr.inputTextureColorIsInGammaSpace;\r\n    }\r\n\r\n    public set inputTextureColorIsInGammaSpace(value: boolean) {\r\n        this._frameGraphTask.ssr.inputTextureColorIsInGammaSpace = value;\r\n    }\r\n\r\n    /** Gets or sets a boolean defining if the output color texture generated by the SSR pipeline should be in gamma space */\r\n    @editableInPropertyPage(\"Output to gamma space\", PropertyTypeForEdition.Boolean, \"Color space\")\r\n    public get generateOutputInGammaSpace() {\r\n        return this._frameGraphTask.ssr.generateOutputInGammaSpace;\r\n    }\r\n\r\n    public set generateOutputInGammaSpace(value: boolean) {\r\n        this._frameGraphTask.ssr.generateOutputInGammaSpace = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphSSRPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry depth input component\r\n     */\r\n    public get geomDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry normal input component\r\n     */\r\n    public get geomNormal(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry reflectivity input component\r\n     */\r\n    public get geomReflectivity(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry back depth input component\r\n     */\r\n    public get geomBackDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[6];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.normalTexture = this.geomNormal.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.depthTexture = this.geomDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.reflectivityTexture = this.geomReflectivity.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.backDepthTexture = this.geomBackDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n\r\n        if (this.enableAutomaticThicknessComputation) {\r\n            if (!this._frameGraphTask.backDepthTexture) {\r\n                throw new Error(`SSR post process \"${this.name}\": Automatic thickness computation requires a back depth texture to be connected!`);\r\n            }\r\n\r\n            const geomBackDepthOwnerBlock = this.geomBackDepth.connectedPoint!.ownerBlock;\r\n            if (geomBackDepthOwnerBlock.getClassName() === \"NodeRenderGraphGeometryRendererBlock\") {\r\n                const geometryBackFaceRendererBlock = geomBackDepthOwnerBlock as NodeRenderGraphGeometryRendererBlock;\r\n                if (!geometryBackFaceRendererBlock.reverseCulling) {\r\n                    throw new Error(\r\n                        `SSR post process \"${this.name}\": Automatic thickness computation requires the geometry renderer block for the back depth texture to have reverse culling enabled!`\r\n                    );\r\n                }\r\n\r\n                if (this._frameGraphTask.depthTexture) {\r\n                    const geomDepthOwnerBlock = this.geomDepth.connectedPoint!.ownerBlock;\r\n                    if (geomDepthOwnerBlock.getClassName() === \"NodeRenderGraphGeometryRendererBlock\") {\r\n                        const geomDepthConnectionPointType = this.geomDepth.connectedPoint!.type;\r\n                        const geomBackDepthConnectionPointType = this.geomBackDepth.connectedPoint!.type;\r\n\r\n                        if (geomDepthConnectionPointType !== geomBackDepthConnectionPointType) {\r\n                            throw new Error(\r\n                                `SSR post process \"${this.name}\": Automatic thickness computation requires that geomDepth and geomBackDepth have the same type (view or screen space depth)!`\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.geomNormal.connectedPoint) {\r\n            if (this.geomNormal.connectedPoint.type === NodeRenderGraphBlockConnectionPointTypes.TextureWorldNormal) {\r\n                this._frameGraphTask.ssr.normalsAreInWorldSpace = true;\r\n                this._frameGraphTask.ssr.normalsAreUnsigned = true;\r\n            }\r\n        }\r\n        if (this.geomDepth.connectedPoint) {\r\n            if (this.geomDepth.connectedPoint.type === NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth) {\r\n                this._frameGraphTask.ssr.useScreenspaceDepth = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.debug = ${this.debug};`);\r\n        codes.push(`${this._codeVariableName}.strength = ${this.strength};`);\r\n        codes.push(`${this._codeVariableName}.reflectionSpecularFalloffExponent = ${this.reflectionSpecularFalloffExponent};`);\r\n        codes.push(`${this._codeVariableName}.reflectivityThreshold = ${this.reflectivityThreshold};`);\r\n        codes.push(`${this._codeVariableName}.thickness = ${this.thickness};`);\r\n        codes.push(`${this._codeVariableName}.step = ${this.step};`);\r\n        codes.push(`${this._codeVariableName}.enableSmoothReflections = ${this.enableSmoothReflections};`);\r\n        codes.push(`${this._codeVariableName}.maxSteps = ${this.maxSteps};`);\r\n        codes.push(`${this._codeVariableName}.maxDistance = ${this.maxDistance};`);\r\n        codes.push(`${this._codeVariableName}.roughnessFactor = ${this.roughnessFactor};`);\r\n        codes.push(`${this._codeVariableName}.selfCollisionNumSkip = ${this.selfCollisionNumSkip};`);\r\n        codes.push(`${this._codeVariableName}.ssrDownsample = ${this.ssrDownsample};`);\r\n        codes.push(`${this._codeVariableName}.clipToFrustum = ${this.clipToFrustum};`);\r\n        codes.push(`${this._codeVariableName}.useFresnel = ${this.useFresnel};`);\r\n        codes.push(`${this._codeVariableName}.enableAutomaticThicknessComputation = ${this.enableAutomaticThicknessComputation};`);\r\n        codes.push(`${this._codeVariableName}.blurDispersionStrength = ${this.blurDispersionStrength};`);\r\n        codes.push(`${this._codeVariableName}.blurDownsample = ${this.blurDownsample};`);\r\n        codes.push(`${this._codeVariableName}.attenuateScreenBorders = ${this.attenuateScreenBorders};`);\r\n        codes.push(`${this._codeVariableName}.attenuateIntersectionDistance = ${this.attenuateIntersectionDistance};`);\r\n        codes.push(`${this._codeVariableName}.attenuateIntersectionIterations = ${this.attenuateIntersectionIterations};`);\r\n        codes.push(`${this._codeVariableName}.attenuateFacingCamera = ${this.attenuateFacingCamera};`);\r\n        codes.push(`${this._codeVariableName}.attenuateBackfaceReflection = ${this.attenuateBackfaceReflection};`);\r\n        codes.push(`${this._codeVariableName}.inputTextureColorIsInGammaSpace = ${this.inputTextureColorIsInGammaSpace};`);\r\n        codes.push(`${this._codeVariableName}.generateOutputInGammaSpace = ${this.generateOutputInGammaSpace};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.debug = this.debug;\r\n        serializationObject.strength = this.strength;\r\n        serializationObject.reflectionSpecularFalloffExponent = this.reflectionSpecularFalloffExponent;\r\n        serializationObject.reflectivityThreshold = this.reflectivityThreshold;\r\n        serializationObject.thickness = this.thickness;\r\n        serializationObject.step = this.step;\r\n        serializationObject.enableSmoothReflections = this.enableSmoothReflections;\r\n        serializationObject.maxSteps = this.maxSteps;\r\n        serializationObject.maxDistance = this.maxDistance;\r\n        serializationObject.roughnessFactor = this.roughnessFactor;\r\n        serializationObject.selfCollisionNumSkip = this.selfCollisionNumSkip;\r\n        serializationObject.ssrDownsample = this.ssrDownsample;\r\n        serializationObject.clipToFrustum = this.clipToFrustum;\r\n        serializationObject.useFresnel = this.useFresnel;\r\n        serializationObject.enableAutomaticThicknessComputation = this.enableAutomaticThicknessComputation;\r\n        serializationObject.blurDispersionStrength = this.blurDispersionStrength;\r\n        serializationObject.blurDownsample = this.blurDownsample;\r\n        serializationObject.attenuateScreenBorders = this.attenuateScreenBorders;\r\n        serializationObject.attenuateIntersectionDistance = this.attenuateIntersectionDistance;\r\n        serializationObject.attenuateIntersectionIterations = this.attenuateIntersectionIterations;\r\n        serializationObject.attenuateFacingCamera = this.attenuateFacingCamera;\r\n        serializationObject.attenuateBackfaceReflection = this.attenuateBackfaceReflection;\r\n        serializationObject.inputTextureColorIsInGammaSpace = this.inputTextureColorIsInGammaSpace;\r\n        serializationObject.generateOutputInGammaSpace = this.generateOutputInGammaSpace;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.debug = serializationObject.debug;\r\n        this.strength = serializationObject.strength;\r\n        this.reflectionSpecularFalloffExponent = serializationObject.reflectionSpecularFalloffExponent;\r\n        this.reflectivityThreshold = serializationObject.reflectivityThreshold;\r\n        this.thickness = serializationObject.thickness;\r\n        this.step = serializationObject.step;\r\n        this.enableSmoothReflections = serializationObject.enableSmoothReflections;\r\n        this.maxSteps = serializationObject.maxSteps;\r\n        this.maxDistance = serializationObject.maxDistance;\r\n        this.roughnessFactor = serializationObject.roughnessFactor;\r\n        this.selfCollisionNumSkip = serializationObject.selfCollisionNumSkip;\r\n        this.ssrDownsample = serializationObject.ssrDownsample;\r\n        this.clipToFrustum = serializationObject.clipToFrustum;\r\n        this.useFresnel = serializationObject.useFresnel;\r\n        this.enableAutomaticThicknessComputation = serializationObject.enableAutomaticThicknessComputation;\r\n        this.blurDispersionStrength = serializationObject.blurDispersionStrength;\r\n        this.blurDownsample = serializationObject.blurDownsample;\r\n        this.attenuateScreenBorders = serializationObject.attenuateScreenBorders;\r\n        this.attenuateIntersectionDistance = serializationObject.attenuateIntersectionDistance;\r\n        this.attenuateIntersectionIterations = serializationObject.attenuateIntersectionIterations;\r\n        this.attenuateFacingCamera = serializationObject.attenuateFacingCamera;\r\n        this.attenuateBackfaceReflection = serializationObject.attenuateBackfaceReflection;\r\n        this.inputTextureColorIsInGammaSpace = serializationObject.inputTextureColorIsInGammaSpace;\r\n        this.generateOutputInGammaSpace = serializationObject.generateOutputInGammaSpace;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphSSRPostProcessBlock\", NodeRenderGraphSSRPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12303, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/taaTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/taaTask.ts"],"sourcesContent":["import type {\r\n    FrameGraph,\r\n    FrameGraphRenderPass,\r\n    FrameGraphObjectRendererTask,\r\n    FrameGraphTextureCreationOptions,\r\n    Observer,\r\n    ObjectRenderer,\r\n    FrameGraphTextureHandle,\r\n    Scene,\r\n} from \"core/index\";\r\nimport { ThinTAAPostProcess } from \"core/PostProcesses/thinTAAPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\n/**\r\n * Task which applies a Temporal Anti-Aliasing post process.\r\n */\r\nexport class FrameGraphTAATask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinTAAPostProcess;\r\n\r\n    /**\r\n     * The object renderer task used to render the scene objects.\r\n     */\r\n    public objectRendererTask: FrameGraphObjectRendererTask;\r\n\r\n    /**\r\n     * The handle to the velocity texture. Only needed if postProcess.reprojectHistory is enabled.\r\n     * Note that you must use the linear velocity texture!\r\n     */\r\n    public velocityTexture?: FrameGraphTextureHandle;\r\n\r\n    protected _onBeforeRenderSceneObserver: Observer<Scene>;\r\n    protected _initRenderingObserver: Observer<ObjectRenderer>;\r\n\r\n    /**\r\n     * Constructs a new Temporal Anti-Aliasing task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the Temporal Anti-Aliasing effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinTAAPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinTAAPostProcess(name, frameGraph.scene));\r\n    }\r\n\r\n    public override record(): FrameGraphRenderPass {\r\n        if (this.sourceTexture === undefined || this.objectRendererTask === undefined) {\r\n            throw new Error(`FrameGraphPostProcessTask \"${this.name}\": sourceTexture and objectRendererTask are required`);\r\n        }\r\n\r\n        this._frameGraph.scene.onBeforeRenderObservable.remove(this._onBeforeRenderSceneObserver);\r\n        this._onBeforeRenderSceneObserver = this._frameGraph.scene.onBeforeRenderObservable.add(() => {\r\n            if (this.postProcess.reprojectHistory && !this.disabled) {\r\n                this.postProcess._updateJitter();\r\n            }\r\n        });\r\n\r\n        const objectRenderer = this.objectRendererTask.objectRenderer;\r\n\r\n        objectRenderer.onInitRenderingObservable.remove(this._initRenderingObserver);\r\n        this._initRenderingObserver = objectRenderer.onInitRenderingObservable.add(() => {\r\n            if (!this.postProcess.reprojectHistory && !this.disabled) {\r\n                this.postProcess._updateJitter();\r\n\r\n                // We pass false to this.camera.getProjectionMatrix() when TAA is enabled to avoid overwriting the projection matrix calculated by the call to this.postProcess.updateJitter()\r\n                const camera = objectRenderer.activeCamera!;\r\n                this._frameGraph.scene.setTransformMatrix(camera.getViewMatrix(), camera.getProjectionMatrix(this.postProcess.disabled));\r\n            }\r\n        });\r\n\r\n        const textureManager = this._frameGraph.textureManager;\r\n        const sourceSize = textureManager.getTextureAbsoluteDimensions(this.sourceTexture);\r\n\r\n        this._sourceWidth = this._outputWidth = sourceSize.width;\r\n        this._sourceHeight = this._outputHeight = sourceSize.height;\r\n\r\n        const renderTextureSize = textureManager.getTextureAbsoluteDimensions(this.objectRendererTask.outputTexture);\r\n\r\n        this.postProcess.textureWidth = renderTextureSize.width;\r\n        this.postProcess.textureHeight = renderTextureSize.height;\r\n\r\n        const pingPongTextureCreationOptions: FrameGraphTextureCreationOptions = {\r\n            size: sourceSize,\r\n            options: {\r\n                createMipMaps: false,\r\n                types: [Constants.TEXTURETYPE_HALF_FLOAT],\r\n                formats: [Constants.TEXTUREFORMAT_RGBA],\r\n                samples: 1,\r\n                useSRGBBuffers: [false],\r\n                creationFlags: [0],\r\n                labels: [\"\"],\r\n            },\r\n            sizeIsPercentage: false,\r\n            isHistoryTexture: true,\r\n        };\r\n\r\n        const pingPongHandle = textureManager.createRenderTargetTexture(`${this.name} history`, pingPongTextureCreationOptions);\r\n\r\n        textureManager.resolveDanglingHandle(this.outputTexture, pingPongHandle);\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.depthReadOnly = this.depthReadOnly;\r\n        pass.stencilReadOnly = this.stencilReadOnly;\r\n\r\n        pass.addDependencies(this.sourceTexture);\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        pass.setRenderTargetDepth(this.depthAttachmentTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            objectRenderer.dontSetTransformationMatrix = !this.postProcess.reprojectHistory;\r\n            this.postProcess.camera = objectRenderer.activeCamera;\r\n\r\n            if (this.sourceTexture !== undefined) {\r\n                context.setTextureSamplingMode(this.sourceTexture, this.sourceSamplingMode);\r\n            }\r\n            if (this.velocityTexture !== undefined) {\r\n                context.setTextureSamplingMode(this.velocityTexture, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            }\r\n\r\n            context.setTextureSamplingMode(pingPongHandle, Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n\r\n            context.applyFullScreenEffect(\r\n                this._postProcessDrawWrapper,\r\n                () => {\r\n                    context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"textureSampler\", this.sourceTexture!);\r\n                    context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"historySampler\", pingPongHandle);\r\n                    if (this.postProcess.reprojectHistory && this.velocityTexture !== undefined) {\r\n                        context.bindTextureHandle(this._postProcessDrawWrapper.effect!, \"velocitySampler\", this.velocityTexture);\r\n                    }\r\n                    this.postProcess.bind();\r\n                },\r\n                this.stencilState,\r\n                this.disableColorWrite,\r\n                this.drawBackFace,\r\n                this.depthTest\r\n            );\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.depthReadOnly = this.depthReadOnly;\r\n        passDisabled.stencilReadOnly = this.stencilReadOnly;\r\n\r\n        passDisabled.addDependencies(this.sourceTexture);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setRenderTargetDepth(this.depthAttachmentTexture);\r\n        passDisabled.setExecuteFunc((context) => {\r\n            context.copyTexture(this.sourceTexture!);\r\n        });\r\n\r\n        return pass;\r\n    }\r\n\r\n    public override dispose() {\r\n        this.objectRendererTask?.objectRenderer.onInitRenderingObservable.remove(this._initRenderingObserver);\r\n        this._frameGraph.scene.onBeforeRenderObservable.remove(this._onBeforeRenderSceneObserver);\r\n        super.dispose();\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12419, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/taaPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/taaPostProcessBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraph, FrameGraphObjectRendererTask, FrameGraphTextureHandle } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes, NodeRenderGraphConnectionPointDirection } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphTAATask } from \"core/FrameGraph/Tasks/PostProcesses/taaTask\";\r\nimport { NodeRenderGraphConnectionPointCustomObject } from \"../../nodeRenderGraphConnectionPointCustomObject\";\r\nimport { NodeRenderGraphBaseObjectRendererBlock } from \"../Rendering/baseObjectRendererBlock\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the TAA post process\r\n */\r\nexport class NodeRenderGraphTAAPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphTAATask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphTAAPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\r\n            \"objectRenderer\",\r\n            NodeRenderGraphBlockConnectionPointTypes.Object,\r\n            false,\r\n            new NodeRenderGraphConnectionPointCustomObject(\r\n                \"objectRenderer\",\r\n                this,\r\n                NodeRenderGraphConnectionPointDirection.Input,\r\n                NodeRenderGraphBaseObjectRendererBlock,\r\n                \"NodeRenderGraphBaseObjectRendererBlock\"\r\n            )\r\n        );\r\n        this.registerInput(\"geomVelocity\", NodeRenderGraphBlockConnectionPointTypes.TextureLinearVelocity, true);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphTAATask(this.name, frameGraph);\r\n    }\r\n\r\n    /** Number of accumulated samples */\r\n    @editableInPropertyPage(\"Samples\", PropertyTypeForEdition.Int, \"PROPERTIES\")\r\n    public get samples() {\r\n        return this._frameGraphTask.postProcess.samples;\r\n    }\r\n\r\n    public set samples(value: number) {\r\n        this._frameGraphTask.postProcess.samples = value;\r\n    }\r\n\r\n    /** The factor used to blend the history frame with current frame */\r\n    @editableInPropertyPage(\"Factor\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get factor() {\r\n        return this._frameGraphTask.postProcess.factor;\r\n    }\r\n\r\n    public set factor(value: number) {\r\n        this._frameGraphTask.postProcess.factor = value;\r\n    }\r\n\r\n    /** Enables reprojecting the history texture with a per-pixel velocity */\r\n    @editableInPropertyPage(\"Reproject history\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get reprojectHistory() {\r\n        return this._frameGraphTask.postProcess.reprojectHistory;\r\n    }\r\n\r\n    public set reprojectHistory(value: boolean) {\r\n        this._frameGraphTask.postProcess.reprojectHistory = value;\r\n    }\r\n\r\n    /** Clamps the history pixel to the min and max of the 3x3 pixels surrounding the target pixel */\r\n    @editableInPropertyPage(\"Clamp history\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get clampHistory() {\r\n        return this._frameGraphTask.postProcess.clampHistory;\r\n    }\r\n\r\n    public set clampHistory(value: boolean) {\r\n        this._frameGraphTask.postProcess.clampHistory = value;\r\n    }\r\n\r\n    /** Indicates if depth testing must be enabled or disabled */\r\n    @editableInPropertyPage(\"Disable on camera move\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get disableOnCameraMove() {\r\n        return this._frameGraphTask.postProcess.disableOnCameraMove;\r\n    }\r\n\r\n    public set disableOnCameraMove(value: boolean) {\r\n        this._frameGraphTask.postProcess.disableOnCameraMove = value;\r\n    }\r\n\r\n    /** Indicates if TAA must be enabled or disabled */\r\n    @editableInPropertyPage(\"Disable TAA\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get disableTAA() {\r\n        return this._frameGraphTask.postProcess.disabled;\r\n    }\r\n\r\n    public set disableTAA(value: boolean) {\r\n        this._frameGraphTask.postProcess.disabled = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphTAAPostProcessBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the object renderer input component\r\n     */\r\n    public get objectRenderer(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry velocity input component\r\n     */\r\n    public get geomVelocity(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.objectRendererTask = this.objectRenderer.connectedPoint?.value as FrameGraphObjectRendererTask;\r\n        this._frameGraphTask.velocityTexture = this.geomVelocity.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.samples = ${this.samples};`);\r\n        codes.push(`${this._codeVariableName}.factor = ${this.factor};`);\r\n        codes.push(`${this._codeVariableName}.clampHistory = ${this.clampHistory};`);\r\n        codes.push(`${this._codeVariableName}.reprojectHistory = ${this.reprojectHistory};`);\r\n        codes.push(`${this._codeVariableName}.disableOnCameraMove = ${this.disableOnCameraMove};`);\r\n        codes.push(`${this._codeVariableName}.disableTAA = ${this.disableTAA};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.samples = this.samples;\r\n        serializationObject.factor = this.factor;\r\n        serializationObject.clampHistory = this.clampHistory;\r\n        serializationObject.reprojectHistory = this.reprojectHistory;\r\n        serializationObject.disableOnCameraMove = this.disableOnCameraMove;\r\n        serializationObject.disableTAA = this.disableTAA;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.samples = serializationObject.samples;\r\n        this.factor = serializationObject.factor;\r\n        this.clampHistory = serializationObject.clampHistory;\r\n        this.reprojectHistory = serializationObject.reprojectHistory;\r\n        this.disableOnCameraMove = serializationObject.disableOnCameraMove;\r\n        this.disableTAA = serializationObject.disableTAA;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphTAAPostProcessBlock\", NodeRenderGraphTAAPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12567, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/tonemapTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/tonemapTask.ts"],"sourcesContent":["import type { FrameGraph } from \"core/FrameGraph/frameGraph\";\r\nimport { ThinTonemapPostProcess } from \"core/PostProcesses/thinTonemapPostProcess\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\n\r\n/**\r\n * Task which applies a tonemap post process.\r\n */\r\nexport class FrameGraphTonemapTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinTonemapPostProcess;\r\n\r\n    /**\r\n     * Constructs a new tonemap task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param thinPostProcess The thin post process to use for the tonemap effect. If not provided, a new one will be created.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, thinPostProcess?: ThinTonemapPostProcess) {\r\n        super(name, frameGraph, thinPostProcess || new ThinTonemapPostProcess(name, frameGraph.engine));\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,sBAAsB,EAAE,yDAAkD;AACnF,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;;;AAKxD,MAAO,qBAAsB,SAAQ,+RAAyB;IAGhE;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,eAAwC,CAAA;QACtF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,eAAe,IAAI,IAAI,4QAAsB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;IACpG,CAAC;CACJ"}},
    {"offset": {"line": 12589, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/PostProcesses/tonemapPostProcessBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/PostProcesses/tonemapPostProcessBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphTonemapTask } from \"../../../Tasks/PostProcesses/tonemapTask\";\r\nimport { ThinTonemapPostProcess, TonemappingOperator } from \"../../../../PostProcesses/thinTonemapPostProcess\";\r\nimport { NodeRenderGraphBaseWithPropertiesPostProcessBlock } from \"./baseWithPropertiesPostProcessBlock\";\r\n\r\n/**\r\n * Block that implements the tonemap post process\r\n */\r\nexport class NodeRenderGraphTonemapPostProcessBlock extends NodeRenderGraphBaseWithPropertiesPostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphTonemapTask;\r\n\r\n    public override _additionalConstructionParameters: [TonemappingOperator];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphTonemapPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param operator defines the operator to use (default: Reinhard)\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, operator: TonemappingOperator = TonemappingOperator.Reinhard) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [operator];\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphTonemapTask(this.name, frameGraph, new ThinTonemapPostProcess(name, frameGraph.engine, { operator }));\r\n    }\r\n\r\n    private _createTask(operator: TonemappingOperator) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n        const exposureAdjustment = this._frameGraphTask.postProcess.exposureAdjustment;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphTonemapTask(this.name, this._frameGraph, new ThinTonemapPostProcess(this.name, this._frameGraph.engine, { operator }));\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n        this._frameGraphTask.postProcess.exposureAdjustment = exposureAdjustment;\r\n\r\n        this._additionalConstructionParameters = [operator];\r\n    }\r\n\r\n    @editableInPropertyPage(\"Operator\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"Hable\", value: TonemappingOperator.Hable },\r\n            { label: \"Reinhard\", value: TonemappingOperator.Reinhard },\r\n            { label: \"HejiDawson\", value: TonemappingOperator.HejiDawson },\r\n            { label: \"Photographic\", value: TonemappingOperator.Photographic },\r\n        ],\r\n    })\r\n    public get operator(): TonemappingOperator {\r\n        return this._frameGraphTask.postProcess.operator;\r\n    }\r\n\r\n    public set operator(value: TonemappingOperator) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /** Defines the required exposure adjustment */\r\n    @editableInPropertyPage(\"Exposure adjustment\", PropertyTypeForEdition.Float, \"PROPERTIES\")\r\n    public get exposureAdjustment(): number {\r\n        return this._frameGraphTask.postProcess.exposureAdjustment;\r\n    }\r\n\r\n    public set exposureAdjustment(value: number) {\r\n        this._frameGraphTask.postProcess.exposureAdjustment = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphTonemapPostProcessBlock\";\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.exposureAdjustment = ${this.exposureAdjustment};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.exposureAdjustment = this.exposureAdjustment;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.exposureAdjustment = serializationObject.exposureAdjustment;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphTonemapPostProcessBlock\", NodeRenderGraphTonemapPostProcessBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12703, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/baseShadowGeneratorBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/baseShadowGeneratorBlock.ts"],"sourcesContent":["import type {\r\n    NodeRenderGraphConnectionPoint,\r\n    Scene,\r\n    NodeRenderGraphBuildState,\r\n    FrameGraph,\r\n    IShadowLight,\r\n    FrameGraphObjectList,\r\n    FrameGraphShadowGeneratorTask,\r\n    Camera,\r\n} from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { ShadowGenerator } from \"../../../../Lights/Shadows/shadowGenerator\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class NodeRenderGraphBaseShadowGeneratorBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphShadowGeneratorTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphBaseShadowGeneratorBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"light\", NodeRenderGraphBlockConnectionPointTypes.ShadowLight);\r\n        this.registerInput(\"objects\", NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n    }\r\n\r\n    protected _finalizeInputOutputRegistering() {\r\n        this._addDependenciesInput();\r\n        this.registerOutput(\"generator\", NodeRenderGraphBlockConnectionPointTypes.ShadowGenerator);\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.Texture);\r\n    }\r\n\r\n    /** Sets the size of the shadow texture */\r\n    @editableInPropertyPage(\"Map size\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"128\", value: 128 },\r\n            { label: \"256\", value: 256 },\r\n            { label: \"512\", value: 512 },\r\n            { label: \"1024\", value: 1024 },\r\n            { label: \"2048\", value: 2048 },\r\n            { label: \"4096\", value: 4096 },\r\n            { label: \"8192\", value: 8192 },\r\n        ],\r\n    })\r\n    public get mapSize() {\r\n        return this._frameGraphTask.mapSize;\r\n    }\r\n\r\n    public set mapSize(value: number) {\r\n        this._frameGraphTask.mapSize = value;\r\n    }\r\n\r\n    /** Sets the texture type to float (by default, half float is used if supported) */\r\n    @editableInPropertyPage(\"Use 32 bits float texture type\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get useFloat32TextureType() {\r\n        return this._frameGraphTask.useFloat32TextureType;\r\n    }\r\n\r\n    public set useFloat32TextureType(value: boolean) {\r\n        this._frameGraphTask.useFloat32TextureType = value;\r\n    }\r\n\r\n    /** Sets the texture type to Red */\r\n    @editableInPropertyPage(\"Use red texture format\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get useRedTextureFormat() {\r\n        return this._frameGraphTask.useRedTextureFormat;\r\n    }\r\n\r\n    public set useRedTextureFormat(value: boolean) {\r\n        this._frameGraphTask.useRedTextureFormat = value;\r\n    }\r\n\r\n    /** Sets the bias */\r\n    @editableInPropertyPage(\"Bias\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get bias() {\r\n        return this._frameGraphTask.bias;\r\n    }\r\n\r\n    public set bias(value: number) {\r\n        this._frameGraphTask.bias = value;\r\n    }\r\n\r\n    /** Sets the normal bias */\r\n    @editableInPropertyPage(\"Normal bias\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get normalBias() {\r\n        return this._frameGraphTask.normalBias;\r\n    }\r\n\r\n    public set normalBias(value: number) {\r\n        this._frameGraphTask.normalBias = value;\r\n    }\r\n\r\n    /** Sets the darkness of the shadows */\r\n    @editableInPropertyPage(\"Darkness\", PropertyTypeForEdition.Float, \"PROPERTIES\", { min: 0, max: 1 })\r\n    public get darkness() {\r\n        return this._frameGraphTask.darkness;\r\n    }\r\n\r\n    public set darkness(value: number) {\r\n        this._frameGraphTask.darkness = value;\r\n    }\r\n\r\n    /** Sets the filter method */\r\n    @editableInPropertyPage(\"Filter\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"None\", value: ShadowGenerator.FILTER_NONE },\r\n            { label: \"Exponential\", value: ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP },\r\n            { label: \"Poisson Sampling\", value: ShadowGenerator.FILTER_POISSONSAMPLING },\r\n            { label: \"Blur exponential\", value: ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP },\r\n            { label: \"Close exponential\", value: ShadowGenerator.FILTER_CLOSEEXPONENTIALSHADOWMAP },\r\n            { label: \"Blur close exponential\", value: ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP },\r\n            { label: \"PCF\", value: ShadowGenerator.FILTER_PCF },\r\n            { label: \"PCSS\", value: ShadowGenerator.FILTER_PCSS },\r\n        ],\r\n    })\r\n    public get filter() {\r\n        return this._frameGraphTask.filter;\r\n    }\r\n\r\n    public set filter(value: number) {\r\n        this._frameGraphTask.filter = value;\r\n    }\r\n\r\n    /** Sets the filter quality (for PCF and PCSS) */\r\n    @editableInPropertyPage(\"Filter quality\", PropertyTypeForEdition.List, \"PROPERTIES\", {\r\n        options: [\r\n            { label: \"Low\", value: ShadowGenerator.QUALITY_LOW },\r\n            { label: \"Medium\", value: ShadowGenerator.QUALITY_MEDIUM },\r\n            { label: \"High\", value: ShadowGenerator.QUALITY_HIGH },\r\n        ],\r\n    })\r\n    public get filteringQuality() {\r\n        return this._frameGraphTask.filteringQuality;\r\n    }\r\n\r\n    public set filteringQuality(value: number) {\r\n        this._frameGraphTask.filteringQuality = value;\r\n    }\r\n\r\n    /** Gets or sets the ability to have transparent shadow */\r\n    @editableInPropertyPage(\"Transparency shadow\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get transparencyShadow() {\r\n        return this._frameGraphTask.transparencyShadow;\r\n    }\r\n\r\n    public set transparencyShadow(value: boolean) {\r\n        this._frameGraphTask.transparencyShadow = value;\r\n    }\r\n\r\n    /** Enables or disables shadows with varying strength based on the transparency */\r\n    @editableInPropertyPage(\"Enable soft transparent shadows\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get enableSoftTransparentShadow() {\r\n        return this._frameGraphTask.enableSoftTransparentShadow;\r\n    }\r\n\r\n    public set enableSoftTransparentShadow(value: boolean) {\r\n        this._frameGraphTask.enableSoftTransparentShadow = value;\r\n    }\r\n\r\n    /** If this is true, use the opacity texture's alpha channel for transparent shadows instead of the diffuse one */\r\n    @editableInPropertyPage(\"Use opacity texture for transparent shadows\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get useOpacityTextureForTransparentShadow() {\r\n        return this._frameGraphTask.useOpacityTextureForTransparentShadow;\r\n    }\r\n\r\n    public set useOpacityTextureForTransparentShadow(value: boolean) {\r\n        this._frameGraphTask.useOpacityTextureForTransparentShadow = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphBaseShadowGeneratorBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the light input component\r\n     */\r\n    public get light(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the objects input component\r\n     */\r\n    public get objects(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the shadow generator component\r\n     */\r\n    public get generator(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output texture component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.light = this.light.connectedPoint?.value as IShadowLight;\r\n        this._frameGraphTask.objectList = this.objects.connectedPoint?.value as FrameGraphObjectList;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n\r\n        // Important: the shadow generator object is created by the task when we set the light, that's why we must set generator.value after setting the light!\r\n        this.generator.value = this._frameGraphTask;\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.mapSize = ${this.mapSize};`);\r\n        codes.push(`${this._codeVariableName}.useFloat32TextureType = ${this.useFloat32TextureType};`);\r\n        codes.push(`${this._codeVariableName}.useRedTextureFormat = ${this.useRedTextureFormat};`);\r\n        codes.push(`${this._codeVariableName}.bias = ${this.bias};`);\r\n        codes.push(`${this._codeVariableName}.normalBias = ${this.normalBias};`);\r\n        codes.push(`${this._codeVariableName}.darkness = ${this.darkness};`);\r\n        codes.push(`${this._codeVariableName}.filter = ${this.filter};`);\r\n        codes.push(`${this._codeVariableName}.filteringQuality = ${this.filteringQuality};`);\r\n        codes.push(`${this._codeVariableName}.transparencyShadow = ${this.transparencyShadow};`);\r\n        codes.push(`${this._codeVariableName}.enableSoftTransparentShadow = ${this.enableSoftTransparentShadow};`);\r\n        codes.push(`${this._codeVariableName}.useOpacityTextureForTransparentShadow = ${this.useOpacityTextureForTransparentShadow};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.mapSize = this.mapSize;\r\n        serializationObject.useFloat32TextureType = this.useFloat32TextureType;\r\n        serializationObject.useRedTextureFormat = this.useRedTextureFormat;\r\n        serializationObject.bias = this.bias;\r\n        serializationObject.normalBias = this.normalBias;\r\n        serializationObject.darkness = this.darkness;\r\n        serializationObject.filter = this.filter;\r\n        serializationObject.filteringQuality = this.filteringQuality;\r\n        serializationObject.transparencyShadow = this.transparencyShadow;\r\n        serializationObject.enableSoftTransparentShadow = this.enableSoftTransparentShadow;\r\n        serializationObject.useOpacityTextureForTransparentShadow = this.useOpacityTextureForTransparentShadow;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.mapSize = serializationObject.mapSize;\r\n        this.useFloat32TextureType = serializationObject.useFloat32TextureType;\r\n        this.useRedTextureFormat = serializationObject.useRedTextureFormat;\r\n        this.bias = serializationObject.bias;\r\n        this.normalBias = serializationObject.normalBias;\r\n        this.darkness = serializationObject.darkness;\r\n        this.filter = serializationObject.filter;\r\n        this.filteringQuality = serializationObject.filteringQuality;\r\n        this.transparencyShadow = serializationObject.transparencyShadow;\r\n        this.enableSoftTransparentShadow = serializationObject.enableSoftTransparentShadow;\r\n        this.useOpacityTextureForTransparentShadow = serializationObject.useOpacityTextureForTransparentShadow;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13017, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/csmShadowGeneratorBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/csmShadowGeneratorBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph, NodeRenderGraphConnectionPoint, FrameGraphTextureHandle, NodeRenderGraphBuildState } from \"core/index\";\r\nimport { NodeRenderGraphBaseShadowGeneratorBlock } from \"./baseShadowGeneratorBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphCascadedShadowGeneratorTask } from \"../../../Tasks/Rendering/csmShadowGeneratorTask\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { DepthTextureType } from \"core/Misc/thinMinMaxReducer\";\r\n\r\n/**\r\n * Block that generates shadows through a shadow generator\r\n */\r\nexport class NodeRenderGraphCascadedShadowGeneratorBlock extends NodeRenderGraphBaseShadowGeneratorBlock {\r\n    protected override _frameGraphTask: FrameGraphCascadedShadowGeneratorTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphCascadedShadowGeneratorBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"geomDepth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n\r\n        this.geomDepth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureNormalizedViewDepth |\r\n                NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth |\r\n                NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth\r\n        );\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphCascadedShadowGeneratorTask(this.name, frameGraph);\r\n    }\r\n\r\n    /** Sets the number of cascades */\r\n    @editableInPropertyPage(\"Number of cascades\", PropertyTypeForEdition.List, \"CSM PROPERTIES\", {\r\n        options: [\r\n            { label: \"2\", value: 2 },\r\n            { label: \"3\", value: 3 },\r\n            { label: \"4\", value: 4 },\r\n        ],\r\n    })\r\n    public get numCascades() {\r\n        return this._frameGraphTask.numCascades;\r\n    }\r\n\r\n    public set numCascades(value: number) {\r\n        this._frameGraphTask.numCascades = value;\r\n    }\r\n\r\n    /** Gets or sets a value indicating whether the shadow generator should display the cascades. */\r\n    @editableInPropertyPage(\"Debug mode\", PropertyTypeForEdition.Boolean, \"CSM PROPERTIES\")\r\n    public get debug() {\r\n        return this._frameGraphTask.debug;\r\n    }\r\n\r\n    public set debug(value: boolean) {\r\n        this._frameGraphTask.debug = value;\r\n    }\r\n\r\n    /** Gets or sets a value indicating whether the shadow generator should stabilize the cascades. */\r\n    @editableInPropertyPage(\"Stabilize cascades\", PropertyTypeForEdition.Boolean, \"CSM PROPERTIES\")\r\n    public get stabilizeCascades() {\r\n        return this._frameGraphTask.stabilizeCascades;\r\n    }\r\n\r\n    public set stabilizeCascades(value: boolean) {\r\n        this._frameGraphTask.stabilizeCascades = value;\r\n    }\r\n\r\n    /** Gets or sets the lambda parameter of the shadow generator. */\r\n    @editableInPropertyPage(\"Lambda\", PropertyTypeForEdition.Float, \"CSM PROPERTIES\", { min: 0, max: 1 })\r\n    public get lambda() {\r\n        return this._frameGraphTask.lambda;\r\n    }\r\n\r\n    public set lambda(value: number) {\r\n        this._frameGraphTask.lambda = value;\r\n    }\r\n\r\n    /** Gets or sets the cascade blend percentage. */\r\n    @editableInPropertyPage(\"Cascade blend\", PropertyTypeForEdition.Float, \"CSM PROPERTIES\", { min: 0, max: 1 })\r\n    public get cascadeBlendPercentage() {\r\n        return this._frameGraphTask.cascadeBlendPercentage;\r\n    }\r\n\r\n    public set cascadeBlendPercentage(value: number) {\r\n        this._frameGraphTask.cascadeBlendPercentage = value;\r\n    }\r\n\r\n    /** Gets or sets a value indicating whether the shadow generator should use depth clamping. */\r\n    @editableInPropertyPage(\"Depth clamp\", PropertyTypeForEdition.Boolean, \"CSM PROPERTIES\")\r\n    public get depthClamp() {\r\n        return this._frameGraphTask.depthClamp;\r\n    }\r\n\r\n    public set depthClamp(value: boolean) {\r\n        this._frameGraphTask.depthClamp = value;\r\n    }\r\n\r\n    /** Gets or sets a value indicating whether the shadow generator should automatically calculate the depth bounds. */\r\n    @editableInPropertyPage(\"Auto-Calc depth bounds\", PropertyTypeForEdition.Boolean, \"CSM PROPERTIES\")\r\n    public get autoCalcDepthBounds() {\r\n        return this._frameGraphTask.autoCalcDepthBounds;\r\n    }\r\n\r\n    public set autoCalcDepthBounds(value: boolean) {\r\n        this._frameGraphTask.autoCalcDepthBounds = value;\r\n    }\r\n\r\n    /** Defines the refresh rate of the min/max computation used when autoCalcDepthBounds is set to true. */\r\n    @editableInPropertyPage(\"Auto-Calc depth bounds refresh rate\", PropertyTypeForEdition.Int, \"CSM PROPERTIES\")\r\n    public get autoCalcDepthBoundsRefreshRate() {\r\n        return this._frameGraphTask.autoCalcDepthBoundsRefreshRate;\r\n    }\r\n\r\n    public set autoCalcDepthBoundsRefreshRate(value: number) {\r\n        this._frameGraphTask.autoCalcDepthBoundsRefreshRate = value;\r\n    }\r\n\r\n    /** Gets or sets the maximum shadow Z value. */\r\n    @editableInPropertyPage(\"Shadow maxZ\", PropertyTypeForEdition.Float, \"CSM PROPERTIES\")\r\n    public get shadowMaxZ() {\r\n        return this._frameGraphTask.shadowMaxZ;\r\n    }\r\n\r\n    public set shadowMaxZ(value: number) {\r\n        this._frameGraphTask.shadowMaxZ = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphCascadedShadowGeneratorBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry (view / normalized view) depth component\r\n     */\r\n    public get geomDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this._frameGraphTask.depthTexture = this.geomDepth.connectedPoint?.value as FrameGraphTextureHandle;\r\n\r\n        if (this.geomDepth.connectedPoint) {\r\n            switch (this.geomDepth.connectedPoint.type) {\r\n                case NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth:\r\n                    this._frameGraphTask.depthTextureType = DepthTextureType.ScreenDepth;\r\n                    break;\r\n                case NodeRenderGraphBlockConnectionPointTypes.TextureNormalizedViewDepth:\r\n                    this._frameGraphTask.depthTextureType = DepthTextureType.NormalizedViewDepth;\r\n                    break;\r\n                case NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth:\r\n                    this._frameGraphTask.depthTextureType = DepthTextureType.ViewDepth;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.numCascades = ${this.numCascades};`);\r\n        codes.push(`${this._codeVariableName}.debug = ${this.debug};`);\r\n        codes.push(`${this._codeVariableName}.stabilizeCascades = ${this.stabilizeCascades};`);\r\n        codes.push(`${this._codeVariableName}.lambda = ${this.lambda};`);\r\n        codes.push(`${this._codeVariableName}.cascadeBlendPercentage = ${this.cascadeBlendPercentage};`);\r\n        codes.push(`${this._codeVariableName}.depthClamp = ${this.depthClamp};`);\r\n        codes.push(`${this._codeVariableName}.autoCalcDepthBounds = ${this.autoCalcDepthBounds};`);\r\n        codes.push(`${this._codeVariableName}.autoCalcDepthBoundsRefreshRate = ${this.autoCalcDepthBoundsRefreshRate};`);\r\n        codes.push(`${this._codeVariableName}.shadowMaxZ = ${this.shadowMaxZ};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.numCascades = this.numCascades;\r\n        serializationObject.debug = this.debug;\r\n        serializationObject.stabilizeCascades = this.stabilizeCascades;\r\n        serializationObject.lambda = this.lambda;\r\n        serializationObject.cascadeBlendPercentage = this.cascadeBlendPercentage;\r\n        serializationObject.depthClamp = this.depthClamp;\r\n        serializationObject.autoCalcDepthBounds = this.autoCalcDepthBounds;\r\n        serializationObject.autoCalcDepthBoundsRefreshRate = this.autoCalcDepthBoundsRefreshRate;\r\n        serializationObject.shadowMaxZ = this.shadowMaxZ;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.numCascades = serializationObject.numCascades;\r\n        this.debug = serializationObject.debug;\r\n        this.stabilizeCascades = serializationObject.stabilizeCascades;\r\n        this.lambda = serializationObject.lambda;\r\n        this.cascadeBlendPercentage = serializationObject.cascadeBlendPercentage;\r\n        this.depthClamp = serializationObject.depthClamp;\r\n        this.autoCalcDepthBounds = serializationObject.autoCalcDepthBounds;\r\n        this.autoCalcDepthBoundsRefreshRate = serializationObject.autoCalcDepthBoundsRefreshRate ?? 1;\r\n        this.shadowMaxZ = serializationObject.shadowMaxZ;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphCascadedShadowGeneratorBlock\", NodeRenderGraphCascadedShadowGeneratorBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13225, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/geometryRendererBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/geometryRendererBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, NodeRenderGraphBuildState, FrameGraph, FrameGraphTextureHandle, FrameGraphObjectList, Camera } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphGeometryRendererTask } from \"../../../Tasks/Rendering/geometryRendererTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\n/**\r\n * Block that render geometry of objects to a multi render target\r\n */\r\nexport class NodeRenderGraphGeometryRendererBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphGeometryRendererTask;\r\n\r\n    public override _additionalConstructionParameters: [boolean, boolean];\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphGeometryRendererBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param doNotChangeAspectRatio True (default) to not change the aspect ratio of the scene in the RTT\r\n     * @param enableClusteredLights True (default) to enable clustered lights\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, doNotChangeAspectRatio = true, enableClusteredLights = true) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [doNotChangeAspectRatio, enableClusteredLights];\r\n\r\n        this.registerInput(\"depth\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this.registerInput(\"objects\", NodeRenderGraphBlockConnectionPointTypes.ObjectList);\r\n        this._addDependenciesInput();\r\n\r\n        this.registerOutput(\"outputDepth\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n        this.registerOutput(\"geomViewDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureViewDepth);\r\n        this.registerOutput(\"geomNormViewDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureNormalizedViewDepth);\r\n        this.registerOutput(\"geomScreenDepth\", NodeRenderGraphBlockConnectionPointTypes.TextureScreenDepth);\r\n        this.registerOutput(\"geomViewNormal\", NodeRenderGraphBlockConnectionPointTypes.TextureViewNormal);\r\n        this.registerOutput(\"geomWorldNormal\", NodeRenderGraphBlockConnectionPointTypes.TextureWorldNormal);\r\n        this.registerOutput(\"geomLocalPosition\", NodeRenderGraphBlockConnectionPointTypes.TextureLocalPosition);\r\n        this.registerOutput(\"geomWorldPosition\", NodeRenderGraphBlockConnectionPointTypes.TextureWorldPosition);\r\n        this.registerOutput(\"geomAlbedo\", NodeRenderGraphBlockConnectionPointTypes.TextureAlbedo);\r\n        this.registerOutput(\"geomReflectivity\", NodeRenderGraphBlockConnectionPointTypes.TextureReflectivity);\r\n        this.registerOutput(\"geomVelocity\", NodeRenderGraphBlockConnectionPointTypes.TextureVelocity);\r\n        this.registerOutput(\"geomLinearVelocity\", NodeRenderGraphBlockConnectionPointTypes.TextureLinearVelocity);\r\n\r\n        this.depth.addExcludedConnectionPointFromAllowedTypes(\r\n            NodeRenderGraphBlockConnectionPointTypes.TextureDepthStencilAttachment | NodeRenderGraphBlockConnectionPointTypes.TextureBackBufferDepthStencilAttachment\r\n        );\r\n\r\n        this.outputDepth._typeConnectionSource = this.depth;\r\n\r\n        this._frameGraphTask = new FrameGraphGeometryRendererTask(this.name, frameGraph, scene, { doNotChangeAspectRatio, enableClusteredLights });\r\n    }\r\n\r\n    /** Indicates if depth testing must be enabled or disabled */\r\n    @editableInPropertyPage(\"Depth test\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get depthTest() {\r\n        return this._frameGraphTask.depthTest;\r\n    }\r\n\r\n    public set depthTest(value: boolean) {\r\n        this._frameGraphTask.depthTest = value;\r\n    }\r\n\r\n    /** Indicates if depth writing must be enabled or disabled */\r\n    @editableInPropertyPage(\"Depth write\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get depthWrite() {\r\n        return this._frameGraphTask.depthWrite;\r\n    }\r\n\r\n    public set depthWrite(value: boolean) {\r\n        this._frameGraphTask.depthWrite = value;\r\n    }\r\n\r\n    /** Indicates if layer mask check must be forced */\r\n    @editableInPropertyPage(\"Force layer mask check\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get forceLayerMaskCheck() {\r\n        return this._frameGraphTask.forceLayerMaskCheck;\r\n    }\r\n\r\n    public set forceLayerMaskCheck(value: boolean) {\r\n        this._frameGraphTask.forceLayerMaskCheck = value;\r\n    }\r\n\r\n    protected _recreateFrameGraphObject(doNotChangeAspectRatio: boolean, enableClusteredLights: boolean): void {\r\n        const disabled = this._frameGraphTask.disabled;\r\n        const depthTest = this.depthTest;\r\n        const depthWrite = this.depthWrite;\r\n        const width = this.width;\r\n        const height = this.height;\r\n        const forceLayerMaskCheck = this.forceLayerMaskCheck;\r\n        const sizeInPercentage = this.sizeInPercentage;\r\n        const samples = this.samples;\r\n        const reverseCulling = this.reverseCulling;\r\n        const dontRenderWhenMaterialDepthWriteIsDisabled = this.dontRenderWhenMaterialDepthWriteIsDisabled;\r\n\r\n        this._frameGraphTask.dispose();\r\n        this._frameGraphTask = new FrameGraphGeometryRendererTask(this.name, this._frameGraph, this._scene, {\r\n            doNotChangeAspectRatio: doNotChangeAspectRatio,\r\n            enableClusteredLights: enableClusteredLights,\r\n        });\r\n        this._additionalConstructionParameters = [doNotChangeAspectRatio, enableClusteredLights];\r\n\r\n        this.depthTest = depthTest;\r\n        this.depthWrite = depthWrite;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.forceLayerMaskCheck = forceLayerMaskCheck;\r\n        this.sizeInPercentage = sizeInPercentage;\r\n        this.samples = samples;\r\n        this.reverseCulling = reverseCulling;\r\n        this.dontRenderWhenMaterialDepthWriteIsDisabled = dontRenderWhenMaterialDepthWriteIsDisabled;\r\n        this._frameGraphTask.disabled = disabled;\r\n    }\r\n\r\n    /** True (default) to not change the aspect ratio of the scene in the RTT */\r\n    @editableInPropertyPage(\"Do not change aspect ratio\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get doNotChangeAspectRatio() {\r\n        return this._frameGraphTask.objectRenderer.options.doNotChangeAspectRatio;\r\n    }\r\n\r\n    public set doNotChangeAspectRatio(value: boolean) {\r\n        this._recreateFrameGraphObject(value, this.enableClusteredLights);\r\n    }\r\n\r\n    /** True (default) to enable clustered lights */\r\n    @editableInPropertyPage(\"Enable clustered lights\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get enableClusteredLights() {\r\n        return this._frameGraphTask.objectRenderer.options.enableClusteredLights;\r\n    }\r\n\r\n    public set enableClusteredLights(value: boolean) {\r\n        this._recreateFrameGraphObject(this.doNotChangeAspectRatio, value);\r\n    }\r\n\r\n    /** Width of the geometry texture */\r\n    @editableInPropertyPage(\"Texture width\", PropertyTypeForEdition.Int, \"PROPERTIES\")\r\n    public get width() {\r\n        return this._frameGraphTask.size.width;\r\n    }\r\n\r\n    public set width(value: number) {\r\n        this._frameGraphTask.size.width = value;\r\n    }\r\n\r\n    /** Height of the geometry texture */\r\n    @editableInPropertyPage(\"Texture height\", PropertyTypeForEdition.Int, \"PROPERTIES\")\r\n    public get height() {\r\n        return this._frameGraphTask.size.height;\r\n    }\r\n\r\n    public set height(value: number) {\r\n        this._frameGraphTask.size.height = value;\r\n    }\r\n\r\n    /** Indicates if the geometry texture width and height are percentages or absolute values */\r\n    @editableInPropertyPage(\"Size is in percentage\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get sizeInPercentage() {\r\n        return this._frameGraphTask.sizeIsPercentage;\r\n    }\r\n\r\n    public set sizeInPercentage(value: boolean) {\r\n        this._frameGraphTask.sizeIsPercentage = value;\r\n    }\r\n\r\n    /** Number of samples of the geometry texture */\r\n    @editableInPropertyPage(\"Samples\", PropertyTypeForEdition.Int, \"PROPERTIES\", { min: 1, max: 8 })\r\n    public get samples() {\r\n        return this._frameGraphTask.samples;\r\n    }\r\n\r\n    public set samples(value: number) {\r\n        this._frameGraphTask.samples = value;\r\n    }\r\n\r\n    /** Indicates if culling must be reversed */\r\n    @editableInPropertyPage(\"Reverse culling\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get reverseCulling() {\r\n        return this._frameGraphTask.reverseCulling;\r\n    }\r\n\r\n    public set reverseCulling(value: boolean) {\r\n        this._frameGraphTask.reverseCulling = value;\r\n    }\r\n\r\n    /** Indicates if a mesh shouldn't be rendered when its material has depth write disabled */\r\n    @editableInPropertyPage(\"Don't render if material depth write is disabled\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get dontRenderWhenMaterialDepthWriteIsDisabled() {\r\n        return this._frameGraphTask.dontRenderWhenMaterialDepthWriteIsDisabled;\r\n    }\r\n\r\n    public set dontRenderWhenMaterialDepthWriteIsDisabled(value: boolean) {\r\n        this._frameGraphTask.dontRenderWhenMaterialDepthWriteIsDisabled = value;\r\n    }\r\n\r\n    /** If true, MSAA color textures will be resolved at the end of the render pass (default: true) */\r\n    @editableInPropertyPage(\"Resolve MSAA colors\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get resolveMSAAColors() {\r\n        return this._frameGraphTask.resolveMSAAColors;\r\n    }\r\n\r\n    public set resolveMSAAColors(value: boolean) {\r\n        this._frameGraphTask.resolveMSAAColors = value;\r\n    }\r\n\r\n    /** If true, MSAA depth texture will be resolved at the end of the render pass (default: false) */\r\n    @editableInPropertyPage(\"Resolve MSAA depth\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get resolveMSAADepth() {\r\n        return this._frameGraphTask.resolveMSAADepth;\r\n    }\r\n\r\n    public set resolveMSAADepth(value: boolean) {\r\n        this._frameGraphTask.resolveMSAADepth = value;\r\n    }\r\n\r\n    // View depth\r\n    @editableInPropertyPage(\"View depth format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public viewDepthFormat = Constants.TEXTUREFORMAT_RED;\r\n\r\n    @editableInPropertyPage(\"View depth type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public viewDepthType = Constants.TEXTURETYPE_FLOAT;\r\n\r\n    // Normalized view depth\r\n    @editableInPropertyPage(\"Normalized view depth format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public normalizedViewDepthFormat = Constants.TEXTUREFORMAT_RED;\r\n\r\n    @editableInPropertyPage(\"Normalized view depth type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public normalizedViewDepthType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n\r\n    // Screen depth\r\n    @editableInPropertyPage(\"Screen depth format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public screenDepthFormat = Constants.TEXTUREFORMAT_RED;\r\n\r\n    @editableInPropertyPage(\"Screen depth type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public screenDepthType = Constants.TEXTURETYPE_FLOAT;\r\n\r\n    // View normal\r\n    @editableInPropertyPage(\"View normal format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public viewNormalFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"View normal type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public viewNormalType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n\r\n    // World normal\r\n    @editableInPropertyPage(\"World normal format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public worldNormalFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"World normal type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public worldNormalType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n\r\n    // Local position\r\n    @editableInPropertyPage(\"Local position format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public localPositionFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"Local position type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public localPositionType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n\r\n    // World Position\r\n    @editableInPropertyPage(\"World position format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public worldPositionFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"World position type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public worldPositionType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n\r\n    // Albedo\r\n    @editableInPropertyPage(\"Albedo format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public albedoFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"Albedo type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public albedoType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n\r\n    // Reflectivity\r\n    @editableInPropertyPage(\"Reflectivity format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public reflectivityFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"Reflectivity type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public reflectivityType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n\r\n    // Velocity\r\n    @editableInPropertyPage(\"Velocity format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public velocityFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"Velocity type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public velocityType = Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n\r\n    // Linear velocity\r\n    @editableInPropertyPage(\"Linear velocity format\", PropertyTypeForEdition.TextureFormat, \"GEOMETRY BUFFERS\")\r\n    public linearVelocityFormat = Constants.TEXTUREFORMAT_RGBA;\r\n\r\n    @editableInPropertyPage(\"Linear velocity type\", PropertyTypeForEdition.TextureType, \"GEOMETRY BUFFERS\")\r\n    public linearVelocityType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphGeometryRendererBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the depth texture input component\r\n     */\r\n    public get depth(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the objects input component\r\n     */\r\n    public get objects(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the output depth component\r\n     */\r\n    public get outputDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view depth component\r\n     */\r\n    public get geomViewDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry normalized view depth component\r\n     */\r\n    public get geomNormViewDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry screen depth component\r\n     */\r\n    public get geomScreenDepth(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry view normal component\r\n     */\r\n    public get geomViewNormal(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the world geometry normal component\r\n     */\r\n    public get geomWorldNormal(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[5];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry local position component\r\n     */\r\n    public get geomLocalPosition(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[6];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry world position component\r\n     */\r\n    public get geomWorldPosition(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[7];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry albedo component\r\n     */\r\n    public get geomAlbedo(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[8];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry reflectivity component\r\n     */\r\n    public get geomReflectivity(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[9];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry velocity component\r\n     */\r\n    public get geomVelocity(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[10];\r\n    }\r\n\r\n    /**\r\n     * Gets the geometry linear velocity component\r\n     */\r\n    public get geomLinearVelocity(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[11];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        const textureActivation = [\r\n            this.geomViewDepth.isConnected,\r\n            this.geomNormViewDepth.isConnected,\r\n            this.geomScreenDepth.isConnected,\r\n            this.geomViewNormal.isConnected,\r\n            this.geomWorldNormal.isConnected,\r\n            this.geomLocalPosition.isConnected,\r\n            this.geomWorldPosition.isConnected,\r\n            this.geomAlbedo.isConnected,\r\n            this.geomReflectivity.isConnected,\r\n            this.geomVelocity.isConnected,\r\n            this.geomLinearVelocity.isConnected,\r\n        ];\r\n\r\n        this.outputDepth.value = this._frameGraphTask.outputDepthTexture;\r\n        this.geomViewDepth.value = this._frameGraphTask.geometryViewDepthTexture;\r\n        this.geomNormViewDepth.value = this._frameGraphTask.geometryNormViewDepthTexture;\r\n        this.geomScreenDepth.value = this._frameGraphTask.geometryScreenDepthTexture;\r\n        this.geomViewNormal.value = this._frameGraphTask.geometryViewNormalTexture;\r\n        this.geomWorldNormal.value = this._frameGraphTask.geometryWorldNormalTexture;\r\n        this.geomLocalPosition.value = this._frameGraphTask.geometryLocalPositionTexture;\r\n        this.geomWorldPosition.value = this._frameGraphTask.geometryWorldPositionTexture;\r\n        this.geomAlbedo.value = this._frameGraphTask.geometryAlbedoTexture;\r\n        this.geomReflectivity.value = this._frameGraphTask.geometryReflectivityTexture;\r\n        this.geomVelocity.value = this._frameGraphTask.geometryVelocityTexture;\r\n        this.geomLinearVelocity.value = this._frameGraphTask.geometryLinearVelocityTexture;\r\n\r\n        this._frameGraphTask.depthTexture = this.depth.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n        this._frameGraphTask.objectList = this.objects.connectedPoint?.value as FrameGraphObjectList;\r\n\r\n        this._frameGraphTask.textureDescriptions = [];\r\n\r\n        const textureFormats = [\r\n            this.viewDepthFormat,\r\n            this.normalizedViewDepthFormat,\r\n            this.screenDepthFormat,\r\n            this.viewNormalFormat,\r\n            this.worldNormalFormat,\r\n            this.localPositionFormat,\r\n            this.worldPositionFormat,\r\n            this.albedoFormat,\r\n            this.reflectivityFormat,\r\n            this.velocityFormat,\r\n            this.linearVelocityFormat,\r\n        ];\r\n        const textureTypes = [\r\n            this.viewDepthType,\r\n            this.normalizedViewDepthType,\r\n            this.screenDepthType,\r\n            this.viewNormalType,\r\n            this.worldNormalType,\r\n            this.localPositionType,\r\n            this.worldPositionType,\r\n            this.albedoType,\r\n            this.reflectivityType,\r\n            this.velocityType,\r\n            this.linearVelocityType,\r\n        ];\r\n        const bufferTypes = [\r\n            Constants.PREPASS_DEPTH_TEXTURE_TYPE,\r\n            Constants.PREPASS_NORMALIZED_VIEW_DEPTH_TEXTURE_TYPE,\r\n            Constants.PREPASS_SCREENSPACE_DEPTH_TEXTURE_TYPE,\r\n            Constants.PREPASS_NORMAL_TEXTURE_TYPE,\r\n            Constants.PREPASS_WORLD_NORMAL_TEXTURE_TYPE,\r\n            Constants.PREPASS_LOCAL_POSITION_TEXTURE_TYPE,\r\n            Constants.PREPASS_POSITION_TEXTURE_TYPE,\r\n            Constants.PREPASS_ALBEDO_TEXTURE_TYPE,\r\n            Constants.PREPASS_REFLECTIVITY_TEXTURE_TYPE,\r\n            Constants.PREPASS_VELOCITY_TEXTURE_TYPE,\r\n            Constants.PREPASS_VELOCITY_LINEAR_TEXTURE_TYPE,\r\n        ];\r\n\r\n        for (let i = 0; i < textureActivation.length; i++) {\r\n            if (textureActivation[i]) {\r\n                this._frameGraphTask.textureDescriptions.push({\r\n                    textureFormat: textureFormats[i],\r\n                    textureType: textureTypes[i],\r\n                    type: bufferTypes[i],\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.depthTest = ${this.depthTest};`);\r\n        codes.push(`${this._codeVariableName}.depthWrite = ${this.depthWrite};`);\r\n        codes.push(`${this._codeVariableName}.forceLayerMaskCheck = ${this.forceLayerMaskCheck};`);\r\n        codes.push(`${this._codeVariableName}.samples = ${this.samples};`);\r\n        codes.push(`${this._codeVariableName}.reverseCulling = ${this.reverseCulling};`);\r\n        codes.push(`${this._codeVariableName}.dontRenderWhenMaterialDepthWriteIsDisabled = ${this.dontRenderWhenMaterialDepthWriteIsDisabled};`);\r\n        codes.push(`${this._codeVariableName}.viewDepthFormat = ${this.viewDepthFormat};`);\r\n        codes.push(`${this._codeVariableName}.viewDepthType = ${this.viewDepthType};`);\r\n        codes.push(`${this._codeVariableName}.normalizedViewDepthFormat = ${this.normalizedViewDepthFormat};`);\r\n        codes.push(`${this._codeVariableName}.normalizedViewDepthType = ${this.normalizedViewDepthType};`);\r\n        codes.push(`${this._codeVariableName}.screenDepthFormat = ${this.screenDepthFormat};`);\r\n        codes.push(`${this._codeVariableName}.screenDepthType = ${this.screenDepthType};`);\r\n        codes.push(`${this._codeVariableName}.localPositionFormat = ${this.localPositionFormat};`);\r\n        codes.push(`${this._codeVariableName}.localPositionType = ${this.localPositionType};`);\r\n        codes.push(`${this._codeVariableName}.worldPositionFormat = ${this.worldPositionFormat};`);\r\n        codes.push(`${this._codeVariableName}.worldPositionType = ${this.worldPositionType};`);\r\n        codes.push(`${this._codeVariableName}.viewNormalFormat = ${this.viewNormalFormat};`);\r\n        codes.push(`${this._codeVariableName}.viewNormalType = ${this.viewNormalType};`);\r\n        codes.push(`${this._codeVariableName}.worldNormalFormat = ${this.worldNormalFormat};`);\r\n        codes.push(`${this._codeVariableName}.worldNormalType = ${this.worldNormalType};`);\r\n        codes.push(`${this._codeVariableName}.albedoFormat = ${this.albedoFormat};`);\r\n        codes.push(`${this._codeVariableName}.albedoType = ${this.albedoType};`);\r\n        codes.push(`${this._codeVariableName}.reflectivityFormat = ${this.reflectivityFormat};`);\r\n        codes.push(`${this._codeVariableName}.reflectivityType = ${this.reflectivityType};`);\r\n        codes.push(`${this._codeVariableName}.velocityFormat = ${this.velocityFormat};`);\r\n        codes.push(`${this._codeVariableName}.velocityType = ${this.velocityType};`);\r\n        codes.push(`${this._codeVariableName}.linearVelocityFormat = ${this.linearVelocityFormat};`);\r\n        codes.push(`${this._codeVariableName}.linearVelocityType = ${this.linearVelocityType};`);\r\n        codes.push(`${this._codeVariableName}.resolveMSAAColors = ${this.resolveMSAAColors};`);\r\n        codes.push(`${this._codeVariableName}.resolveMSAADepth = ${this.resolveMSAADepth};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.depthTest = this.depthTest;\r\n        serializationObject.depthWrite = this.depthWrite;\r\n        serializationObject.forceLayerMaskCheck = this.forceLayerMaskCheck;\r\n        serializationObject.samples = this.samples;\r\n        serializationObject.reverseCulling = this.reverseCulling;\r\n        serializationObject.dontRenderWhenMaterialDepthWriteIsDisabled = this.dontRenderWhenMaterialDepthWriteIsDisabled;\r\n        serializationObject.viewDepthFormat = this.viewDepthFormat;\r\n        serializationObject.viewDepthType = this.viewDepthType;\r\n        serializationObject.normalizedViewDepthFormat = this.normalizedViewDepthFormat;\r\n        serializationObject.normalizedViewDepthType = this.normalizedViewDepthType;\r\n        serializationObject.screenDepthFormat = this.screenDepthFormat;\r\n        serializationObject.screenDepthType = this.screenDepthType;\r\n        serializationObject.localPositionFormat = this.localPositionFormat;\r\n        serializationObject.localPositionType = this.localPositionType;\r\n        serializationObject.worldPositionFormat = this.worldPositionFormat;\r\n        serializationObject.worldPositionType = this.worldPositionType;\r\n        serializationObject.viewNormalFormat = this.viewNormalFormat;\r\n        serializationObject.viewNormalType = this.viewNormalType;\r\n        serializationObject.worldNormalFormat = this.worldNormalFormat;\r\n        serializationObject.worldNormalType = this.worldNormalType;\r\n        serializationObject.albedoFormat = this.albedoFormat;\r\n        serializationObject.albedoType = this.albedoType;\r\n        serializationObject.reflectivityFormat = this.reflectivityFormat;\r\n        serializationObject.reflectivityType = this.reflectivityType;\r\n        serializationObject.velocityFormat = this.velocityFormat;\r\n        serializationObject.velocityType = this.velocityType;\r\n        serializationObject.linearVelocityFormat = this.linearVelocityFormat;\r\n        serializationObject.linearVelocityType = this.linearVelocityType;\r\n        serializationObject.resolveMSAAColors = this.resolveMSAAColors;\r\n        serializationObject.resolveMSAADepth = this.resolveMSAADepth;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        this.depthTest = serializationObject.depthTest;\r\n        this.depthWrite = serializationObject.depthWrite;\r\n        this.forceLayerMaskCheck = !!serializationObject.forceLayerMaskCheck;\r\n        this.samples = serializationObject.samples;\r\n        this.reverseCulling = serializationObject.reverseCulling;\r\n        this.dontRenderWhenMaterialDepthWriteIsDisabled = serializationObject.dontRenderWhenMaterialDepthWriteIsDisabled;\r\n        this.viewDepthFormat = serializationObject.viewDepthFormat;\r\n        this.viewDepthType = serializationObject.viewDepthType;\r\n        this.normalizedViewDepthFormat = serializationObject.normalizedViewDepthFormat ?? Constants.TEXTUREFORMAT_RED;\r\n        this.normalizedViewDepthType = serializationObject.normalizedViewDepthType ?? Constants.TEXTURETYPE_UNSIGNED_BYTE;\r\n        this.screenDepthFormat = serializationObject.screenDepthFormat;\r\n        this.screenDepthType = serializationObject.screenDepthType;\r\n        this.localPositionFormat = serializationObject.localPositionFormat;\r\n        this.localPositionType = serializationObject.localPositionType;\r\n        this.worldPositionFormat = serializationObject.worldPositionFormat;\r\n        this.worldPositionType = serializationObject.worldPositionType;\r\n        this.viewNormalFormat = serializationObject.viewNormalFormat;\r\n        this.viewNormalType = serializationObject.viewNormalType;\r\n        this.worldNormalFormat = serializationObject.worldNormalFormat;\r\n        this.worldNormalType = serializationObject.worldNormalType;\r\n        this.albedoFormat = serializationObject.albedoFormat;\r\n        this.albedoType = serializationObject.albedoType;\r\n        this.reflectivityFormat = serializationObject.reflectivityFormat;\r\n        this.reflectivityType = serializationObject.reflectivityType;\r\n        this.velocityFormat = serializationObject.velocityFormat;\r\n        this.velocityType = serializationObject.velocityType;\r\n        this.linearVelocityFormat = serializationObject.linearVelocityFormat;\r\n        this.linearVelocityType = serializationObject.linearVelocityType;\r\n        this.resolveMSAAColors = serializationObject.resolveMSAAColors ?? true;\r\n        this.resolveMSAADepth = serializationObject.resolveMSAADepth ?? false;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphGeometryRendererBlock\", NodeRenderGraphGeometryRendererBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13801, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/shadowGeneratorBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/shadowGeneratorBlock.ts"],"sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { NodeRenderGraphBaseShadowGeneratorBlock } from \"./baseShadowGeneratorBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { FrameGraphShadowGeneratorTask } from \"../../../Tasks/Rendering/shadowGeneratorTask\";\r\n\r\n/**\r\n * Block that generate shadows through a shadow generator\r\n */\r\nexport class NodeRenderGraphShadowGeneratorBlock extends NodeRenderGraphBaseShadowGeneratorBlock {\r\n    /**\r\n     * Create a new NodeRenderGraphShadowGeneratorBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphShadowGeneratorTask(this.name, frameGraph);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphShadowGeneratorBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphShadowGeneratorBlock\", NodeRenderGraphShadowGeneratorBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,uCAAuC,EAAE,MAAM,4BAA4B,CAAC;AACrF,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,6BAA6B,EAAE,MAAM,8CAA8C,CAAC;;;;AAKvF,MAAO,mCAAoC,SAAQ,2TAAuC;IAC5F;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,mSAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACpF,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,qCAAqC,CAAC;IACjD,CAAC;CACJ;IAED,6OAAa,EAAC,6CAA6C,EAAE,mCAAmC,CAAC,CAAC"}},
    {"offset": {"line": 13834, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Rendering/utilityLayerRendererBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Rendering/utilityLayerRendererBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraph, NodeRenderGraphBuildState, FrameGraphTextureHandle, Camera } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { FrameGraphUtilityLayerRendererTask } from \"../../../Tasks/Rendering/utilityLayerRendererTask\";\r\n\r\n/**\r\n * Block used to render an utility layer in the frame graph\r\n */\r\nexport class NodeRenderGraphUtilityLayerRendererBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphUtilityLayerRendererTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Creates a new NodeRenderGraphUtilityLayerRendererBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param handleEvents If the utility layer should handle events.\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, handleEvents = true) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [handleEvents];\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"camera\", NodeRenderGraphBlockConnectionPointTypes.Camera);\r\n        this._addDependenciesInput();\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAll);\r\n        this.output._typeConnectionSource = this.target;\r\n\r\n        this._frameGraphTask = new FrameGraphUtilityLayerRendererTask(name, frameGraph, scene, handleEvents);\r\n    }\r\n\r\n    private _createTask(handleEvents: boolean) {\r\n        const disabled = this._frameGraphTask.disabled;\r\n\r\n        this._frameGraphTask.dispose();\r\n        this._frameGraphTask = new FrameGraphUtilityLayerRendererTask(this.name, this._frameGraph, this._scene, handleEvents);\r\n        this._additionalConstructionParameters = [handleEvents];\r\n\r\n        this._frameGraphTask.disabled = disabled;\r\n    }\r\n\r\n    /** If the utility layer should handle events */\r\n    @editableInPropertyPage(\"Handle events\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get handleEvents() {\r\n        return this._frameGraphTask.layer.handleEvents;\r\n    }\r\n\r\n    public set handleEvents(value: boolean) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphUtilityLayerRendererBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the target input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the camera input component\r\n     */\r\n    public get camera(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.camera = this.camera.connectedPoint?.value as Camera;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphUtilityLayerRendererBlock\", NodeRenderGraphUtilityLayerRendererBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13926, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Teleport/teleportInBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Teleport/teleportInBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, Nullable, FrameGraph, NodeRenderGraphTeleportOutBlock } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\n\r\n/**\r\n * Defines a block used to teleport a value to an endpoint\r\n */\r\nexport class NodeRenderGraphTeleportInBlock extends NodeRenderGraphBlock {\r\n    private _endpoints: NodeRenderGraphTeleportOutBlock[] = [];\r\n\r\n    /** Gets the list of attached endpoints */\r\n    public get endpoints() {\r\n        return this._endpoints;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphTeleportInBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._isTeleportIn = true;\r\n\r\n        this.registerInput(\"input\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphTeleportInBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    public override _dumpCode(uniqueNames: string[], alreadyDumped: NodeRenderGraphBlock[]) {\r\n        let codeString = super._dumpCode(uniqueNames, alreadyDumped);\r\n\r\n        for (const endpoint of this.endpoints) {\r\n            if (alreadyDumped.indexOf(endpoint) === -1) {\r\n                codeString += endpoint._dumpCode(uniqueNames, alreadyDumped);\r\n            }\r\n        }\r\n\r\n        return codeString;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given type\r\n     * @param type defines the potential type to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public override isAnAncestorOfType(type: string): boolean {\r\n        if (this.getClassName() === type) {\r\n            return true;\r\n        }\r\n\r\n        for (const endpoint of this.endpoints) {\r\n            if (endpoint.isAnAncestorOfType(type)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Checks if the current block is an ancestor of a given block\r\n     * @param block defines the potential descendant block to check\r\n     * @returns true if block is a descendant\r\n     */\r\n    public override isAnAncestorOf(block: NodeRenderGraphBlock): boolean {\r\n        for (const endpoint of this.endpoints) {\r\n            if (endpoint === block) {\r\n                return true;\r\n            }\r\n\r\n            if (endpoint.isAnAncestorOf(block)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get the first descendant using a predicate\r\n     * @param predicate defines the predicate to check\r\n     * @returns descendant or null if none found\r\n     */\r\n    public override getDescendantOfPredicate(predicate: (block: NodeRenderGraphBlock) => boolean): Nullable<NodeRenderGraphBlock> {\r\n        if (predicate(this)) {\r\n            return this;\r\n        }\r\n\r\n        for (const endpoint of this.endpoints) {\r\n            const descendant = endpoint.getDescendantOfPredicate(predicate);\r\n\r\n            if (descendant) {\r\n                return descendant;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Add an enpoint to this block\r\n     * @param endpoint define the endpoint to attach to\r\n     */\r\n    public attachToEndpoint(endpoint: NodeRenderGraphTeleportOutBlock) {\r\n        endpoint.detach();\r\n\r\n        this._endpoints.push(endpoint);\r\n        endpoint._entryPoint = this;\r\n        endpoint._outputs[0]._typeConnectionSource = this._inputs[0];\r\n        endpoint._tempEntryPointUniqueId = null;\r\n        endpoint.name = \"> \" + this.name;\r\n    }\r\n\r\n    /**\r\n     * Remove enpoint from this block\r\n     * @param endpoint define the endpoint to remove\r\n     */\r\n    public detachFromEndpoint(endpoint: NodeRenderGraphTeleportOutBlock) {\r\n        const index = this._endpoints.indexOf(endpoint);\r\n\r\n        if (index !== -1) {\r\n            this._endpoints.splice(index, 1);\r\n            endpoint._outputs[0]._typeConnectionSource = null;\r\n            endpoint._entryPoint = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Release resources\r\n     */\r\n    public override dispose() {\r\n        super.dispose();\r\n\r\n        for (const endpoint of this._endpoints) {\r\n            this.detachFromEndpoint(endpoint);\r\n        }\r\n\r\n        this._endpoints = [];\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphTeleportInBlock\", NodeRenderGraphTeleportInBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14054, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Teleport/teleportOutBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Teleport/teleportOutBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, Nullable, FrameGraph, NodeRenderGraphTeleportInBlock, NodeRenderGraphBuildState } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\n\r\n/**\r\n * Defines a block used to receive a value from a teleport entry point\r\n */\r\nexport class NodeRenderGraphTeleportOutBlock extends NodeRenderGraphBlock {\r\n    /** @internal */\r\n    public _entryPoint: Nullable<NodeRenderGraphTeleportInBlock> = null;\r\n    /** @internal */\r\n    public _tempEntryPointUniqueId: Nullable<number> = null;\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphTeleportOutBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._isTeleportOut = true;\r\n\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n    }\r\n\r\n    /**\r\n     * Gets the entry point\r\n     */\r\n    public get entryPoint() {\r\n        return this._entryPoint;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphTeleportOutBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /** Detach from entry point */\r\n    public detach() {\r\n        if (!this._entryPoint) {\r\n            return;\r\n        }\r\n        this._entryPoint.detachFromEndpoint(this);\r\n    }\r\n\r\n    protected override _buildBlock() {\r\n        // Do nothing\r\n        // All work done by the emitter\r\n    }\r\n\r\n    protected override _customBuildStep(state: NodeRenderGraphBuildState): void {\r\n        if (this.entryPoint) {\r\n            this.entryPoint.build(state);\r\n        }\r\n    }\r\n\r\n    public override _dumpCode(uniqueNames: string[], alreadyDumped: NodeRenderGraphBlock[]) {\r\n        let codeString: string = \"\";\r\n        if (this.entryPoint) {\r\n            if (alreadyDumped.indexOf(this.entryPoint) === -1) {\r\n                codeString += this.entryPoint._dumpCode(uniqueNames, alreadyDumped);\r\n            }\r\n        }\r\n\r\n        return codeString + super._dumpCode(uniqueNames, alreadyDumped);\r\n    }\r\n\r\n    public override _dumpCodeForOutputConnections(alreadyDumped: NodeRenderGraphBlock[]) {\r\n        let codeString = super._dumpCodeForOutputConnections(alreadyDumped);\r\n\r\n        if (this.entryPoint) {\r\n            codeString += this.entryPoint._dumpCodeForOutputConnections(alreadyDumped);\r\n        }\r\n\r\n        return codeString;\r\n    }\r\n\r\n    /**\r\n     * Clone the current block to a new identical block\r\n     * @returns a copy of the current block\r\n     */\r\n    public override clone() {\r\n        const clone = super.clone();\r\n\r\n        if (this.entryPoint) {\r\n            this.entryPoint.attachToEndpoint(clone as NodeRenderGraphTeleportOutBlock);\r\n        }\r\n\r\n        return clone;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        let codeString = super._dumpPropertiesCode();\r\n        if (this.entryPoint) {\r\n            codeString += `${this.entryPoint._codeVariableName}.attachToEndpoint(${this._codeVariableName});\\n`;\r\n        }\r\n        return codeString;\r\n    }\r\n\r\n    /**\r\n     * Serializes this block in a JSON representation\r\n     * @returns the serialized block object\r\n     */\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.entryPoint = this.entryPoint?.uniqueId ?? \"\";\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n\r\n        this._tempEntryPointUniqueId = serializationObject.entryPoint;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphTeleportOutBlock\", NodeRenderGraphTeleportOutBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14159, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Texture/copyToTextureTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Texture/copyToTextureTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle, IViewportLike, Nullable } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\nimport { Constants } from \"core/Engines/constants\";\r\n\r\n/**\r\n * Task used to copy a texture to another texture.\r\n */\r\nexport class FrameGraphCopyToTextureTask extends FrameGraphTask {\r\n    /**\r\n     * The source texture to copy from.\r\n     */\r\n    public sourceTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The target texture to copy to.\r\n     */\r\n    public targetTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The viewport to use when doing the copy.\r\n     * If set to null, the currently active viewport is used.\r\n     * If undefined (default), the viewport is reset to a full screen viewport before performing the copy.\r\n     */\r\n    public viewport?: Nullable<IViewportLike>;\r\n\r\n    /**\r\n     * The LOD level to copy from the source texture (default: 0).\r\n     */\r\n    public lodLevel: number = 0;\r\n\r\n    /**\r\n     * The output texture (same as targetTexture, but the handle may be different).\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * Constructs a new FrameGraphCopyToTextureTask.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public record() {\r\n        if (this.sourceTexture === undefined || this.targetTexture === undefined) {\r\n            throw new Error(`FrameGraphCopyToTextureTask \"${this.name}\": sourceTexture and targetTexture are required`);\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture);\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.addDependencies(this.sourceTexture);\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            if (this.viewport) {\r\n                context.setViewport(this.viewport);\r\n            }\r\n            context.setTextureSamplingMode(this.sourceTexture, this.lodLevel > 0 ? Constants.TEXTURE_TRILINEAR_SAMPLINGMODE : Constants.TEXTURE_BILINEAR_SAMPLINGMODE);\r\n            context.copyTexture(this.sourceTexture, undefined, this.viewport !== undefined, this.lodLevel);\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;;AAMhD,MAAO,2BAA4B,SAAQ,yPAAc;IA4B3D;;;;OAIG,CACH,YAAY,IAAY,EAAE,UAAsB,CAAA;QAC5C,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAhB5B;;WAEG,CACI,IAAA,CAAA,QAAQ,GAAW,CAAC,CAAC;QAexB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;IAChF,CAAC;IAEM,MAAM,GAAA;QACT,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;YACvE,MAAM,IAAI,KAAK,CAAC,CAAA,6BAAA,EAAgC,IAAI,CAAC,IAAI,CAAA,+CAAA,CAAiD,CAAC,CAAC;QAChH,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAE9F,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAEzC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACvC,CAAC;YACD,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,IAAA,KAAS,CAAC,8BAA8B,CAAC,CAAC,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC;YAC3J,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnG,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;QAEnF,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjD,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,AAAE,CAAC,CAAC,CAAC;IAClD,CAAC;CACJ"}},
    {"offset": {"line": 14201, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Textures/copyTextureBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Textures/copyTextureBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraphTextureHandle, FrameGraph, NodeRenderGraphBuildState, IViewportLike } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { FrameGraphCopyToTextureTask } from \"../../../Tasks/Texture/copyToTextureTask\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\n\r\n/**\r\n * Block used to copy a texture\r\n */\r\nexport class NodeRenderGraphCopyTextureBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphCopyToTextureTask;\r\n\r\n    protected _useCurrentViewport = false;\r\n    protected _useFullScreenViewport = true;\r\n    protected _viewport: IViewportLike = { x: 0, y: 0, width: 1, height: 1 };\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphCopyTextureBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"source\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this._addDependenciesInput();\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.source.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAll);\r\n        this.output._typeConnectionSource = this.source;\r\n\r\n        this._frameGraphTask = new FrameGraphCopyToTextureTask(name, frameGraph);\r\n    }\r\n\r\n    private _setViewport() {\r\n        if (this._useCurrentViewport) {\r\n            this._frameGraphTask.viewport = null;\r\n        } else if (this._useFullScreenViewport) {\r\n            this._frameGraphTask.viewport = undefined;\r\n        } else {\r\n            this._frameGraphTask.viewport = this._viewport;\r\n        }\r\n    }\r\n\r\n    /** If true, the current viewport will be left unchanged. */\r\n    @editableInPropertyPage(\"Use currently active viewport\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get useCurrentViewport(): boolean {\r\n        return this._useCurrentViewport;\r\n    }\r\n\r\n    public set useCurrentViewport(value: boolean) {\r\n        this._useCurrentViewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /** If true, a full screen viewport will be used. */\r\n    @editableInPropertyPage(\"Use full screen viewport\", PropertyTypeForEdition.Boolean, \"PROPERTIES\")\r\n    public get useFullScreenViewport(): boolean {\r\n        return this._useFullScreenViewport;\r\n    }\r\n\r\n    public set useFullScreenViewport(value: boolean) {\r\n        this._useFullScreenViewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /** The viewport to use. */\r\n    @editableInPropertyPage(\"Viewport\", PropertyTypeForEdition.Viewport, \"PROPERTIES\")\r\n    public get viewport(): IViewportLike {\r\n        return this._viewport;\r\n    }\r\n\r\n    public set viewport(value: IViewportLike) {\r\n        this._viewport = value;\r\n        this._setViewport();\r\n    }\r\n\r\n    /** The LOD level to copy from the source texture (default: 0). */\r\n    @editableInPropertyPage(\"LOD Level\", PropertyTypeForEdition.Int, \"PROPERTIES\", { min: 0, max: 16 })\r\n    public get lodLevel(): number {\r\n        return this._frameGraphTask.lodLevel;\r\n    }\r\n\r\n    public set lodLevel(value: number) {\r\n        this._frameGraphTask.lodLevel = value;\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphCopyTextureBlock\";\r\n    }\r\n    /**\r\n     * Gets the source input component\r\n     */\r\n    public get source(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the target input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture; // the value of the output connection point is the \"output\" texture of the task\r\n\r\n        this._frameGraphTask.sourceTexture = this.source.connectedPoint?.value as FrameGraphTextureHandle;\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n\r\n    protected override _dumpPropertiesCode() {\r\n        const codes: string[] = [];\r\n        codes.push(`${this._codeVariableName}.viewport = ${this._useCurrentViewport ? \"null\" : this._useFullScreenViewport ? \"undefined\" : JSON.stringify(this._viewport)};`);\r\n        codes.push(`${this._codeVariableName}.lodLevel = ${this.lodLevel};`);\r\n        return super._dumpPropertiesCode() + codes.join(\"\\n\");\r\n    }\r\n\r\n    public override serialize(): any {\r\n        const serializationObject = super.serialize();\r\n        serializationObject.useCurrentViewport = this._useCurrentViewport;\r\n        serializationObject.useFullScreenViewport = this._useFullScreenViewport;\r\n        serializationObject.viewport = this._viewport;\r\n        serializationObject.lodLevel = this.lodLevel;\r\n        return serializationObject;\r\n    }\r\n\r\n    public override _deserialize(serializationObject: any) {\r\n        super._deserialize(serializationObject);\r\n        if (serializationObject.useCurrentViewport !== undefined) {\r\n            this._useCurrentViewport = serializationObject.useCurrentViewport;\r\n            this._useFullScreenViewport = serializationObject.useFullScreenViewport;\r\n            this._viewport = serializationObject.viewport;\r\n        }\r\n        this.lodLevel = serializationObject.lodLevel ?? 0;\r\n        this._setViewport();\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphCopyTextureBlock\", NodeRenderGraphCopyTextureBlock);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 14355, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/Texture/generateMipMapsTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/Texture/generateMipMapsTask.ts"],"sourcesContent":["import type { FrameGraph, FrameGraphTextureHandle } from \"core/index\";\r\nimport { FrameGraphTask } from \"../../frameGraphTask\";\r\n\r\n/**\r\n * Task which generates mipmaps for a texture.\r\n */\r\nexport class FrameGraphGenerateMipMapsTask extends FrameGraphTask {\r\n    /**\r\n     * The texture to generate mipmaps for.\r\n     */\r\n    public targetTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * The output texture (same as targetTexture, but the handle may be different).\r\n     */\r\n    public readonly outputTexture: FrameGraphTextureHandle;\r\n\r\n    /**\r\n     * Constructs a new FrameGraphGenerateMipMapsTask.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph the task belongs to.\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph) {\r\n        super(name, frameGraph);\r\n\r\n        this.outputTexture = this._frameGraph.textureManager.createDanglingHandle();\r\n    }\r\n\r\n    public record() {\r\n        if (this.targetTexture === undefined) {\r\n            throw new Error(`FrameGraphGenerateMipMapsTask ${this.name}: targetTexture is required`);\r\n        }\r\n\r\n        this._frameGraph.textureManager.resolveDanglingHandle(this.outputTexture, this.targetTexture);\r\n\r\n        const outputTextureDescription = this._frameGraph.textureManager.getTextureDescription(this.targetTexture);\r\n\r\n        if (!outputTextureDescription.options.createMipMaps) {\r\n            throw new Error(`FrameGraphGenerateMipMapsTask ${this.name}: targetTexture must have createMipMaps set to true`);\r\n        }\r\n\r\n        const pass = this._frameGraph.addRenderPass(this.name);\r\n\r\n        pass.setRenderTarget(this.outputTexture);\r\n        pass.setExecuteFunc((context) => {\r\n            context.generateMipMaps();\r\n        });\r\n\r\n        const passDisabled = this._frameGraph.addRenderPass(this.name + \"_disabled\", true);\r\n\r\n        passDisabled.setRenderTarget(this.outputTexture);\r\n        passDisabled.setExecuteFunc((_context) => {});\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;;AAKhD,MAAO,6BAA8B,SAAQ,yPAAc;IAW7D;;;;OAIG,CACH,YAAY,IAAY,EAAE,UAAsB,CAAA;QAC5C,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAExB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;IAChF,CAAC;IAEM,MAAM,GAAA;QACT,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;YACnC,MAAM,IAAI,KAAK,CAAC,CAAA,8BAAA,EAAiC,IAAI,CAAC,IAAI,CAAA,2BAAA,CAA6B,CAAC,CAAC;QAC7F,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAE9F,MAAM,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAE3G,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;YAClD,MAAM,IAAI,KAAK,CAAC,CAAA,8BAAA,EAAiC,IAAI,CAAC,IAAI,CAAA,mDAAA,CAAqD,CAAC,CAAC;QACrH,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,OAAO,CAAC,eAAe,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC,CAAC;QAEnF,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjD,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,AAAE,CAAC,CAAC,CAAC;IAClD,CAAC;CACJ"}},
    {"offset": {"line": 14393, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/Textures/generateMipmapsBlock.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/Textures/generateMipmapsBlock.ts"],"sourcesContent":["import type { NodeRenderGraphConnectionPoint, Scene, FrameGraphTextureHandle, FrameGraph, NodeRenderGraphBuildState } from \"core/index\";\r\nimport { NodeRenderGraphBlock } from \"../../nodeRenderGraphBlock\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { NodeRenderGraphBlockConnectionPointTypes } from \"../../Types/nodeRenderGraphTypes\";\r\nimport { FrameGraphGenerateMipMapsTask } from \"../../../Tasks/Texture/generateMipMapsTask\";\r\n\r\n/**\r\n * Block used to generate mipmaps for a texture\r\n */\r\nexport class NodeRenderGraphGenerateMipmapsBlock extends NodeRenderGraphBlock {\r\n    protected override _frameGraphTask: FrameGraphGenerateMipMapsTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphGenerateMipmapsBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene) {\r\n        super(name, frameGraph, scene);\r\n\r\n        this.registerInput(\"target\", NodeRenderGraphBlockConnectionPointTypes.AutoDetect);\r\n        this._addDependenciesInput();\r\n        this.registerOutput(\"output\", NodeRenderGraphBlockConnectionPointTypes.BasedOnInput);\r\n\r\n        this.target.addExcludedConnectionPointFromAllowedTypes(NodeRenderGraphBlockConnectionPointTypes.TextureAllButBackBuffer);\r\n        this.output._typeConnectionSource = this.target;\r\n\r\n        this._frameGraphTask = new FrameGraphGenerateMipMapsTask(name, frameGraph);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphGenerateMipmapsBlock\";\r\n    }\r\n    /**\r\n     * Gets the target input component\r\n     */\r\n    public get target(): NodeRenderGraphConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeRenderGraphConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    protected override _buildBlock(state: NodeRenderGraphBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        this.output.value = this._frameGraphTask.outputTexture;\r\n\r\n        this._frameGraphTask.targetTexture = this.target.connectedPoint?.value as FrameGraphTextureHandle;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphGenerateMipmapsBlock\", NodeRenderGraphGenerateMipmapsBlock);\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,wCAAwC,EAAE,MAAM,kCAAkC,CAAC;AAC5F,OAAO,EAAE,6BAA6B,EAAE,MAAM,4CAA4C,CAAC;;;;;AAKrF,MAAO,mCAAoC,SAAQ,6QAAoB;IAGzE;;OAEG,CACH,IAAoB,IAAI,GAAA;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;OAKG,CACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,CAAA;QACjE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,0SAAwC,CAAC,UAAU,CAAC,CAAC;QAClF,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,0SAAwC,CAAC,YAAY,CAAC,CAAC;QAErF,IAAI,CAAC,MAAM,CAAC,0CAA0C,CAAC,0SAAwC,CAAC,uBAAuB,CAAC,CAAC;QACzH,IAAI,CAAC,MAAM,CAAC,qBAAqB,GAAG,IAAI,CAAC,MAAM,CAAC;QAEhD,IAAI,CAAC,eAAe,GAAG,IAAI,iSAA6B,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IAC/E,CAAC;IAED;;;OAGG,CACa,YAAY,GAAA;QACxB,OAAO,qCAAqC,CAAC;IACjD,CAAC;IACD;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG,CACH,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAEkB,WAAW,CAAC,KAAgC,EAAA;QAC3D,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC;QAEvD,IAAI,CAAC,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,KAAgC,CAAC;IACtG,CAAC;CACJ;IAED,6OAAa,EAAC,6CAA6C,EAAE,mCAAmC,CAAC,CAAC"}},
    {"offset": {"line": 14452, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Node/Blocks/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Node/Blocks/index.ts"],"sourcesContent":["export * from \"./computeShaderBlock\";\r\nexport * from \"./cullObjectsBlock\";\r\nexport * from \"./elbowBlock\";\r\nexport * from \"./executeBlock\";\r\nexport * from \"./inputBlock\";\r\nexport * from \"./outputBlock\";\r\nexport * from \"./resourceContainerBlock\";\r\n\r\nexport * from \"./Layers/glowLayerBlock\";\r\nexport * from \"./Layers/highlightLayerBlock\";\r\n\r\nexport * from \"./PostProcesses/anaglyphPostProcessBlock\";\r\nexport * from \"./PostProcesses/basePostProcessBlock\";\r\nexport * from \"./PostProcesses/baseWithPropertiesPostProcessBlock\";\r\nexport * from \"./PostProcesses/blackAndWhitePostProcessBlock\";\r\nexport * from \"./PostProcesses/bloomPostProcessBlock\";\r\nexport * from \"./PostProcesses/blurPostProcessBlock\";\r\nexport * from \"./PostProcesses/chromaticAberrationPostProcessBlock\";\r\nexport * from \"./PostProcesses/circleOfConfusionPostProcessBlock\";\r\nexport * from \"./PostProcesses/colorCorrectionPostProcessBlock\";\r\nexport * from \"./PostProcesses/convolutionPostProcessBlock\";\r\nexport * from \"./PostProcesses/depthOfFieldPostProcessBlock\";\r\nexport * from \"./PostProcesses/extractHighlightsPostProcessBlock\";\r\nexport * from \"./PostProcesses/filterPostProcessBlock\";\r\nexport * from \"./PostProcesses/fxaaPostProcessBlock\";\r\nexport * from \"./PostProcesses/grainPostProcessBlock\";\r\nexport * from \"./PostProcesses/imageProcessingPostProcessBlock\";\r\nexport * from \"./PostProcesses/motionBlurPostProcessBlock\";\r\nexport * from \"./PostProcesses/passPostProcessBlock\";\r\nexport * from \"./PostProcesses/sharpenPostProcessBlock\";\r\nexport * from \"./PostProcesses/screenSpaceCurvaturePostProcessBlock\";\r\nexport * from \"./PostProcesses/ssao2PostProcessBlock\";\r\nexport * from \"./PostProcesses/ssrPostProcessBlock\";\r\nexport * from \"./PostProcesses/taaPostProcessBlock\";\r\nexport * from \"./PostProcesses/tonemapPostProcessBlock\";\r\n\r\nexport * from \"./Rendering/csmShadowGeneratorBlock\";\r\nexport * from \"./Rendering/geometryRendererBlock\";\r\nexport * from \"./Rendering/objectRendererBlock\";\r\nexport * from \"./Rendering/shadowGeneratorBlock\";\r\nexport * from \"./Rendering/utilityLayerRendererBlock\";\r\n\r\nexport * from \"./Teleport/teleportInBlock\";\r\nexport * from \"./Teleport/teleportOutBlock\";\r\n\r\nexport * from \"./Textures/clearBlock\";\r\nexport * from \"./Textures/copyTextureBlock\";\r\nexport * from \"./Textures/generateMipmapsBlock\";\r\n"],"names":[],"mappings":";AAAA,cAAc,sBAAsB,CAAC;AACrC,cAAc,oBAAoB,CAAC;AACnC,cAAc,cAAc,CAAC;AAC7B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,cAAc,CAAC;AAC7B,cAAc,eAAe,CAAC;AAC9B,cAAc,0BAA0B,CAAC;AAEzC,cAAc,yBAAyB,CAAC;AACxC,cAAc,8BAA8B,CAAC;AAE7C,cAAc,0CAA0C,CAAC;AACzD,cAAc,sCAAsC,CAAC;AACrD,cAAc,oDAAoD,CAAC;AACnE,cAAc,+CAA+C,CAAC;AAC9D,cAAc,uCAAuC,CAAC;AACtD,cAAc,sCAAsC,CAAC;AACrD,cAAc,qDAAqD,CAAC;AACpE,cAAc,mDAAmD,CAAC;AAClE,cAAc,iDAAiD,CAAC;AAChE,cAAc,6CAA6C,CAAC;AAC5D,cAAc,8CAA8C,CAAC;AAC7D,cAAc,mDAAmD,CAAC;AAClE,cAAc,wCAAwC,CAAC;AACvD,cAAc,sCAAsC,CAAC;AACrD,cAAc,uCAAuC,CAAC;AACtD,cAAc,iDAAiD,CAAC;AAChE,cAAc,4CAA4C,CAAC;AAC3D,cAAc,sCAAsC,CAAC;AACrD,cAAc,yCAAyC,CAAC;AACxD,cAAc,sDAAsD,CAAC;AACrE,cAAc,uCAAuC,CAAC;AACtD,cAAc,qCAAqC,CAAC;AACpD,cAAc,qCAAqC,CAAC;AACpD,cAAc,yCAAyC,CAAC;AAExD,cAAc,qCAAqC,CAAC;AACpD,cAAc,mCAAmC,CAAC;AAClD,cAAc,iCAAiC,CAAC;AAChD,cAAc,kCAAkC,CAAC;AACjD,cAAc,uCAAuC,CAAC;AAEtD,cAAc,4BAA4B,CAAC;AAC3C,cAAc,6BAA6B,CAAC;AAE5C,cAAc,uBAAuB,CAAC;AACtC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,iCAAiC,CAAC"}},
    {"offset": {"line": 14543, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/Tasks/PostProcesses/customPostProcessTask.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/Tasks/PostProcesses/customPostProcessTask.ts"],"sourcesContent":["import type { FrameGraph, EffectWrapperCreationOptions, Observable, Effect } from \"core/index\";\r\nimport { FrameGraphPostProcessTask } from \"./postProcessTask\";\r\nimport { ThinCustomPostProcess } from \"../../../PostProcesses/thinCustomPostProcess\";\r\n\r\n/**\r\n * Task which applies a custom post process.\r\n */\r\nexport class FrameGraphCustomPostProcessTask extends FrameGraphPostProcessTask {\r\n    public override readonly postProcess: ThinCustomPostProcess;\r\n\r\n    /**\r\n     * Observable triggered when bind is called for the post process.\r\n     * Use this to set custom uniforms.\r\n     */\r\n    public onApplyObservable: Observable<Effect>;\r\n\r\n    /**\r\n     * Constructs a new custom post process task.\r\n     * @param name The name of the task.\r\n     * @param frameGraph The frame graph this task is associated with.\r\n     * @param options Options to configure the post process\r\n     */\r\n    constructor(name: string, frameGraph: FrameGraph, options: EffectWrapperCreationOptions) {\r\n        super(name, frameGraph, new ThinCustomPostProcess(name, frameGraph.engine, options));\r\n\r\n        this.onApplyObservable = this.postProcess.onBindObservable;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAC9D,OAAO,EAAE,qBAAqB,EAAE,MAAM,8CAA8C,CAAC;;;AAK/E,MAAO,+BAAgC,SAAQ,+RAAyB;IAS1E;;;;;OAKG,CACH,YAAY,IAAY,EAAE,UAAsB,EAAE,OAAqC,CAAA;QACnF,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,0QAAqB,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;QAErF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC;IAC/D,CAAC;CACJ"}},
    {"offset": {"line": 14566, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/frameGraphObjectList.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/frameGraphObjectList.ts"],"sourcesContent":["import type { Nullable, AbstractMesh, IParticleSystem } from \"core/index\";\r\n\r\n/**\r\n * Structure used by the frame graph to reference objects.\r\n * @experimental\r\n */\r\nexport class FrameGraphObjectList {\r\n    /**\r\n     * The meshes in the object list.\r\n     */\r\n    meshes: Nullable<AbstractMesh[]>;\r\n    /**\r\n     * The particle systems in the object list.\r\n     */\r\n    particleSystems: Nullable<IParticleSystem[]>;\r\n    // todo: sprites?\r\n}\r\n"],"names":[],"mappings":"AAEA;;;GAGG;;;;AACG,MAAO,oBAAoB;CAUhC"}},
    {"offset": {"line": 14579, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@babylonjs+core@8.39.0/node_modules/@babylonjs/core/FrameGraph/index.js","sources":["file:///Users/shayanbozorgmanesh/Developer/kitchen-cpq-platform/node_modules/.pnpm/%40babylonjs%2Bcore%408.39.0/dev/core/src/FrameGraph/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-restricted-imports */\r\nexport * from \"./Node/nodeRenderGraph\";\r\nexport * from \"./Node/nodeRenderGraphBlock\";\r\nexport * from \"./Node/nodeRenderGraphBlockConnectionPoint\";\r\nexport * from \"./Node/nodeRenderGraphBuildState\";\r\nexport * from \"./Node/Types/nodeRenderGraphTypes\";\r\nexport * from \"./Node/Blocks/index\";\r\n\r\nexport * from \"./Passes/objectListPass\";\r\nexport * from \"./Passes/pass\";\r\nexport * from \"./Passes/renderPass\";\r\n\r\nexport * from \"./Tasks/Layers/glowLayerTask\";\r\nexport * from \"./Tasks/Layers/highlightLayerTask\";\r\n\r\nexport * from \"./Tasks/Misc/computeShaderTask\";\r\nexport * from \"./Tasks/Misc/cullObjectsTask\";\r\nexport * from \"./Tasks/Misc/executeTask\";\r\n\r\nexport * from \"./Tasks/PostProcesses/anaglyphTask\";\r\nexport * from \"./Tasks/PostProcesses/blackAndWhiteTask\";\r\nexport * from \"./Tasks/PostProcesses/bloomTask\";\r\nexport * from \"./Tasks/PostProcesses/blurTask\";\r\nexport * from \"./Tasks/PostProcesses/chromaticAberrationTask\";\r\nexport * from \"./Tasks/PostProcesses/circleOfConfusionTask\";\r\nexport * from \"./Tasks/PostProcesses/colorCorrectionTask\";\r\nexport * from \"./Tasks/PostProcesses/convolutionTask\";\r\nexport * from \"./Tasks/PostProcesses/customPostProcessTask\";\r\nexport * from \"./Tasks/PostProcesses/depthOfFieldTask\";\r\nexport * from \"./Tasks/PostProcesses/extractHighlightsTask\";\r\nexport * from \"./Tasks/PostProcesses/filterTask\";\r\nexport * from \"./Tasks/PostProcesses/fxaaTask\";\r\nexport * from \"./Tasks/PostProcesses/grainTask\";\r\nexport * from \"./Tasks/PostProcesses/imageProcessingTask\";\r\nexport * from \"./Tasks/PostProcesses/motionBlurTask\";\r\nexport * from \"./Tasks/PostProcesses/passTask\";\r\nexport * from \"./Tasks/PostProcesses/postProcessTask\";\r\nexport * from \"./Tasks/PostProcesses/sharpenTask\";\r\nexport * from \"./Tasks/PostProcesses/screenSpaceCurvatureTask\";\r\nexport * from \"./Tasks/PostProcesses/ssao2RenderingPipelineTask\";\r\nexport * from \"./Tasks/PostProcesses/ssrRenderingPipelineTask\";\r\nexport * from \"./Tasks/PostProcesses/taaTask\";\r\nexport * from \"./Tasks/PostProcesses/tonemapTask\";\r\n\r\nexport * from \"./Tasks/Texture/clearTextureTask\";\r\nexport * from \"./Tasks/Texture/copyToBackbufferColorTask\";\r\nexport * from \"./Tasks/Texture/copyToTextureTask\";\r\nexport * from \"./Tasks/Texture/generateMipMapsTask\";\r\n\r\nexport * from \"./Tasks/Rendering/csmShadowGeneratorTask\";\r\nexport * from \"./Tasks/Rendering/geometryRendererTask\";\r\nexport * from \"./Tasks/Rendering/objectRendererTask\";\r\nexport * from \"./Tasks/Rendering/shadowGeneratorTask\";\r\nexport * from \"./Tasks/Rendering/utilityLayerRendererTask\";\r\n\r\nexport * from \"./frameGraph\";\r\nexport * from \"./frameGraphContext\";\r\nexport * from \"./frameGraphObjectList\";\r\nexport * from \"./frameGraphRenderContext\";\r\nexport * from \"./frameGraphRenderTarget\";\r\nexport * from \"./frameGraphTask\";\r\nexport * from \"./frameGraphTextureManager\";\r\nexport * from \"./frameGraphTypes\";\r\nexport * from \"./frameGraphUtils\";\r\n"],"names":[],"mappings":"AAAA,2DAAA,EAA6D;AAC7D,cAAc,wBAAwB,CAAC;AACvC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,4CAA4C,CAAC;AAC3D,cAAc,kCAAkC,CAAC;AACjD,cAAc,mCAAmC,CAAC;AAClD,cAAc,qBAAqB,CAAC;AAEpC,cAAc,yBAAyB,CAAC;AACxC,cAAc,eAAe,CAAC;AAC9B,cAAc,qBAAqB,CAAC;AAEpC,cAAc,8BAA8B,CAAC;AAC7C,cAAc,mCAAmC,CAAC;AAElD,cAAc,gCAAgC,CAAC;AAC/C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,0BAA0B,CAAC;AAEzC,cAAc,oCAAoC,CAAC;AACnD,cAAc,yCAAyC,CAAC;AACxD,cAAc,iCAAiC,CAAC;AAChD,cAAc,gCAAgC,CAAC;AAC/C,cAAc,+CAA+C,CAAC;AAC9D,cAAc,6CAA6C,CAAC;AAC5D,cAAc,2CAA2C,CAAC;AAC1D,cAAc,uCAAuC,CAAC;AACtD,cAAc,6CAA6C,CAAC;AAC5D,cAAc,wCAAwC,CAAC;AACvD,cAAc,6CAA6C,CAAC;AAC5D,cAAc,kCAAkC,CAAC;AACjD,cAAc,gCAAgC,CAAC;AAC/C,cAAc,iCAAiC,CAAC;AAChD,cAAc,2CAA2C,CAAC;AAC1D,cAAc,sCAAsC,CAAC;AACrD,cAAc,gCAAgC,CAAC;AAC/C,cAAc,uCAAuC,CAAC;AACtD,cAAc,mCAAmC,CAAC;AAClD,cAAc,gDAAgD,CAAC;AAC/D,cAAc,kDAAkD,CAAC;AACjE,cAAc,gDAAgD,CAAC;AAC/D,cAAc,+BAA+B,CAAC;AAC9C,cAAc,mCAAmC,CAAC;AAElD,cAAc,kCAAkC,CAAC;AACjD,cAAc,2CAA2C,CAAC;AAC1D,cAAc,mCAAmC,CAAC;AAClD,cAAc,qCAAqC,CAAC;AAEpD,cAAc,0CAA0C,CAAC;AACzD,cAAc,wCAAwC,CAAC;AACvD,cAAc,sCAAsC,CAAC;AACrD,cAAc,uCAAuC,CAAC;AACtD,cAAc,4CAA4C,CAAC;AAE3D,cAAc,cAAc,CAAC;AAC7B,cAAc,qBAAqB,CAAC;AACpC,cAAc,wBAAwB,CAAC;AACvC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,0BAA0B,CAAC;AACzC,cAAc,kBAAkB,CAAC;AACjC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,mBAAmB,CAAC;AAClC,cAAc,mBAAmB,CAAC"}}]
}