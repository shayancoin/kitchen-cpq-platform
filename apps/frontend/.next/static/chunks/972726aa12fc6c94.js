(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84535,(e,t,s)=>{t.exports=e.r(84833)},24579,e=>{"use strict";var t=e.i(62433),s=e.i(67941),a=e.i(60920),l=e.i(84535);let n=t.default.env.NEXT_PUBLIC_API_URL??"http://localhost:3001";function i(){let e=(0,l.useRouter)(),[t,i]=(0,a.useState)("demo@example.com"),[r,o]=(0,a.useState)("tenant-demo"),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{h(new URL(window.location.href).searchParams.get("next"))},[]);let p=async s=>{s.preventDefault(),u(!0),d(null);try{let s=await fetch(`${n}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,tenantId:r})});if(!s.ok)throw Error(`Login failed: ${s.status}`);let a=await s.json();document.cookie=`auth_token=${a.jwt}; path=/; SameSite=Lax`,e.push(x??"/cpq/dashboard")}catch(e){d(e instanceof Error?e.message:"Login failed")}finally{u(!1)}};return(0,s.jsx)("main",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-4",children:(0,s.jsxs)("form",{onSubmit:p,className:"w-full max-w-md space-y-4 rounded-xl bg-white p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Kitchen CPQ"}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Sign in"})]}),(0,s.jsxs)("label",{className:"block space-y-1",children:[(0,s.jsx)("span",{className:"text-sm text-slate-700",children:"Email"}),(0,s.jsx)("input",{className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm",value:t,onChange:e=>i(e.target.value),type:"email",name:"email",required:!0})]}),(0,s.jsxs)("label",{className:"block space-y-1",children:[(0,s.jsx)("span",{className:"text-sm text-slate-700",children:"Tenant"}),(0,s.jsx)("input",{className:"w-full rounded-md border border-slate-200 px-3 py-2 text-sm",value:r,onChange:e=>o(e.target.value),name:"tenant",required:!0})]}),c?(0,s.jsx)("p",{className:"text-sm text-red-600",children:c}):null,(0,s.jsx)("button",{type:"submit",disabled:m,className:"w-full rounded-md bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:opacity-60",children:m?"Signing inâ€¦":"Sign in"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Issues a short-lived JWT from the API and stores it in an auth_token cookie for tRPC calls."})]})})}e.s(["default",()=>i])}]);